"use strict";(self.webpackChunkdataviz=self.webpackChunkdataviz||[]).push([[872],{2092:(t,e,a)=>{var r=a(4345);const n=new Date("2021-09-21T23:13:40.000Z");new r.t1({element:"map",width:600,height:600,margin:0,nav:!1}).scratchpad((t=>{var e=t.width,a=t.height;const s=r.d3.geoMercator().center([Math.floor(145),Math.floor(-36)]).translate([e/2,a/2]).scale(1600),d=r.d3.geoPath().projection(s),p=r.d3.scaleOrdinal().range(["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"]),i=t.svg;Promise.all([r.d3.json("/aust.json"),r.d3.json("/earthquakeTweets.json")]).then((([t,e])=>{!function(t){i.append("g").attr("id","shapes").selectAll("path").data(t.features).enter().append("path").attr("d",d).style("stroke","dimgray").attr("fill",(function(t,e){return p(e.toString())})),i.append("g").attr("id","state_labels").selectAll("text").data(t.features).enter().append("text").attr("fill","darkslategray").attr("transform",(function(t){return`translate(${d.centroid(t)})`})).attr("text-anchor","middle").attr("dy",".35em").style("opacity",.5).text((function(t){return t.properties.STATE_NAME}))}(t),i.append("g").attr("id","pings");let a=n.getTime();e.tweets.forEach(((t,d)=>{if(new Date(t.created_at)<n)return;const p=function(t){let e=0,a=0,r=t.length;return t.forEach((t=>{const[n,s,d]=t.split(",").map(parseFloat);e+=n,a+=s,d<30&&(e+=n,a+=s,r++),d<15&&(e+=n,a+=s,r++)})),[e/r,a/r]}(e.geocodes[t.id_str]),i=(new Date(t.created_at).getTime()-a)/100;setTimeout((()=>{var a,n;a=p[0],n=p[1],r.d3.select("#pings").append("circle").datum({lat:a,long:n}).attr("cx",0).attr("cy",0).attr("r",0).attr("fill","#FF0000").attr("fill-opacity",1).attr("transform",(t=>`translate(${s([n,a])})`)).transition().duration(2e3).attr("r",20).attr("fill-opacity",.01),function(t,e,a=0){var n=r.d3.select("#tweets").append("div").classed("tweet",!0);n.append("img").attr("x",0).attr("y",0).attr("height",50).attr("width",50).attr("src",e.profile_image_url_https).style("border-radius","50%").style("border","solid 1px lightgrey");var s=n.append("p");s.append("span").text(e.name+" ").classed("name",!0),s.append("span").text("@"+e.screen_name).classed("username",!0),n.append("p").text(t.full_text),n.append("a").text(l(new Date(t.created_at))).attr("href",`https://twitter.com/${e.screen_name}/status/${t.id_str}`);const d=n.append("div").append("p");d.append("span").append("i").classed("fa",!0).classed("fa-retweet",!0),d.append("span").text(t.retweet_count),d.append("span").append("i").classed("fa",!0).classed("fa-heart",!0),d.append("span").text(t.favorite_count),setTimeout((()=>{n.remove()}),1e3)}(t,e.users[t.userId],d)}),i)}))}));const l=r.d3.timeFormat("%-I:%M %p Â· %b %-d, %Y")}))}},t=>{t(t.s=2092)}]);