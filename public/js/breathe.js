"use strict";(self.webpackChunkdataviz=self.webpackChunkdataviz||[]).push([[666],{9868:(e,t,n)=>{var o=n(706);console.log("Running breathe.ts");let a=null;const l=2*Math.PI;let s=14,r=1400/s;const i=["#660b77","#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],c=[...Array(s).keys()].map((e=>`hsl(0,0%,${Math.floor(e/(s-1)*100)}%)`));let d=i;o.$.when(o.$.ready).then((function(){new o.t1({title:"Breathe In",element:"breatheDiv",margin:40,width:600,height:600,nav:!1}).scratchpad((e=>{e.svg.select(".chart-title").attr("transform",`translate(${e.width/2},${e.height-15})`);const t=C(s);e.svg.selectAll(".line").data(t,(e=>e.index)).enter().insert("polyline","polyline").classed("polyline",!0).each(w),e.svg.selectAll(".polygon").data(t,(e=>e.index)).enter().insert("polygon","polyline").each(k),v(0)}))}));let h=400;function g(e){return Math.floor((2+Math.cos(l*(e/s)))*h)}o.d3.select("#speedSlider").on("change",(function(){const e=parseInt((0,o.$)("#speedSlider").val());h=8*(101-e),p.forEach(((e,t)=>{p[t]["Draw Time (ms)"]=g(t)})),a.cells(":nth-child(3)").every((function(e){return this.data(g(e)),this}))}));const p=f(s);function f(e){const t=[];for(let n=2;n<e;n++)t.push({Points:n,Shape:u(n),"Draw Time (ms)":g(n),"Fill Color":d[(n-2)%d.length]});return t}function u(e){const t=["Void","Dot","Line","Triangle","Square","Pentagon","Hexagon","Heptagon","Octagon","Nonagon","Decagon","Hendecagon","Dodecagon","Tridecagon","Tetradecagon","Pentadecagon","Hexadecagon","Heptadecagon","Octadecagon","Enneadecagon","Icosagon","Henicosagon","Doicosagon","Triaicosagon"];return e<t.length?t[e]:`${e}-gon`}let y;function m(e){o.d3.select(".chart-title").text("Breathe Out"),y=o.d3.select(`#polyline-${e}`),y.transition().ease(o.d3.easeLinear).duration(g(e)).attr("points",(e=>e.start.vertices.map((e=>e.join(","))).join(" "))).attr("transform",(e=>e.start.transform)).on("end",((t,n,a)=>{o.d3.select(a[n]).style("display","none"),e>0?m(e-1):v(0)}))}function v(e){o.d3.select(".chart-title").text("Breathe In"),y=o.d3.select(`#polyline-${e}`),y.style("display","inherit").transition().ease(o.d3.easeLinear).duration(g(e)).attr("points",(e=>e.end.vertices.map((e=>e.join(","))).join(" "))).attr("transform",(e=>e.end.transform)).on("end",(()=>{e<s-3?v(e+1):setTimeout((()=>{m(e)}),h/2)}))}function $(e){const t=[];for(let n=0;n<e;n++){const o=0,a=0,s=50,r=1/4+n/e-(n-1/(2*e));t.push([o+s*Math.cos(l*r)*1,a+s*Math.sin(l*r)*1])}return t}function b(e){const t=e[0],n=e[e.length-1];return Math.hypot(t[0]-n[0],t[1]-n[1])||r}function x(e,t){const n=[];return e.forEach((e=>{n.push([e[0]*t,e[1]*t])})),n}function w(e,t,n){o.d3.select(n[t]).attr("id",`polyline-${t}`).attr("points",e.start.vertices.map((e=>e.join(","))).join(" ")).attr("transform",e.start.transform).attr("fill",d[t%d.length]).attr("stroke","black").style("display","none")}function k(e,t,n){o.d3.select(n[t]).attr("id",`polygon-${t}`).classed("polygon",!0).attr("points",(e=>e.end.vertices.map((e=>e.join(","))).join(" "))).attr("transform",(e=>e.end.transform)).attr("stroke","lightgrey").attr("stroke-width",1).attr("fill","rgba(0,0,0,0)")}function C(e){const t=[],n=[];for(let n=2;n<e;n++){const e=$(n);t.push(e)}return t.forEach(((e,o)=>{const a=b(e);e=x(e,r/a);const l=[300-r/2,500],s=[l[0]-e[0][0],l[1]-e[0][1]];let i=o>0?function(e){const t=[];e.forEach((e=>{t.push(e)}));const n=Math.floor(e.length/2);if(e.length%2==1)t.splice(n,0,t[n]);else{const o=[(e[n][0]+e[n-1][0])/2,(e[n][1]+e[n-1][1])/2];t.splice(n,0,o)}return t}(t[o-1]):[[0,0],[0,0]];const c=b(i);i=x(i,r/c);const d=[l[0]-i[0][0],l[1]-i[0][1]];0===o&&(d[0]=d[0]+r/2),n.push({index:o,start:{vertices:i,transform:`translate(${d.join(",")})`},end:{vertices:e,transform:`translate(${s.join(",")})`}})})),n}o.d3.select("#timing table").style("width","100%"),a=(0,o.ss)(p,{element:"#timing table",order:[0,"asc"],columnDefs:[{targets:3,createdCell:function(e,t){(0,o.$)(e).addClass("colorCell").css("background-color",t)}}]}),(0,o.$)('input[name="outlines"]').on("change",(()=>{(0,o.$)(".polygon").toggleClass("hidden")})),(0,o.$)('input[name="tabs"]').on("change",(()=>{(0,o.$)(".tabbedContent").toggleClass("selected")})),(0,o.$)('input[name="colors"]').on("change",(()=>{d="pastels"===(0,o.$)("input[name='colors']:checked").val()?i:c,o.d3.selectAll("polyline").each((function(e,t,n){o.d3.select(n[t]).attr("fill",d[e.index%d.length])})),p.forEach(((e,t)=>{p[t]["Fill Color"]=d[t%d.length]})),a.cells(".colorCell").every((function(e){return this.data(d[e%d.length]),(0,o.$)(this.node()).css("background-color",d[e%d.length]),this}))})),o.d3.select("#verticesSlider").on("change",(function(){s=parseInt((0,o.$)("#verticesSlider").val()),r=1400/s;const e=C(s),t=f(s);a.rows().remove(),a.rows.add(t).draw(),y.interrupt(),o.d3.select("svg").selectAll(".polyline").data(e,(e=>e.index)).each(w).enter().insert("polyline","polyline").classed("polyline",!0).each(w),o.d3.select("svg").selectAll(".polyline").data(e,(e=>e.index)).exit().remove(),o.d3.select("svg").selectAll(".polygon").data(e,(e=>e.index)).each(k).enter().insert("polygon","polyline").each(k),o.d3.select("svg").selectAll(".polygon").data(e,(e=>e.index)).exit().remove(),v(0)})),globalThis.poly=$,globalThis.Tau=l}},e=>{e(e.s=9868)}]);