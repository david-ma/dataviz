/*! For license information please see chart.js.LICENSE.txt */
(()=>{var t,e,n,r,i,a,o,s={7569:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var a=[],o=Object.getPrototypeOf,s=a.slice,l=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},c=a.push,u=a.indexOf,f={},h=f.toString,d=f.hasOwnProperty,p=d.toString,m=p.call(Object),g={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},y=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var r,i,a=(n=n||y).createElement("script");if(a.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[h.call(t)]||"object":typeof t}var M="3.7.1",S=/HTML$/i,T=function(t,e){return new T.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!v(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}T.fn=T.prototype={jquery:M,constructor:T,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},T.extend=T.fn.extend=function(){var t,e,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||v(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&o!==r&&(c&&r&&(T.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[e],a=i&&!Array.isArray(n)?[]:i||T.isPlainObject(n)?n:{},i=!1,o[e]=T.extend(c,a,r)):void 0!==r&&(o[e]=r));return o},T.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t)||(e=o(t))&&("function"!=typeof(n=d.call(e,"constructor")&&e.constructor)||p.call(n)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(E(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=T.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(E(Object(t))?T.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!S.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,a=t.length,o=!n;i<a;i++)!e(t[i],i)!==o&&r.push(t[i]);return r},map:function(t,e,n){var r,i,a=0,o=[];if(E(t))for(r=t.length;a<r;a++)null!=(i=e(t[a],a,n))&&o.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&o.push(i);return l(o)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=a[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){f["[object "+e+"]"]=e.toLowerCase()}));var C=a.pop,R=a.sort,D=a.splice,P="[\\x20\\t\\r\\n\\f]",L=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");T.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}T.escapeSelector=function(t){return(t+"").replace(N,I)};var U=y,O=c;!function(){var t,e,n,i,o,l,c,f,h,p,m=O,v=T.expando,_=0,y=0,x=tt(),b=tt(),w=tt(),M=tt(),S=function(t,e){return t===e&&(o=!0),0},E="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",I="\\["+P+"*("+N+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+P+"*\\]",F=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",k=new RegExp(P+"+","g"),B=new RegExp("^"+P+"*,"+P+"*"),z=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),H=new RegExp(P+"|>"),V=new RegExp(F),G=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+E+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},j=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),K=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=function(){lt()},Q=ht((function(t){return!0===t.disabled&&A(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(a=s.call(U.childNodes),U.childNodes),a[U.childNodes.length].nodeType}catch(t){m={apply:function(t,e){O.apply(t,s.call(e))},call:function(t){O.apply(t,s.call(arguments,1))}}}function J(t,e,n,r){var i,a,o,s,c,u,d,p=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!r&&(lt(e),e=e||l,f)){if(11!==_&&(c=X.exec(t)))if(i=c[1]){if(9===_){if(!(o=e.getElementById(i)))return n;if(o.id===i)return m.call(n,o),n}else if(p&&(o=p.getElementById(i))&&J.contains(e,o)&&o.id===i)return m.call(n,o),n}else{if(c[2])return m.apply(n,e.getElementsByTagName(t)),n;if((i=c[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(i)),n}if(!(M[t+" "]||h&&h.test(t))){if(d=t,p=e,1===_&&(H.test(t)||z.test(t))){for((p=$.test(t)&&st(e.parentNode)||e)==e&&g.scope||((s=e.getAttribute("id"))?s=T.escapeSelector(s):e.setAttribute("id",s=v)),a=(u=ut(t)).length;a--;)u[a]=(s?"#"+s:":scope")+" "+ft(u[a]);d=u.join(",")}try{return m.apply(n,p.querySelectorAll(d)),n}catch(e){M(t,!0)}finally{s===v&&e.removeAttribute("id")}}}return _t(t.replace(L,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[v]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return A(e,"input")&&e.type===t}}function it(t){return function(e){return(A(e,"input")||A(e,"button"))&&e.type===t}}function at(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Q(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et((function(e){return e=+e,et((function(n,r){for(var i,a=t([],n.length,e),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var n,r=t?t.ownerDocument||t:U;return r!=l&&9===r.nodeType&&r.documentElement?(c=(l=r).documentElement,f=!T.isXMLDoc(l),p=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&U!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",Z),g.getById=nt((function(t){return c.appendChild(t).id=T.expando,!l.getElementsByName||!l.getElementsByName(T.expando).length})),g.disconnectedMatch=nt((function(t){return p.call(t,"*")})),g.scope=nt((function(){return l.querySelectorAll(":scope")})),g.cssHas=nt((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),g.getById?(e.filter.ID=function(t){var e=t.replace(Y,K);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,K);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n,r,i,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(i=e.getElementsByName(t),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},h=[],nt((function(t){var e;c.appendChild(t).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||h.push("\\["+P+"*(?:value|"+E+")"),t.querySelectorAll("[id~="+v+"-]").length||h.push("~="),t.querySelectorAll("a#"+v+"+*").length||h.push(".#.+[+~]"),t.querySelectorAll(":checked").length||h.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||h.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")})),g.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),S=function(t,e){if(t===e)return o=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==U&&J.contains(U,t)?-1:e===l||e.ownerDocument==U&&J.contains(U,e)?1:i?u.call(i,t)-u.call(i,e):0:4&n?-1:1)},l):l}for(t in J.matches=function(t,e){return J(t,null,null,e)},J.matchesSelector=function(t,e){if(lt(t),f&&!M[e+" "]&&(!h||!h.test(e)))try{var n=p.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){M(e,!0)}return J(e,l,null,[t]).length>0},J.contains=function(t,e){return(t.ownerDocument||t)!=l&&lt(t),T.contains(t,e)},J.attr=function(t,n){(t.ownerDocument||t)!=l&&lt(t);var r=e.attrHandle[n.toLowerCase()],i=r&&d.call(e.attrHandle,n.toLowerCase())?r(t,n,!f):void 0;return void 0!==i?i:t.getAttribute(n)},J.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},T.uniqueSort=function(t){var e,n=[],r=0,a=0;if(o=!g.sortStable,i=!g.sortStable&&s.call(t,0),R.call(t,S),o){for(;e=t[a++];)e===t[a]&&(r=n.push(a));for(;r--;)D.call(t,n[r],1)}return i=null,t},T.fn.uniqueSort=function(){return this.pushStack(T.uniqueSort(s.apply(this)))},e=T.expr={cacheLength:50,createPseudo:et,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,K),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,K),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||J.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&J.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,K).toLowerCase();return"*"===t?function(){return!0}:function(t){return A(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+P+")"+t+"("+P+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=J.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(k," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,f,h,d,p=a!==o?"nextSibling":"previousSibling",m=e.parentNode,g=s&&e.nodeName.toLowerCase(),y=!l&&!s,x=!1;if(m){if(a){for(;p;){for(f=e;f=f[p];)if(s?A(f,g):1===f.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){for(x=(h=(c=(u=m[v]||(m[v]={}))[t]||[])[0]===_&&c[1])&&c[2],f=h&&m.childNodes[h];f=++h&&f&&f[p]||(x=h=0)||d.pop();)if(1===f.nodeType&&++x&&f===e){u[t]=[_,h,x];break}}else if(y&&(x=h=(c=(u=e[v]||(e[v]={}))[t]||[])[0]===_&&c[1]),!1===x)for(;(f=++h&&f&&f[p]||(x=h=0)||d.pop())&&(!(s?A(f,g):1===f.nodeType)||!++x||(y&&((u=f[v]||(f[v]={}))[t]=[_,x]),f!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||J.error("unsupported pseudo: "+t);return i[v]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,a=i(t,n),o=a.length;o--;)t[r=u.call(t,a[o])]=!(e[r]=a[o])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=vt(t.replace(L,"$1"));return r[v]?et((function(t,e,n,i){for(var a,o=r(t,null,i,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))})):function(t,i,a){return e[0]=t,r(e,null,a,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return J(t,e).length>0}})),contains:et((function(t){return t=t.replace(Y,K),function(e){return(e.textContent||T.text(e)).indexOf(t)>-1}})),lang:et((function(t){return G.test(t||"")||J.error("unsupported lang: "+t),t=t.replace(Y,K).toLowerCase(),function(e){var n;do{if(n=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:at(!1),disabled:at(!0),checked:function(t){return A(t,"input")&&!!t.checked||A(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return q.test(t.nodeName)},input:function(t){return j.test(t.nodeName)},button:function(t){return A(t,"input")&&"button"===t.type||A(t,"button")},text:function(t){var e;return A(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot((function(){return[0]})),last:ot((function(t,e){return[e-1]})),eq:ot((function(t,e,n){return[n<0?n+e:n]})),even:ot((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ot((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ot((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:ot((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function ct(){}function ut(t,n){var r,i,a,o,s,l,c,u=b[t+" "];if(u)return n?0:u.slice(0);for(s=t,l=[],c=e.preFilter;s;){for(o in r&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),r=!1,(i=z.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(L," ")}),s=s.slice(r.length)),e.filter)!(i=W[o].exec(s))||c[o]&&!(i=c[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?J.error(t):b(t,l).slice(0)}function ft(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function ht(t,e,n){var r=e.dir,i=e.next,a=i||r,o=n&&"parentNode"===a,s=y++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||o)return t(e,n,i);return!1}:function(e,n,l){var c,u,f=[_,s];if(l){for(;e=e[r];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||o)if(u=e[v]||(e[v]={}),i&&A(e,i))e=e[r]||e;else{if((c=u[a])&&c[0]===_&&c[1]===s)return f[2]=c[2];if(u[a]=f,f[2]=t(e,n,l))return!0}return!1}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var a,o=[],s=0,l=t.length,c=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,r,i)||(o.push(a),c&&e.push(s)));return o}function mt(t,e,n,r,i,a){return r&&!r[v]&&(r=mt(r)),i&&!i[v]&&(i=mt(i,a)),et((function(a,o,s,l){var c,f,h,d,p=[],g=[],v=o.length,_=a||function(t,e,n){for(var r=0,i=e.length;r<i;r++)J(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),y=!t||!a&&e?_:pt(_,p,t,s,l);if(n?n(y,d=i||(a?t:v||r)?[]:o,s,l):d=y,r)for(c=pt(d,g),r(c,[],s,l),f=c.length;f--;)(h=c[f])&&(d[g[f]]=!(y[g[f]]=h));if(a){if(i||t){if(i){for(c=[],f=d.length;f--;)(h=d[f])&&c.push(y[f]=h);i(null,d=[],c,l)}for(f=d.length;f--;)(h=d[f])&&(c=i?u.call(a,h):p[f])>-1&&(a[c]=!(o[c]=h))}}else d=pt(d===o?d.splice(v,d.length):d),i?i(null,o,d,l):m.apply(o,d)}))}function gt(t){for(var r,i,a,o=t.length,s=e.relative[t[0].type],l=s||e.relative[" "],c=s?1:0,f=ht((function(t){return t===r}),l,!0),h=ht((function(t){return u.call(r,t)>-1}),l,!0),d=[function(t,e,i){var a=!s&&(i||e!=n)||((r=e).nodeType?f(t,e,i):h(t,e,i));return r=null,a}];c<o;c++)if(i=e.relative[t[c].type])d=[ht(dt(d),i)];else{if((i=e.filter[t[c].type].apply(null,t[c].matches))[v]){for(a=++c;a<o&&!e.relative[t[a].type];a++);return mt(c>1&&dt(d),c>1&&ft(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(L,"$1"),i,c<a&&gt(t.slice(c,a)),a<o&&gt(t=t.slice(a)),a<o&&ft(t))}d.push(i)}return dt(d)}function vt(t,r){var i,a=[],o=[],s=w[t+" "];if(!s){for(r||(r=ut(t)),i=r.length;i--;)(s=gt(r[i]))[v]?a.push(s):o.push(s);s=w(t,function(t,r){var i=r.length>0,a=t.length>0,o=function(o,s,c,u,h){var d,p,g,v=0,y="0",x=o&&[],b=[],w=n,M=o||a&&e.find.TAG("*",h),S=_+=null==w?1:Math.random()||.1,E=M.length;for(h&&(n=s==l||s||h);y!==E&&null!=(d=M[y]);y++){if(a&&d){for(p=0,s||d.ownerDocument==l||(lt(d),c=!f);g=t[p++];)if(g(d,s||l,c)){m.call(u,d);break}h&&(_=S)}i&&((d=!g&&d)&&v--,o&&x.push(d))}if(v+=y,i&&y!==v){for(p=0;g=r[p++];)g(x,b,s,c);if(o){if(v>0)for(;y--;)x[y]||b[y]||(b[y]=C.call(u));b=pt(b)}m.apply(u,b),h&&!o&&b.length>0&&v+r.length>1&&T.uniqueSort(u)}return h&&(_=S,n=w),x};return i?et(o):o}(o,a)),s.selector=t}return s}function _t(t,n,r,i){var a,o,s,l,c,u="function"==typeof t&&t,h=!i&&ut(t=u.selector||t);if(r=r||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===n.nodeType&&f&&e.relative[o[1].type]){if(!(n=(e.find.ID(s.matches[0].replace(Y,K),n)||[])[0]))return r;u&&(n=n.parentNode),t=t.slice(o.shift().value.length)}for(a=W.needsContext.test(t)?0:o.length;a--&&(s=o[a],!e.relative[l=s.type]);)if((c=e.find[l])&&(i=c(s.matches[0].replace(Y,K),$.test(o[0].type)&&st(n.parentNode)||n))){if(o.splice(a,1),!(t=i.length&&ft(o)))return m.apply(r,i),r;break}}return(u||vt(t,h))(i,n,!f,r,!n||$.test(t)&&st(n.parentNode)||n),r}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,g.sortStable=v.split("").sort(S).join("")===v,lt(),g.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))})),T.find=J,T.expr[":"]=T.expr.pseudos,T.unique=T.uniqueSort,J.compile=vt,J.select=_t,J.setDocument=lt,J.tokenize=ut,J.escape=T.escapeSelector,J.getText=T.text,J.isXML=T.isXMLDoc,J.selectors=T.expr,J.support=T.support,J.uniqueSort=T.uniqueSort}();var F=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&T(t).is(n))break;r.push(t)}return r},k=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},B=T.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(t,e,n){return v(e)?T.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return u.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<r;e++)if(T.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,i[e],n);return r>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(H(this,t||[],!1))},not:function(t){return this.pushStack(H(this,t||[],!0))},is:function(t){return!!H(this,"string"==typeof t&&B.test(t)?T(t):t||[],!1).length}});var V,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:G.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),z.test(r[1])&&T.isPlainObject(e))for(r in e)v(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=y.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,V=T(y);var W=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function q(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,a=[],o="string"!=typeof t&&T(t);if(!B.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?T.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?u.call(T(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return q(t,"nextSibling")},prev:function(t){return q(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(A(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,r){var i=T.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=T.filter(r,i)),this.length>1&&(j[t]||T.uniqueSort(i),W.test(t)&&i.reverse()),this.pushStack(i)}}));var X=/[^\x20\t\r\n\f]+/g;function $(t){return t}function Y(t){throw t}function K(t,e,n,r){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(X)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,r,i,a=[],o=[],s=-1,l=function(){for(i=i||t.once,r=e=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!e&&(s=a.length-1,o.push(n)),function e(n){T.each(n,(function(n,r){v(r)?t.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==w(r)&&e(r)}))}(arguments),n&&!e&&l()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(t){return t?T.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||e||(a=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,r){var i=v(t[r[4]])&&t[r[4]];a[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var a=0;function o(t,e,n,i){return function(){var s=this,l=arguments,c=function(){var r,c;if(!(t<a)){if((r=n.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,v(c)?i?c.call(r,o(a,e,$,i),o(a,e,Y,i)):(a++,c.call(r,o(a,e,$,i),o(a,e,Y,i),o(a,e,$,e.notifyWith))):(n!==$&&(s=void 0,l=[r]),(i||e.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(r){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(r,u.error),t+1>=a&&(n!==Y&&(s=void 0,l=[r]),e.rejectWith(s,l))}};t?u():(T.Deferred.getErrorHook?u.error=T.Deferred.getErrorHook():T.Deferred.getStackHook&&(u.error=T.Deferred.getStackHook()),r.setTimeout(u))}}return T.Deferred((function(r){e[0][3].add(o(0,r,v(i)?i:$,r.notifyWith)),e[1][3].add(o(0,r,v(t)?t:$)),e[2][3].add(o(0,r,v(n)?n:Y))})).promise()},promise:function(t){return null!=t?T.extend(t,i):i}},a={};return T.each(e,(function(t,r){var o=r[2],s=r[5];i[r[1]]=o.add,s&&o.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(r[3].fire),a[r[0]]=function(){return a[r[0]+"With"](this===a?void 0:this,arguments),this},a[r[0]+"With"]=o.fireWith})),i.promise(a),t&&t.call(a,a),a},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),a=T.Deferred(),o=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(K(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||v(i[n]&&i[n].then)))return a.then();for(;n--;)K(i[n],o(n),a.reject);return a.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&Z.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){r.setTimeout((function(){throw t}))};var Q=T.Deferred();function J(){y.removeEventListener("DOMContentLoaded",J),r.removeEventListener("load",J),T.ready()}T.fn.ready=function(t){return Q.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||Q.resolveWith(y,[T]))}}),T.ready.then=Q.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?r.setTimeout(T.ready):(y.addEventListener("DOMContentLoaded",J),r.addEventListener("load",J));var tt=function(t,e,n,r,i,a,o){var s=0,l=t.length,c=null==n;if("object"===w(n))for(s in i=!0,n)tt(t,e,s,n[s],!0,a,o);else if(void 0!==r&&(i=!0,v(r)||(o=!0),c&&(o?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(T(t),n)})),e))for(;s<l;s++)e(t[s],n,o?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):l?e(t[0],n):a},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var at=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ot(){this.expando=T.expando+ot.uid++}ot.uid=1,ot.prototype={cache:function(t){var e=t[this.expando];return e||(e={},at(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(X)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||T.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var st=new ot,lt=new ot,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;function ft(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(n)}catch(t){}lt.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return lt.hasData(t)||st.hasData(t)},data:function(t,e,n){return lt.access(t,e,n)},removeData:function(t,e){lt.remove(t,e)},_data:function(t,e,n){return st.access(t,e,n)},_removeData:function(t,e){st.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===t){if(this.length&&(i=lt.get(a),1===a.nodeType&&!st.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=it(r.slice(5)),ft(a,r,i[r]));st.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){lt.set(this,t)})):tt(this,(function(e){var n;if(a&&void 0===e)return void 0!==(n=lt.get(a,t))||void 0!==(n=ft(a,t))?n:void 0;this.each((function(){lt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){lt.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=st.get(t,e),n&&(!r||Array.isArray(n)?r=st.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),r=n.length,i=n.shift(),a=T._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete a.stop,i.call(t,(function(){T.dequeue(t,e)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return st.get(t,n)||st.access(t,n,{empty:T.Callbacks("once memory").add((function(){st.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=T.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=st.get(a[o],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],mt=y.documentElement,gt=function(t){return T.contains(t.ownerDocument,t)},vt={composed:!0};mt.getRootNode&&(gt=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});var _t=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===T.css(t,"display")};function yt(t,e,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return T.css(t,e,"")},l=s(),c=n&&n[3]||(T.cssNumber[e]?"":"px"),u=t.nodeType&&(T.cssNumber[e]||"px"!==c&&+l)&&dt.exec(T.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)T.style(t,e,u+c),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;u*=2,T.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var xt={};function bt(t){var e,n=t.ownerDocument,r=t.nodeName,i=xt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=T.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),xt[r]=i,i)}function wt(t,e){for(var n,r,i=[],a=0,o=t.length;a<o;a++)(r=t[a]).style&&(n=r.style.display,e?("none"===n&&(i[a]=st.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&_t(r)&&(i[a]=bt(r))):"none"!==n&&(i[a]="none",st.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(t[a].style.display=i[a]);return t}T.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){_t(this)?T(this).show():T(this).hide()}))}});var Mt,St,Tt=/^(?:checkbox|radio)$/i,Et=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,At=/^$|^module$|\/(?:java|ecma)script/i;Mt=y.createDocumentFragment().appendChild(y.createElement("div")),(St=y.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),Mt.appendChild(St),g.checkClone=Mt.cloneNode(!0).cloneNode(!0).lastChild.checked,Mt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Mt.cloneNode(!0).lastChild.defaultValue,Mt.innerHTML="<option></option>",g.option=!!Mt.lastChild;var Ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Rt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?T.merge([t],n):n}function Dt(t,e){for(var n=0,r=t.length;n<r;n++)st.set(t[n],"globalEval",!e||st.get(e[n],"globalEval"))}Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,g.option||(Ct.optgroup=Ct.option=[1,"<select multiple='multiple'>","</select>"]);var Pt=/<|&#?\w+;/;function Lt(t,e,n,r,i){for(var a,o,s,l,c,u,f=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((a=t[d])||0===a)if("object"===w(a))T.merge(h,a.nodeType?[a]:a);else if(Pt.test(a)){for(o=o||f.appendChild(e.createElement("div")),s=(Et.exec(a)||["",""])[1].toLowerCase(),l=Ct[s]||Ct._default,o.innerHTML=l[1]+T.htmlPrefilter(a)+l[2],u=l[0];u--;)o=o.lastChild;T.merge(h,o.childNodes),(o=f.firstChild).textContent=""}else h.push(e.createTextNode(a));for(f.textContent="",d=0;a=h[d++];)if(r&&T.inArray(a,r)>-1)i&&i.push(a);else if(c=gt(a),o=Rt(f.appendChild(a),"script"),c&&Dt(o),n)for(u=0;a=o[u++];)At.test(a.type||"")&&n.push(a);return f}var Nt=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function Ut(){return!1}function Ot(t,e,n,r,i,a){var o,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Ot(t,s,n,r,e[s],a);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ut;else if(!i)return t;return 1===a&&(o=i,i=function(t){return T().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=T.guid++)),t.each((function(){T.event.add(this,e,i,r,n)}))}function Ft(t,e,n){n?(st.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var n,r=st.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),st.set(this,e,r),this[e](),n=st.get(this,e),st.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(st.set(this,e,T.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=It)}})):void 0===st.get(t,e)&&T.event.add(t,e,It)}T.event={global:{},add:function(t,e,n,r,i){var a,o,s,l,c,u,f,h,d,p,m,g=st.get(t);if(at(t))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&T.find.matchesSelector(mt,i),n.guid||(n.guid=T.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(X)||[""]).length;c--;)d=m=(s=Nt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=T.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=T.event.special[d]||{},u=T.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:p.join(".")},a),(h=l[d])||((h=l[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,o)||t.addEventListener&&t.addEventListener(d,o)),f.add&&(f.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),T.event.global[d]=!0)},remove:function(t,e,n,r,i){var a,o,s,l,c,u,f,h,d,p,m,g=st.hasData(t)&&st.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(X)||[""]).length;c--;)if(d=m=(s=Nt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=T.event.special[d]||{},h=l[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)u=h[a],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(a,1),u.selector&&h.delegateCount--,f.remove&&f.remove.call(t,u));o&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,p,g.handle)||T.removeEvent(t,d,g.handle),delete l[d])}else for(d in l)T.event.remove(t,d+e[c],n,r,!0);T.isEmptyObject(l)&&st.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,a,o,s=new Array(arguments.length),l=T.event.fix(t),c=(st.get(this,"events")||Object.create(null))[l.type]||[],u=T.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=T.event.handlers.call(this,l,c),e=0;(i=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(r=((T.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,r,i,a,o,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[i=(r=e[n]).selector+" "]&&(o[i]=r.needsContext?T(i,this).index(c)>-1:T.find(i,this,null,[c]).length),o[i]&&a.push(r);a.length&&s.push({elem:c,handlers:a})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&A(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&A(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return Tt.test(e.type)&&e.click&&A(e,"input")&&st.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:Ut,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Ut,isPropagationStopped:Ut,isImmediatePropagationStopped:Ut,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(y.documentMode){var n=st.get(this,"handle"),r=T.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else T.event.simulate(e,t.target,T.event.fix(t))}T.event.special[t]={setup:function(){var r;if(Ft(this,t,!0),!y.documentMode)return!1;(r=st.get(this,e))||this.addEventListener(e,n),st.set(this,e,(r||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!y.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,n),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},T.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=y.documentMode?this:r,a=st.get(i,e);a||(y.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),st.set(i,e,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=y.documentMode?this:r,a=st.get(i,e)-1;a?st.set(i,e,a):(y.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),st.remove(i,e))}}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||T.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,r){return Ot(this,t,e,n,r)},one:function(t,e,n,r){return Ot(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,T(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ut),this.each((function(){T.event.remove(this,t,n,e)}))}});var kt=/<script|<style|<link/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,zt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ht(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Gt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Wt(t,e){var n,r,i,a,o,s;if(1===e.nodeType){if(st.hasData(t)&&(s=st.get(t).events))for(i in st.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)T.event.add(e,i,s[i][n]);lt.hasData(t)&&(a=lt.access(t),o=T.extend({},a),lt.set(e,o))}}function jt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Tt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function qt(t,e,n,r){e=l(e);var i,a,o,s,c,u,f=0,h=t.length,d=h-1,p=e[0],m=v(p);if(m||h>1&&"string"==typeof p&&!g.checkClone&&Bt.test(p))return t.each((function(i){var a=t.eq(i);m&&(e[0]=p.call(this,i,a.html())),qt(a,e,n,r)}));if(h&&(a=(i=Lt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=T.map(Rt(i,"script"),Vt)).length;f<h;f++)c=i,f!==d&&(c=T.clone(c,!0,!0),s&&T.merge(o,Rt(c,"script"))),n.call(t[f],c,f);if(s)for(u=o[o.length-1].ownerDocument,T.map(o,Gt),f=0;f<s;f++)c=o[f],At.test(c.type||"")&&!st.access(c,"globalEval")&&T.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?T._evalUrl&&!c.noModule&&T._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(zt,""),c,u))}return t}function Xt(t,e,n){for(var r,i=e?T.filter(e,t):t,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||T.cleanData(Rt(r)),r.parentNode&&(n&&gt(r)&&Dt(Rt(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,a,o,s=t.cloneNode(!0),l=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(o=Rt(s),r=0,i=(a=Rt(t)).length;r<i;r++)jt(a[r],o[r]);if(e)if(n)for(a=a||Rt(t),o=o||Rt(s),r=0,i=a.length;r<i;r++)Wt(a[r],o[r]);else Wt(t,s);return(o=Rt(s,"script")).length>0&&Dt(o,!l&&Rt(t,"script")),s},cleanData:function(t){for(var e,n,r,i=T.event.special,a=0;void 0!==(n=t[a]);a++)if(at(n)){if(e=n[st.expando]){if(e.events)for(r in e.events)i[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[st.expando]=void 0}n[lt.expando]&&(n[lt.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return qt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ht(this,t).appendChild(t)}))},prepend:function(){return qt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ht(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(Rt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!Ct[(Et.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(Rt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return qt(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(Rt(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,r=[],i=T(t),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),T(i[o])[e](n),c.apply(r,n.get());return this.pushStack(r)}}));var $t=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),Yt=/^--/,Kt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Zt=function(t,e,n){var r,i,a={};for(i in e)a[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=a[i];return r},Qt=new RegExp(pt.join("|"),"i");function Jt(t,e,n){var r,i,a,o,s=Yt.test(e),l=t.style;return(n=n||Kt(t))&&(o=n.getPropertyValue(e)||n[e],s&&o&&(o=o.replace(L,"$1")||void 0),""!==o||gt(t)||(o=T.style(t,e)),!g.pixelBoxStyles()&&$t.test(o)&&Qt.test(e)&&(r=l.width,i=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=r,l.minWidth=i,l.maxWidth=a)),void 0!==o?o+"":o}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(c).appendChild(u);var t=r.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),i=36===e(t.width),u.style.position="absolute",a=12===e(u.offsetWidth/3),mt.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var n,i,a,o,s,l,c=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=y.createElement("table"),e=y.createElement("tr"),n=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),s}}))}();var ee=["Webkit","Moz","ms"],ne=y.createElement("div").style,re={};function ie(t){return T.cssProps[t]||re[t]||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var ae=/^(none|table(?!-c[ea]).+)/,oe={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function le(t,e,n){var r=dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ce(t,e,n,r,i,a){var o="width"===e?1:0,s=0,l=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=T.css(t,n+pt[o],!0,i)),r?("content"===n&&(l-=T.css(t,"padding"+pt[o],!0,i)),"margin"!==n&&(l-=T.css(t,"border"+pt[o]+"Width",!0,i))):(l+=T.css(t,"padding"+pt[o],!0,i),"padding"!==n?l+=T.css(t,"border"+pt[o]+"Width",!0,i):s+=T.css(t,"border"+pt[o]+"Width",!0,i));return!r&&a>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-l-s-.5))||0),l+c}function ue(t,e,n){var r=Kt(t),i=(!g.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,r),a=i,o=Jt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if($t.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&A(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===T.css(t,"boxSizing",!1,r),(a=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+ce(t,e,n||(i?"border":"content"),a,r,o)+"px"}function fe(t,e,n,r,i){return new fe.prototype.init(t,e,n,r,i)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,a,o,s=it(e),l=Yt.test(e),c=t.style;if(l||(e=ie(s)),o=T.cssHooks[e]||T.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(t,!1,r))?i:c[e];"string"==(a=typeof n)&&(i=dt.exec(n))&&i[1]&&(n=yt(t,e,i),a="number"),null!=n&&n==n&&("number"!==a||l||(n+=i&&i[3]||(T.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,r))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,a,o,s=it(e);return Yt.test(e)||(e=ie(s)),(o=T.cssHooks[e]||T.cssHooks[s])&&"get"in o&&(i=o.get(t,!0,n)),void 0===i&&(i=Jt(t,e,r)),"normal"===i&&e in se&&(i=se[e]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,r){if(n)return!ae.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,r):Zt(t,oe,(function(){return ue(t,e,r)}))},set:function(t,n,r){var i,a=Kt(t),o=!g.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===T.css(t,"boxSizing",!1,a),l=r?ce(t,e,r,s,a):0;return s&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-ce(t,e,"border",!1,a)-.5)),l&&(i=dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),le(0,n,l)}}})),T.cssHooks.marginLeft=te(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=a[r]||a[r-2]||a[0];return i}},"margin"!==t&&(T.cssHooks[t+e].set=le)})),T.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,a={},o=0;if(Array.isArray(e)){for(r=Kt(t),i=e.length;o<i;o++)a[e[o]]=T.css(t,e[o],!1,r);return a}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=fe,fe.prototype={constructor:fe,init:function(t,e,n,r,i,a){this.elem=t,this.prop=n,this.easing=i||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(T.cssNumber[n]?"":"px")},cur:function(){var t=fe.propHooks[this.prop];return t&&t.get?t.get(this):fe.propHooks._default.get(this)},run:function(t){var e,n=fe.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):fe.propHooks._default.set(this),this}},fe.prototype.init.prototype=fe.prototype,fe.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},fe.propHooks.scrollTop=fe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=fe.prototype.init,T.fx.step={};var he,de,pe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){de&&(!1===y.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ge):r.setTimeout(ge,T.fx.interval),T.fx.tick())}function ve(){return r.setTimeout((function(){he=void 0})),he=Date.now()}function _e(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ye(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,e,t))return r}function xe(t,e,n){var r,i,a=0,o=xe.prefilters.length,s=T.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var e=he||ve(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),a=0,o=c.tweens.length;a<o;a++)c.tweens[a].run(r);return s.notifyWith(t,[c,r,n]),r<1&&o?n:(o||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:he||ve(),duration:n.duration,tweens:[],createTween:function(e,n){var r=T.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,r,i,a,o;for(n in t)if(i=e[r=it(n)],a=t[n],Array.isArray(a)&&(i=a[1],a=t[n]=a[0]),n!==r&&(t[r]=a,delete t[n]),(o=T.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete t[r],a)n in t||(t[n]=a[n],e[n]=i);else e[r]=i}(u,c.opts.specialEasing);a<o;a++)if(r=xe.prefilters[a].call(c,t,u,c.opts))return v(r.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return T.map(u,ye,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return yt(n.elem,t,dt.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(X);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,a,o,s,l,c,u,f="width"in e||"height"in e,h=this,d={},p=t.style,m=t.nodeType&&_t(t),g=st.get(t,"fxshow");for(r in n.queue||(null==(o=T._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,T.queue(t,"fx").length||o.empty.fire()}))}))),e)if(i=e[r],pe.test(i)){if(delete e[r],a=a||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||T.style(t,r)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=st.get(t,"display")),"none"===(u=T.css(t,"display"))&&(c?u=c:(wt([t],!0),c=t.style.display||c,u=T.css(t,"display"),wt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===T.css(t,"float")&&(l||(h.done((function(){p.display=c})),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,d)l||(g?"hidden"in g&&(m=g.hidden):g=st.access(t,"fxshow",{display:c}),a&&(g.hidden=!m),m&&wt([t],!0),h.done((function(){for(r in m||wt([t]),st.remove(t,"fxshow"),d)T.style(t,r,d[r])}))),l=ye(m?g[r]:0,r,h),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),T.speed=function(t,e,n){var r=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(_t).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=T.isEmptyObject(t),a=T.speed(e,n,r),o=function(){var e=xe(this,T.extend({},t),a);(i||st.get(this,"finish"))&&e.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",a=T.timers,o=st.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&me.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=t&&a[i].queue!==t||(a[i].anim.stop(n),e=!1,a.splice(i,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=st.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],a=T.timers,o=r?r.length:0;for(n.finish=!0,T.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(_e(e,!0),t,r,i)}})),T.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),he=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){de||(de=!0,ge())},T.fx.stop=function(){de=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var be,we=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return tt(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?T.prop(t,e,n):(1===a&&T.isXMLDoc(t)||(i=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(X);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=we[e]||T.find.attr;we[e]=function(t,e,r){var i,a,o=e.toLowerCase();return r||(a=we[o],we[o]=i,i=null!=n(t,e,r)?o:null,we[o]=a),i}}));var Me=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function Te(t){return(t.match(X)||[]).join(" ")}function Ee(t){return t.getAttribute&&t.getAttribute("class")||""}function Ae(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}T.fn.extend({prop:function(t,e){return tt(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&T.isXMLDoc(t)||(e=T.propFix[e]||e,i=T.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,r,i,a,o;return v(t)?this.each((function(e){T(this).addClass(t.call(this,e,Ee(this)))})):(e=Ae(t)).length?this.each((function(){if(r=Ee(this),n=1===this.nodeType&&" "+Te(r)+" "){for(a=0;a<e.length;a++)i=e[a],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=Te(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(t){var e,n,r,i,a,o;return v(t)?this.each((function(e){T(this).removeClass(t.call(this,e,Ee(this)))})):arguments.length?(e=Ae(t)).length?this.each((function(){if(r=Ee(this),n=1===this.nodeType&&" "+Te(r)+" "){for(a=0;a<e.length;a++)for(i=e[a];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=Te(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,a,o=typeof t,s="string"===o||Array.isArray(t);return v(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,Ee(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=Ae(t),this.each((function(){if(s)for(a=T(this),i=0;i<n.length;i++)r=n[i],a.hasClass(r)?a.removeClass(r):a.addClass(r);else void 0!==t&&"boolean"!==o||((r=Ee(this))&&st.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":st.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Te(Ee(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ce=/\r/g;T.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=v(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,T(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=T.map(i,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ce,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:Te(T.text(t))}},select:{get:function(t){var e,n,r,i=t.options,a=t.selectedIndex,o="select-one"===t.type,s=o?null:[],l=o?a+1:i.length;for(r=a<0?l:o?a:0;r<l;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=T(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,a=T.makeArray(e),o=i.length;o--;)((r=i[o]).selected=T.inArray(T.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},g.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Re=r.location,De={guid:Date.now()},Pe=/\?/;T.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Le=/^(?:focusinfocus|focusoutblur)$/,Ne=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,i){var a,o,s,l,c,u,f,h,p=[n||y],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(o=h=s=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!Le.test(m+T.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[T.expando]?t:new T.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),f=T.event.special[m]||{},i||!f.trigger||!1!==f.trigger.apply(n,e))){if(!i&&!f.noBubble&&!_(n)){for(l=f.delegateType||m,Le.test(l+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(n.ownerDocument||y)&&p.push(s.defaultView||s.parentWindow||r)}for(a=0;(o=p[a++])&&!t.isPropagationStopped();)h=o,t.type=a>1?l:f.bindType||m,(u=(st.get(o,"events")||Object.create(null))[t.type]&&st.get(o,"handle"))&&u.apply(o,e),(u=c&&o[c])&&u.apply&&at(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),e)||!at(n)||c&&v(n[m])&&!_(n)&&((s=n[c])&&(n[c]=null),T.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Ne),n[m](),t.isPropagationStopped()&&h.removeEventListener(m,Ne),T.event.triggered=void 0,s&&(n[c]=s)),t.result}},simulate:function(t,e,n){var r=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(r,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}});var Ie=/\[\]$/,Ue=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function ke(t,e,n,r){var i;if(Array.isArray(e))T.each(e,(function(e,i){n||Ie.test(t)?r(t,i):ke(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==w(e))r(t,e);else for(i in e)ke(t+"["+i+"]",e[i],n,r)}T.param=function(t,e){var n,r=[],i=function(t,e){var n=v(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){i(this.name,this.value)}));else for(n in t)ke(n,t[n],e,i);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Fe.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!Tt.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(Ue,"\r\n")}})):{name:e.name,value:n.replace(Ue,"\r\n")}})).get()}});var Be=/%20/g,ze=/#.*$/,He=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ge=/^(?:GET|HEAD)$/,We=/^\/\//,je={},qe={},Xe="*/".concat("*"),$e=y.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,a=e.toLowerCase().match(X)||[];if(v(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ke(t,e,n,r){var i={},a=t===qe;function o(s){var l;return i[s]=!0,T.each(t[s]||[],(function(t,s){var c=s(e,n,r);return"string"!=typeof c||a||i[c]?a?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)})),l}return o(e.dataTypes[0])||!i["*"]&&o("*")}function Ze(t,e){var n,r,i=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&T.extend(!0,t,r),t}$e.href=Re.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Re.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Re.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ze(Ze(t,T.ajaxSettings),e):Ze(T.ajaxSettings,t)},ajaxPrefilter:Ye(je),ajaxTransport:Ye(qe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,a,o,s,l,c,u,f,h,d=T.ajaxSetup({},e),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?T(p):T.event,g=T.Deferred(),v=T.Callbacks("once memory"),_=d.statusCode||{},x={},b={},w="canceled",M={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o)for(o={};e=Ve.exec(a);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(t,e){return null==c&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)M.always(t[M.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),S(0,e),this}};if(g.promise(M),d.url=((t||d.url||Re.href)+"").replace(We,Re.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(X)||[""],null==d.crossDomain){l=y.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=$e.protocol+"//"+$e.host!=l.protocol+"//"+l.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=T.param(d.data,d.traditional)),Ke(je,d,e,M),c)return M;for(f in(u=T.event&&d.global)&&0==T.active++&&T.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ge.test(d.type),i=d.url.replace(ze,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Be,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Pe.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(He,"$1"),h=(Pe.test(i)?"&":"?")+"_="+De.guid+++h),d.url=i+h),d.ifModified&&(T.lastModified[i]&&M.setRequestHeader("If-Modified-Since",T.lastModified[i]),T.etag[i]&&M.setRequestHeader("If-None-Match",T.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&M.setRequestHeader("Content-Type",d.contentType),M.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Xe+"; q=0.01":""):d.accepts["*"]),d.headers)M.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(p,M,d)||c))return M.abort();if(w="abort",v.add(d.complete),M.done(d.success),M.fail(d.error),n=Ke(qe,d,e,M)){if(M.readyState=1,u&&m.trigger("ajaxSend",[M,d]),c)return M;d.async&&d.timeout>0&&(s=r.setTimeout((function(){M.abort("timeout")}),d.timeout));try{c=!1,n.send(x,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,o,l){var f,h,y,x,b,w=e;c||(c=!0,s&&r.clearTimeout(s),n=void 0,a=l||"",M.readyState=t>0?4:0,f=t>=200&&t<300||304===t,o&&(x=function(t,e,n){for(var r,i,a,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(d,M,o)),!f&&T.inArray("script",d.dataTypes)>-1&&T.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),x=function(t,e,n,r){var i,a,o,s,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(a=u.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(i in c)if((s=i.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[i]:!0!==c[i]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(d,x,M,f),f?(d.ifModified&&((b=M.getResponseHeader("Last-Modified"))&&(T.lastModified[i]=b),(b=M.getResponseHeader("etag"))&&(T.etag[i]=b)),204===t||"HEAD"===d.type?w="nocontent":304===t?w="notmodified":(w=x.state,h=x.data,f=!(y=x.error))):(y=w,!t&&w||(w="error",t<0&&(t=0))),M.status=t,M.statusText=(e||w)+"",f?g.resolveWith(p,[h,w,M]):g.rejectWith(p,[M,w,y]),M.statusCode(_),_=void 0,u&&m.trigger(f?"ajaxSuccess":"ajaxError",[M,d,f?h:y]),v.fireWith(p,[M,w]),u&&(m.trigger("ajaxComplete",[M,d]),--T.active||T.event.trigger("ajaxStop")))}return M},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:i,data:n,success:r},T.isPlainObject(t)&&t))}})),T.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),T._evalUrl=function(t,e,n){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,n)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},Je=T.ajaxSettings.xhr();g.cors=!!Je&&"withCredentials"in Je,g.ajax=Je=!!Je,T.ajaxTransport((function(t){var e,n;if(g.cors||Je&&!t.crossDomain)return{send:function(i,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Qe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||T.expando+"_"+De.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,n){var i,a,o,s=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||T.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===a?T(r).removeProp(i):r[i]=a,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),o&&v(a)&&a(o[0]),o=a=void 0})),"script"})),g.createHTMLDocument=((tn=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(r)):e=y),a=!n&&[],(i=z.exec(t))?[e.createElement(i[1])]:(i=Lt([t],e,a),a&&a.length&&T(a).remove(),T.merge([],i.childNodes)));var r,i,a},T.fn.load=function(t,e,n){var r,i,a,o=this,s=t.indexOf(" ");return s>-1&&(r=Te(t.slice(s)),t=t.slice(0,s)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),o.length>0&&T.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){a=arguments,o.html(r?T("<div>").append(T.parseHTML(t)).find(r):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,a||[t.responseText,e,t])}))}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var r,i,a,o,s,l,c=T.css(t,"position"),u=T(t),f={};"static"===c&&(t.style.position="relative"),s=u.offset(),a=T.css(t,"top"),l=T.css(t,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(o=(r=u.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),v(e)&&(e=e.call(t,n,T.extend({},s))),null!=e.top&&(f.top=e.top-s.top+o),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):u.css(f)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),i.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-T.css(r,"marginTop",!0),left:e.left-i.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||mt}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(r){return tt(this,(function(t,r,i){var a;if(_(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===i)return a?a[e]:t[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):t[r]=i}),t,r,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=te(g.pixelPosition,(function(t,n){if(n)return n=Jt(t,e),$t.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){T.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return tt(this,(function(e,n,i){var a;return _(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===i?T.css(e,n,s):T.style(e,n,i,s)}),e,o?i:void 0,o)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;T.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return r=s.call(arguments,2),i=function(){return t.apply(e||this,r.concat(s.call(arguments)))},i.guid=t.guid=t.guid||T.guid++,i},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=A,T.isFunction=v,T.isWindow=_,T.camelCase=it,T.type=w,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var an=r.jQuery,on=r.$;return T.noConflict=function(t){return r.$===T&&(r.$=on),t&&r.jQuery===T&&(r.jQuery=an),T},void 0===i&&(r.jQuery=r.$=T),T}))},2935:function(t,e,n){var r;t=n.nmd(t),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,c=128,u=1/0,f=9007199254740991,h=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],m="[object Arguments]",g="[object Array]",v="[object Boolean]",_="[object Date]",y="[object Error]",x="[object Function]",b="[object GeneratorFunction]",w="[object Map]",M="[object Number]",S="[object Object]",T="[object Promise]",E="[object RegExp]",A="[object Set]",C="[object String]",R="[object Symbol]",D="[object WeakMap]",P="[object ArrayBuffer]",L="[object DataView]",N="[object Float32Array]",I="[object Float64Array]",U="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",k="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(j.source),$=RegExp(q.source),Y=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mt="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="["+bt+"]",Rt="["+At+"]",Dt="["+wt+"]",Pt="\\d+",Lt="["+Mt+"]",Nt="["+St+"]",It="[^"+bt+At+Pt+Mt+St+Tt+"]",Ut="\\ud83c[\\udffb-\\udfff]",Ot="[^"+bt+"]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Bt="["+Tt+"]",zt="\\u200d",Ht="(?:"+Nt+"|"+It+")",Vt="(?:"+Bt+"|"+It+")",Gt="(?:['â](?:d|ll|m|re|s|t|ve))?",Wt="(?:['â](?:D|LL|M|RE|S|T|VE))?",jt="(?:"+Dt+"|"+Ut+")?",qt="["+Et+"]?",Xt=qt+jt+"(?:"+zt+"(?:"+[Ot,Ft,kt].join("|")+")"+qt+jt+")*",$t="(?:"+[Lt,Ft,kt].join("|")+")"+Xt,Yt="(?:"+[Ot+Dt+"?",Dt,Ft,kt,Ct].join("|")+")",Kt=RegExp("['â]","g"),Zt=RegExp(Dt,"g"),Qt=RegExp(Ut+"(?="+Ut+")|"+Yt+Xt,"g"),Jt=RegExp([Bt+"?"+Nt+"+"+Gt+"(?="+[Rt,Bt,"$"].join("|")+")",Vt+"+"+Wt+"(?="+[Rt,Bt+Ht,"$"].join("|")+")",Bt+"?"+Ht+"+"+Gt,Bt+"+"+Wt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt,$t].join("|"),"g"),te=RegExp("["+zt+bt+wt+Et+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[N]=ie[I]=ie[U]=ie[O]=ie[F]=ie[k]=ie[B]=ie[z]=ie[H]=!0,ie[m]=ie[g]=ie[P]=ie[v]=ie[L]=ie[_]=ie[y]=ie[x]=ie[w]=ie[M]=ie[S]=ie[E]=ie[A]=ie[C]=ie[D]=!1;var ae={};ae[m]=ae[g]=ae[P]=ae[L]=ae[v]=ae[_]=ae[N]=ae[I]=ae[U]=ae[O]=ae[F]=ae[w]=ae[M]=ae[S]=ae[E]=ae[A]=ae[C]=ae[R]=ae[k]=ae[B]=ae[z]=ae[H]=!0,ae[y]=ae[x]=ae[D]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,le=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ue="object"==typeof self&&self&&self.Object===Object&&self,fe=ce||ue||Function("return this")(),he=e&&!e.nodeType&&e,de=he&&t&&!t.nodeType&&t,pe=de&&de.exports===he,me=pe&&ce.process,ge=function(){try{return de&&de.require&&de.require("util").types||me&&me.binding&&me.binding("util")}catch(t){}}(),ve=ge&&ge.isArrayBuffer,_e=ge&&ge.isDate,ye=ge&&ge.isMap,xe=ge&&ge.isRegExp,be=ge&&ge.isSet,we=ge&&ge.isTypedArray;function Me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Se(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ee(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ce(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Re(t,e){return!(null==t||!t.length)&&Be(t,e,0)>-1}function De(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ne(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Ie(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ue(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Oe=Ge("length");function Fe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function ke(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Be(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):ke(t,He,n)}function ze(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function He(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:h}function Ge(t){return function(e){return null==e?i:e[t]}}function We(t){return function(e){return null==t?i:t[e]}}function je(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function qe(t,e){for(var n,r=-1,a=t.length;++r<a;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $e(t){return t?t.slice(0,hn(t)+1).replace(rt,""):t}function Ye(t){return function(e){return t(e)}}function Ke(t,e){return Pe(e,(function(e){return t[e]}))}function Ze(t,e){return t.has(e)}function Qe(t,e){for(var n=-1,r=t.length;++n<r&&Be(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length;n--&&Be(e,t[n],0)>-1;);return n}var tn=We({Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"}),en=We({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+oe[t]}function rn(t){return te.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function on(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==s||(t[n]=s,a[i++]=n)}return a}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function un(t){return rn(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):Oe(t)}function fn(t){return rn(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function hn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=We({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?fe:pn.defaults(fe.Object(),e,pn.pick(fe,ne))).Array,it=e.Date,bt=e.Error,wt=e.Function,Mt=e.Math,St=e.Object,Tt=e.RegExp,Et=e.String,At=e.TypeError,Ct=r.prototype,Rt=wt.prototype,Dt=St.prototype,Pt=e["__core-js_shared__"],Lt=Rt.toString,Nt=Dt.hasOwnProperty,It=0,Ut=(n=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ot=Dt.toString,Ft=Lt.call(St),kt=fe._,Bt=Tt("^"+Lt.call(Nt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=pe?e.Buffer:i,Ht=e.Symbol,Vt=e.Uint8Array,Gt=zt?zt.allocUnsafe:i,Wt=on(St.getPrototypeOf,St),jt=St.create,qt=Dt.propertyIsEnumerable,Xt=Ct.splice,$t=Ht?Ht.isConcatSpreadable:i,Yt=Ht?Ht.iterator:i,Qt=Ht?Ht.toStringTag:i,te=function(){try{var t=la(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==fe.clearTimeout&&e.clearTimeout,ce=it&&it.now!==fe.Date.now&&it.now,ue=e.setTimeout!==fe.setTimeout&&e.setTimeout,he=Mt.ceil,de=Mt.floor,me=St.getOwnPropertySymbols,ge=zt?zt.isBuffer:i,Oe=e.isFinite,We=Ct.join,mn=on(St.keys,St),gn=Mt.max,vn=Mt.min,_n=it.now,yn=e.parseInt,xn=Mt.random,bn=Ct.reverse,wn=la(e,"DataView"),Mn=la(e,"Map"),Sn=la(e,"Promise"),Tn=la(e,"Set"),En=la(e,"WeakMap"),An=la(St,"create"),Cn=En&&new En,Rn={},Dn=Oa(wn),Pn=Oa(Mn),Ln=Oa(Sn),Nn=Oa(Tn),In=Oa(En),Un=Ht?Ht.prototype:i,On=Un?Un.valueOf:i,Fn=Un?Un.toString:i;function kn(t){if(ts(t)&&!Go(t)&&!(t instanceof Vn)){if(t instanceof Hn)return t;if(Nt.call(t,"__wrapped__"))return Fa(t)}return new Hn(t)}var Bn=function(){function t(){}return function(e){if(!Jo(e))return{};if(jt)return jt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function zn(){}function Hn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new jn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Wn(t);this.size=e.size}function $n(t,e){var n=Go(t),r=!n&&Vo(t),i=!n&&!r&&Xo(t),a=!n&&!r&&!i&&ls(t),o=n||r||i||a,s=o?Xe(t.length,Et):[],l=s.length;for(var c in t)!e&&!Nt.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ma(c,l))||s.push(c);return s}function Yn(t){var e=t.length;return e?t[jr(0,e-1)]:i}function Kn(t,e){return Pa(Ei(t),ar(e,0,t.length))}function Zn(t){return Pa(Ei(t))}function Qn(t,e,n){(n!==i&&!Bo(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Jn(t,e,n){var r=t[e];Nt.call(t,e)&&Bo(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Bo(t[n][0],e))return n;return-1}function er(t,e,n,r){return ur(t,(function(t,i,a){e(r,t,n(t),a)})),r}function nr(t,e){return t&&Ai(e,Ds(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,a=e.length,o=r(a),s=null==t;++n<a;)o[n]=s?i:Ts(t,e[n]);return o}function ar(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function or(t,e,n,r,a,o){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=a?n(t,r,a,o):n(t)),s!==i)return s;if(!Jo(t))return t;var f=Go(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Ei(t,s)}else{var h=fa(t),d=h==x||h==b;if(Xo(t))return xi(t,l);if(h==S||h==m||d&&!a){if(s=c||d?{}:da(t),!l)return c?function(t,e){return Ai(t,ua(t),e)}(t,function(t,e){return t&&Ai(e,Ps(e),t)}(s,t)):function(t,e){return Ai(t,ca(t),e)}(t,nr(s,t))}else{if(!ae[h])return a?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case P:return bi(t);case v:case _:return new i(+t);case L:return function(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case I:case U:case O:case F:case k:case B:case z:case H:return wi(t,n);case w:return new i;case M:case C:return new i(t);case E:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new i;case R:return r=t,On?St(On.call(r)):{}}}(t,h,l)}}o||(o=new Xn);var p=o.get(t);if(p)return p;o.set(t,s),as(t)?t.forEach((function(r){s.add(or(r,e,n,r,t,o))})):es(t)&&t.forEach((function(r,i){s.set(i,or(r,e,n,i,t,o))}));var g=f?i:(u?c?ea:ta:c?Ps:Ds)(t);return Te(g||t,(function(r,i){g&&(r=t[i=r]),Jn(s,i,or(r,e,n,i,t,o))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=St(t);r--;){var a=n[r],o=e[a],s=t[a];if(s===i&&!(a in t)||!o(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new At(a);return Aa((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,a=Re,o=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=Pe(e,Ye(n))),r?(a=De,o=!1):e.length>=200&&(a=Ze,o=!1,e=new qn(e));t:for(;++i<s;){var u=t[i],f=null==n?u:n(u);if(u=r||0!==u?u:0,o&&f==f){for(var h=c;h--;)if(e[h]===f)continue t;l.push(u)}else a(e,f,r)||l.push(u)}return l}kn.templateSettings={escape:Y,evaluate:K,interpolate:Z,variable:"",imports:{_:kn}},kn.prototype=zn.prototype,kn.prototype.constructor=kn,Hn.prototype=Bn(zn.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Bn(zn.prototype),Vn.prototype.constructor=Vn,Gn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===o?i:n}return Nt.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Nt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?o:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,0))},Wn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Wn.prototype.has=function(t){return tr(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Mn||Wn),string:new Gn}},jn.prototype.delete=function(t){var e=oa(this,t).delete(t);return this.size-=e?1:0,e},jn.prototype.get=function(t){return oa(this,t).get(t)},jn.prototype.has=function(t){return oa(this,t).has(t)},jn.prototype.set=function(t,e){var n=oa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,o),this},qn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Mn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new jn(r)}return n.set(t,e),this.size=n.size,this};var ur=Di(_r),fr=Di(yr,!0);function hr(t,e){var n=!0;return ur(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,a=t.length;++r<a;){var o=t[r],s=e(o);if(null!=s&&(l===i?s==s&&!ss(s):n(s,l)))var l=s,c=o}return c}function pr(t,e){var n=[];return ur(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=pa),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?mr(s,e-1,n,r,i):Le(i,s):r||(i[i.length]=s)}return i}var gr=Pi(),vr=Pi(!0);function _r(t,e){return t&&gr(t,e,Ds)}function yr(t,e){return t&&vr(t,e,Ds)}function xr(t,e){return Ce(e,(function(e){return Ko(t[e])}))}function br(t,e){for(var n=0,r=(e=gi(e,t)).length;null!=t&&n<r;)t=t[Ua(e[n++])];return n&&n==r?t:i}function wr(t,e,n){var r=e(t);return Go(t)?r:Le(r,n(t))}function Mr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Qt&&Qt in St(t)?function(t){var e=Nt.call(t,Qt),n=t[Qt];try{t[Qt]=i;var r=!0}catch(t){}var a=Ot.call(t);return r&&(e?t[Qt]=n:delete t[Qt]),a}(t):function(t){return Ot.call(t)}(t)}function Sr(t,e){return t>e}function Tr(t,e){return null!=t&&Nt.call(t,e)}function Er(t,e){return null!=t&&e in St(t)}function Ar(t,e,n){for(var a=n?De:Re,o=t[0].length,s=t.length,l=s,c=r(s),u=1/0,f=[];l--;){var h=t[l];l&&e&&(h=Pe(h,Ye(e))),u=vn(h.length,u),c[l]=!n&&(e||o>=120&&h.length>=120)?new qn(l&&h):i}h=t[0];var d=-1,p=c[0];t:for(;++d<o&&f.length<u;){var m=h[d],g=e?e(m):m;if(m=n||0!==m?m:0,!(p?Ze(p,g):a(f,g,n))){for(l=s;--l;){var v=c[l];if(!(v?Ze(v,g):a(t[l],g,n)))continue t}p&&p.push(g),f.push(m)}}return f}function Cr(t,e,n){var r=null==(t=Sa(t,e=gi(e,t)))?t:t[Ua($a(e))];return null==r?i:Me(r,t,n)}function Rr(t){return ts(t)&&Mr(t)==m}function Dr(t,e,n,r,a){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,a,o){var s=Go(t),l=Go(e),c=s?g:fa(t),u=l?g:fa(e),f=(c=c==m?S:c)==S,h=(u=u==m?S:u)==S,d=c==u;if(d&&Xo(t)){if(!Xo(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Xn),s||ls(t)?Qi(t,e,n,r,a,o):function(t,e,n,r,i,a,o){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!a(new Vt(t),new Vt(e)));case v:case _:case M:return Bo(+t,+e);case y:return t.name==e.name&&t.message==e.message;case E:case C:return t==e+"";case w:var s=an;case A:var l=1&r;if(s||(s=ln),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=2,o.set(t,e);var u=Qi(s(t),s(e),r,i,a,o);return o.delete(t),u;case R:if(On)return On.call(t)==On.call(e)}return!1}(t,e,c,n,r,a,o);if(!(1&n)){var p=f&&Nt.call(t,"__wrapped__"),x=h&&Nt.call(e,"__wrapped__");if(p||x){var b=p?t.value():t,T=x?e.value():e;return o||(o=new Xn),a(b,T,n,r,o)}}return!!d&&(o||(o=new Xn),function(t,e,n,r,a,o){var s=1&n,l=ta(t),c=l.length;if(c!=ta(e).length&&!s)return!1;for(var u=c;u--;){var f=l[u];if(!(s?f in e:Nt.call(e,f)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var m=s;++u<c;){var g=t[f=l[u]],v=e[f];if(r)var _=s?r(v,g,f,e,t,o):r(g,v,f,t,e,o);if(!(_===i?g===v||a(g,v,n,r,o):_)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var y=t.constructor,x=e.constructor;y==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,a,o))}(t,e,n,r,Dr,a))}function Pr(t,e,n,r){var a=n.length,o=a,s=!r;if(null==t)return!o;for(t=St(t);a--;){var l=n[a];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<o;){var c=(l=n[a])[0],u=t[c],f=l[1];if(s&&l[2]){if(u===i&&!(c in t))return!1}else{var h=new Xn;if(r)var d=r(u,f,c,t,e,h);if(!(d===i?Dr(f,u,3,r,h):d))return!1}}return!0}function Lr(t){return!(!Jo(t)||(e=t,Ut&&Ut in e))&&(Ko(t)?Bt:mt).test(Oa(t));var e}function Nr(t){return"function"==typeof t?t:null==t?nl:"object"==typeof t?Go(t)?kr(t[0],t[1]):Fr(t):fl(t)}function Ir(t){if(!xa(t))return mn(t);var e=[];for(var n in St(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ur(t,e){return t<e}function Or(t,e){var n=-1,i=jo(t)?r(t.length):[];return ur(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Fr(t){var e=sa(t);return 1==e.length&&e[0][2]?wa(e[0][0],e[0][1]):function(n){return n===t||Pr(n,t,e)}}function kr(t,e){return va(t)&&ba(e)?wa(Ua(t),e):function(n){var r=Ts(n,t);return r===i&&r===e?Es(n,t):Dr(e,r,3)}}function Br(t,e,n,r,a){t!==e&&gr(e,(function(o,s){if(a||(a=new Xn),Jo(o))!function(t,e,n,r,a,o,s){var l=Ta(t,n),c=Ta(e,n),u=s.get(c);if(u)Qn(t,n,u);else{var f=o?o(l,c,n+"",t,e,s):i,h=f===i;if(h){var d=Go(c),p=!d&&Xo(c),m=!d&&!p&&ls(c);f=c,d||p||m?Go(l)?f=l:qo(l)?f=Ei(l):p?(h=!1,f=xi(c,!0)):m?(h=!1,f=wi(c,!0)):f=[]:rs(c)||Vo(c)?(f=l,Vo(l)?f=gs(l):Jo(l)&&!Ko(l)||(f=da(c))):h=!1}h&&(s.set(c,f),a(f,c,r,o,s),s.delete(c)),Qn(t,n,f)}}(t,e,s,n,Br,r,a);else{var l=r?r(Ta(t,s),o,s+"",t,e,a):i;l===i&&(l=o),Qn(t,s,l)}}),Ps)}function zr(t,e){var n=t.length;if(n)return ma(e+=e<0?n:0,n)?t[e]:i}function Hr(t,e,n){e=e.length?Pe(e,(function(t){return Go(t)?function(e){return br(e,1===t.length?t[0]:t)}:t})):[nl];var r=-1;e=Pe(e,Ye(aa()));var i=Or(t,(function(t,n,i){var a=Pe(e,(function(e){return e(t)}));return{criteria:a,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var l=Mi(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Vr(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=br(t,o);n(s,o)&&Kr(a,gi(o,t),s)}return a}function Gr(t,e,n,r){var i=r?ze:Be,a=-1,o=e.length,s=t;for(t===e&&(e=Ei(e)),n&&(s=Pe(t,Ye(n)));++a<o;)for(var l=0,c=e[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==t&&Xt.call(s,l,1),Xt.call(t,l,1);return t}function Wr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;ma(i)?Xt.call(t,i,1):li(t,i)}}return t}function jr(t,e){return t+de(xn()*(e-t+1))}function qr(t,e){var n="";if(!t||e<1||e>f)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Ca(Ma(t,e,nl),t+"")}function $r(t){return Yn(Bs(t))}function Yr(t,e){var n=Bs(t);return Pa(n,ar(e,0,n.length))}function Kr(t,e,n,r){if(!Jo(t))return t;for(var a=-1,o=(e=gi(e,t)).length,s=o-1,l=t;null!=l&&++a<o;){var c=Ua(e[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(a!=s){var f=l[c];(u=r?r(f,c,l):i)===i&&(u=Jo(f)?f:ma(e[a+1])?[]:{})}Jn(l,c,u),l=l[c]}return t}var Zr=Cn?function(t,e){return Cn.set(t,e),t}:nl,Qr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Js(e),writable:!0})}:nl;function Jr(t){return Pa(Bs(t))}function ti(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=r(a);++i<a;)o[i]=t[i+e];return o}function ei(t,e){var n;return ur(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!ss(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return ri(t,e,nl,n)}function ri(t,e,n,r){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,l=null===e,c=ss(e),u=e===i;a<o;){var f=de((a+o)/2),h=n(t[f]),d=h!==i,p=null===h,m=h==h,g=ss(h);if(s)var v=r||m;else v=u?m&&(r||d):l?m&&d&&(r||!p):c?m&&d&&!p&&(r||!g):!p&&!g&&(r?h<=e:h<e);v?a=f+1:o=f}return vn(o,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!Bo(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ai(t){return"number"==typeof t?t:ss(t)?h:+t}function oi(t){if("string"==typeof t)return t;if(Go(t))return Pe(t,oi)+"";if(ss(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Re,a=t.length,o=!0,s=[],l=s;if(n)o=!1,i=De;else if(a>=200){var c=e?null:qi(t);if(c)return ln(c);o=!1,i=Ze,l=new qn}else l=e?[]:s;t:for(;++r<a;){var u=t[r],f=e?e(u):u;if(u=n||0!==u?u:0,o&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue t;e&&l.push(f),s.push(u)}else i(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s}function li(t,e){return null==(t=Sa(t,e=gi(e,t)))||delete t[Ua($a(e))]}function ci(t,e,n,r){return Kr(t,e,n(br(t,e)),r)}function ui(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ti(t,r?0:a,r?a+1:i):ti(t,r?a+1:0,r?i:a)}function fi(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),n)}function hi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=t[a],l=-1;++l<i;)l!=a&&(o[a]=cr(o[a]||s,t[l],e,n));return si(mr(o,1),e,n)}function di(t,e,n){for(var r=-1,a=t.length,o=e.length,s={};++r<a;){var l=r<o?e[r]:i;n(s,t[r],l)}return s}function pi(t){return qo(t)?t:[]}function mi(t){return"function"==typeof t?t:nl}function gi(t,e){return Go(t)?t:va(t,e)?[t]:Ia(vs(t))}var vi=Xr;function _i(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var yi=oe||function(t){return fe.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function bi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function wi(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==i,r=null===t,a=t==t,o=ss(t),s=e!==i,l=null===e,c=e==e,u=ss(e);if(!l&&!u&&!o&&t>e||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&t<e||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function Si(t,e,n,i){for(var a=-1,o=t.length,s=n.length,l=-1,c=e.length,u=gn(o-s,0),f=r(c+u),h=!i;++l<c;)f[l]=e[l];for(;++a<s;)(h||a<o)&&(f[n[a]]=t[a]);for(;u--;)f[l++]=t[a++];return f}function Ti(t,e,n,i){for(var a=-1,o=t.length,s=-1,l=n.length,c=-1,u=e.length,f=gn(o-l,0),h=r(f+u),d=!i;++a<f;)h[a]=t[a];for(var p=a;++c<u;)h[p+c]=e[c];for(;++s<l;)(d||a<o)&&(h[p+n[s]]=t[a++]);return h}function Ei(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ai(t,e,n,r){var a=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),a?rr(n,l,c):Jn(n,l,c)}return n}function Ci(t,e){return function(n,r){var i=Go(n)?Se:er,a=e?e():{};return i(n,t,aa(r,2),a)}}function Ri(t){return Xr((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(a--,o):i,s&&ga(n[0],n[1],s)&&(o=a<3?i:o,a=1),e=St(e);++r<a;){var l=n[r];l&&t(e,l,r,o)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!jo(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=St(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Pi(t){return function(e,n,r){for(var i=-1,a=St(e),o=r(e),s=o.length;s--;){var l=o[t?s:++i];if(!1===n(a[l],l,a))break}return e}}function Li(t){return function(e){var n=rn(e=vs(e))?fn(e):i,r=n?n[0]:e.charAt(0),a=n?_i(n,1).join(""):e.slice(1);return r[t]()+a}}function Ni(t){return function(e){return Ne(Ks(Vs(e).replace(Kt,"")),t,"")}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),r=t.apply(n,e);return Jo(r)?r:n}}function Ui(t){return function(e,n,r){var a=St(e);if(!jo(e)){var o=aa(n,3);e=Ds(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,r);return s>-1?a[o?e[s]:s]:i}}function Oi(t){return Ji((function(e){var n=e.length,r=n,o=Hn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new At(a);if(o&&!l&&"wrapper"==ra(s))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var c=ra(s=e[r]),u="wrapper"==c?na(s):i;l=u&&_a(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ra(u[0])].apply(l,u[3]):1==s.length&&_a(s)?l[c]():l.thru(s)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Go(r))return l.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function Fi(t,e,n,a,o,s,l,u,f,h){var d=e&c,p=1&e,m=2&e,g=24&e,v=512&e,_=m?i:Ii(t);return function c(){for(var y=arguments.length,x=r(y),b=y;b--;)x[b]=arguments[b];if(g)var w=ia(c),M=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(x,w);if(a&&(x=Si(x,a,o,g)),s&&(x=Ti(x,s,l,g)),y-=M,g&&y<h){var S=sn(x,w);return Wi(t,e,Fi,c.placeholder,n,x,S,u,f,h-y)}var T=p?n:this,E=m?T[t]:t;return y=x.length,u?x=function(t,e){for(var n=t.length,r=vn(e.length,n),a=Ei(t);r--;){var o=e[r];t[r]=ma(o,n)?a[o]:i}return t}(x,u):v&&y>1&&x.reverse(),d&&f<y&&(x.length=f),this&&this!==fe&&this instanceof c&&(E=_||Ii(E)),E.apply(T,x)}}function ki(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function Bi(t,e){return function(n,r){var a;if(n===i&&r===i)return e;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=oi(n),r=oi(r)):(n=ai(n),r=ai(r)),a=t(n,r)}return a}}function zi(t){return Ji((function(e){return e=Pe(e,Ye(aa())),Xr((function(n){var r=this;return t(e,(function(t){return Me(t,r,n)}))}))}))}function Hi(t,e){var n=(e=e===i?" ":oi(e)).length;if(n<2)return n?qr(e,t):e;var r=qr(e,he(t/un(e)));return rn(e)?_i(fn(r),0,t).join(""):r.slice(0,t)}function Vi(t){return function(e,n,a){return a&&"number"!=typeof a&&ga(e,n,a)&&(n=a=i),e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n,i){for(var a=-1,o=gn(he((e-t)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=t,t+=n;return s}(e,n,a=a===i?e<n?1:-1:hs(a),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Wi(t,e,n,r,a,o,s,c,u,f){var h=8&e;e|=h?l:64,4&(e&=~(h?64:l))||(e&=-4);var d=[t,e,a,h?o:i,h?s:i,h?i:o,h?i:s,c,u,f],p=n.apply(i,d);return _a(t)&&Ea(p,d),p.placeholder=r,Ra(p,t,e)}function ji(t){var e=Mt[t];return function(t,n){if(t=ms(t),(n=null==n?0:vn(ds(n),292))&&Oe(t)){var r=(vs(t)+"e").split("e");return+((r=(vs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var qi=Tn&&1/ln(new Tn([,-0]))[1]==u?function(t){return new Tn(t)}:sl;function Xi(t){return function(e){var n=fa(e);return n==w?an(e):n==A?cn(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $i(t,e,n,o,u,f,h,d){var p=2&e;if(!p&&"function"!=typeof t)throw new At(a);var m=o?o.length:0;if(m||(e&=-97,o=u=i),h=h===i?h:gn(ds(h),0),d=d===i?d:ds(d),m-=u?u.length:0,64&e){var g=o,v=u;o=u=i}var _=p?i:na(t),y=[t,e,n,o,u,g,v,f,h,d];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,o=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Si(u,l,e[4]):l,t[4]=u?sn(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Ti(u,l,e[6]):l,t[6]=u?sn(t[5],s):e[6]),(l=e[7])&&(t[7]=l),r&c&&(t[8]=null==t[8]?e[8]:vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(y,_),t=y[0],e=y[1],n=y[2],o=y[3],u=y[4],!(d=y[9]=y[9]===i?p?0:t.length:gn(y[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var a=Ii(t);return function o(){for(var s=arguments.length,l=r(s),c=s,u=ia(o);c--;)l[c]=arguments[c];var f=s<3&&l[0]!==u&&l[s-1]!==u?[]:sn(l,u);return(s-=f.length)<n?Wi(t,e,Fi,o.placeholder,i,l,f,i,i,n-s):Me(this&&this!==fe&&this instanceof o?a:t,this,l)}}(t,e,d):e!=l&&33!=e||u.length?Fi.apply(i,y):function(t,e,n,i){var a=1&e,o=Ii(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=i.length,f=r(u+l),h=this&&this!==fe&&this instanceof e?o:t;++c<u;)f[c]=i[c];for(;l--;)f[c++]=arguments[++s];return Me(h,a?n:this,f)}}(t,e,n,o);else var x=function(t,e,n){var r=1&e,i=Ii(t);return function e(){return(this&&this!==fe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ra((_?Zr:Ea)(x,y),t,e)}function Yi(t,e,n,r){return t===i||Bo(t,Dt[n])&&!Nt.call(r,n)?e:t}function Ki(t,e,n,r,a,o){return Jo(t)&&Jo(e)&&(o.set(e,t),Br(t,e,i,Ki,o),o.delete(e)),t}function Zi(t){return rs(t)?i:t}function Qi(t,e,n,r,a,o){var s=1&n,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(t),f=o.get(e);if(u&&f)return u==e&&f==t;var h=-1,d=!0,p=2&n?new qn:i;for(o.set(t,e),o.set(e,t);++h<l;){var m=t[h],g=e[h];if(r)var v=s?r(g,m,h,e,t,o):r(m,g,h,t,e,o);if(v!==i){if(v)continue;d=!1;break}if(p){if(!Ue(e,(function(t,e){if(!Ze(p,e)&&(m===t||a(m,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(m!==g&&!a(m,g,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Ji(t){return Ca(Ma(t,i,Ga),t+"")}function ta(t){return wr(t,Ds,ca)}function ea(t){return wr(t,Ps,ua)}var na=Cn?function(t){return Cn.get(t)}:sl;function ra(t){for(var e=t.name+"",n=Rn[e],r=Nt.call(Rn,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function ia(t){return(Nt.call(kn,"placeholder")?kn:t).placeholder}function aa(){var t=kn.iteratee||rl;return t=t===rl?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function oa(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function sa(t){for(var e=Ds(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ba(i)]}return e}function la(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Lr(n)?n:i}var ca=me?function(t){return null==t?[]:(t=St(t),Ce(me(t),(function(e){return qt.call(t,e)})))}:pl,ua=me?function(t){for(var e=[];t;)Le(e,ca(t)),t=Wt(t);return e}:pl,fa=Mr;function ha(t,e,n){for(var r=-1,i=(e=gi(e,t)).length,a=!1;++r<i;){var o=Ua(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Qo(i)&&ma(o,i)&&(Go(t)||Vo(t))}function da(t){return"function"!=typeof t.constructor||xa(t)?{}:Bn(Wt(t))}function pa(t){return Go(t)||Vo(t)||!!($t&&t&&t[$t])}function ma(t,e){var n=typeof t;return!!(e=null==e?f:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function ga(t,e,n){if(!Jo(n))return!1;var r=typeof e;return!!("number"==r?jo(n)&&ma(e,n.length):"string"==r&&e in n)&&Bo(n[e],t)}function va(t,e){if(Go(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||J.test(t)||!Q.test(t)||null!=e&&t in St(e)}function _a(t){var e=ra(t),n=kn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=na(n);return!!r&&t===r[0]}(wn&&fa(new wn(new ArrayBuffer(1)))!=L||Mn&&fa(new Mn)!=w||Sn&&fa(Sn.resolve())!=T||Tn&&fa(new Tn)!=A||En&&fa(new En)!=D)&&(fa=function(t){var e=Mr(t),n=e==S?t.constructor:i,r=n?Oa(n):"";if(r)switch(r){case Dn:return L;case Pn:return w;case Ln:return T;case Nn:return A;case In:return D}return e});var ya=Pt?Ko:ml;function xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function ba(t){return t==t&&!Jo(t)}function wa(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in St(n))}}function Ma(t,e,n){return e=gn(e===i?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=gn(i.length-e,0),s=r(o);++a<o;)s[a]=i[e+a];a=-1;for(var l=r(e+1);++a<e;)l[a]=i[a];return l[e]=n(s),Me(t,this,l)}}function Sa(t,e){return e.length<2?t:br(t,ti(e,0,-1))}function Ta(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ea=Da(Zr),Aa=ue||function(t,e){return fe.setTimeout(t,e)},Ca=Da(Qr);function Ra(t,e,n){var r=e+"";return Ca(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Te(p,(function(n){var r="_."+n[0];e&n[1]&&!Re(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(st):[]}(r),n)))}function Da(t){var e=0,n=0;return function(){var r=_n(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Pa(t,e){var n=-1,r=t.length,a=r-1;for(e=e===i?r:e;++n<e;){var o=jr(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var La,Na,Ia=(La=No((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ut,"$1"):n||t)})),e}),(function(t){return 500===Na.size&&Na.clear(),t})),Na=La.cache,La);function Ua(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Oa(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fa(t){if(t instanceof Vn)return t.clone();var e=new Hn(t.__wrapped__,t.__chain__);return e.__actions__=Ei(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ka=Xr((function(t,e){return qo(t)?cr(t,mr(e,1,qo,!0)):[]})),Ba=Xr((function(t,e){var n=$a(e);return qo(n)&&(n=i),qo(t)?cr(t,mr(e,1,qo,!0),aa(n,2)):[]})),za=Xr((function(t,e){var n=$a(e);return qo(n)&&(n=i),qo(t)?cr(t,mr(e,1,qo,!0),i,n):[]}));function Ha(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=gn(r+i,0)),ke(t,aa(e,3),i)}function Va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ds(n),a=n<0?gn(r+a,0):vn(a,r-1)),ke(t,aa(e,3),a,!0)}function Ga(t){return null!=t&&t.length?mr(t,1):[]}function Wa(t){return t&&t.length?t[0]:i}var ja=Xr((function(t){var e=Pe(t,pi);return e.length&&e[0]===t[0]?Ar(e):[]})),qa=Xr((function(t){var e=$a(t),n=Pe(t,pi);return e===$a(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,aa(e,2)):[]})),Xa=Xr((function(t){var e=$a(t),n=Pe(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function $a(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ya=Xr(Ka);function Ka(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var Za=Ji((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Wr(t,Pe(e,(function(t){return ma(t,n)?+t:t})).sort(Mi)),r}));function Qa(t){return null==t?t:bn.call(t)}var Ja=Xr((function(t){return si(mr(t,1,qo,!0))})),to=Xr((function(t){var e=$a(t);return qo(e)&&(e=i),si(mr(t,1,qo,!0),aa(e,2))})),eo=Xr((function(t){var e=$a(t);return e="function"==typeof e?e:i,si(mr(t,1,qo,!0),i,e)}));function no(t){if(!t||!t.length)return[];var e=0;return t=Ce(t,(function(t){if(qo(t))return e=gn(t.length,e),!0})),Xe(e,(function(e){return Pe(t,Ge(e))}))}function ro(t,e){if(!t||!t.length)return[];var n=no(t);return null==e?n:Pe(n,(function(t){return Me(e,i,t)}))}var io=Xr((function(t,e){return qo(t)?cr(t,e):[]})),ao=Xr((function(t){return hi(Ce(t,qo))})),oo=Xr((function(t){var e=$a(t);return qo(e)&&(e=i),hi(Ce(t,qo),aa(e,2))})),so=Xr((function(t){var e=$a(t);return e="function"==typeof e?e:i,hi(Ce(t,qo),i,e)})),lo=Xr(no),co=Xr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ro(t,n)}));function uo(t){var e=kn(t);return e.__chain__=!0,e}function fo(t,e){return e(t)}var ho=Ji((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Vn&&ma(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(a)})),po=Ci((function(t,e,n){Nt.call(t,n)?++t[n]:rr(t,n,1)})),mo=Ui(Ha),go=Ui(Va);function vo(t,e){return(Go(t)?Te:ur)(t,aa(e,3))}function _o(t,e){return(Go(t)?Ee:fr)(t,aa(e,3))}var yo=Ci((function(t,e,n){Nt.call(t,n)?t[n].push(e):rr(t,n,[e])})),xo=Xr((function(t,e,n){var i=-1,a="function"==typeof e,o=jo(t)?r(t.length):[];return ur(t,(function(t){o[++i]=a?Me(e,t,n):Cr(t,e,n)})),o})),bo=Ci((function(t,e,n){rr(t,n,e)}));function wo(t,e){return(Go(t)?Pe:Or)(t,aa(e,3))}var Mo=Ci((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),So=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ga(t,e[0],e[1])?e=[]:n>2&&ga(e[0],e[1],e[2])&&(e=[e[0]]),Hr(t,mr(e,1),[])})),To=ce||function(){return fe.Date.now()};function Eo(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,$i(t,c,i,i,i,i,e)}function Ao(t,e){var n;if("function"!=typeof e)throw new At(a);return t=ds(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Co=Xr((function(t,e,n){var r=1;if(n.length){var i=sn(n,ia(Co));r|=l}return $i(t,r,e,n,i)})),Ro=Xr((function(t,e,n){var r=3;if(n.length){var i=sn(n,ia(Ro));r|=l}return $i(e,r,t,n,i)}));function Do(t,e,n){var r,o,s,l,c,u,f=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new At(a);function m(e){var n=r,a=o;return r=o=i,f=e,l=t.apply(a,n)}function g(t){var n=t-u;return u===i||n>=e||n<0||d&&t-f>=s}function v(){var t=To();if(g(t))return _(t);c=Aa(v,function(t){var n=e-(t-u);return d?vn(n,s-(t-f)):n}(t))}function _(t){return c=i,p&&r?m(t):(r=o=i,l)}function y(){var t=To(),n=g(t);if(r=arguments,o=this,u=t,n){if(c===i)return function(t){return f=t,c=Aa(v,e),h?m(t):l}(u);if(d)return yi(c),c=Aa(v,e),m(u)}return c===i&&(c=Aa(v,e)),l}return e=ms(e)||0,Jo(n)&&(h=!!n.leading,s=(d="maxWait"in n)?gn(ms(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==i&&yi(c),f=0,r=u=o=c=i},y.flush=function(){return c===i?l:_(To())},y}var Po=Xr((function(t,e){return lr(t,1,e)})),Lo=Xr((function(t,e,n){return lr(t,ms(e)||0,n)}));function No(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(No.Cache||jn),n}function Io(t){if("function"!=typeof t)throw new At(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}No.Cache=jn;var Uo=vi((function(t,e){var n=(e=1==e.length&&Go(e[0])?Pe(e[0],Ye(aa())):Pe(mr(e,1),Ye(aa()))).length;return Xr((function(r){for(var i=-1,a=vn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Me(t,this,r)}))})),Oo=Xr((function(t,e){var n=sn(e,ia(Oo));return $i(t,l,i,e,n)})),Fo=Xr((function(t,e){var n=sn(e,ia(Fo));return $i(t,64,i,e,n)})),ko=Ji((function(t,e){return $i(t,256,i,i,i,e)}));function Bo(t,e){return t===e||t!=t&&e!=e}var zo=Gi(Sr),Ho=Gi((function(t,e){return t>=e})),Vo=Rr(function(){return arguments}())?Rr:function(t){return ts(t)&&Nt.call(t,"callee")&&!qt.call(t,"callee")},Go=r.isArray,Wo=ve?Ye(ve):function(t){return ts(t)&&Mr(t)==P};function jo(t){return null!=t&&Qo(t.length)&&!Ko(t)}function qo(t){return ts(t)&&jo(t)}var Xo=ge||ml,$o=_e?Ye(_e):function(t){return ts(t)&&Mr(t)==_};function Yo(t){if(!ts(t))return!1;var e=Mr(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Ko(t){if(!Jo(t))return!1;var e=Mr(t);return e==x||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zo(t){return"number"==typeof t&&t==ds(t)}function Qo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function Jo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=ye?Ye(ye):function(t){return ts(t)&&fa(t)==w};function ns(t){return"number"==typeof t||ts(t)&&Mr(t)==M}function rs(t){if(!ts(t)||Mr(t)!=S)return!1;var e=Wt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==Ft}var is=xe?Ye(xe):function(t){return ts(t)&&Mr(t)==E},as=be?Ye(be):function(t){return ts(t)&&fa(t)==A};function os(t){return"string"==typeof t||!Go(t)&&ts(t)&&Mr(t)==C}function ss(t){return"symbol"==typeof t||ts(t)&&Mr(t)==R}var ls=we?Ye(we):function(t){return ts(t)&&Qo(t.length)&&!!ie[Mr(t)]},cs=Gi(Ur),us=Gi((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(jo(t))return os(t)?fn(t):Ei(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=fa(t);return(e==w?an:e==A?ln:Bs)(t)}function hs(t){return t?(t=ms(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ds(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function ps(t){return t?ar(ds(t),0,d):0}function ms(t){if("number"==typeof t)return t;if(ss(t))return h;if(Jo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=pt.test(t);return n||gt.test(t)?le(t.slice(2),n?2:8):dt.test(t)?h:+t}function gs(t){return Ai(t,Ps(t))}function vs(t){return null==t?"":oi(t)}var _s=Ri((function(t,e){if(xa(e)||jo(e))Ai(e,Ds(e),t);else for(var n in e)Nt.call(e,n)&&Jn(t,n,e[n])})),ys=Ri((function(t,e){Ai(e,Ps(e),t)})),xs=Ri((function(t,e,n,r){Ai(e,Ps(e),t,r)})),bs=Ri((function(t,e,n,r){Ai(e,Ds(e),t,r)})),ws=Ji(ir),Ms=Xr((function(t,e){t=St(t);var n=-1,r=e.length,a=r>2?e[2]:i;for(a&&ga(e[0],e[1],a)&&(r=1);++n<r;)for(var o=e[n],s=Ps(o),l=-1,c=s.length;++l<c;){var u=s[l],f=t[u];(f===i||Bo(f,Dt[u])&&!Nt.call(t,u))&&(t[u]=o[u])}return t})),Ss=Xr((function(t){return t.push(i,Ki),Me(Ns,i,t)}));function Ts(t,e,n){var r=null==t?i:br(t,e);return r===i?n:r}function Es(t,e){return null!=t&&ha(t,e,Er)}var As=ki((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),t[e]=n}),Js(nl)),Cs=ki((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),aa),Rs=Xr(Cr);function Ds(t){return jo(t)?$n(t):Ir(t)}function Ps(t){return jo(t)?$n(t,!0):function(t){if(!Jo(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=xa(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}(t)}var Ls=Ri((function(t,e,n){Br(t,e,n)})),Ns=Ri((function(t,e,n,r){Br(t,e,n,r)})),Is=Ji((function(t,e){var n={};if(null==t)return n;var r=!1;e=Pe(e,(function(e){return e=gi(e,t),r||(r=e.length>1),e})),Ai(t,ea(t),n),r&&(n=or(n,7,Zi));for(var i=e.length;i--;)li(n,e[i]);return n})),Us=Ji((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return Es(t,n)}))}(t,e)}));function Os(t,e){if(null==t)return{};var n=Pe(ea(t),(function(t){return[t]}));return e=aa(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var Fs=Xi(Ds),ks=Xi(Ps);function Bs(t){return null==t?[]:Ke(t,Ds(t))}var zs=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Hs(e):e)}));function Hs(t){return Ys(vs(t).toLowerCase())}function Vs(t){return(t=vs(t))&&t.replace(_t,tn).replace(Zt,"")}var Gs=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),js=Li("toLowerCase"),qs=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Xs=Ni((function(t,e,n){return t+(n?" ":"")+Ys(e)})),$s=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ys=Li("toUpperCase");function Ks(t,e,n){return t=vs(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Zs=Xr((function(t,e){try{return Me(t,i,e)}catch(t){return Yo(t)?t:new bt(t)}})),Qs=Ji((function(t,e){return Te(e,(function(e){e=Ua(e),rr(t,e,Co(t[e],t))})),t}));function Js(t){return function(){return t}}var tl=Oi(),el=Oi(!0);function nl(t){return t}function rl(t){return Nr("function"==typeof t?t:or(t,1))}var il=Xr((function(t,e){return function(n){return Cr(n,t,e)}})),al=Xr((function(t,e){return function(n){return Cr(t,n,e)}}));function ol(t,e,n){var r=Ds(e),i=xr(e,r);null!=n||Jo(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Ds(e)));var a=!(Jo(n)&&"chain"in n&&!n.chain),o=Ko(t);return Te(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Ei(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Le([this.value()],arguments))})})),t}function sl(){}var ll=zi(Pe),cl=zi(Ae),ul=zi(Ue);function fl(t){return va(t)?Ge(Ua(t)):function(t){return function(e){return br(e,t)}}(t)}var hl=Vi(),dl=Vi(!0);function pl(){return[]}function ml(){return!1}var gl,vl=Bi((function(t,e){return t+e}),0),_l=ji("ceil"),yl=Bi((function(t,e){return t/e}),1),xl=ji("floor"),bl=Bi((function(t,e){return t*e}),1),wl=ji("round"),Ml=Bi((function(t,e){return t-e}),0);return kn.after=function(t,e){if("function"!=typeof e)throw new At(a);return t=ds(t),function(){if(--t<1)return e.apply(this,arguments)}},kn.ary=Eo,kn.assign=_s,kn.assignIn=ys,kn.assignInWith=xs,kn.assignWith=bs,kn.at=ws,kn.before=Ao,kn.bind=Co,kn.bindAll=Qs,kn.bindKey=Ro,kn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Go(t)?t:[t]},kn.chain=uo,kn.chunk=function(t,e,n){e=(n?ga(t,e,n):e===i)?1:gn(ds(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var o=0,s=0,l=r(he(a/e));o<a;)l[s++]=ti(t,o,o+=e);return l},kn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},kn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Le(Go(n)?Ei(n):[n],mr(e,1))},kn.cond=function(t){var e=null==t?0:t.length,n=aa();return t=e?Pe(t,(function(t){if("function"!=typeof t[1])throw new At(a);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Me(i[0],this,n))return Me(i[1],this,n)}}))},kn.conforms=function(t){return function(t){var e=Ds(t);return function(n){return sr(n,t,e)}}(or(t,1))},kn.constant=Js,kn.countBy=po,kn.create=function(t,e){var n=Bn(t);return null==e?n:nr(n,e)},kn.curry=function t(e,n,r){var a=$i(e,8,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},kn.curryRight=function t(e,n,r){var a=$i(e,16,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},kn.debounce=Do,kn.defaults=Ms,kn.defaultsDeep=Ss,kn.defer=Po,kn.delay=Lo,kn.difference=ka,kn.differenceBy=Ba,kn.differenceWith=za,kn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ds(e))<0?0:e,r):[]},kn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ds(e)))<0?0:e):[]},kn.dropRightWhile=function(t,e){return t&&t.length?ui(t,aa(e,3),!0,!0):[]},kn.dropWhile=function(t,e){return t&&t.length?ui(t,aa(e,3),!0):[]},kn.fill=function(t,e,n,r){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&ga(t,e,n)&&(n=0,r=a),function(t,e,n,r){var a=t.length;for((n=ds(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ds(r))<0&&(r+=a),r=n>r?0:ps(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},kn.filter=function(t,e){return(Go(t)?Ce:pr)(t,aa(e,3))},kn.flatMap=function(t,e){return mr(wo(t,e),1)},kn.flatMapDeep=function(t,e){return mr(wo(t,e),u)},kn.flatMapDepth=function(t,e,n){return n=n===i?1:ds(n),mr(wo(t,e),n)},kn.flatten=Ga,kn.flattenDeep=function(t){return null!=t&&t.length?mr(t,u):[]},kn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ds(e)):[]},kn.flip=function(t){return $i(t,512)},kn.flow=tl,kn.flowRight=el,kn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},kn.functions=function(t){return null==t?[]:xr(t,Ds(t))},kn.functionsIn=function(t){return null==t?[]:xr(t,Ps(t))},kn.groupBy=yo,kn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},kn.intersection=ja,kn.intersectionBy=qa,kn.intersectionWith=Xa,kn.invert=As,kn.invertBy=Cs,kn.invokeMap=xo,kn.iteratee=rl,kn.keyBy=bo,kn.keys=Ds,kn.keysIn=Ps,kn.map=wo,kn.mapKeys=function(t,e){var n={};return e=aa(e,3),_r(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},kn.mapValues=function(t,e){var n={};return e=aa(e,3),_r(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},kn.matches=function(t){return Fr(or(t,1))},kn.matchesProperty=function(t,e){return kr(t,or(e,1))},kn.memoize=No,kn.merge=Ls,kn.mergeWith=Ns,kn.method=il,kn.methodOf=al,kn.mixin=ol,kn.negate=Io,kn.nthArg=function(t){return t=ds(t),Xr((function(e){return zr(e,t)}))},kn.omit=Is,kn.omitBy=function(t,e){return Os(t,Io(aa(e)))},kn.once=function(t){return Ao(2,t)},kn.orderBy=function(t,e,n,r){return null==t?[]:(Go(e)||(e=null==e?[]:[e]),Go(n=r?i:n)||(n=null==n?[]:[n]),Hr(t,e,n))},kn.over=ll,kn.overArgs=Uo,kn.overEvery=cl,kn.overSome=ul,kn.partial=Oo,kn.partialRight=Fo,kn.partition=Mo,kn.pick=Us,kn.pickBy=Os,kn.property=fl,kn.propertyOf=function(t){return function(e){return null==t?i:br(t,e)}},kn.pull=Ya,kn.pullAll=Ka,kn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,aa(n,2)):t},kn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,i,n):t},kn.pullAt=Za,kn.range=hl,kn.rangeRight=dl,kn.rearg=ko,kn.reject=function(t,e){return(Go(t)?Ce:pr)(t,Io(aa(e,3)))},kn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=aa(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Wr(t,i),n},kn.rest=function(t,e){if("function"!=typeof t)throw new At(a);return Xr(t,e=e===i?e:ds(e))},kn.reverse=Qa,kn.sampleSize=function(t,e,n){return e=(n?ga(t,e,n):e===i)?1:ds(e),(Go(t)?Kn:Yr)(t,e)},kn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},kn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},kn.shuffle=function(t){return(Go(t)?Zn:Jr)(t)},kn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ga(t,e,n)?(e=0,n=r):(e=null==e?0:ds(e),n=n===i?r:ds(n)),ti(t,e,n)):[]},kn.sortBy=So,kn.sortedUniq=function(t){return t&&t.length?ii(t):[]},kn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,aa(e,2)):[]},kn.split=function(t,e,n){return n&&"number"!=typeof n&&ga(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=oi(e))&&rn(t)?_i(fn(t),0,n):t.split(e,n):[]},kn.spread=function(t,e){if("function"!=typeof t)throw new At(a);return e=null==e?0:gn(ds(e),0),Xr((function(n){var r=n[e],i=_i(n,0,e);return r&&Le(i,r),Me(t,this,i)}))},kn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},kn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ds(e))<0?0:e):[]},kn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ds(e)))<0?0:e,r):[]},kn.takeRightWhile=function(t,e){return t&&t.length?ui(t,aa(e,3),!1,!0):[]},kn.takeWhile=function(t,e){return t&&t.length?ui(t,aa(e,3)):[]},kn.tap=function(t,e){return e(t),t},kn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new At(a);return Jo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Do(t,e,{leading:r,maxWait:e,trailing:i})},kn.thru=fo,kn.toArray=fs,kn.toPairs=Fs,kn.toPairsIn=ks,kn.toPath=function(t){return Go(t)?Pe(t,Ua):ss(t)?[t]:Ei(Ia(vs(t)))},kn.toPlainObject=gs,kn.transform=function(t,e,n){var r=Go(t),i=r||Xo(t)||ls(t);if(e=aa(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Jo(t)&&Ko(a)?Bn(Wt(t)):{}}return(i?Te:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},kn.unary=function(t){return Eo(t,1)},kn.union=Ja,kn.unionBy=to,kn.unionWith=eo,kn.uniq=function(t){return t&&t.length?si(t):[]},kn.uniqBy=function(t,e){return t&&t.length?si(t,aa(e,2)):[]},kn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},kn.unset=function(t,e){return null==t||li(t,e)},kn.unzip=no,kn.unzipWith=ro,kn.update=function(t,e,n){return null==t?t:ci(t,e,mi(n))},kn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,mi(n),r)},kn.values=Bs,kn.valuesIn=function(t){return null==t?[]:Ke(t,Ps(t))},kn.without=io,kn.words=Ks,kn.wrap=function(t,e){return Oo(mi(e),t)},kn.xor=ao,kn.xorBy=oo,kn.xorWith=so,kn.zip=lo,kn.zipObject=function(t,e){return di(t||[],e||[],Jn)},kn.zipObjectDeep=function(t,e){return di(t||[],e||[],Kr)},kn.zipWith=co,kn.entries=Fs,kn.entriesIn=ks,kn.extend=ys,kn.extendWith=xs,ol(kn,kn),kn.add=vl,kn.attempt=Zs,kn.camelCase=zs,kn.capitalize=Hs,kn.ceil=_l,kn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ms(n))==n?n:0),e!==i&&(e=(e=ms(e))==e?e:0),ar(ms(t),e,n)},kn.clone=function(t){return or(t,4)},kn.cloneDeep=function(t){return or(t,5)},kn.cloneDeepWith=function(t,e){return or(t,5,e="function"==typeof e?e:i)},kn.cloneWith=function(t,e){return or(t,4,e="function"==typeof e?e:i)},kn.conformsTo=function(t,e){return null==e||sr(t,e,Ds(e))},kn.deburr=Vs,kn.defaultTo=function(t,e){return null==t||t!=t?e:t},kn.divide=yl,kn.endsWith=function(t,e,n){t=vs(t),e=oi(e);var r=t.length,a=n=n===i?r:ar(ds(n),0,r);return(n-=e.length)>=0&&t.slice(n,a)==e},kn.eq=Bo,kn.escape=function(t){return(t=vs(t))&&$.test(t)?t.replace(q,en):t},kn.escapeRegExp=function(t){return(t=vs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},kn.every=function(t,e,n){var r=Go(t)?Ae:hr;return n&&ga(t,e,n)&&(e=i),r(t,aa(e,3))},kn.find=mo,kn.findIndex=Ha,kn.findKey=function(t,e){return Fe(t,aa(e,3),_r)},kn.findLast=go,kn.findLastIndex=Va,kn.findLastKey=function(t,e){return Fe(t,aa(e,3),yr)},kn.floor=xl,kn.forEach=vo,kn.forEachRight=_o,kn.forIn=function(t,e){return null==t?t:gr(t,aa(e,3),Ps)},kn.forInRight=function(t,e){return null==t?t:vr(t,aa(e,3),Ps)},kn.forOwn=function(t,e){return t&&_r(t,aa(e,3))},kn.forOwnRight=function(t,e){return t&&yr(t,aa(e,3))},kn.get=Ts,kn.gt=zo,kn.gte=Ho,kn.has=function(t,e){return null!=t&&ha(t,e,Tr)},kn.hasIn=Es,kn.head=Wa,kn.identity=nl,kn.includes=function(t,e,n,r){t=jo(t)?t:Bs(t),n=n&&!r?ds(n):0;var i=t.length;return n<0&&(n=gn(i+n,0)),os(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Be(t,e,n)>-1},kn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=gn(r+i,0)),Be(t,e,i)},kn.inRange=function(t,e,n){return e=hs(e),n===i?(n=e,e=0):n=hs(n),function(t,e,n){return t>=vn(e,n)&&t<gn(e,n)}(t=ms(t),e,n)},kn.invoke=Rs,kn.isArguments=Vo,kn.isArray=Go,kn.isArrayBuffer=Wo,kn.isArrayLike=jo,kn.isArrayLikeObject=qo,kn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&Mr(t)==v},kn.isBuffer=Xo,kn.isDate=$o,kn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},kn.isEmpty=function(t){if(null==t)return!0;if(jo(t)&&(Go(t)||"string"==typeof t||"function"==typeof t.splice||Xo(t)||ls(t)||Vo(t)))return!t.length;var e=fa(t);if(e==w||e==A)return!t.size;if(xa(t))return!Ir(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},kn.isEqual=function(t,e){return Dr(t,e)},kn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Dr(t,e,i,n):!!r},kn.isError=Yo,kn.isFinite=function(t){return"number"==typeof t&&Oe(t)},kn.isFunction=Ko,kn.isInteger=Zo,kn.isLength=Qo,kn.isMap=es,kn.isMatch=function(t,e){return t===e||Pr(t,e,sa(e))},kn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Pr(t,e,sa(e),n)},kn.isNaN=function(t){return ns(t)&&t!=+t},kn.isNative=function(t){if(ya(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(t)},kn.isNil=function(t){return null==t},kn.isNull=function(t){return null===t},kn.isNumber=ns,kn.isObject=Jo,kn.isObjectLike=ts,kn.isPlainObject=rs,kn.isRegExp=is,kn.isSafeInteger=function(t){return Zo(t)&&t>=-9007199254740991&&t<=f},kn.isSet=as,kn.isString=os,kn.isSymbol=ss,kn.isTypedArray=ls,kn.isUndefined=function(t){return t===i},kn.isWeakMap=function(t){return ts(t)&&fa(t)==D},kn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==Mr(t)},kn.join=function(t,e){return null==t?"":We.call(t,e)},kn.kebabCase=Gs,kn.last=$a,kn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ds(n))<0?gn(r+a,0):vn(a,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):ke(t,He,a,!0)},kn.lowerCase=Ws,kn.lowerFirst=js,kn.lt=cs,kn.lte=us,kn.max=function(t){return t&&t.length?dr(t,nl,Sr):i},kn.maxBy=function(t,e){return t&&t.length?dr(t,aa(e,2),Sr):i},kn.mean=function(t){return Ve(t,nl)},kn.meanBy=function(t,e){return Ve(t,aa(e,2))},kn.min=function(t){return t&&t.length?dr(t,nl,Ur):i},kn.minBy=function(t,e){return t&&t.length?dr(t,aa(e,2),Ur):i},kn.stubArray=pl,kn.stubFalse=ml,kn.stubObject=function(){return{}},kn.stubString=function(){return""},kn.stubTrue=function(){return!0},kn.multiply=bl,kn.nth=function(t,e){return t&&t.length?zr(t,ds(e)):i},kn.noConflict=function(){return fe._===this&&(fe._=kt),this},kn.noop=sl,kn.now=To,kn.pad=function(t,e,n){t=vs(t);var r=(e=ds(e))?un(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Hi(de(i),n)+t+Hi(he(i),n)},kn.padEnd=function(t,e,n){t=vs(t);var r=(e=ds(e))?un(t):0;return e&&r<e?t+Hi(e-r,n):t},kn.padStart=function(t,e,n){t=vs(t);var r=(e=ds(e))?un(t):0;return e&&r<e?Hi(e-r,n)+t:t},kn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),yn(vs(t).replace(rt,""),e||0)},kn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ga(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=hs(t),e===i?(e=t,t=0):e=hs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var a=xn();return vn(t+a*(e-t+se("1e-"+((a+"").length-1))),e)}return jr(t,e)},kn.reduce=function(t,e,n){var r=Go(t)?Ne:je,i=arguments.length<3;return r(t,aa(e,4),n,i,ur)},kn.reduceRight=function(t,e,n){var r=Go(t)?Ie:je,i=arguments.length<3;return r(t,aa(e,4),n,i,fr)},kn.repeat=function(t,e,n){return e=(n?ga(t,e,n):e===i)?1:ds(e),qr(vs(t),e)},kn.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},kn.result=function(t,e,n){var r=-1,a=(e=gi(e,t)).length;for(a||(a=1,t=i);++r<a;){var o=null==t?i:t[Ua(e[r])];o===i&&(r=a,o=n),t=Ko(o)?o.call(t):o}return t},kn.round=wl,kn.runInContext=t,kn.sample=function(t){return(Go(t)?Yn:$r)(t)},kn.size=function(t){if(null==t)return 0;if(jo(t))return os(t)?un(t):t.length;var e=fa(t);return e==w||e==A?t.size:Ir(t).length},kn.snakeCase=qs,kn.some=function(t,e,n){var r=Go(t)?Ue:ei;return n&&ga(t,e,n)&&(e=i),r(t,aa(e,3))},kn.sortedIndex=function(t,e){return ni(t,e)},kn.sortedIndexBy=function(t,e,n){return ri(t,e,aa(n,2))},kn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Bo(t[r],e))return r}return-1},kn.sortedLastIndex=function(t,e){return ni(t,e,!0)},kn.sortedLastIndexBy=function(t,e,n){return ri(t,e,aa(n,2),!0)},kn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Bo(t[n],e))return n}return-1},kn.startCase=Xs,kn.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:ar(ds(n),0,t.length),e=oi(e),t.slice(n,n+e.length)==e},kn.subtract=Ml,kn.sum=function(t){return t&&t.length?qe(t,nl):0},kn.sumBy=function(t,e){return t&&t.length?qe(t,aa(e,2)):0},kn.template=function(t,e,n){var r=kn.templateSettings;n&&ga(t,e,n)&&(e=i),t=vs(t),e=xs({},e,r,Yi);var a,o,s=xs({},e.imports,r.imports,Yi),l=Ds(s),c=Ke(s,l),u=0,f=e.interpolate||yt,h="__p += '",d=Tt((e.escape||yt).source+"|"+f.source+"|"+(f===Z?ft:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,s,l){return r||(r=i),h+=t.slice(u,l).replace(xt,nn),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),h+="';\n";var m=Nt.call(e,"variable")&&e.variable;if(m){if(ct.test(m))throw new bt("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(V,""):h).replace(G,"$1").replace(W,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Zs((function(){return wt(l,p+"return "+h).apply(i,c)}));if(g.source=h,Yo(g))throw g;return g},kn.times=function(t,e){if((t=ds(t))<1||t>f)return[];var n=d,r=vn(t,d);e=aa(e),t-=d;for(var i=Xe(r,e);++n<t;)e(n);return i},kn.toFinite=hs,kn.toInteger=ds,kn.toLength=ps,kn.toLower=function(t){return vs(t).toLowerCase()},kn.toNumber=ms,kn.toSafeInteger=function(t){return t?ar(ds(t),-9007199254740991,f):0===t?t:0},kn.toString=vs,kn.toUpper=function(t){return vs(t).toUpperCase()},kn.trim=function(t,e,n){if((t=vs(t))&&(n||e===i))return $e(t);if(!t||!(e=oi(e)))return t;var r=fn(t),a=fn(e);return _i(r,Qe(r,a),Je(r,a)+1).join("")},kn.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.slice(0,hn(t)+1);if(!t||!(e=oi(e)))return t;var r=fn(t);return _i(r,0,Je(r,fn(e))+1).join("")},kn.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=oi(e)))return t;var r=fn(t);return _i(r,Qe(r,fn(e))).join("")},kn.truncate=function(t,e){var n=30,r="...";if(Jo(e)){var a="separator"in e?e.separator:a;n="length"in e?ds(e.length):n,r="omission"in e?oi(e.omission):r}var o=(t=vs(t)).length;if(rn(t)){var s=fn(t);o=s.length}if(n>=o)return t;var l=n-un(r);if(l<1)return r;var c=s?_i(s,0,l).join(""):t.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),is(a)){if(t.slice(l).search(a)){var u,f=c;for(a.global||(a=Tt(a.source,vs(ht.exec(a))+"g")),a.lastIndex=0;u=a.exec(f);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(t.indexOf(oi(a),l)!=l){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},kn.unescape=function(t){return(t=vs(t))&&X.test(t)?t.replace(j,dn):t},kn.uniqueId=function(t){var e=++It;return vs(t)+e},kn.upperCase=$s,kn.upperFirst=Ys,kn.each=vo,kn.eachRight=_o,kn.first=Wa,ol(kn,(gl={},_r(kn,(function(t,e){Nt.call(kn.prototype,e)||(gl[e]=t)})),gl),{chain:!1}),kn.VERSION="4.17.21",Te(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){kn[t].placeholder=kn})),Te(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===i?1:gn(ds(n),0);var r=this.__filtered__&&!e?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Te(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:aa(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Te(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),Te(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(nl)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Cr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Io(aa(t)))},Vn.prototype.slice=function(t,e){t=ds(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ds(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(d)},_r(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=kn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);a&&(kn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,l=e instanceof Vn,c=s[0],u=l||Go(e),f=function(t){var e=a.apply(kn,Le([t],s));return r&&h?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,m=l&&!d;if(!o&&u){e=m?e:new Vn(this);var g=t.apply(e,s);return g.__actions__.push({func:fo,args:[f],thisArg:i}),new Hn(g,h)}return p&&m?t.apply(this,s):(g=this.thru(f),p?r?g.value()[0]:g.value():g)})})),Te(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);kn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Go(i)?i:[],t)}return this[n]((function(n){return e.apply(Go(n)?n:[],t)}))}})),_r(Vn.prototype,(function(t,e){var n=kn[e];if(n){var r=n.name+"";Nt.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:e,func:n})}})),Rn[Fi(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ei(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ei(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ei(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Go(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=vn(e,t+o);break;case"takeRight":t=gn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,f=u.length,h=0,d=vn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return fi(t,this.__actions__);var p=[];t:for(;l--&&h<d;){for(var m=-1,g=t[c+=e];++m<f;){var v=u[m],_=v.iteratee,y=v.type,x=_(g);if(2==y)g=x;else if(!x){if(1==y)continue t;break t}}p[h++]=g}return p},kn.prototype.at=ho,kn.prototype.chain=function(){return uo(this)},kn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},kn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},kn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=Fa(n);r.__index__=0,r.__values__=i,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},kn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:fo,args:[Qa],thisArg:i}),new Hn(e,this.__chain__)}return this.thru(Qa)},kn.prototype.toJSON=kn.prototype.valueOf=kn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},kn.prototype.first=kn.prototype.head,Yt&&(kn.prototype[Yt]=function(){return this}),kn}();fe._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},289:()=>{},706:(t,e,n)=>{"use strict";n.d(e,{$:()=>Ve(),t1:()=>qe,_:()=>We(),Ce:()=>Je,d3:()=>r,ss:()=>Ye,SL:()=>Ze});var r=n(6580),i=n(9464);function a(){let t=null,e=!1,n=null,r=null;function i(e,a){n(e,a),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function o(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=e.get(n);if(void 0===i)e.set(n,function(e,n){const r=e.array,i=e.usage,a=r.byteLength,o=t.createBuffer();let s;if(t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback(),r instanceof Float32Array)s=t.FLOAT;else if(r instanceof Uint16Array)s=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=t.SHORT;else if(r instanceof Uint32Array)s=t.UNSIGNED_INT;else if(r instanceof Int32Array)s=t.INT;else if(r instanceof Int8Array)s=t.BYTE;else if(r instanceof Uint8Array)s=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=t.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:a}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,r){const i=n.array,a=n.updateRanges;if(t.bindBuffer(r,e),0===a.length)t.bufferSubData(r,0,i);else{a.sort(((t,e)=>t.start-e.start));let e=0;for(let t=1;t<a.length;t++){const n=a[e],r=a[t];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++e,a[e]=r)}a.length=e+1;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}const s={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},l={common:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new i.dwI},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new i.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new i.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new i.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new i.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new i.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new i.dwI},normalScale:{value:new i.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new i.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new i.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new i.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new i.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new i.Q1f(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0},uvTransform:{value:new i.dwI}},sprite:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},center:{value:new i.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new i.dwI},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0}}},c={basic:{uniforms:(0,i.Iit)([l.common,l.specularmap,l.envmap,l.aomap,l.lightmap,l.fog]),vertexShader:s.meshbasic_vert,fragmentShader:s.meshbasic_frag},lambert:{uniforms:(0,i.Iit)([l.common,l.specularmap,l.envmap,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.fog,l.lights,{emissive:{value:new i.Q1f(0)}}]),vertexShader:s.meshlambert_vert,fragmentShader:s.meshlambert_frag},phong:{uniforms:(0,i.Iit)([l.common,l.specularmap,l.envmap,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.fog,l.lights,{emissive:{value:new i.Q1f(0)},specular:{value:new i.Q1f(1118481)},shininess:{value:30}}]),vertexShader:s.meshphong_vert,fragmentShader:s.meshphong_frag},standard:{uniforms:(0,i.Iit)([l.common,l.envmap,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.roughnessmap,l.metalnessmap,l.fog,l.lights,{emissive:{value:new i.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:s.meshphysical_vert,fragmentShader:s.meshphysical_frag},toon:{uniforms:(0,i.Iit)([l.common,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.gradientmap,l.fog,l.lights,{emissive:{value:new i.Q1f(0)}}]),vertexShader:s.meshtoon_vert,fragmentShader:s.meshtoon_frag},matcap:{uniforms:(0,i.Iit)([l.common,l.bumpmap,l.normalmap,l.displacementmap,l.fog,{matcap:{value:null}}]),vertexShader:s.meshmatcap_vert,fragmentShader:s.meshmatcap_frag},points:{uniforms:(0,i.Iit)([l.points,l.fog]),vertexShader:s.points_vert,fragmentShader:s.points_frag},dashed:{uniforms:(0,i.Iit)([l.common,l.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:s.linedashed_vert,fragmentShader:s.linedashed_frag},depth:{uniforms:(0,i.Iit)([l.common,l.displacementmap]),vertexShader:s.depth_vert,fragmentShader:s.depth_frag},normal:{uniforms:(0,i.Iit)([l.common,l.bumpmap,l.normalmap,l.displacementmap,{opacity:{value:1}}]),vertexShader:s.meshnormal_vert,fragmentShader:s.meshnormal_frag},sprite:{uniforms:(0,i.Iit)([l.sprite,l.fog]),vertexShader:s.sprite_vert,fragmentShader:s.sprite_frag},background:{uniforms:{uvTransform:{value:new i.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:s.background_vert,fragmentShader:s.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new i.dwI}},vertexShader:s.backgroundCube_vert,fragmentShader:s.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:s.cube_vert,fragmentShader:s.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:s.equirect_vert,fragmentShader:s.equirect_frag},distanceRGBA:{uniforms:(0,i.Iit)([l.common,l.displacementmap,{referencePosition:{value:new i.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:s.distanceRGBA_vert,fragmentShader:s.distanceRGBA_frag},shadow:{uniforms:(0,i.Iit)([l.lights,l.fog,{color:{value:new i.Q1f(0)},opacity:{value:1}}]),vertexShader:s.shadow_vert,fragmentShader:s.shadow_frag}};c.physical={uniforms:(0,i.Iit)([c.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new i.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new i.dwI},clearcoatNormalScale:{value:new i.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new i.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new i.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new i.dwI},sheen:{value:0},sheenColor:{value:new i.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new i.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new i.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new i.dwI},transmissionSamplerSize:{value:new i.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new i.dwI},attenuationDistance:{value:0},attenuationColor:{value:new i.Q1f(0)},specularColor:{value:new i.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new i.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new i.dwI},anisotropyVector:{value:new i.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new i.dwI}}]),vertexShader:s.meshphysical_vert,fragmentShader:s.meshphysical_frag};const u={r:0,b:0,g:0},f=new i.O9p,h=new i.kn4;function d(t,e,n,r,a,o,s){const l=new i.Q1f(0);let d,p,m=!0===o?0:1,g=null,v=0,_=null;function y(t){let r=!0===t.isScene?t.background:null;return r&&r.isTexture&&(r=(t.backgroundBlurriness>0?n:e).get(r)),r}function x(e,n){e.getRGB(u,(0,i._Ut)(t)),r.buffers.color.setClear(u.r,u.g,u.b,n,s)}return{getClearColor:function(){return l},setClearColor:function(t,e=1){l.set(t),m=e,x(l,m)},getClearAlpha:function(){return m},setClearAlpha:function(t){m=t,x(l,m)},render:function(e){let n=!1;const i=y(e);null===i?x(l,m):i&&i.isColor&&(x(i,1),n=!0);const a=t.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const r=y(n);r&&(r.isCubeTexture||r.mapping===i.Om)?(void 0===p&&(p=new i.eaF(new i.iNn(1,1,1),new i.BKk({name:"BackgroundCubeMaterial",uniforms:(0,i.lxW)(c.backgroundCube.uniforms),vertexShader:c.backgroundCube.vertexShader,fragmentShader:c.backgroundCube.fragmentShader,side:i.hsX,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(p)),f.copy(n.backgroundRotation),f.x*=-1,f.y*=-1,f.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(f.y*=-1,f.z*=-1),p.material.uniforms.envMap.value=r,p.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,p.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(h.makeRotationFromEuler(f)),p.material.toneMapped=i.ppV.getTransfer(r.colorSpace)!==i.KLL,g===r&&v===r.version&&_===t.toneMapping||(p.material.needsUpdate=!0,g=r,v=r.version,_=t.toneMapping),p.layers.enableAll(),e.unshift(p,p.geometry,p.material,0,0,null)):r&&r.isTexture&&(void 0===d&&(d=new i.eaF(new i.bdM(2,2),new i.BKk({name:"BackgroundMaterial",uniforms:(0,i.lxW)(c.background.uniforms),vertexShader:c.background.vertexShader,fragmentShader:c.background.fragmentShader,side:i.hB5,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(d)),d.material.uniforms.t2D.value=r,d.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,d.material.toneMapped=i.ppV.getTransfer(r.colorSpace)!==i.KLL,!0===r.matrixAutoUpdate&&r.updateMatrix(),d.material.uniforms.uvTransform.value.copy(r.matrix),g===r&&v===r.version&&_===t.toneMapping||(d.material.needsUpdate=!0,g=r,v=r.version,_=t.toneMapping),d.layers.enableAll(),e.unshift(d,d.geometry,d.material,0,0,null))},dispose:function(){void 0!==p&&(p.geometry.dispose(),p.material.dispose()),void 0!==d&&(d.geometry.dispose(),d.material.dispose())}}}function p(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},a=u(null);let o=a,s=!1;function l(e){return t.bindVertexArray(e)}function c(e){return t.deleteVertexArray(e)}function u(t){const e=[],r=[],i=[];for(let t=0;t<n;t++)e[t]=0,r[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:i,object:t,attributes:{},index:null}}function f(){const t=o.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function h(t){d(t,0)}function d(e,n){const r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[e]=1,0===i[e]&&(t.enableVertexAttribArray(e),i[e]=1),a[e]!==n&&(t.vertexAttribDivisor(e,n),a[e]=n)}function p(){const e=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function m(e,n,r,i,a,o,s){!0===s?t.vertexAttribIPointer(e,n,r,a,o):t.vertexAttribPointer(e,n,r,i,a,o)}function g(){v(),s=!0,o!==a&&(o=a,l(o.object))}function v(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function(n,a,c,g,v){let _=!1;const y=function(e,n,i){const a=!0===i.wireframe;let o=r[e.id];void 0===o&&(o={},r[e.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];return void 0===l&&(l=u(t.createVertexArray()),s[a]=l),l}(g,c,a);o!==y&&(o=y,l(o.object)),_=function(t,e,n,r){const i=o.attributes,a=e.attributes;let s=0;const l=n.getAttributes();for(const e in l)if(l[e].location>=0){const n=i[e];let r=a[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;s++}return o.attributesNum!==s||o.index!==r}(n,g,c,v),_&&function(t,e,n,r){const i={},a=e.attributes;let s=0;const l=n.getAttributes();for(const e in l)if(l[e].location>=0){let n=a[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[e]=r,s++}o.attributes=i,o.attributesNum=s,o.index=r}(n,g,c,v),null!==v&&e.update(v,t.ELEMENT_ARRAY_BUFFER),(_||s)&&(s=!1,function(n,r,a,o){f();const s=o.attributes,l=a.getAttributes(),c=r.defaultAttributeValues;for(const r in l){const a=l[r];if(a.location>=0){let l=s[r];if(void 0===l&&("instanceMatrix"===r&&n.instanceMatrix&&(l=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(l=n.instanceColor)),void 0!==l){const r=l.normalized,s=l.itemSize,c=e.get(l);if(void 0===c)continue;const u=c.buffer,f=c.type,p=c.bytesPerElement,g=f===t.INT||f===t.UNSIGNED_INT||l.gpuType===i.Yuy;if(l.isInterleavedBufferAttribute){const e=l.data,i=e.stride,c=l.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<a.locationSize;t++)d(a.location+t,e.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<a.locationSize;t++)h(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<a.locationSize;t++)m(a.location+t,s/a.locationSize,f,r,i*p,(c+s/a.locationSize*t)*p,g)}else{if(l.isInstancedBufferAttribute){for(let t=0;t<a.locationSize;t++)d(a.location+t,l.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=l.meshPerAttribute*l.count)}else for(let t=0;t<a.locationSize;t++)h(a.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<a.locationSize;t++)m(a.location+t,s/a.locationSize,f,r,s*p,s/a.locationSize*t*p,g)}}else if(void 0!==c){const e=c[r];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(a.location,e);break;case 3:t.vertexAttrib3fv(a.location,e);break;case 4:t.vertexAttrib4fv(a.location,e);break;default:t.vertexAttrib1fv(a.location,e)}}}}p()}(n,a,c,g),null!==v&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){g();for(const t in r){const e=r[t];for(const t in e){const n=e[t];for(const t in n)c(n[t].object),delete n[t];delete e[t]}delete r[t]}},releaseStatesOfGeometry:function(t){if(void 0===r[t.id])return;const e=r[t.id];for(const t in e){const n=e[t];for(const t in n)c(n[t].object),delete n[t];delete e[t]}delete r[t.id]},releaseStatesOfProgram:function(t){for(const e in r){const n=r[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)c(i[t].object),delete i[t];delete n[t.id]}},initAttributes:f,enableAttribute:h,disableUnusedAttributes:p}}function m(t,e,n){let r;function i(e,i,a){0!==a&&(t.drawArraysInstanced(r,e,i,a),n.update(i,r,a))}this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(t,i,a){if(0===a)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,t,0,i,0,a);let o=0;for(let t=0;t<a;t++)o+=i[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(t,a,o,s){if(0===o)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<t.length;e++)i(t[e],a[e],s[e]);else{l.multiDrawArraysInstancedWEBGL(r,t,0,a,0,s,0,o);let e=0;for(let t=0;t<o;t++)e+=a[t]*s[t];n.update(e,r,1)}}}function g(t,e,n,r){let a;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=!0===n.logarithmicDepthBuffer,u=!0===n.reverseDepthBuffer&&e.has("EXT_clip_control"),f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==a)return a;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");a=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:o,textureFormatReadable:function(e){return e===i.GWd||r.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const a=n===i.ix0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==i.OUM&&r.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==i.RQf&&!a)},precision:s,logarithmicDepthBuffer:c,reverseDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function v(t){const e=this;let n=null,r=0,a=!1,o=!1;const s=new i.Zcv,l=new i.dwI,c={value:null,needsUpdate:!1};function u(t,n,r,i){const a=null!==t?t.length:0;let o=null;if(0!==a){if(o=c.value,!0!==i||null===o){const e=r+4*a,i=n.matrixWorldInverse;l.getNormalMatrix(i),(null===o||o.length<e)&&(o=new Float32Array(e));for(let e=0,n=r;e!==a;++e,n+=4)s.copy(t[e]).applyMatrix4(i,l),s.normal.toArray(o,n),o[n+3]=s.constant}c.value=o,c.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,o}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||a;return a=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(i,s,l){const f=i.clippingPlanes,h=i.clipIntersection,d=i.clipShadows,p=t.get(i);if(!a||null===f||0===f.length||o&&!d)o?u(null):(c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0);else{const t=o?0:r,e=4*t;let i=p.clippingState||null;c.value=i,i=u(f,s,e,l);for(let t=0;t!==e;++t)i[t]=n[t];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=t}}}function _(t){let e=new WeakMap;function n(t,e){return e===i.wfO?t.mapping=i.hy7:e===i.uV5&&(t.mapping=i.xFO),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(a){if(a&&a.isTexture){const o=a.mapping;if(o===i.wfO||o===i.uV5){if(e.has(a))return n(e.get(a).texture,a.mapping);{const o=a.image;if(o&&o.height>0){const s=new i.o6l(o.height);return s.fromEquirectangularTexture(t,a),e.set(a,s),a.addEventListener("dispose",r),n(s.texture,a.mapping)}return null}}}return a},dispose:function(){e=new WeakMap}}}const y=[.125,.215,.35,.446,.526,.582],x=new i.qUd,b=new i.Q1f;let w=null,M=0,S=0,T=!1;const E=(1+Math.sqrt(5))/2,A=1/E,C=[new i.Pq0(-E,A,0),new i.Pq0(E,A,0),new i.Pq0(-A,0,E),new i.Pq0(A,0,E),new i.Pq0(0,E,-A),new i.Pq0(0,E,A),new i.Pq0(-1,1,-1),new i.Pq0(1,1,-1),new i.Pq0(-1,1,1),new i.Pq0(1,1,1)];class R{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){w=this._renderer.getRenderTarget(),M=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),T=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=N(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=L(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(w,M,S),this._renderer.xr.enabled=T,t.scissorTest=!1,P(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===i.hy7||t.mapping===i.xFO?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),w=this._renderer.getRenderTarget(),M=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),T=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:i.k6q,minFilter:i.k6q,generateMipmaps:!1,type:i.ix0,format:i.GWd,colorSpace:i.Zr2,depthBuffer:!1},r=D(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=D(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let a=t;const o=t-4+1+y.length;for(let s=0;s<o;s++){const o=Math.pow(2,a);n.push(o);let l=1/o;s>t-4?l=y[s-t+4-1]:0===s&&(l=0),r.push(l);const c=1/(o-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,m=3,g=2,v=1,_=new Float32Array(m*p*d),x=new Float32Array(g*p*d),b=new Float32Array(v*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];_.set(r,m*p*t),x.set(h,g*p*t);const i=[t,t,t,t,t,t];b.set(i,v*p*t)}const w=new i.LoY;w.setAttribute("position",new i.THS(_,m)),w.setAttribute("uv",new i.THS(x,g)),w.setAttribute("faceIndex",new i.THS(b,v)),e.push(w),a>4&&a--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(20),a=new i.Pq0(0,1,0);return new i.BKk({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new i.eaF(this._lodPlanes[0],t);this._renderer.compile(e,x)}_sceneToCubeUV(t,e,n,r){const a=new i.ubm(90,1,e,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(b),l.toneMapping=i.y_p,l.autoClear=!1;const f=new i.V9B({name:"PMREM.Background",side:i.hsX,depthWrite:!1,depthTest:!1}),h=new i.eaF(new i.iNn,f);let d=!1;const p=t.background;p?p.isColor&&(f.color.copy(p),t.background=null,d=!0):(f.color.copy(b),d=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(a.up.set(0,o[e],0),a.lookAt(s[e],0,0)):1===n?(a.up.set(0,0,o[e]),a.lookAt(0,s[e],0)):(a.up.set(0,o[e],0),a.lookAt(0,0,s[e]));const i=this._cubeSize;P(r,n*i,e>2?i:0,i,i),l.setRenderTarget(r),d&&l.render(h,a),l.render(t,a)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=u,l.autoClear=c,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===i.hy7||t.mapping===i.xFO;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=N()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=L());const a=r?this._cubemapMaterial:this._equirectMaterial,o=new i.eaF(this._lodPlanes[0],a);a.uniforms.envMap.value=t;const s=this._cubeSize;P(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(o,x)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let e=1;e<r;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=C[(r-e-1)%C.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,r,"latitudinal",i),this._halfBlur(a,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,a,o,s){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new i.eaF(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[n]-1,d=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,p=a/d,m=isFinite(a)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let v=0;for(let t=0;t<20;++t){const e=t/p,n=Math.exp(-e*e/2);g.push(n),0===t?v+=n:t<m&&(v+=2*n)}for(let t=0;t<g.length;t++)g[t]=g[t]/v;f.envMap.value=t.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value="latitudinal"===o,s&&(f.poleAxis.value=s);const{_lodMax:_}=this;f.dTheta.value=d,f.mipInt.value=_-n;const y=this._sizeLods[r];P(e,3*y*(r>_-4?r-_+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(e),l.render(u,x)}}function D(t,e,n){const r=new i.nWS(t,e,n);return r.texture.mapping=i.Om,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function P(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function L(){return new i.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1})}function N(){return new i.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1})}function I(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(a){if(a&&a.isTexture){const o=a.mapping,s=o===i.wfO||o===i.uV5,l=o===i.hy7||o===i.xFO;if(s||l){let i=e.get(a);const o=void 0!==i?i.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==o)return null===n&&(n=new R(t)),i=s?n.fromEquirectangular(a,i):n.fromCubemap(a,i),i.texture.pmremVersion=a.pmremVersion,e.set(a,i),i.texture;if(void 0!==i)return i.texture;{const o=a.image;return s&&o&&o.height>0||l&&o&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(o)?(null===n&&(n=new R(t)),i=s?n.fromEquirectangular(a):n.fromCubemap(a),i.texture.pmremVersion=a.pmremVersion,e.set(a,i),a.addEventListener("dispose",r),i.texture):null}}}return a},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function U(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&(0,i.mcG)("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function O(t,e,n,r){const a={},o=new WeakMap;function s(t){const i=t.target;null!==i.index&&e.remove(i.index);for(const t in i.attributes)e.remove(i.attributes[t]);i.removeEventListener("dispose",s),delete a[i.id];const l=o.get(i);l&&(e.remove(l),o.delete(i)),r.releaseStatesOfGeometry(i),!0===i.isInstancedBufferGeometry&&delete i._maxInstanceCount,n.memory.geometries--}function l(t){const n=[],r=t.index,a=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],a=t[e+2];n.push(r,i,i,a,a,r)}}else{if(void 0===a)return;{const t=a.array;s=a.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}}const l=new((0,i.AQS)(n)?i.MW4:i.A$4)(n,1);l.version=s;const c=o.get(t);c&&e.remove(c),o.set(t,l)}return{get:function(t,e){return!0===a[e.id]||(e.addEventListener("dispose",s),a[e.id]=!0,n.memory.geometries++),e},update:function(n){const r=n.attributes;for(const n in r)e.update(r[n],t.ARRAY_BUFFER)},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&l(t)}else l(t);return o.get(t)}}}function F(t,e,n){let r,i,a;function o(e,o,s){0!==s&&(t.drawElementsInstanced(r,o,i,e*a,s),n.update(o,r,s))}this.setMode=function(t){r=t},this.setIndex=function(t){i=t.type,a=t.bytesPerElement},this.render=function(e,o){t.drawElements(r,o,i,e*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(t,a,o){if(0===o)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,t,0,o);let s=0;for(let t=0;t<o;t++)s+=a[t];n.update(s,r,1)},this.renderMultiDrawInstances=function(t,s,l,c){if(0===l)return;const u=e.get("WEBGL_multi_draw");if(null===u)for(let e=0;e<t.length;e++)o(t[e]/a,s[e],c[e]);else{u.multiDrawElementsInstancedWEBGL(r,s,0,i,t,0,c,0,l);let e=0;for(let t=0;t<l;t++)e+=s[t]*c[t];n.update(e,r,1)}}}function k(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=i*(n/3);break;case t.LINES:e.lines+=i*(n/2);break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function B(t,e,n){const r=new WeakMap,a=new i.IUQ;return{update:function(o,s,l){const c=o.morphTargetInfluences,u=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,f=void 0!==u?u.length:0;let h=r.get(s);if(void 0===h||h.count!==f){void 0!==h&&h.texture.dispose();const d=void 0!==s.morphAttributes.position,p=void 0!==s.morphAttributes.normal,m=void 0!==s.morphAttributes.color,g=s.morphAttributes.position||[],v=s.morphAttributes.normal||[],_=s.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===m&&(y=3);let x=s.attributes.position.count*y,b=1;x>e.maxTextureSize&&(b=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const w=new Float32Array(x*b*4*f),M=new i.rFo(w,x,b,f);M.type=i.RQf,M.needsUpdate=!0;const S=4*y;for(let E=0;E<f;E++){const A=g[E],C=v[E],R=_[E],D=x*b*4*E;for(let P=0;P<A.count;P++){const L=P*S;!0===d&&(a.fromBufferAttribute(A,P),w[D+L+0]=a.x,w[D+L+1]=a.y,w[D+L+2]=a.z,w[D+L+3]=0),!0===p&&(a.fromBufferAttribute(C,P),w[D+L+4]=a.x,w[D+L+5]=a.y,w[D+L+6]=a.z,w[D+L+7]=0),!0===m&&(a.fromBufferAttribute(R,P),w[D+L+8]=a.x,w[D+L+9]=a.y,w[D+L+10]=a.z,w[D+L+11]=4===R.itemSize?a.w:1)}}function T(){M.dispose(),r.delete(s),s.removeEventListener("dispose",T)}h={count:f,texture:M,size:new i.I9Y(x,b)},r.set(s,h),s.addEventListener("dispose",T)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let N=0;for(let U=0;U<c.length;U++)N+=c[U];const I=s.morphTargetsRelative?1:1-N;l.getUniforms().setValue(t,"morphTargetBaseInfluence",I),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}}}function z(t,e,n,r){let i=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(o){const s=r.render.frame,l=o.geometry,c=e.get(o,l);if(i.get(c)!==s&&(e.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,t.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){const t=o.skeleton;i.get(t)!==s&&(t.update(),i.set(t,s))}return c},dispose:function(){i=new WeakMap}}}const H=new i.gPd,V=new i.VCu(1,1),G=new i.rFo,W=new i.dYF,j=new i.b4q,q=[],X=[],$=new Float32Array(16),Y=new Float32Array(9),K=new Float32Array(4);function Z(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=q[i];if(void 0===a&&(a=new Float32Array(i),q[i]=a),0!==e){r.toArray(a,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(a,i)}return a}function Q(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function J(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function tt(t,e){let n=X[e];void 0===n&&(n=new Int32Array(e),X[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function et(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function nt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Q(n,e))return;t.uniform2fv(this.addr,e),J(n,e)}}function rt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Q(n,e))return;t.uniform3fv(this.addr,e),J(n,e)}}function it(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Q(n,e))return;t.uniform4fv(this.addr,e),J(n,e)}}function at(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Q(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),J(n,e)}else{if(Q(n,r))return;K.set(r),t.uniformMatrix2fv(this.addr,!1,K),J(n,r)}}function ot(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Q(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),J(n,e)}else{if(Q(n,r))return;Y.set(r),t.uniformMatrix3fv(this.addr,!1,Y),J(n,r)}}function st(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Q(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),J(n,e)}else{if(Q(n,r))return;$.set(r),t.uniformMatrix4fv(this.addr,!1,$),J(n,r)}}function lt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ct(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Q(n,e))return;t.uniform2iv(this.addr,e),J(n,e)}}function ut(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Q(n,e))return;t.uniform3iv(this.addr,e),J(n,e)}}function ft(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Q(n,e))return;t.uniform4iv(this.addr,e),J(n,e)}}function ht(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function dt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Q(n,e))return;t.uniform2uiv(this.addr,e),J(n,e)}}function pt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Q(n,e))return;t.uniform3uiv(this.addr,e),J(n,e)}}function mt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Q(n,e))return;t.uniform4uiv(this.addr,e),J(n,e)}}function gt(t,e,n){const r=this.cache,a=n.allocateTextureUnit();let o;r[0]!==a&&(t.uniform1i(this.addr,a),r[0]=a),this.type===t.SAMPLER_2D_SHADOW?(V.compareFunction=i.TiK,o=V):o=H,n.setTexture2D(e||o,a)}function vt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||W,i)}function _t(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||j,i)}function yt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||G,i)}function xt(t,e){t.uniform1fv(this.addr,e)}function bt(t,e){const n=Z(e,this.size,2);t.uniform2fv(this.addr,n)}function wt(t,e){const n=Z(e,this.size,3);t.uniform3fv(this.addr,n)}function Mt(t,e){const n=Z(e,this.size,4);t.uniform4fv(this.addr,n)}function St(t,e){const n=Z(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Tt(t,e){const n=Z(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Et(t,e){const n=Z(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function At(t,e){t.uniform1iv(this.addr,e)}function Ct(t,e){t.uniform2iv(this.addr,e)}function Rt(t,e){t.uniform3iv(this.addr,e)}function Dt(t,e){t.uniform4iv(this.addr,e)}function Pt(t,e){t.uniform1uiv(this.addr,e)}function Lt(t,e){t.uniform2uiv(this.addr,e)}function Nt(t,e){t.uniform3uiv(this.addr,e)}function It(t,e){t.uniform4uiv(this.addr,e)}function Ut(t,e,n){const r=this.cache,i=e.length,a=tt(n,i);Q(r,a)||(t.uniform1iv(this.addr,a),J(r,a));for(let t=0;t!==i;++t)n.setTexture2D(e[t]||H,a[t])}function Ot(t,e,n){const r=this.cache,i=e.length,a=tt(n,i);Q(r,a)||(t.uniform1iv(this.addr,a),J(r,a));for(let t=0;t!==i;++t)n.setTexture3D(e[t]||W,a[t])}function Ft(t,e,n){const r=this.cache,i=e.length,a=tt(n,i);Q(r,a)||(t.uniform1iv(this.addr,a),J(r,a));for(let t=0;t!==i;++t)n.setTextureCube(e[t]||j,a[t])}function kt(t,e,n){const r=this.cache,i=e.length,a=tt(n,i);Q(r,a)||(t.uniform1iv(this.addr,a),J(r,a));for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||G,a[t])}class Bt{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return et;case 35664:return nt;case 35665:return rt;case 35666:return it;case 35674:return at;case 35675:return ot;case 35676:return st;case 5124:case 35670:return lt;case 35667:case 35671:return ct;case 35668:case 35672:return ut;case 35669:case 35673:return ft;case 5125:return ht;case 36294:return dt;case 36295:return pt;case 36296:return mt;case 35678:case 36198:case 36298:case 36306:case 35682:return gt;case 35679:case 36299:case 36307:return vt;case 35680:case 36300:case 36308:case 36293:return _t;case 36289:case 36303:case 36311:case 36292:return yt}}(e.type)}}class zt{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return xt;case 35664:return bt;case 35665:return wt;case 35666:return Mt;case 35674:return St;case 35675:return Tt;case 35676:return Et;case 5124:case 35670:return At;case 35667:case 35671:return Ct;case 35668:case 35672:return Rt;case 35669:case 35673:return Dt;case 5125:return Pt;case 36294:return Lt;case 36295:return Nt;case 36296:return It;case 35678:case 36198:case 36298:case 36306:case 35682:return Ut;case 35679:case 36299:case 36307:return Ot;case 35680:case 36300:case 36308:case 36293:return Ft;case 36289:case 36303:case 36311:case 36292:return kt}}(e.type)}}class Ht{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(t,e[a.id],n)}}}const Vt=/(\w+)(\])?(\[|\.)?/g;function Gt(t,e){t.seq.push(e),t.map[e.id]=e}function Wt(t,e,n){const r=t.name,i=r.length;for(Vt.lastIndex=0;;){const a=Vt.exec(r),o=Vt.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){Gt(n,void 0===c?new Bt(s,t,e):new zt(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Ht(s),Gt(n,t)),n=t}}}class jt{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);Wt(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,a=e.length;i!==a;++i){const a=e[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(t,o.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function qt(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Xt=37297;let $t=0;const Yt=new i.dwI;function Kt(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let t=i;t<a;t++){const i=t+1;r.push(`${i===e?">":" "} ${i}: ${n[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function Zt(t,e){const n=function(t){i.ppV._getMatrix(Yt,i.ppV.workingColorSpace,t);const e=`mat3( ${Yt.elements.map((t=>t.toFixed(4)))} )`;switch(i.ppV.getTransfer(t)){case i.VxR:return[e,"LinearTransferOETF"];case i.KLL:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${t}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function Qt(t,e){let n;switch(e){case i.kyO:n="Linear";break;case i.Mjd:n="Reinhard";break;case i.nNL:n="Cineon";break;case i.FV:n="ACESFilmic";break;case i.LAk:n="AgX";break;case i.aJ8:n="Neutral";break;case i.g7M:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Jt=new i.Pq0;function te(t){return""!==t}function ee(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ne(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const re=/^[ \t]*#include +<([\w\d./]+)>/gm;function ie(t){return t.replace(re,oe)}const ae=new Map;function oe(t,e){let n=s[e];if(void 0===n){const t=ae.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=s[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return ie(n)}const se=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function le(t){return t.replace(se,ce)}function ce(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function ue(t){let e=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function fe(t,e,n,r){const a=t.getContext(),o=n.defines;let l=n.vertexShader,c=n.fragmentShader;const u=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===i.QP0?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===i.Wk7?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===i.RyA&&(e="SHADOWMAP_TYPE_VSM"),e}(n),f=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case i.hy7:case i.xFO:e="ENVMAP_TYPE_CUBE";break;case i.Om:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),h=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===i.xFO&&(e="ENVMAP_MODE_REFRACTION"),e}(n),d=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case i.caT:e="ENVMAP_BLENDING_MULTIPLY";break;case i.KRh:e="ENVMAP_BLENDING_MIX";break;case i.XrR:e="ENVMAP_BLENDING_ADD"}return e}(n),p=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),m=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(te).join("\n")}(n),g=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),v=a.createProgram();let _,y,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(te).join("\n"),_.length>0&&(_+="\n"),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(te).join("\n"),y.length>0&&(y+="\n")):(_=[ue(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(te).join("\n"),y=[ue(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==i.y_p?"#define TONE_MAPPING":"",n.toneMapping!==i.y_p?s.tonemapping_pars_fragment:"",n.toneMapping!==i.y_p?Qt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",s.colorspace_pars_fragment,Zt("linearToOutputTexel",n.outputColorSpace),(i.ppV.getLuminanceCoefficients(Jt),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Jt.x.toFixed(4)}, ${Jt.y.toFixed(4)}, ${Jt.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(te).join("\n")),l=ie(l),l=ee(l,n),l=ne(l,n),c=ie(c),c=ee(c,n),c=ne(c,n),l=le(l),c=le(c),!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,y=["#define varying in",n.glslVersion===i.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===i.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=x+_+l,w=x+y+c,M=qt(a,a.VERTEX_SHADER,b),S=qt(a,a.FRAGMENT_SHADER,w);function T(e){if(t.debug.checkShaderErrors){const n=a.getProgramInfoLog(v).trim(),r=a.getShaderInfoLog(M).trim(),i=a.getShaderInfoLog(S).trim();let o=!0,s=!0;if(!1===a.getProgramParameter(v,a.LINK_STATUS))if(o=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(a,v,M,S);else{const t=Kt(a,M,"vertex"),r=Kt(a,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+e.name+"\nMaterial Type: "+e.type+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==i||(s=!1);s&&(e.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:_},fragmentShader:{log:i,prefix:y}})}a.deleteShader(M),a.deleteShader(S),E=new jt(a,v),A=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),a=r.name;let o=1;r.type===t.FLOAT_MAT2&&(o=2),r.type===t.FLOAT_MAT3&&(o=3),r.type===t.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}(a,v)}let E,A;a.attachShader(v,M),a.attachShader(v,S),void 0!==n.index0AttributeName?a.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),this.getUniforms=function(){return void 0===E&&T(this),E},this.getAttributes=function(){return void 0===A&&T(this),A};let C=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=a.getProgramParameter(v,Xt)),C},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=$t++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=S,this}let he=0;class de{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new pe(t),e.set(t,n)),n}}class pe{constructor(t){this.id=he++,this.code=t,this.usedTimes=0}}function me(t,e,n,r,a,o,s){const l=new i.zgK,u=new de,f=new Set,h=[],d=a.logarithmicDepthBuffer,p=a.vertexTextures;let m=a.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(t){return f.add(t),0===t?"uv":`uv${t}`}return{getParameters:function(o,l,h,_,y){const x=_.fog,b=y.geometry,w=o.isMeshStandardMaterial?_.environment:null,M=(o.isMeshStandardMaterial?n:e).get(o.envMap||w),S=M&&M.mapping===i.Om?M.image.height:null,T=g[o.type];null!==o.precision&&(m=a.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,A=void 0!==E?E.length:0;let C,R,D,P,L=0;if(void 0!==b.morphAttributes.position&&(L=1),void 0!==b.morphAttributes.normal&&(L=2),void 0!==b.morphAttributes.color&&(L=3),T){const t=c[T];C=t.vertexShader,R=t.fragmentShader}else C=o.vertexShader,R=o.fragmentShader,u.update(o),D=u.getVertexShaderID(o),P=u.getFragmentShaderID(o);const N=t.getRenderTarget(),I=t.state.buffers.depth.getReversed(),U=!0===y.isInstancedMesh,O=!0===y.isBatchedMesh,F=!!o.map,k=!!o.matcap,B=!!M,z=!!o.aoMap,H=!!o.lightMap,V=!!o.bumpMap,G=!!o.normalMap,W=!!o.displacementMap,j=!!o.emissiveMap,q=!!o.metalnessMap,X=!!o.roughnessMap,$=o.anisotropy>0,Y=o.clearcoat>0,K=o.dispersion>0,Z=o.iridescence>0,Q=o.sheen>0,J=o.transmission>0,tt=$&&!!o.anisotropyMap,et=Y&&!!o.clearcoatMap,nt=Y&&!!o.clearcoatNormalMap,rt=Y&&!!o.clearcoatRoughnessMap,it=Z&&!!o.iridescenceMap,at=Z&&!!o.iridescenceThicknessMap,ot=Q&&!!o.sheenColorMap,st=Q&&!!o.sheenRoughnessMap,lt=!!o.specularMap,ct=!!o.specularColorMap,ut=!!o.specularIntensityMap,ft=J&&!!o.transmissionMap,ht=J&&!!o.thicknessMap,dt=!!o.gradientMap,pt=!!o.alphaMap,mt=o.alphaTest>0,gt=!!o.alphaHash,vt=!!o.extensions;let _t=i.y_p;o.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(_t=t.toneMapping));const yt={shaderID:T,shaderType:o.type,shaderName:o.name,vertexShader:C,fragmentShader:R,defines:o.defines,customVertexShaderID:D,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,batching:O,batchingColor:O&&null!==y._colorsTexture,instancing:U,instancingColor:U&&null!==y.instanceColor,instancingMorph:U&&null!==y.morphTexture,supportsVertexTextures:p,outputColorSpace:null===N?t.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:i.Zr2,alphaToCoverage:!!o.alphaToCoverage,map:F,matcap:k,envMap:B,envMapMode:B&&M.mapping,envMapCubeUVHeight:S,aoMap:z,lightMap:H,bumpMap:V,normalMap:G,displacementMap:p&&W,emissiveMap:j,normalMapObjectSpace:G&&o.normalMapType===i.vyJ,normalMapTangentSpace:G&&o.normalMapType===i.bI3,metalnessMap:q,roughnessMap:X,anisotropy:$,anisotropyMap:tt,clearcoat:Y,clearcoatMap:et,clearcoatNormalMap:nt,clearcoatRoughnessMap:rt,dispersion:K,iridescence:Z,iridescenceMap:it,iridescenceThicknessMap:at,sheen:Q,sheenColorMap:ot,sheenRoughnessMap:st,specularMap:lt,specularColorMap:ct,specularIntensityMap:ut,transmission:J,transmissionMap:ft,thicknessMap:ht,gradientMap:dt,opaque:!1===o.transparent&&o.blending===i.NTi&&!1===o.alphaToCoverage,alphaMap:pt,alphaTest:mt,alphaHash:gt,combine:o.combine,mapUv:F&&v(o.map.channel),aoMapUv:z&&v(o.aoMap.channel),lightMapUv:H&&v(o.lightMap.channel),bumpMapUv:V&&v(o.bumpMap.channel),normalMapUv:G&&v(o.normalMap.channel),displacementMapUv:W&&v(o.displacementMap.channel),emissiveMapUv:j&&v(o.emissiveMap.channel),metalnessMapUv:q&&v(o.metalnessMap.channel),roughnessMapUv:X&&v(o.roughnessMap.channel),anisotropyMapUv:tt&&v(o.anisotropyMap.channel),clearcoatMapUv:et&&v(o.clearcoatMap.channel),clearcoatNormalMapUv:nt&&v(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:rt&&v(o.clearcoatRoughnessMap.channel),iridescenceMapUv:it&&v(o.iridescenceMap.channel),iridescenceThicknessMapUv:at&&v(o.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&v(o.sheenColorMap.channel),sheenRoughnessMapUv:st&&v(o.sheenRoughnessMap.channel),specularMapUv:lt&&v(o.specularMap.channel),specularColorMapUv:ct&&v(o.specularColorMap.channel),specularIntensityMapUv:ut&&v(o.specularIntensityMap.channel),transmissionMapUv:ft&&v(o.transmissionMap.channel),thicknessMapUv:ht&&v(o.thicknessMap.channel),alphaMapUv:pt&&v(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(G||$),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!b.attributes.uv&&(F||pt),fog:!!x,useFog:!0===o.fog,fogExp2:!!x&&x.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:I,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:A,morphTextureStride:L,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numSpotLightMaps:l.spotLightMap.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numSpotLightShadowsWithMaps:l.numSpotLightShadowsWithMaps,numLightProbes:l.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:_t,decodeVideoTexture:F&&!0===o.map.isVideoTexture&&i.ppV.getTransfer(o.map.colorSpace)===i.KLL,decodeVideoTextureEmissive:j&&!0===o.emissiveMap.isVideoTexture&&i.ppV.getTransfer(o.emissiveMap.colorSpace)===i.KLL,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===i.$EB,flipSided:o.side===i.hsX,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:vt&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&!0===o.extensions.multiDraw||O)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return yt.vertexUv1s=f.has(1),yt.vertexUv2s=f.has(2),yt.vertexUv3s=f.has(3),f.clear(),yt},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){l.disableAll(),e.supportsVertexTextures&&l.enable(0),e.instancing&&l.enable(1),e.instancingColor&&l.enable(2),e.instancingMorph&&l.enable(3),e.matcap&&l.enable(4),e.envMap&&l.enable(5),e.normalMapObjectSpace&&l.enable(6),e.normalMapTangentSpace&&l.enable(7),e.clearcoat&&l.enable(8),e.iridescence&&l.enable(9),e.alphaTest&&l.enable(10),e.vertexColors&&l.enable(11),e.vertexAlphas&&l.enable(12),e.vertexUv1s&&l.enable(13),e.vertexUv2s&&l.enable(14),e.vertexUv3s&&l.enable(15),e.vertexTangents&&l.enable(16),e.anisotropy&&l.enable(17),e.alphaHash&&l.enable(18),e.batching&&l.enable(19),e.dispersion&&l.enable(20),e.batchingColor&&l.enable(21),t.push(l.mask),l.disableAll(),e.fog&&l.enable(0),e.useFog&&l.enable(1),e.flatShading&&l.enable(2),e.logarithmicDepthBuffer&&l.enable(3),e.reverseDepthBuffer&&l.enable(4),e.skinning&&l.enable(5),e.morphTargets&&l.enable(6),e.morphNormals&&l.enable(7),e.morphColors&&l.enable(8),e.premultipliedAlpha&&l.enable(9),e.shadowMapEnabled&&l.enable(10),e.doubleSided&&l.enable(11),e.flipSided&&l.enable(12),e.useDepthPacking&&l.enable(13),e.dithering&&l.enable(14),e.transmission&&l.enable(15),e.sheen&&l.enable(16),e.opaque&&l.enable(17),e.pointsUvs&&l.enable(18),e.decodeVideoTexture&&l.enable(19),e.decodeVideoTextureEmissive&&l.enable(20),e.alphaToCoverage&&l.enable(21),t.push(l.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=g[t.type];let n;if(e){const t=c[e];n=i.LlO.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=h.length;t<e;t++){const e=h[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new fe(t,n,e,o),h.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}},releaseShaderCache:function(t){u.remove(t)},programs:h,dispose:function(){u.dispose()}}}function ge(){let t=new WeakMap;return{has:function(e){return t.has(e)},get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function ve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function _e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ye(){const t=[];let e=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,o,s,l,c){const u=a(t,e,o,s,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(t,e,o,s,l,c){const u=a(t,e,o,s,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||ve),r.length>1&&r.sort(e||_e),i.length>1&&i.sort(e||_e)}}}function xe(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new ye,t.set(e,[i])):n>=r.length?(i=new ye,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function be(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new i.Pq0,color:new i.Q1f};break;case"SpotLight":n={position:new i.Pq0,direction:new i.Pq0,color:new i.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new i.Pq0,color:new i.Q1f,distance:0,decay:0};break;case"HemisphereLight":n={direction:new i.Pq0,skyColor:new i.Q1f,groundColor:new i.Q1f};break;case"RectAreaLight":n={color:new i.Q1f,position:new i.Pq0,halfWidth:new i.Pq0,halfHeight:new i.Pq0}}return t[e.id]=n,n}}}let we=0;function Me(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Se(t){const e=new be,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.I9Y};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let t=0;t<9;t++)r.probe.push(new i.Pq0);const a=new i.Pq0,o=new i.kn4,s=new i.kn4;return{setup:function(i){let a=0,o=0,s=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,f=0,h=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0;i.sort(Me);for(let t=0,l=i.length;t<l;t++){const l=i[t],x=l.color,b=l.intensity,w=l.distance,M=l.shadow&&l.shadow.map?l.shadow.map.texture:null;if(l.isAmbientLight)a+=x.r*b,o+=x.g*b,s+=x.b*b;else if(l.isLightProbe){for(let t=0;t<9;t++)r.probe[t].addScaledVector(l.sh.coefficients[t],b);y++}else if(l.isDirectionalLight){const t=e.get(l);if(t.color.copy(l.color).multiplyScalar(l.intensity),l.castShadow){const t=l.shadow,e=n.get(l);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,r.directionalShadow[c]=e,r.directionalShadowMap[c]=M,r.directionalShadowMatrix[c]=l.shadow.matrix,p++}r.directional[c]=t,c++}else if(l.isSpotLight){const t=e.get(l);t.position.setFromMatrixPosition(l.matrixWorld),t.color.copy(x).multiplyScalar(b),t.distance=w,t.coneCos=Math.cos(l.angle),t.penumbraCos=Math.cos(l.angle*(1-l.penumbra)),t.decay=l.decay,r.spot[f]=t;const i=l.shadow;if(l.map&&(r.spotLightMap[v]=l.map,v++,i.updateMatrices(l),l.castShadow&&_++),r.spotLightMatrix[f]=i.matrix,l.castShadow){const t=n.get(l);t.shadowIntensity=i.intensity,t.shadowBias=i.bias,t.shadowNormalBias=i.normalBias,t.shadowRadius=i.radius,t.shadowMapSize=i.mapSize,r.spotShadow[f]=t,r.spotShadowMap[f]=M,g++}f++}else if(l.isRectAreaLight){const t=e.get(l);t.color.copy(x).multiplyScalar(b),t.halfWidth.set(.5*l.width,0,0),t.halfHeight.set(0,.5*l.height,0),r.rectArea[h]=t,h++}else if(l.isPointLight){const t=e.get(l);if(t.color.copy(l.color).multiplyScalar(l.intensity),t.distance=l.distance,t.decay=l.decay,l.castShadow){const t=l.shadow,e=n.get(l);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,r.pointShadow[u]=e,r.pointShadowMap[u]=M,r.pointShadowMatrix[u]=l.shadow.matrix,m++}r.point[u]=t,u++}else if(l.isHemisphereLight){const t=e.get(l);t.skyColor.copy(l.color).multiplyScalar(b),t.groundColor.copy(l.groundColor).multiplyScalar(b),r.hemi[d]=t,d++}}h>0&&(!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=l.LTC_FLOAT_1,r.rectAreaLTC2=l.LTC_FLOAT_2):(r.rectAreaLTC1=l.LTC_HALF_1,r.rectAreaLTC2=l.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=o,r.ambient[2]=s;const x=r.hash;x.directionalLength===c&&x.pointLength===u&&x.spotLength===f&&x.rectAreaLength===h&&x.hemiLength===d&&x.numDirectionalShadows===p&&x.numPointShadows===m&&x.numSpotShadows===g&&x.numSpotMaps===v&&x.numLightProbes===y||(r.directional.length=c,r.spot.length=f,r.rectArea.length=h,r.point.length=u,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+v-_,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=y,x.directionalLength=c,x.pointLength=u,x.spotLength=f,x.rectAreaLength=h,x.hemiLength=d,x.numDirectionalShadows=p,x.numPointShadows=m,x.numSpotShadows=g,x.numSpotMaps=v,x.numLightProbes=y,r.version=we++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const f=e.matrixWorldInverse;for(let e=0,h=t.length;e<h;e++){const h=t[e];if(h.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(f),n++}else if(h.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(f),t.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(f),l++}else if(h.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(f),s.identity(),o.copy(h.matrixWorld),o.premultiply(f),s.extractRotation(o),t.halfWidth.set(.5*h.width,0,0),t.halfHeight.set(0,.5*h.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(f),i++}else if(h.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(h.matrixWorld),t.direction.transformDirection(f),u++}}},state:r}}function Te(t){const e=new Se(t),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){i.camera=t,n.length=0,r.length=0},state:i,setupLights:function(){e.setup(n)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function Ee(t){let e=new WeakMap;return{get:function(n,r=0){const i=e.get(n);let a;return void 0===i?(a=new Te(t),e.set(n,[a])):r>=i.length?(a=new Te(t),i.push(a)):a=i[r],a},dispose:function(){e=new WeakMap}}}function Ae(t,e,n){let r=new i.PPD;const a=new i.I9Y,o=new i.I9Y,s=new i.IUQ,l=new i.CSG({depthPacking:i.N5j}),c=new i.aVO,u={},f=n.maxTextureSize,h={[i.hB5]:i.hsX,[i.hsX]:i.hB5,[i.$EB]:i.$EB},d=new i.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new i.I9Y},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const m=new i.LoY;m.setAttribute("position",new i.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new i.eaF(m,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.QP0;let _=this.type;function y(n,r){const o=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new i.nWS(a.x,a.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,d,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,p,g,null)}function x(e,n,r,a){let o=null;const s=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?c:l,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i,n.addEventListener("dispose",w)),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,a===i.RyA?o.side=null!==n.shadowSide?n.shadowSide:n.side:o.side=null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial&&(t.properties.get(o).light=r),o}function b(n,a,o,s,l){if(!1===n.visible)return;if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===i.RyA)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let c=0,u=e.length;c<u;c++){const u=e[c],f=i[u.materialIndex];if(f&&f.visible){const e=x(n,f,s,l);n.onBeforeShadow(t,n,a,o,r,e,u),t.renderBufferDirect(o,null,r,e,n,u),n.onAfterShadow(t,n,a,o,r,e,u)}}}else if(i.visible){const e=x(n,i,s,l);n.onBeforeShadow(t,n,a,o,r,e,null),t.renderBufferDirect(o,null,r,e,n,null),n.onAfterShadow(t,n,a,o,r,e,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)b(c[t],a,o,s,l)}function w(t){t.target.removeEventListener("dispose",w);for(const e in u){const n=u[e],r=t.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(e,n,l){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(i.XIg),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=_!==i.RyA&&this.type===i.RyA,m=_===i.RyA&&this.type!==i.RyA;for(let c=0,u=e.length;c<u;c++){const u=e[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;a.copy(h.mapSize);const g=h.getFrameExtents();if(a.multiply(g),o.copy(h.mapSize),(a.x>f||a.y>f)&&(a.x>f&&(o.x=Math.floor(f/g.x),a.x=o.x*g.x,h.mapSize.x=o.x),a.y>f&&(o.y=Math.floor(f/g.y),a.y=o.y*g.y,h.mapSize.y=o.y)),null===h.map||!0===p||!0===m){const t=this.type!==i.RyA?{minFilter:i.hxR,magFilter:i.hxR}:{};null!==h.map&&h.map.dispose(),h.map=new i.nWS(a.x,a.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const v=h.getViewportCount();for(let t=0;t<v;t++){const e=h.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(s),h.updateMatrices(u,t),r=h.getFrustum(),b(n,l,h.camera,u,this.type)}!0!==h.isPointLightShadow&&this.type===i.RyA&&y(h,l),h.needsUpdate=!1}_=this.type,v.needsUpdate=!1,t.setRenderTarget(c,u,h)}}const Ce={[i.eHc]:i.lGu,[i.brA]:i.K52,[i.U3G]:i.bw0,[i.xSv]:i.Gwm,[i.lGu]:i.eHc,[i.K52]:i.brA,[i.bw0]:i.U3G,[i.Gwm]:i.xSv};function Re(t,e){const n=new function(){let e=!1;const n=new i.IUQ;let r=null;const a=new i.IUQ(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,i,o,s){!0===s&&(e*=o,r*=o,i*=o),n.set(e,r,i,o),!1===a.equals(n)&&(t.clearColor(e,r,i,o),a.copy(n))},reset:function(){e=!1,r=null,a.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,a=null,o=null,s=null;return{setReversed:function(t){if(r!==t){const t=e.get("EXT_clip_control");r?t.clipControlEXT(t.LOWER_LEFT_EXT,t.ZERO_TO_ONE_EXT):t.clipControlEXT(t.LOWER_LEFT_EXT,t.NEGATIVE_ONE_TO_ONE_EXT);const n=s;s=null,this.setClear(n)}r=t},getReversed:function(){return r},setTest:function(e){e?H(t.DEPTH_TEST):V(t.DEPTH_TEST)},setMask:function(e){a===e||n||(t.depthMask(e),a=e)},setFunc:function(e){if(r&&(e=Ce[e]),o!==e){switch(e){case i.eHc:t.depthFunc(t.NEVER);break;case i.lGu:t.depthFunc(t.ALWAYS);break;case i.brA:t.depthFunc(t.LESS);break;case i.xSv:t.depthFunc(t.LEQUAL);break;case i.U3G:t.depthFunc(t.EQUAL);break;case i.Gwm:t.depthFunc(t.GEQUAL);break;case i.K52:t.depthFunc(t.GREATER);break;case i.bw0:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}o=e}},setLocked:function(t){n=t},setClear:function(e){s!==e&&(r&&(e=1-e),t.clearDepth(e),s=e)},reset:function(){n=!1,a=null,o=null,s=null,r=!1}}},a=new function(){let e=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){e||(n?H(t.STENCIL_TEST):V(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,o){r===e&&i===n&&a===o||(t.stencilFunc(e,n,o),r=e,i=n,a=o)},setOp:function(e,n,r){o===e&&s===n&&l===r||(t.stencilOp(e,n,r),o=e,s=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},o=new WeakMap,s=new WeakMap;let l={},c={},u=new WeakMap,f=[],h=null,d=!1,p=null,m=null,g=null,v=null,_=null,y=null,x=null,b=new i.Q1f(0,0,0),w=0,M=!1,S=null,T=null,E=null,A=null,C=null;const R=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,P=0;const L=t.getParameter(t.VERSION);-1!==L.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(L)[1]),D=P>=1):-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),D=P>=2);let N=null,I={};const U=t.getParameter(t.SCISSOR_BOX),O=t.getParameter(t.VIEWPORT),F=(new i.IUQ).fromArray(U),k=(new i.IUQ).fromArray(O);function B(e,n,r,i){const a=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<r;o++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,i,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage2D(n+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a);return o}const z={};function H(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function V(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}z[t.TEXTURE_2D]=B(t.TEXTURE_2D,t.TEXTURE_2D,1),z[t.TEXTURE_CUBE_MAP]=B(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[t.TEXTURE_2D_ARRAY]=B(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),z[t.TEXTURE_3D]=B(t.TEXTURE_3D,t.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),a.setClear(0),H(t.DEPTH_TEST),r.setFunc(i.xSv),q(!1),X(i.Vb5),H(t.CULL_FACE),j(i.XIg);const G={[i.gO9]:t.FUNC_ADD,[i.FXf]:t.FUNC_SUBTRACT,[i.nST]:t.FUNC_REVERSE_SUBTRACT};G[i.znC]=t.MIN,G[i.$ei]=t.MAX;const W={[i.ojh]:t.ZERO,[i.qad]:t.ONE,[i.f4X]:t.SRC_COLOR,[i.ie2]:t.SRC_ALPHA,[i.hgQ]:t.SRC_ALPHA_SATURATE,[i.wn6]:t.DST_COLOR,[i.hdd]:t.DST_ALPHA,[i.LiQ]:t.ONE_MINUS_SRC_COLOR,[i.OuU]:t.ONE_MINUS_SRC_ALPHA,[i.aEY]:t.ONE_MINUS_DST_COLOR,[i.Nt7]:t.ONE_MINUS_DST_ALPHA,[i.RrE]:t.CONSTANT_COLOR,[i.$Yl]:t.ONE_MINUS_CONSTANT_COLOR,[i.e0p]:t.CONSTANT_ALPHA,[i.ov9]:t.ONE_MINUS_CONSTANT_ALPHA};function j(e,n,r,a,o,s,l,c,u,f){if(e!==i.XIg){if(!1===d&&(H(t.BLEND),d=!0),e===i.bCz)o=o||n,s=s||r,l=l||a,n===m&&o===_||(t.blendEquationSeparate(G[n],G[o]),m=n,_=o),r===g&&a===v&&s===y&&l===x||(t.blendFuncSeparate(W[r],W[a],W[s],W[l]),g=r,v=a,y=s,x=l),!1!==c.equals(b)&&u===w||(t.blendColor(c.r,c.g,c.b,u),b.copy(c),w=u),p=e,M=!1;else if(e!==p||f!==M){if(m===i.gO9&&_===i.gO9||(t.blendEquation(t.FUNC_ADD),m=i.gO9,_=i.gO9),f)switch(e){case i.NTi:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case i.EZo:t.blendFunc(t.ONE,t.ONE);break;case i.Kwu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case i.EdD:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case i.NTi:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case i.EZo:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case i.Kwu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case i.EdD:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}g=null,v=null,y=null,x=null,b.set(0,0,0),w=0,p=e,M=f}}else!0===d&&(V(t.BLEND),d=!1)}function q(e){S!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),S=e)}function X(e){e!==i.WNZ?(H(t.CULL_FACE),e!==T&&(e===i.Vb5?t.cullFace(t.BACK):e===i.Jnc?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):V(t.CULL_FACE),T=e}function $(e,n,r){e?(H(t.POLYGON_OFFSET_FILL),A===n&&C===r||(t.polygonOffset(n,r),A=n,C=r)):V(t.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:a},enable:H,disable:V,bindFramebuffer:function(e,n){return c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,e===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let r=f,i=!1;if(e){r=u.get(n),void 0===r&&(r=[],u.set(n,r));const a=e.textures;if(r.length!==a.length||r[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=a.length;e<n;e++)r[e]=t.COLOR_ATTACHMENT0+e;r.length=a.length,i=!0}}else r[0]!==t.BACK&&(r[0]=t.BACK,i=!0);i&&t.drawBuffers(r)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:j,setMaterial:function(e,o){e.side===i.$EB?V(t.CULL_FACE):H(t.CULL_FACE);let s=e.side===i.hsX;o&&(s=!s),q(s),e.blending===i.NTi&&!1===e.transparent?j(i.XIg):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),r.setFunc(e.depthFunc),r.setTest(e.depthTest),r.setMask(e.depthWrite),n.setMask(e.colorWrite);const l=e.stencilWrite;a.setTest(l),l&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?H(t.SAMPLE_ALPHA_TO_COVERAGE):V(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:X,setLineWidth:function(e){e!==E&&(D&&t.lineWidth(e),E=e)},setPolygonOffset:$,setScissorTest:function(e){e?H(t.SCISSOR_TEST):V(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+R-1),N!==e&&(t.activeTexture(e),N=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===N?t.TEXTURE0+R-1:N);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===e&&i.texture===n||(N!==r&&(t.activeTexture(r),N=r),t.bindTexture(e,n||z[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=I[N];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=s.get(n).get(e);o.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===F.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),F.copy(e))},viewport:function(e){!1===k.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),k.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),r.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},N=null,I={},c={},u=new WeakMap,f=[],h=null,d=!1,p=null,m=null,g=null,v=null,_=null,y=null,x=null,b=new i.Q1f(0,0,0),w=0,M=!1,S=null,T=null,E=null,A=null,C=null,F.set(0,0,t.canvas.width,t.canvas.height),k.set(0,0,t.canvas.width,t.canvas.height),n.reset(),r.reset(),a.reset()}}}function De(t,e,n,r,a,o,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new i.I9Y,f=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return p?new OffscreenCanvas(t,e):(0,i.qq$)("canvas")}function g(t,e,n){let r=1;const i=V(t);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame){const n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===h&&(h=m(n,a));const o=e?m(n,a):h;return o.width=n,o.height=a,o.getContext("2d").drawImage(t,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),t}return t}function v(t){return t.generateMipmaps}function _(e){t.generateMipmap(e)}function y(e){return e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:e.isWebGL3DRenderTarget?t.TEXTURE_3D:e.isWebGLArrayRenderTarget||e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function x(n,r,a,o,s=!1){if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===t.RED&&(a===t.FLOAT&&(l=t.R32F),a===t.HALF_FLOAT&&(l=t.R16F),a===t.UNSIGNED_BYTE&&(l=t.R8)),r===t.RED_INTEGER&&(a===t.UNSIGNED_BYTE&&(l=t.R8UI),a===t.UNSIGNED_SHORT&&(l=t.R16UI),a===t.UNSIGNED_INT&&(l=t.R32UI),a===t.BYTE&&(l=t.R8I),a===t.SHORT&&(l=t.R16I),a===t.INT&&(l=t.R32I)),r===t.RG&&(a===t.FLOAT&&(l=t.RG32F),a===t.HALF_FLOAT&&(l=t.RG16F),a===t.UNSIGNED_BYTE&&(l=t.RG8)),r===t.RG_INTEGER&&(a===t.UNSIGNED_BYTE&&(l=t.RG8UI),a===t.UNSIGNED_SHORT&&(l=t.RG16UI),a===t.UNSIGNED_INT&&(l=t.RG32UI),a===t.BYTE&&(l=t.RG8I),a===t.SHORT&&(l=t.RG16I),a===t.INT&&(l=t.RG32I)),r===t.RGB_INTEGER&&(a===t.UNSIGNED_BYTE&&(l=t.RGB8UI),a===t.UNSIGNED_SHORT&&(l=t.RGB16UI),a===t.UNSIGNED_INT&&(l=t.RGB32UI),a===t.BYTE&&(l=t.RGB8I),a===t.SHORT&&(l=t.RGB16I),a===t.INT&&(l=t.RGB32I)),r===t.RGBA_INTEGER&&(a===t.UNSIGNED_BYTE&&(l=t.RGBA8UI),a===t.UNSIGNED_SHORT&&(l=t.RGBA16UI),a===t.UNSIGNED_INT&&(l=t.RGBA32UI),a===t.BYTE&&(l=t.RGBA8I),a===t.SHORT&&(l=t.RGBA16I),a===t.INT&&(l=t.RGBA32I)),r===t.RGB&&a===t.UNSIGNED_INT_5_9_9_9_REV&&(l=t.RGB9_E5),r===t.RGBA){const e=s?i.VxR:i.ppV.getTransfer(o);a===t.FLOAT&&(l=t.RGBA32F),a===t.HALF_FLOAT&&(l=t.RGBA16F),a===t.UNSIGNED_BYTE&&(l=e===i.KLL?t.SRGB8_ALPHA8:t.RGBA8),a===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),a===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)}return l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function b(e,n){let r;return e?null===n||n===i.bkx||n===i.V3x?r=t.DEPTH24_STENCIL8:n===i.RQf?r=t.DEPTH32F_STENCIL8:n===i.cHt&&(r=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===i.bkx||n===i.V3x?r=t.DEPTH_COMPONENT24:n===i.RQf?r=t.DEPTH_COMPONENT32F:n===i.cHt&&(r=t.DEPTH_COMPONENT16),r}function w(t,e){return!0===v(t)||t.isFramebufferTexture&&t.minFilter!==i.hxR&&t.minFilter!==i.k6q?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(t){const e=t.target;e.removeEventListener("dispose",M),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=d.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&T(t),0===Object.keys(i).length&&d.delete(n)}r.remove(t)}(e),e.isVideoTexture&&f.delete(e)}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=r.get(e);if(e.depthTexture&&(e.depthTexture.dispose(),r.remove(e.depthTexture)),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++){if(Array.isArray(n.__webglFramebuffer[e]))for(let r=0;r<n.__webglFramebuffer[e].length;r++)t.deleteFramebuffer(n.__webglFramebuffer[e][r]);else t.deleteFramebuffer(n.__webglFramebuffer[e]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=e.textures;for(let e=0,n=i.length;e<n;e++){const n=r.get(i[e]);n.__webglTexture&&(t.deleteTexture(n.__webglTexture),s.memory.textures--),r.remove(i[e])}r.remove(e)}(n)}function T(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete d.get(i)[n.__cacheKey],s.memory.textures--}let E=0;function A(e,i){const a=r.get(e);if(e.isVideoTexture&&function(t){const e=s.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void N(a,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,a.__webglTexture,t.TEXTURE0+i)}const C={[i.GJx]:t.REPEAT,[i.ghU]:t.CLAMP_TO_EDGE,[i.kTW]:t.MIRRORED_REPEAT},R={[i.hxR]:t.NEAREST,[i.pHI]:t.NEAREST_MIPMAP_NEAREST,[i.Cfg]:t.NEAREST_MIPMAP_LINEAR,[i.k6q]:t.LINEAR,[i.kRr]:t.LINEAR_MIPMAP_NEAREST,[i.$_I]:t.LINEAR_MIPMAP_LINEAR},D={[i.amv]:t.NEVER,[i.FFZ]:t.ALWAYS,[i.vim]:t.LESS,[i.TiK]:t.LEQUAL,[i.kO0]:t.EQUAL,[i.gWB]:t.GEQUAL,[i.eoi]:t.GREATER,[i.jzd]:t.NOTEQUAL};function P(n,o){if(o.type!==i.RQf||!1!==e.has("OES_texture_float_linear")||o.magFilter!==i.k6q&&o.magFilter!==i.kRr&&o.magFilter!==i.Cfg&&o.magFilter!==i.$_I&&o.minFilter!==i.k6q&&o.minFilter!==i.kRr&&o.minFilter!==i.Cfg&&o.minFilter!==i.$_I||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(n,t.TEXTURE_WRAP_S,C[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,C[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,C[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,R[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,R[o.minFilter]),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,D[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(o.magFilter===i.hxR)return;if(o.minFilter!==i.Cfg&&o.minFilter!==i.$_I)return;if(o.type===i.RQf&&!1===e.has("OES_texture_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const i=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,a.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function L(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M));const i=n.source;let a=d.get(i);void 0===a&&(a={},d.set(i,a));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(o!==e.__cacheKey){void 0===a[o]&&(a[o]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[e.__cacheKey];void 0!==i&&(a[e.__cacheKey].usedTimes--,0===i.usedTimes&&T(n)),e.__cacheKey=o,e.__webglTexture=a[o].texture}return r}function N(e,s,l){let c=t.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=t.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=t.TEXTURE_3D);const u=L(e,s),f=s.source;n.bindTexture(c,e.__webglTexture,t.TEXTURE0+l);const h=r.get(f);if(f.version!==h.__version||!0===u){n.activeTexture(t.TEXTURE0+l);const e=i.ppV.getPrimaries(i.ppV.workingColorSpace),r=s.colorSpace===i.jf0?null:i.ppV.getPrimaries(s.colorSpace),d=s.colorSpace===i.jf0||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,s.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,s.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=g(s.image,!1,a.maxTextureSize);p=H(s,p);const m=o.convert(s.format,s.colorSpace),y=o.convert(s.type);let M,S=x(s.internalFormat,m,y,s.colorSpace,s.isVideoTexture);P(c,s);const T=s.mipmaps,E=!0!==s.isVideoTexture,A=void 0===h.__version||!0===u,C=f.dataReady,R=w(s,p);if(s.isDepthTexture)S=b(s.format===i.dcC,s.type),A&&(E?n.texStorage2D(t.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,m,y,null));else if(s.isDataTexture)if(T.length>0){E&&A&&n.texStorage2D(t.TEXTURE_2D,R,S,T[0].width,T[0].height);for(let e=0,r=T.length;e<r;e++)M=T[e],E?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,m,y,M.data):n.texImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,m,y,M.data);s.generateMipmaps=!1}else E?(A&&n.texStorage2D(t.TEXTURE_2D,R,S,p.width,p.height),C&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,p.width,p.height,m,y,p.data)):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,m,y,p.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){E&&A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,R,S,T[0].width,T[0].height,p.depth);for(let e=0,r=T.length;e<r;e++)if(M=T[e],s.format!==i.GWd)if(null!==m)if(E){if(C)if(s.layerUpdates.size>0){const r=(0,i.Nex)(M.width,M.height,s.format,s.type);for(const i of s.layerUpdates){const a=M.data.subarray(i*r/M.data.BYTES_PER_ELEMENT,(i+1)*r/M.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,i,M.width,M.height,1,m,a)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,p.depth,m,M.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,S,M.width,M.height,p.depth,0,M.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?C&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,M.width,M.height,p.depth,m,y,M.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,S,M.width,M.height,p.depth,0,m,y,M.data)}else{E&&A&&n.texStorage2D(t.TEXTURE_2D,R,S,T[0].width,T[0].height);for(let e=0,r=T.length;e<r;e++)M=T[e],s.format!==i.GWd?null!==m?E?C&&n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,m,M.data):n.compressedTexImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,M.width,M.height,m,y,M.data):n.texImage2D(t.TEXTURE_2D,e,S,M.width,M.height,0,m,y,M.data)}else if(s.isDataArrayTexture)if(E){if(A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,R,S,p.width,p.height,p.depth),C)if(s.layerUpdates.size>0){const e=(0,i.Nex)(p.width,p.height,s.format,s.type);for(const r of s.layerUpdates){const i=p.data.subarray(r*e/p.data.BYTES_PER_ELEMENT,(r+1)*e/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,m,y,i)}s.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,m,y,p.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,m,y,p.data);else if(s.isData3DTexture)E?(A&&n.texStorage3D(t.TEXTURE_3D,R,S,p.width,p.height,p.depth),C&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,m,y,p.data)):n.texImage3D(t.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,m,y,p.data);else if(s.isFramebufferTexture){if(A)if(E)n.texStorage2D(t.TEXTURE_2D,R,S,p.width,p.height);else{let e=p.width,r=p.height;for(let i=0;i<R;i++)n.texImage2D(t.TEXTURE_2D,i,S,e,r,0,m,y,null),e>>=1,r>>=1}}else if(T.length>0){if(E&&A){const e=V(T[0]);n.texStorage2D(t.TEXTURE_2D,R,S,e.width,e.height)}for(let e=0,r=T.length;e<r;e++)M=T[e],E?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,m,y,M):n.texImage2D(t.TEXTURE_2D,e,S,m,y,M);s.generateMipmaps=!1}else if(E){if(A){const e=V(p);n.texStorage2D(t.TEXTURE_2D,R,S,e.width,e.height)}C&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,m,y,p)}else n.texImage2D(t.TEXTURE_2D,0,S,m,y,p);v(s)&&_(c),h.__version=f.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}function I(e,i,a,s,c,u){const f=o.convert(a.format,a.colorSpace),h=o.convert(a.type),d=x(a.internalFormat,f,h,a.colorSpace),p=r.get(i),m=r.get(a);if(m.__renderTarget=i,!p.__hasExternalTextures){const e=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===t.TEXTURE_3D||c===t.TEXTURE_2D_ARRAY?n.texImage3D(c,u,d,e,r,i.depth,0,f,h,null):n.texImage2D(c,u,d,e,r,0,f,h,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),z(i)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,s,c,m.__webglTexture,0,B(i)):(c===t.TEXTURE_2D||c>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,s,c,m.__webglTexture,u),n.bindFramebuffer(t.FRAMEBUFFER,null)}function U(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer){const i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,o=b(n.stencilBuffer,a),s=n.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=B(n);z(n)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,o,n.width,n.height):r?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,o,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,o,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,s,t.RENDERBUFFER,e)}else{const e=n.textures;for(let i=0;i<e.length;i++){const a=e[i],s=o.convert(a.format,a.colorSpace),c=o.convert(a.type),u=x(a.internalFormat,s,c,a.colorSpace),f=B(n);r&&!1===z(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,f,u,n.width,n.height):z(n)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,f,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function O(e){const a=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(a.__boundDepthTexture!==e.depthTexture){const t=e.depthTexture;if(a.__depthDisposeCallback&&a.__depthDisposeCallback(),t){const e=()=>{delete a.__boundDepthTexture,delete a.__depthDisposeCallback,t.removeEventListener("dispose",e)};t.addEventListener("dispose",e),a.__depthDisposeCallback=e}a.__boundDepthTexture=t}if(e.depthTexture&&!a.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const o=r.get(a.depthTexture);o.__renderTarget=a,o.__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),A(a.depthTexture,0);const s=o.__webglTexture,c=B(a);if(a.depthTexture.format===i.zdS)z(a)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,c):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(a.depthTexture.format!==i.dcC)throw new Error("Unknown depthTexture format");z(a)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,c):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}(a.__webglFramebuffer,e)}else if(o){a.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(t.FRAMEBUFFER,a.__webglFramebuffer[r]),void 0===a.__webglDepthbuffer[r])a.__webglDepthbuffer[r]=t.createRenderbuffer(),U(a.__webglDepthbuffer[r],e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,i=a.__webglDepthbuffer[r];t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,i)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,a.__webglFramebuffer),void 0===a.__webglDepthbuffer)a.__webglDepthbuffer=t.createRenderbuffer(),U(a.__webglDepthbuffer,e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,r=a.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,r)}n.bindFramebuffer(t.FRAMEBUFFER,null)}const F=[],k=[];function B(t){return Math.min(a.maxSamples,t.samples)}function z(t){const n=r.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(t,e){const n=t.colorSpace,r=t.format,a=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||n!==i.Zr2&&n!==i.jf0&&(i.ppV.getTransfer(n)===i.KLL?r===i.GWd&&a===i.OUM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),e}function V(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(u.width=t.naturalWidth||t.width,u.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(u.width=t.displayWidth,u.height=t.displayHeight):(u.width=t.width,u.height=t.height),u}this.allocateTextureUnit=function(){const t=E;return t>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+a.maxTextures),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=A,this.setTexture2DArray=function(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?N(a,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,a.__webglTexture,t.TEXTURE0+i)},this.setTexture3D=function(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?N(a,e,i):n.bindTexture(t.TEXTURE_3D,a.__webglTexture,t.TEXTURE0+i)},this.setTextureCube=function(e,s){const l=r.get(e);e.version>0&&l.__version!==e.version?function(e,s,l){if(6!==s.image.length)return;const c=L(e,s),u=s.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+l);const f=r.get(u);if(u.version!==f.__version||!0===c){n.activeTexture(t.TEXTURE0+l);const e=i.ppV.getPrimaries(i.ppV.workingColorSpace),r=s.colorSpace===i.jf0?null:i.ppV.getPrimaries(s.colorSpace),h=s.colorSpace===i.jf0||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,s.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,s.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,m=[];for(let t=0;t<6;t++)m[t]=d||p?p?s.image[t].image:s.image[t]:g(s.image[t],!0,a.maxCubemapSize),m[t]=H(s,m[t]);const y=m[0],b=o.convert(s.format,s.colorSpace),M=o.convert(s.type),S=x(s.internalFormat,b,M,s.colorSpace),T=!0!==s.isVideoTexture,E=void 0===f.__version||!0===c,A=u.dataReady;let C,R=w(s,y);if(P(t.TEXTURE_CUBE_MAP,s),d){T&&E&&n.texStorage2D(t.TEXTURE_CUBE_MAP,R,S,y.width,y.height);for(let e=0;e<6;e++){C=m[e].mipmaps;for(let r=0;r<C.length;r++){const a=C[r];s.format!==i.GWd?null!==b?T?A&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,a.width,a.height,b,a.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,a.width,a.height,b,M,a.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,a.width,a.height,0,b,M,a.data)}}}else{if(C=s.mipmaps,T&&E){C.length>0&&R++;const e=V(m[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,R,S,e.width,e.height)}for(let e=0;e<6;e++)if(p){T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,m[e].width,m[e].height,b,M,m[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,m[e].width,m[e].height,0,b,M,m[e].data);for(let r=0;r<C.length;r++){const i=C[r].image[e].image;T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,i.width,i.height,b,M,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,i.width,i.height,0,b,M,i.data)}}else{T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,b,M,m[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,b,M,m[e]);for(let r=0;r<C.length;r++){const i=C[r];T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,b,M,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,b,M,i.image[e])}}}v(s)&&_(t.TEXTURE_CUBE_MAP),f.__version=u.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}(l,e,s):n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture,t.TEXTURE0+s)},this.rebindTextures=function(e,n,i){const a=r.get(e);void 0!==n&&I(a.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==i&&O(e)},this.setupRenderTarget=function(e){const i=e.texture,a=r.get(e),l=r.get(i);e.addEventListener("dispose",S);const c=e.textures,u=!0===e.isWebGLCubeRenderTarget,f=c.length>1;if(f||(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=i.version,s.memory.textures++),u){a.__webglFramebuffer=[];for(let e=0;e<6;e++)if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer[e]=[];for(let n=0;n<i.mipmaps.length;n++)a.__webglFramebuffer[e][n]=t.createFramebuffer()}else a.__webglFramebuffer[e]=t.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer=[];for(let e=0;e<i.mipmaps.length;e++)a.__webglFramebuffer[e]=t.createFramebuffer()}else a.__webglFramebuffer=t.createFramebuffer();if(f)for(let e=0,n=c.length;e<n;e++){const n=r.get(c[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),s.memory.textures++)}if(e.samples>0&&!1===z(e)){a.__webglMultisampledFramebuffer=t.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];a.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),s=o.convert(r.type),l=x(r.internalFormat,i,s,r.colorSpace,!0===e.isXRRenderTarget),u=B(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,a.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(a.__webglDepthRenderbuffer=t.createRenderbuffer(),U(a.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(u){n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture),P(t.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)I(a.__webglFramebuffer[n][r],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else I(a.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(i)&&_(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){for(let i=0,o=c.length;i<o;i++){const o=c[i],s=r.get(o);n.bindTexture(t.TEXTURE_2D,s.__webglTexture),P(t.TEXTURE_2D,o),I(a.__webglFramebuffer,e,o,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,0),v(o)&&_(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),P(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)I(a.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,r,n);else I(a.__webglFramebuffer,e,i,t.COLOR_ATTACHMENT0,r,0);v(i)&&_(r),n.unbindTexture()}e.depthBuffer&&O(e)},this.updateRenderTargetMipmap=function(t){const e=t.textures;for(let i=0,a=e.length;i<a;i++){const a=e[i];if(v(a)){const e=y(t),i=r.get(a).__webglTexture;n.bindTexture(e,i),_(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===z(e)){const i=e.textures,a=e.width,o=e.height;let s=t.COLOR_BUFFER_BIT;const l=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=r.get(e),f=i.length>1;if(f)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(s|=t.STENCIL_BUFFER_BIT)),f){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,a,o,0,0,a,o,s,t.NEAREST),!0===c&&(F.length=0,k.length=0,F.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&!1===e.resolveDepthBuffer&&(F.push(l),k.push(l),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,k)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),f)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const a=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,a,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&c){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=I,this.useMultisampledRTT=z}function Pe(t,e){return{convert:function(n,r=i.jf0){let a;const o=i.ppV.getTransfer(r);if(n===i.OUM)return t.UNSIGNED_BYTE;if(n===i.Wew)return t.UNSIGNED_SHORT_4_4_4_4;if(n===i.gJ2)return t.UNSIGNED_SHORT_5_5_5_1;if(n===i.Dmk)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===i.tJf)return t.BYTE;if(n===i.fBL)return t.SHORT;if(n===i.cHt)return t.UNSIGNED_SHORT;if(n===i.Yuy)return t.INT;if(n===i.bkx)return t.UNSIGNED_INT;if(n===i.RQf)return t.FLOAT;if(n===i.ix0)return t.HALF_FLOAT;if(n===i.wrO)return t.ALPHA;if(n===i.HIg)return t.RGB;if(n===i.GWd)return t.RGBA;if(n===i.Kzv)return t.LUMINANCE;if(n===i.CMB)return t.LUMINANCE_ALPHA;if(n===i.zdS)return t.DEPTH_COMPONENT;if(n===i.dcC)return t.DEPTH_STENCIL;if(n===i.VT0)return t.RED;if(n===i.ZQM)return t.RED_INTEGER;if(n===i.paN)return t.RG;if(n===i.TkQ)return t.RG_INTEGER;if(n===i.c90)return t.RGBA_INTEGER;if(n===i.IE4||n===i.Nz6||n===i.jR7||n===i.BXX)if(o===i.KLL){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===i.IE4)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===i.Nz6)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===i.jR7)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===i.BXX)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===i.IE4)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===i.Nz6)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===i.jR7)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===i.BXX)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===i.k6Q||n===i.kTp||n===i.HXV||n===i.pBf){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===i.k6Q)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===i.kTp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===i.HXV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===i.pBf)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===i.CVz||n===i.Riy||n===i.KDk){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===i.CVz||n===i.Riy)return o===i.KLL?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===i.KDk)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===i.qa3||n===i.B_h||n===i.czI||n===i.rSH||n===i.Qrf||n===i.psI||n===i.a5J||n===i._QJ||n===i.uB5||n===i.lyL||n===i.bC7||n===i.y3Z||n===i.ojs||n===i.S$4){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===i.qa3)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===i.B_h)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===i.czI)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===i.rSH)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===i.Qrf)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===i.psI)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===i.a5J)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===i._QJ)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===i.uB5)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===i.lyL)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===i.bC7)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===i.y3Z)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===i.ojs)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===i.S$4)return o===i.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===i.Fn||n===i.H23||n===i.W9U){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(n===i.Fn)return o===i.KLL?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===i.H23)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===i.W9U)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===i.Kef||n===i.XG_||n===i.HO_||n===i.CWW){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===i.Fn)return a.COMPRESSED_RED_RGTC1_EXT;if(n===i.XG_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===i.HO_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===i.CWW)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===i.V3x?t.UNSIGNED_INT_24_8:void 0!==t[n]?t[n]:null}}}const Le={type:"move"};class Ne{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new i.YJl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new i.YJl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new i.Pq0,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new i.Pq0),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new i.YJl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new i.Pq0,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new i.Pq0),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){a=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),i=this._getHandJoint(l,r);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Le)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new i.YJl;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Ie{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new i.gPd;t.properties.get(r).__webglTexture=e.texture,e.depthNear===n.depthNear&&e.depthFar===n.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new i.BKk({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new i.eaF(new i.bdM(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Ue extends i.Qev{constructor(t,e){super();const n=this;let r=null,o=1,s=null,l="local-floor",c=1,u=null,f=null,h=null,d=null,p=null,m=null;const g=new Ie,v=e.getContextAttributes();let _=null,y=null;const x=[],b=[],w=new i.I9Y;let M=null;const S=new i.ubm;S.viewport=new i.IUQ;const T=new i.ubm;T.viewport=new i.IUQ;const E=[S,T],A=new i.nZQ;let C=null,R=null;function D(t){const e=b.indexOf(t.inputSource);if(-1===e)return;const n=x[e];void 0!==n&&(n.update(t.inputSource,t.frame,u||s),n.dispatchEvent({type:t.type,data:t.inputSource}))}function P(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",L);for(let t=0;t<x.length;t++){const e=b[t];null!==e&&(b[t]=null,x[t].disconnect(e))}C=null,R=null,g.reset(),t.setRenderTarget(_),p=null,d=null,h=null,r=null,y=null,F.stop(),n.isPresenting=!1,t.setPixelRatio(M),t.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}function L(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=b.indexOf(n);r>=0&&(b[r]=null,x[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=b.indexOf(n);if(-1===r){for(let t=0;t<x.length;t++){if(t>=b.length){b.push(n),r=t;break}if(null===b[t]){b[t]=n,r=t;break}}if(-1===r)break}const i=x[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=x[t];return void 0===e&&(e=new Ne,x[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=x[t];return void 0===e&&(e=new Ne,x[t]=e),e.getGripSpace()},this.getHand=function(t){let e=x[t];return void 0===e&&(e=new Ne,x[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){l=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(t){u=t},this.getBaseLayer=function(){return null!==d?d:p},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(a){if(r=a,null!==r){if(_=t.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",P),r.addEventListener("inputsourceschange",L),!0!==v.xrCompatible&&await e.makeXRCompatible(),M=t.getPixelRatio(),t.getSize(w),void 0!==r.enabledFeatures&&r.enabledFeatures.includes("layers")){let n=null,a=null,s=null;v.depth&&(s=v.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=v.stencil?i.dcC:i.zdS,a=v.stencil?i.V3x:i.bkx);const l={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:o};h=new XRWebGLBinding(r,e),d=h.createProjectionLayer(l),r.updateRenderState({layers:[d]}),t.setPixelRatio(1),t.setSize(d.textureWidth,d.textureHeight,!1),y=new i.nWS(d.textureWidth,d.textureHeight,{format:i.GWd,type:i.OUM,depthTexture:new i.VCu(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),y=new i.nWS(p.framebufferWidth,p.framebufferHeight,{format:i.GWd,type:i.OUM,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil})}y.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await r.requestReferenceSpace(l),F.setContext(r),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const N=new i.Pq0,I=new i.Pq0;function U(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;let e=t.near,n=t.far;null!==g.texture&&(g.depthNear>0&&(e=g.depthNear),g.depthFar>0&&(n=g.depthFar)),A.near=T.near=S.near=e,A.far=T.far=S.far=n,C===A.near&&R===A.far||(r.updateRenderState({depthNear:A.near,depthFar:A.far}),C=A.near,R=A.far),S.layers.mask=2|t.layers.mask,T.layers.mask=4|t.layers.mask,A.layers.mask=S.layers.mask|T.layers.mask;const a=t.parent,o=A.cameras;U(A,a);for(let t=0;t<o.length;t++)U(o[t],a);2===o.length?function(t,e,n){N.setFromMatrixPosition(e.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);const r=N.distanceTo(I),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],f=(a[8]+1)/a[0],h=o*u,d=o*f,p=r/(-u+f),m=p*-u;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===i[10])t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const e=o+p,n=s+p,i=h-m,a=d+(r-m),u=l*s/n*e,f=c*s/n*e;t.projectionMatrix.makePerspective(i,a,u,f,e,n),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(A,S,T):A.projectionMatrix.copy(S.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*i.a55*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,A,a)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==d||null!==p)return c},this.setFoveation=function(t){c=t,null!==d&&(d.fixedFoveation=t),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(A)};let O=null;const F=new a;F.setAnimationLoop((function(e,a){if(f=a.getViewerPose(u||s),m=a,null!==f){const e=f.views;null!==p&&(t.setRenderTargetFramebuffer(y,p.framebuffer),t.setRenderTarget(y));let n=!1;e.length!==A.cameras.length&&(A.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const a=e[r];let o=null;if(null!==p)o=p.getViewport(a);else{const e=h.getViewSubImage(d,a);o=e.viewport,0===r&&(t.setRenderTargetTextures(y,e.colorTexture,d.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(y))}let s=E[r];void 0===s&&(s=new i.ubm,s.layers.enable(r),s.viewport=new i.IUQ,E[r]=s),s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(a.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(A.matrix.copy(s.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===n&&A.cameras.push(s)}const a=r.enabledFeatures;if(a&&a.includes("depth-sensing")){const n=h.getDepthInformation(e[0]);n&&n.isValid&&n.texture&&g.init(t,n,r.renderState)}}for(let t=0;t<x.length;t++){const e=b[t],n=x[t];null!==e&&void 0!==n&&n.update(e,a,u||s)}O&&O(e,a),a.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:a}),m=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}const Oe=new i.O9p,Fe=new i.kn4;function ke(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(t,r){t.opacity.value=r.opacity,r.color&&t.diffuse.value.copy(r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map,n(r.map,t.mapTransform)),r.alphaMap&&(t.alphaMap.value=r.alphaMap,n(r.alphaMap,t.alphaMapTransform)),r.bumpMap&&(t.bumpMap.value=r.bumpMap,n(r.bumpMap,t.bumpMapTransform),t.bumpScale.value=r.bumpScale,r.side===i.hsX&&(t.bumpScale.value*=-1)),r.normalMap&&(t.normalMap.value=r.normalMap,n(r.normalMap,t.normalMapTransform),t.normalScale.value.copy(r.normalScale),r.side===i.hsX&&t.normalScale.value.negate()),r.displacementMap&&(t.displacementMap.value=r.displacementMap,n(r.displacementMap,t.displacementMapTransform),t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,t.emissiveMapTransform)),r.specularMap&&(t.specularMap.value=r.specularMap,n(r.specularMap,t.specularMapTransform)),r.alphaTest>0&&(t.alphaTest.value=r.alphaTest);const a=e.get(r),o=a.envMap,s=a.envMapRotation;o&&(t.envMap.value=o,Oe.copy(s),Oe.x*=-1,Oe.y*=-1,Oe.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(Oe.y*=-1,Oe.z*=-1),t.envMapRotation.value.setFromMatrix4(Fe.makeRotationFromEuler(Oe)),t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=r.reflectivity,t.ior.value=r.ior,t.refractionRatio.value=r.refractionRatio),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,t.lightMapTransform)),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,(0,i._Ut)(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,a,o,s,l){a.isMeshBasicMaterial||a.isMeshLambertMaterial?r(t,a):a.isMeshToonMaterial?(r(t,a),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,a)):a.isMeshPhongMaterial?(r(t,a),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,a)):a.isMeshStandardMaterial?(r(t,a),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform)),t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform)),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,a),a.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===i.hsX&&t.clearcoatNormalScale.value.negate())),e.dispersion>0&&(t.dispersion.value=e.dispersion),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,a,l)):a.isMeshMatcapMaterial?(r(t,a),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,a)):a.isMeshDepthMaterial?r(t,a):a.isMeshDistanceMaterial?(r(t,a),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,a)):a.isMeshNormalMaterial?r(t,a):a.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,a),a.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,a)):a.isPointsMaterial?function(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,a,o,s):a.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,a):a.isShadowMaterial?(t.color.value.copy(a.color),t.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}}}function Be(t,e,n,r){let i={},a={},o=[];const s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(t,e,n,r){const i=t.value,a=e+"_"+n;if(void 0===r[a])return r[a]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const t=r[a];if("number"==typeof i||"boolean"==typeof i){if(t!==i)return r[a]=i,!0}else if(!1===t.equals(i))return t.copy(i),!0}return!1}function c(t){const e={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,f){let h=i[n.id];void 0===h&&(function(t){const e=t.uniforms;let n=0;for(let t=0,r=e.length;t<r;t++){const r=Array.isArray(e[t])?e[t]:[e[t]];for(let t=0,e=r.length;t<e;t++){const e=r[t],i=Array.isArray(e.value)?e.value:[e.value];for(let t=0,r=i.length;t<r;t++){const r=c(i[t]),a=n%16,o=a%r.boundary,s=a+o;n+=o,0!==s&&16-s<r.storage&&(n+=16-s),e.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,n+=r.storage}}}const r=n%16;r>0&&(n+=16-r),t.__size=n,t.__cache={}}(n),h=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===o.indexOf(t))return o.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,a=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,a),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const d=f.program;r.updateUBOMapping(n,d);const p=e.render.frame;a[n.id]!==p&&(function(e){const n=i[e.id],r=e.uniforms,a=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let e=0,n=r.length;e<n;e++){const n=Array.isArray(r[e])?r[e]:[r[e]];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(!0===l(i,e,r,a)){const e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let a=0;a<n.length;a++){const o=n[a],s=c(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,t.bufferSubData(t.UNIFORM_BUFFER,e+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,i.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);o=[],i={},a={}}}}class ze{constructor(t={}){const{canvas:e=(0,i.lPF)(),context:n=null,depth:r=!0,stencil:s=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:x=!1}=t;let b;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=n.getContextAttributes().alpha}else b=l;const w=new Uint32Array(4),M=new Int32Array(4);let S=null,T=null;const E=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=i.er$,this.toneMapping=i.y_p,this.toneMappingExposure=1;const C=this;let R=!1,D=0,P=0,L=null,N=-1,H=null;const V=new i.IUQ,G=new i.IUQ;let W=null;const j=new i.Q1f(0);let q=0,X=e.width,$=e.height,Y=1,K=null,Z=null;const Q=new i.IUQ(0,0,X,$),J=new i.IUQ(0,0,X,$);let tt=!1;const et=new i.PPD;let nt=!1,rt=!1;this.transmissionResolutionScale=1;const it=new i.kn4,at=new i.kn4,ot=new i.Pq0,st=new i.IUQ,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ct=!1;function ut(){return null===L?Y:1}let ft,ht,dt,pt,mt,gt,vt,_t,yt,xt,bt,wt,Mt,St,Tt,Et,At,Ct,Rt,Dt,Pt,Lt,Nt,It,Ut=n;function Ot(t,n){return e.getContext(t,n)}try{const t={alpha:!0,depth:r,stencil:s,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${i.sPf}`),e.addEventListener("webglcontextlost",Bt,!1),e.addEventListener("webglcontextrestored",zt,!1),e.addEventListener("webglcontextcreationerror",Ht,!1),null===Ut){const e="webgl2";if(Ut=Ot(e,t),null===Ut)throw Ot(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Ft(){ft=new U(Ut),ft.init(),Lt=new Pe(Ut,ft),ht=new g(Ut,ft,t,Lt),dt=new Re(Ut,ft),ht.reverseDepthBuffer&&x&&dt.buffers.depth.setReversed(!0),pt=new k(Ut),mt=new ge,gt=new De(Ut,ft,dt,mt,ht,Lt,pt),vt=new _(C),_t=new I(C),yt=new o(Ut),Nt=new p(Ut,yt),xt=new O(Ut,yt,pt,Nt),bt=new z(Ut,xt,yt,pt),Rt=new B(Ut,ht,gt),Et=new v(mt),wt=new me(C,vt,_t,ft,ht,Nt,Et),Mt=new ke(C,mt),St=new xe,Tt=new Ee(ft),Ct=new d(C,vt,_t,dt,bt,b,u),At=new Ae(C,bt,ht),It=new Be(Ut,pt,ht,dt),Dt=new m(Ut,ft,pt),Pt=new F(Ut,ft,pt),pt.programs=wt.programs,C.capabilities=ht,C.extensions=ft,C.properties=mt,C.renderLists=St,C.shadowMap=At,C.state=dt,C.info=pt}Ft();const kt=new Ue(C,Ut);function Bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const t=pt.autoReset,e=At.enabled,n=At.autoUpdate,r=At.needsUpdate,i=At.type;Ft(),pt.autoReset=t,At.enabled=e,At.autoUpdate=n,At.needsUpdate=r,At.type=i}function Ht(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Vt(t){const e=t.target;e.removeEventListener("dispose",Vt),function(t){(function(t){const e=mt.get(t).programs;void 0!==e&&(e.forEach((function(t){wt.releaseProgram(t)})),t.isShaderMaterial&&wt.releaseShaderCache(t))})(t),mt.remove(t)}(e)}function Gt(t,e,n){!0===t.transparent&&t.side===i.$EB&&!1===t.forceSinglePass?(t.side=i.hsX,t.needsUpdate=!0,te(t,e,n),t.side=i.hB5,t.needsUpdate=!0,te(t,e,n),t.side=i.$EB):te(t,e,n)}this.xr=kt,this.getContext=function(){return Ut},this.getContextAttributes=function(){return Ut.getContextAttributes()},this.forceContextLoss=function(){const t=ft.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=ft.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(t){void 0!==t&&(Y=t,this.setSize(X,$,!1))},this.getSize=function(t){return t.set(X,$)},this.setSize=function(t,n,r=!0){kt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(X=t,$=n,e.width=Math.floor(t*Y),e.height=Math.floor(n*Y),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(X*Y,$*Y).floor()},this.setDrawingBufferSize=function(t,n,r){X=t,$=n,Y=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(V)},this.getViewport=function(t){return t.copy(Q)},this.setViewport=function(t,e,n,r){t.isVector4?Q.set(t.x,t.y,t.z,t.w):Q.set(t,e,n,r),dt.viewport(V.copy(Q).multiplyScalar(Y).round())},this.getScissor=function(t){return t.copy(J)},this.setScissor=function(t,e,n,r){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,r),dt.scissor(G.copy(J).multiplyScalar(Y).round())},this.getScissorTest=function(){return tt},this.setScissorTest=function(t){dt.setScissorTest(tt=t)},this.setOpaqueSort=function(t){K=t},this.setTransparentSort=function(t){Z=t},this.getClearColor=function(t){return t.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor.apply(Ct,arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha.apply(Ct,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;if(t){let t=!1;if(null!==L){const e=L.texture.format;t=e===i.c90||e===i.TkQ||e===i.ZQM}if(t){const t=L.texture.type,e=t===i.OUM||t===i.bkx||t===i.cHt||t===i.V3x||t===i.Wew||t===i.gJ2,n=Ct.getClearColor(),r=Ct.getClearAlpha(),a=n.r,o=n.g,s=n.b;e?(w[0]=a,w[1]=o,w[2]=s,w[3]=r,Ut.clearBufferuiv(Ut.COLOR,0,w)):(M[0]=a,M[1]=o,M[2]=s,M[3]=r,Ut.clearBufferiv(Ut.COLOR,0,M))}else r|=Ut.COLOR_BUFFER_BIT}e&&(r|=Ut.DEPTH_BUFFER_BIT),n&&(r|=Ut.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ut.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Bt,!1),e.removeEventListener("webglcontextrestored",zt,!1),e.removeEventListener("webglcontextcreationerror",Ht,!1),Ct.dispose(),St.dispose(),Tt.dispose(),mt.dispose(),vt.dispose(),_t.dispose(),bt.dispose(),Nt.dispose(),It.dispose(),wt.dispose(),kt.dispose(),kt.removeEventListener("sessionstart",qt),kt.removeEventListener("sessionend",Xt),$t.stop()},this.renderBufferDirect=function(t,e,n,r,a,o){null===e&&(e=lt);const s=a.isMesh&&a.matrixWorld.determinant()<0,l=function(t,e,n,r,a){!0!==e.isScene&&(e=lt),gt.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,l=null===L?C.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:i.Zr2,c=(r.isMeshStandardMaterial?_t:vt).get(r.envMap||s),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,f=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=i.y_p;r.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(m=C.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,_=mt.get(r),y=T.state.lights;if(!0===nt&&(!0===rt||t!==H)){const e=t===H&&r.id===N;Et.setState(r,t,e)}let x=!1;r.version===_.__version?_.needsLights&&_.lightsStateVersion!==y.state.version||_.outputColorSpace!==l||a.isBatchedMesh&&!1===_.batching?x=!0:a.isBatchedMesh||!0!==_.batching?a.isBatchedMesh&&!0===_.batchingColor&&null===a.colorTexture||a.isBatchedMesh&&!1===_.batchingColor&&null!==a.colorTexture||a.isInstancedMesh&&!1===_.instancing?x=!0:a.isInstancedMesh||!0!==_.instancing?a.isSkinnedMesh&&!1===_.skinning?x=!0:a.isSkinnedMesh||!0!==_.skinning?a.isInstancedMesh&&!0===_.instancingColor&&null===a.instanceColor||a.isInstancedMesh&&!1===_.instancingColor&&null!==a.instanceColor||a.isInstancedMesh&&!0===_.instancingMorph&&null===a.morphTexture||a.isInstancedMesh&&!1===_.instancingMorph&&null!==a.morphTexture||_.envMap!==c||!0===r.fog&&_.fog!==o?x=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===Et.numPlanes&&_.numIntersection===Et.numIntersection?(_.vertexAlphas!==u||_.vertexTangents!==f||_.morphTargets!==h||_.morphNormals!==d||_.morphColors!==p||_.toneMapping!==m||_.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,_.__version=r.version);let b=_.currentProgram;!0===x&&(b=te(r,e,a));let w=!1,M=!1,S=!1;const E=b.getUniforms(),A=_.uniforms;if(dt.useProgram(b.program)&&(w=!0,M=!0,S=!0),r.id!==N&&(N=r.id,M=!0),w||H!==t){dt.buffers.depth.getReversed()?(it.copy(t.projectionMatrix),(0,i.xiE)(it),(0,i.Mmk)(it),E.setValue(Ut,"projectionMatrix",it)):E.setValue(Ut,"projectionMatrix",t.projectionMatrix),E.setValue(Ut,"viewMatrix",t.matrixWorldInverse);const e=E.map.cameraPosition;void 0!==e&&e.setValue(Ut,ot.setFromMatrixPosition(t.matrixWorld)),ht.logarithmicDepthBuffer&&E.setValue(Ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&E.setValue(Ut,"isOrthographic",!0===t.isOrthographicCamera),H!==t&&(H=t,M=!0,S=!0)}if(a.isSkinnedMesh){E.setOptional(Ut,a,"bindMatrix"),E.setOptional(Ut,a,"bindMatrixInverse");const t=a.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),E.setValue(Ut,"boneTexture",t.boneTexture,gt))}a.isBatchedMesh&&(E.setOptional(Ut,a,"batchingTexture"),E.setValue(Ut,"batchingTexture",a._matricesTexture,gt),E.setOptional(Ut,a,"batchingIdTexture"),E.setValue(Ut,"batchingIdTexture",a._indirectTexture,gt),E.setOptional(Ut,a,"batchingColorTexture"),null!==a._colorsTexture&&E.setValue(Ut,"batchingColorTexture",a._colorsTexture,gt));const R=n.morphAttributes;var D,P;if(void 0===R.position&&void 0===R.normal&&void 0===R.color||Rt.update(a,n,b),(M||_.receiveShadow!==a.receiveShadow)&&(_.receiveShadow=a.receiveShadow,E.setValue(Ut,"receiveShadow",a.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(A.envMap.value=c,A.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1),r.isMeshStandardMaterial&&null===r.envMap&&null!==e.environment&&(A.envMapIntensity.value=e.environmentIntensity),M&&(E.setValue(Ut,"toneMappingExposure",C.toneMappingExposure),_.needsLights&&(P=S,(D=A).ambientLightColor.needsUpdate=P,D.lightProbe.needsUpdate=P,D.directionalLights.needsUpdate=P,D.directionalLightShadows.needsUpdate=P,D.pointLights.needsUpdate=P,D.pointLightShadows.needsUpdate=P,D.spotLights.needsUpdate=P,D.spotLightShadows.needsUpdate=P,D.rectAreaLights.needsUpdate=P,D.hemisphereLights.needsUpdate=P),o&&!0===r.fog&&Mt.refreshFogUniforms(A,o),Mt.refreshMaterialUniforms(A,r,Y,$,T.state.transmissionRenderTarget[t.id]),jt.upload(Ut,ee(_),A,gt)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(jt.upload(Ut,ee(_),A,gt),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&E.setValue(Ut,"center",a.center),E.setValue(Ut,"modelViewMatrix",a.modelViewMatrix),E.setValue(Ut,"normalMatrix",a.normalMatrix),E.setValue(Ut,"modelMatrix",a.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++){const n=t[e];It.update(n,b),It.bind(n,b)}}return b}(t,e,n,r,a);dt.setMaterial(r,s);let c=n.index,u=1;if(!0===r.wireframe){if(c=xt.getWireframeAttribute(n),void 0===c)return;u=2}const f=n.drawRange,h=n.attributes.position;let d=f.start*u,p=(f.start+f.count)*u;null!==o&&(d=Math.max(d,o.start*u),p=Math.min(p,(o.start+o.count)*u)),null!==c?(d=Math.max(d,0),p=Math.min(p,c.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const m=p-d;if(m<0||m===1/0)return;let g;Nt.setup(a,r,l,n,c);let v=Dt;if(null!==c&&(g=yt.get(c),v=Pt,v.setIndex(g)),a.isMesh)!0===r.wireframe?(dt.setLineWidth(r.wireframeLinewidth*ut()),v.setMode(Ut.LINES)):v.setMode(Ut.TRIANGLES);else if(a.isLine){let t=r.linewidth;void 0===t&&(t=1),dt.setLineWidth(t*ut()),a.isLineSegments?v.setMode(Ut.LINES):a.isLineLoop?v.setMode(Ut.LINE_LOOP):v.setMode(Ut.LINE_STRIP)}else a.isPoints?v.setMode(Ut.POINTS):a.isSprite&&v.setMode(Ut.TRIANGLES);if(a.isBatchedMesh)if(null!==a._multiDrawInstances)v.renderMultiDrawInstances(a._multiDrawStarts,a._multiDrawCounts,a._multiDrawCount,a._multiDrawInstances);else if(ft.get("WEBGL_multi_draw"))v.renderMultiDraw(a._multiDrawStarts,a._multiDrawCounts,a._multiDrawCount);else{const t=a._multiDrawStarts,e=a._multiDrawCounts,n=a._multiDrawCount,i=c?yt.get(c).bytesPerElement:1,o=mt.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)o.setValue(Ut,"_gl_DrawID",r),v.render(t[r]/i,e[r])}else if(a.isInstancedMesh)v.renderInstances(d,m,a.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(d,m,e)}else v.render(d,m)},this.compile=function(t,e,n=null){null===n&&(n=t),T=Tt.get(n),T.init(e),A.push(T),n.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(T.pushLight(t),t.castShadow&&T.pushShadow(t))})),t!==n&&t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(T.pushLight(t),t.castShadow&&T.pushShadow(t))})),T.setupLights();const r=new Set;return t.traverse((function(t){if(!(t.isMesh||t.isPoints||t.isLine||t.isSprite))return;const e=t.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const a=e[i];Gt(a,n,t),r.add(a)}else Gt(e,n,t),r.add(e)})),A.pop(),T=null,r},this.compileAsync=function(t,e,n=null){const r=this.compile(t,e,n);return new Promise((e=>{function n(){r.forEach((function(t){mt.get(t).currentProgram.isReady()&&r.delete(t)})),0!==r.size?setTimeout(n,10):e(t)}null!==ft.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Wt=null;function qt(){$t.stop()}function Xt(){$t.start()}const $t=new a;function Yt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)T.pushLight(t),t.castShadow&&T.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||et.intersectsSprite(t)){r&&st.setFromMatrixPosition(t.matrixWorld).applyMatrix4(at);const e=bt.update(t),i=t.material;i.visible&&S.push(t,e,i,n,st.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||et.intersectsObject(t))){const e=bt.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),st.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),st.copy(e.boundingSphere.center)),st.applyMatrix4(t.matrixWorld).applyMatrix4(at)),Array.isArray(i)){const r=e.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&S.push(t,e,s,n,st.z,o)}}else i.visible&&S.push(t,e,i,n,st.z,null)}const i=t.children;for(let t=0,a=i.length;t<a;t++)Yt(i[t],e,n,r)}function Kt(t,e,n,r){const i=t.opaque,a=t.transmissive,o=t.transparent;T.setupLightsView(n),!0===nt&&Et.setGlobalState(C.clippingPlanes,n),r&&dt.viewport(V.copy(r)),i.length>0&&Qt(i,e,n),a.length>0&&Qt(a,e,n),o.length>0&&Qt(o,e,n),dt.buffers.depth.setTest(!0),dt.buffers.depth.setMask(!0),dt.buffers.color.setMask(!0),dt.setPolygonOffset(!1)}function Zt(t,e,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===T.state.transmissionRenderTarget[r.id]&&(T.state.transmissionRenderTarget[r.id]=new i.nWS(1,1,{generateMipmaps:!0,type:ft.has("EXT_color_buffer_half_float")||ft.has("EXT_color_buffer_float")?i.ix0:i.OUM,minFilter:i.$_I,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:i.ppV.workingColorSpace}));const a=T.state.transmissionRenderTarget[r.id],o=r.viewport||V;a.setSize(o.z*C.transmissionResolutionScale,o.w*C.transmissionResolutionScale);const l=C.getRenderTarget();C.setRenderTarget(a),C.getClearColor(j),q=C.getClearAlpha(),q<1&&C.setClearColor(16777215,.5),C.clear(),ct&&Ct.render(n);const c=C.toneMapping;C.toneMapping=i.y_p;const u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),T.setupLightsView(r),!0===nt&&Et.setGlobalState(C.clippingPlanes,r),Qt(t,n,r),gt.updateMultisampleRenderTarget(a),gt.updateRenderTargetMipmap(a),!1===ft.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let a=0,o=e.length;a<o;a++){const o=e[a],s=o.object,l=o.geometry,c=o.material,u=o.group;if(c.side===i.$EB&&s.layers.test(r.layers)){const e=c.side;c.side=i.hsX,c.needsUpdate=!0,Jt(s,n,r,l,c,u),c.side=e,c.needsUpdate=!0,t=!0}}!0===t&&(gt.updateMultisampleRenderTarget(a),gt.updateRenderTargetMipmap(a))}C.setRenderTarget(l),C.setClearColor(j,q),void 0!==u&&(r.viewport=u),C.toneMapping=c}function Qt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,a=t.length;i<a;i++){const a=t[i],o=a.object,s=a.geometry,l=null===r?a.material:r,c=a.group;o.layers.test(n.layers)&&Jt(o,e,n,s,l,c)}}function Jt(t,e,n,r,a,o){t.onBeforeRender(C,e,n,r,a,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),a.onBeforeRender(C,e,n,r,t,o),!0===a.transparent&&a.side===i.$EB&&!1===a.forceSinglePass?(a.side=i.hsX,a.needsUpdate=!0,C.renderBufferDirect(n,e,r,a,t,o),a.side=i.hB5,a.needsUpdate=!0,C.renderBufferDirect(n,e,r,a,t,o),a.side=i.$EB):C.renderBufferDirect(n,e,r,a,t,o),t.onAfterRender(C,e,n,r,a,o)}function te(t,e,n){!0!==e.isScene&&(e=lt);const r=mt.get(t),i=T.state.lights,a=T.state.shadowsArray,o=i.state.version,s=wt.getParameters(t,i.state,a,e,n),l=wt.getProgramCacheKey(s);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?_t:vt).get(t.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===c&&(t.addEventListener("dispose",Vt),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return ne(t,s),u}else s.uniforms=wt.getUniforms(t),t.onBeforeCompile(s,C),u=wt.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const f=r.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(f.clippingPlanes=Et.uniform),ne(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotLightMatrix.value=i.state.spotLightMatrix,f.spotLightMap.value=i.state.spotLightMap,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function ee(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=jt.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function ne(t,e){const n=mt.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.batchingColor=e.batchingColor,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}$t.setAnimationLoop((function(t){Wt&&Wt(t)})),"undefined"!=typeof self&&$t.setContext(self),this.setAnimationLoop=function(t){Wt=t,kt.setAnimationLoop(t),null===t?$t.stop():$t.start()},kt.addEventListener("sessionstart",qt),kt.addEventListener("sessionend",Xt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===R)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===kt.enabled&&!0===kt.isPresenting&&(!0===kt.cameraAutoUpdate&&kt.updateCamera(e),e=kt.getCamera()),!0===t.isScene&&t.onBeforeRender(C,t,e,L),T=Tt.get(t,A.length),T.init(e),A.push(T),at.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),et.setFromProjectionMatrix(at),rt=this.localClippingEnabled,nt=Et.init(this.clippingPlanes,rt),S=St.get(t,E.length),S.init(),E.push(S),!0===kt.enabled&&!0===kt.isPresenting){const t=C.xr.getDepthSensingMesh();null!==t&&Yt(t,e,-1/0,C.sortObjects)}Yt(t,e,0,C.sortObjects),S.finish(),!0===C.sortObjects&&S.sort(K,Z),ct=!1===kt.enabled||!1===kt.isPresenting||!1===kt.hasDepthSensing(),ct&&Ct.addToRenderList(S,t),this.info.render.frame++,!0===nt&&Et.beginShadows();const n=T.state.shadowsArray;At.render(n,t,e),!0===nt&&Et.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=S.opaque,i=S.transmissive;if(T.setupLights(),e.isArrayCamera){const n=e.cameras;if(i.length>0)for(let e=0,a=n.length;e<a;e++)Zt(r,i,t,n[e]);ct&&Ct.render(t);for(let e=0,r=n.length;e<r;e++){const r=n[e];Kt(S,t,r,r.viewport)}}else i.length>0&&Zt(r,i,t,e),ct&&Ct.render(t),Kt(S,t,e);null!==L&&0===P&&(gt.updateMultisampleRenderTarget(L),gt.updateRenderTargetMipmap(L)),!0===t.isScene&&t.onAfterRender(C,t,e),Nt.resetDefaultState(),N=-1,H=null,A.pop(),A.length>0?(T=A[A.length-1],!0===nt&&Et.setGlobalState(C.clippingPlanes,T.state.camera)):T=null,E.pop(),S=E.length>0?E[E.length-1]:null},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(t,e,n){mt.get(t.texture).__webglTexture=e,mt.get(t.depthTexture).__webglTexture=n;const r=mt.get(t);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===ft.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const n=mt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e};const re=Ut.createFramebuffer();this.setRenderTarget=function(t,e=0,n=0){L=t,D=e,P=n;let r=!0,i=null,a=!1,o=!1;if(t){const s=mt.get(t);if(void 0!==s.__useDefaultFramebuffer)dt.bindFramebuffer(Ut.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)gt.setupRenderTarget(t);else if(s.__hasExternalTextures)gt.rebindTextures(t,mt.get(t.texture).__webglTexture,mt.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){const e=t.depthTexture;if(s.__boundDepthTexture!==e){if(null!==e&&mt.has(e)&&(t.width!==e.image.width||t.height!==e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");gt.setupDepthRenderbuffer(t)}}const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=mt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=Array.isArray(c[e])?c[e][n]:c[e],a=!0):i=t.samples>0&&!1===gt.useMultisampledRTT(t)?mt.get(t).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,V.copy(t.viewport),G.copy(t.scissor),W=t.scissorTest}else V.copy(Q).multiplyScalar(Y).floor(),G.copy(J).multiplyScalar(Y).floor(),W=tt;if(0!==n&&(i=re),dt.bindFramebuffer(Ut.FRAMEBUFFER,i)&&r&&dt.drawBuffers(t,i),dt.viewport(V),dt.scissor(G),dt.setScissorTest(W),a){const r=mt.get(t.texture);Ut.framebufferTexture2D(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(o){const r=mt.get(t.texture),i=e;Ut.framebufferTextureLayer(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,r.__webglTexture,n,i)}else if(null!==t&&0!==n){const e=mt.get(t.texture);Ut.framebufferTexture2D(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,e.__webglTexture,n)}N=-1},this.readRenderTargetPixels=function(t,e,n,r,i,a,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=mt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){dt.bindFramebuffer(Ut.FRAMEBUFFER,s);try{const o=t.texture,s=o.format,l=o.type;if(!ht.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Ut.readPixels(e,n,r,i,Lt.convert(s),Lt.convert(l),a)}finally{const t=null!==L?mt.get(L).__webglFramebuffer:null;dt.bindFramebuffer(Ut.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,n,r,a,o,s){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=mt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){const s=t.texture,c=s.format,u=s.type;if(!ht.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(e>=0&&e<=t.width-r&&n>=0&&n<=t.height-a){dt.bindFramebuffer(Ut.FRAMEBUFFER,l);const t=Ut.createBuffer();Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,t),Ut.bufferData(Ut.PIXEL_PACK_BUFFER,o.byteLength,Ut.STREAM_READ),Ut.readPixels(e,n,r,a,Lt.convert(c),Lt.convert(u),0);const s=null!==L?mt.get(L).__webglFramebuffer:null;dt.bindFramebuffer(Ut.FRAMEBUFFER,s);const f=Ut.fenceSync(Ut.SYNC_GPU_COMMANDS_COMPLETE,0);return Ut.flush(),await(0,i.jej)(Ut,f,4),Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,t),Ut.getBufferSubData(Ut.PIXEL_PACK_BUFFER,0,o),Ut.deleteBuffer(t),Ut.deleteSync(f),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,e=null,n=0){!0!==t.isTexture&&((0,i.mcG)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),e=arguments[0]||null,t=arguments[1]);const r=Math.pow(2,-n),a=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),s=null!==e?e.x:0,l=null!==e?e.y:0;gt.setTexture2D(t,0),Ut.copyTexSubImage2D(Ut.TEXTURE_2D,n,0,0,s,l,a,o),dt.unbindTexture()};const ie=Ut.createFramebuffer(),ae=Ut.createFramebuffer();this.copyTextureToTexture=function(t,e,n=null,r=null,a=0,o=null){let s,l,c,u,f,h,d,p,m;!0!==t.isTexture&&((0,i.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed."),r=arguments[0]||null,t=arguments[1],e=arguments[2],o=arguments[3]||0,n=null),null===o&&(0!==a?((0,i.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),o=a,a=0):o=0);const g=t.isCompressedTexture?t.mipmaps[o]:t.image;if(null!==n)s=n.max.x-n.min.x,l=n.max.y-n.min.y,c=n.isBox3?n.max.z-n.min.z:1,u=n.min.x,f=n.min.y,h=n.isBox3?n.min.z:0;else{const e=Math.pow(2,-a);s=Math.floor(g.width*e),l=Math.floor(g.height*e),c=t.isDataArrayTexture?g.depth:t.isData3DTexture?Math.floor(g.depth*e):1,u=0,f=0,h=0}null!==r?(d=r.x,p=r.y,m=r.z):(d=0,p=0,m=0);const v=Lt.convert(e.format),_=Lt.convert(e.type);let y;e.isData3DTexture?(gt.setTexture3D(e,0),y=Ut.TEXTURE_3D):e.isDataArrayTexture||e.isCompressedArrayTexture?(gt.setTexture2DArray(e,0),y=Ut.TEXTURE_2D_ARRAY):(gt.setTexture2D(e,0),y=Ut.TEXTURE_2D),Ut.pixelStorei(Ut.UNPACK_FLIP_Y_WEBGL,e.flipY),Ut.pixelStorei(Ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ut.pixelStorei(Ut.UNPACK_ALIGNMENT,e.unpackAlignment);const x=Ut.getParameter(Ut.UNPACK_ROW_LENGTH),b=Ut.getParameter(Ut.UNPACK_IMAGE_HEIGHT),w=Ut.getParameter(Ut.UNPACK_SKIP_PIXELS),M=Ut.getParameter(Ut.UNPACK_SKIP_ROWS),S=Ut.getParameter(Ut.UNPACK_SKIP_IMAGES);Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,g.width),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,g.height),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,u),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,f),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,h);const T=t.isDataArrayTexture||t.isData3DTexture,E=e.isDataArrayTexture||e.isData3DTexture;if(t.isDepthTexture){const n=mt.get(t),r=mt.get(e),i=mt.get(n.__renderTarget),g=mt.get(r.__renderTarget);dt.bindFramebuffer(Ut.READ_FRAMEBUFFER,i.__webglFramebuffer),dt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let n=0;n<c;n++)T&&(Ut.framebufferTextureLayer(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,mt.get(t).__webglTexture,a,h+n),Ut.framebufferTextureLayer(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,mt.get(e).__webglTexture,o,m+n)),Ut.blitFramebuffer(u,f,s,l,d,p,s,l,Ut.DEPTH_BUFFER_BIT,Ut.NEAREST);dt.bindFramebuffer(Ut.READ_FRAMEBUFFER,null),dt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,null)}else if(0!==a||t.isRenderTargetTexture||mt.has(t)){const n=mt.get(t),r=mt.get(e);dt.bindFramebuffer(Ut.READ_FRAMEBUFFER,ie),dt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,ae);for(let t=0;t<c;t++)T?Ut.framebufferTextureLayer(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,n.__webglTexture,a,h+t):Ut.framebufferTexture2D(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,n.__webglTexture,a),E?Ut.framebufferTextureLayer(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,r.__webglTexture,o,m+t):Ut.framebufferTexture2D(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,r.__webglTexture,o),0!==a?Ut.blitFramebuffer(u,f,s,l,d,p,s,l,Ut.COLOR_BUFFER_BIT,Ut.NEAREST):E?Ut.copyTexSubImage3D(y,o,d,p,m+t,u,f,s,l):Ut.copyTexSubImage2D(y,o,d,p,u,f,s,l);dt.bindFramebuffer(Ut.READ_FRAMEBUFFER,null),dt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,null)}else E?t.isDataTexture||t.isData3DTexture?Ut.texSubImage3D(y,o,d,p,m,s,l,c,v,_,g.data):e.isCompressedArrayTexture?Ut.compressedTexSubImage3D(y,o,d,p,m,s,l,c,v,g.data):Ut.texSubImage3D(y,o,d,p,m,s,l,c,v,_,g):t.isDataTexture?Ut.texSubImage2D(Ut.TEXTURE_2D,o,d,p,s,l,v,_,g.data):t.isCompressedTexture?Ut.compressedTexSubImage2D(Ut.TEXTURE_2D,o,d,p,g.width,g.height,v,g.data):Ut.texSubImage2D(Ut.TEXTURE_2D,o,d,p,s,l,v,_,g);Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,x),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,b),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,w),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,M),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,S),0===o&&e.generateMipmaps&&Ut.generateMipmap(y),dt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n=null,r=null,a=0){return!0!==t.isTexture&&((0,i.mcG)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,t=arguments[2],e=arguments[3],a=arguments[4]||0),(0,i.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(t,e,n,r,a)},this.initRenderTarget=function(t){void 0===mt.get(t).__webglFramebuffer&&gt.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?gt.setTextureCube(t,0):t.isData3DTexture?gt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?gt.setTexture2DArray(t,0):gt.setTexture2D(t,0),dt.unbindTexture()},this.resetState=function(){D=0,P=0,L=null,dt.reset(),Nt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return i.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=i.ppV._getDrawingBufferColorSpace(t),e.unpackColorSpace=i.ppV._getUnpackColorSpace()}}var He=n(7569),Ve=n.n(He),Ge=(n(9717),n(2935)),We=n.n(Ge),je=n(1636);class qe{constructor(t){this.opts=t,this.element=t.element||"chart",this.renderer=t.renderer||"svg",this.data=t.data||[],this.title=t.title||"",this.xLabel=t.xLabel||"",this.yLabel=t.yLabel||"",this.width=t.width||960,this.height=t.height||600,this.mouse_position={x:0,y:0},t.margin&&"number"!=typeof t.margin?this.margin=t.margin:null!==t.margin&&"number"==typeof t.margin?this.margin={top:t.margin,right:t.margin,bottom:t.margin,left:t.margin}:this.margin={top:70,right:70,bottom:50,left:70},this.colours=t.colours||["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],this.innerHeight=this.height-(this.margin.top+this.margin.bottom),this.innerWidth=this.width-(this.margin.right+this.margin.left),"canvas"===this.renderer?(this.canvas=r.select(`#${this.element}`).style("aspect-ratio",`${this.width}/${this.height}`).classed("stacked-canvas",!0).classed("chart",!0).append("canvas").attr("width",this.width).attr("height",this.height).style("background","rgba(0,0,0,0.05)"),this.context=this.canvas.node().getContext("2d")):"canvas-webgl2"===this.renderer?(this.canvas=r.select(`#${this.element}`).style("aspect-ratio",`${this.width}/${this.height}`).classed("stacked-canvas",!0).classed("chart",!0).append("canvas").attr("width",this.width).attr("height",this.height).style("background","rgba(0,0,0,0.05)"),this.context=this.canvas.node().getContext("webgl2")):"webgpu"===this.renderer?(this.canvas=r.select(`#${this.element}`).style("aspect-ratio",`${this.width}/${this.height}`).classed("stacked-canvas",!0).classed("chart",!0).append("canvas").attr("width",this.width).attr("height",this.height).style("background","rgba(0,0,0,0.05)"),this.context=this.canvas.node().getContext("webgpu")):"three.js"===this.renderer&&(console.log("Add a three.js renderer & canvas to:",this.element),r.select(`#${this.element}`).style("aspect-ratio",`${this.width}/${this.height}`).classed("stacked-canvas",!0),this.three_renderer=new ze({antialias:!0,alpha:!0}),document.getElementById(this.element).appendChild(this.three_renderer.domElement),this.three_renderer.setSize(this.width,this.height),this.context=this.three_renderer.getContext(),this.canvas=r.select(`#${this.element} canvas`).style("display","").style("width","").style("height","")),this.svg=r.select(`#${this.element}`).classed("chart",!0).append("svg").on("mousemove",(t=>{const[e,n]=r.pointer(t);this.mouse_position={x:e,y:n}})).attr("viewBox",`0 0 ${this.width} ${this.height}`).style("background","rgba(0,0,0,0.05)"),this.fullscreen=!1,this.xLabel&&this.addxLabel(),this.yLabel&&this.addyLabel(),this.draw()}draw(){this.plot=this.svg.append("g").classed("plot",!0).attr("transform",`translate(${this.margin.left},${this.margin.top})`),this.plot.append("rect").attr("fill","white").attr("x",0).attr("y",0).attr("height",this.innerHeight).attr("width",this.innerWidth),!1!==this.opts.nav&&this.drawNav(),this.svg.append("text").attr("transform",`translate(${this.width/2},${this.margin.top/2})`).attr("class","chart-title").attr("font-size","24px").attr("font-weight","700").attr("text-anchor","middle").attr("x",0).attr("y",0).text(this.title)}drawNav(){r.select(`#${this.element}`).append("div").classed("chart-nav",!0).append("div").datum(this).on("click",this.toggleFullscreen).append("span").classed("expander",!0).append("i").classed("fa fa-lg fa-expand",!0),Ve()(`#${this.element}`).dblclick((()=>this.toggleFullscreen()))}toggleFullscreen(t){function e(t){t&&t.keyCode&&27===t.keyCode&&n()}function n(){console.log("Already fullscreen, minimise!"),t.fullscreen=!1,Ve()("#big-chart svg").detach().appendTo(`#${t.element}`),Ve()("#big-chart").remove(),Ve()("body").off("keydown.chart",e)}(t=t||this).fullscreen?n():(console.log("Let's make it BIG!"),t.fullscreen=!0,Ve()("<div id='big-chart' class='chart'></div>").insertBefore("body header"),Ve()(`#${t.element} svg`).detach().appendTo("#big-chart"),Ve()("body").on("keydown.chart",e))}cumulativeLineChart(){console.log("Drawing cumulative chart",this.data);const t=this.data[0],e=this.data[1],n=this.innerWidth,i=this.innerHeight,a=r.scaleTime().range([0,n]),o=r.scaleLinear().range([i,0]),s=r.line().x((t=>a(t.x))).y((t=>o(t.value)));a.domain(r.extent(t,(t=>t.x))),o.domain([0,r.max(t,(t=>t.value))]),console.log(t);const l=this;Object.keys(e).forEach((function(t,n){let r={};e[t].forEach((function(t){r[t.x.toString()]=r[t.x.toString()]||{date:t.x,value:0},r[t.x.toString()].value++})),console.log("Data is...",r),r=Object.keys(r).map((function(t){return{date:r[t].date,value:r[t].value}})),l.plot.append("path").data([r]).attr("class","line").style("stroke",l.colours[n]).attr("d",s.x((function(t){return a(t.date)})))})),this.plot.append("g").attr("class","axis").attr("transform",`translate(0,${i})`).call(r.axisBottom(a)),this.plot.append("g").attr("class","axis").call(r.axisLeft(o))}generalisedLineChart(t){const e=this,n=this.data,i=t.loggedX?r.scaleLog():r.scaleLinear();i.range([0,e.innerWidth]);const a=r.scaleLinear().range([e.innerHeight,0]),o=r.line().x((function(e){return i(e[t.xField])})).y((function(e){return a(e[t.yField])}));i.domain(r.extent(n,(e=>e[t.xField]))),a.domain([0,Math.round(1.1*r.max(n,(function(e){return e[t.yField]}))/t.rounding)*t.rounding]),(t.types||[{label:"Total",color:"black"}]).forEach((n=>{const r=e.data.filter((e=>e[t.filter]===n.label));e.plot.append("path").datum(r).attr("class","line").style("stroke",n.color).attr("d",o.x((function(e){return i(e[t.xField])}))),e.plot.append("text").datum(r.pop()).text(n.label).attr("fill",n.color).attr("x",(e=>i(e[t.xField])+10)).attr("y",(e=>a(e[t.yField])+5))})),e.plot.append("g").attr("class","axis").attr("transform","translate(0,"+e.innerHeight+")").call(r.axisBottom(i).tickFormat(r.format(t.xFormat||""))),e.plot.append("g").attr("class","axis").call(r.axisLeft(a).tickFormat(r.format(t.yFormat||"")))}lineChart(){console.log("Drawing line chart",this.data);const t={},e={};this.data.forEach((function(n){const r=n.name;e[r]={},n.values.forEach((function(n){t[n]=t[n]||0,t[n]++,e[r][n]=e[r][n]||0,e[r][n]++}))}));const n=r.timeParse("%Y-%m-%d %H:%M:%S");console.log("here is all",t),console.log("count",Object.keys(t).length);let i=Object.keys(t).map((function(e){const i=n(e);return{rawDate:e,date:i,week:r.timeWeek(i),month:r.timeMonth(i),value:t[e]}}));console.log(e);const a={};Object.keys(e).forEach((function(t){a[t]=[],a[t]=Object.keys(e[t]).map((function(i){return{rawDate:i,date:r.timeMonth(n(i)),value:e[t][i]}})).sort(((t,e)=>t.date-e.date))})),console.log(a),i=i.sort(((t,e)=>t.date-e.date));const o=r.scaleTime().range([0,this.innerWidth]),s=r.scaleLinear().range([this.innerHeight,0]),l=r.line().x((function(t){return o(t.date)})).y((function(t){return s(t.value)}));o.domain(r.extent(i,(function(t){return t.date}))),s.domain([0,r.max(i,(function(t){return t.value}))]),console.log("Date extent...",r.extent(i,(function(t){return t.date}))),console.log("this is...",this);const c={};let u={};i.forEach((function(t){c[t.month]=c[t.month]||{rawDate:t.rawDate,value:0},c[t.month].value+=t.value,u[t.week]=u[t.week]||{rawDate:t.rawDate,value:0},u[t.week].value+=t.value}));const f=Object.keys(c).map((function(t){return{month:n(c[t].rawDate),value:c[t].value}}));u=Object.keys(u).map((function(t){return{week:n(u[t].rawDate),value:u[t].value}})),s.domain([0,r.max(f,(function(t){return t.value}))]),this.plot.append("path").data([f]).attr("class","line").style("stroke","black").attr("d",l.x((function(t){return o(t.month)})));const h=this;console.log("Here is our sample data",a),Object.keys(a).forEach((function(t,e){console.log("doing sample...",t);let r={};a[t].forEach((function(t){r[t.date]=r[t.date]||{rawDate:t.rawDate,value:0},r[t.date].value+=t.value})),console.log(r),r=Object.keys(r).map((function(t){return{date:n(r[t].rawDate),value:r[t].value}})),h.plot.append("path").data([r]).attr("class","line").style("stroke",h.colours[e]).attr("d",l.x((function(t){return o(t.date)})))})),this.plot.append("g").attr("class","axis").attr("transform","translate(0,"+this.innerHeight+")").call(r.axisBottom(o)),this.plot.append("g").attr("class","axis").call(r.axisLeft(s))}barGraph(){console.log("Drawing bar graph",this.data);let t=[];return this.data.forEach((function(e){t=t.concat(e.values)})),this.createScales(t),this.addAxes(),this.addChart(),this}createScales(t){console.log("values for scales",t),this.xScale=r.scaleLinear().domain([0,1.1*parseInt(r.max(t))]).range([0,this.innerWidth]),this.yBand=r.scaleBand().paddingInner(.2).domain(this.data.map((t=>t.name))).rangeRound([this.innerHeight-20,20])}addAxes(){const t=r.axisBottom(this.xScale).scale(this.xScale),e=r.axisLeft(this.yBand).scale(this.yBand);this.plot.append("g").attr("class","x axis").attr("transform",`translate(0, ${this.innerHeight})`).call(t.tickSize(-this.innerHeight)),this.plot.append("g").attr("class","y axis").attr("transform","translate(0, 0)").call(e)}addxLabel(){const t=this.margin.left+this.innerWidth/2,e=this.height-5;this.svg.append("g").attr("transform",`translate(${t},${e})`).style("text-anchor","middle").append("text").text(this.xLabel)}addyLabel(){const t=this.margin.top+this.innerHeight/2;this.svg.append("g").attr("transform",`matrix(0,1,-1,0,5,${t})`).style("text-anchor","middle").append("text").text(this.yLabel)}addChart(){const t=this,e=t.plot.append("g").classed("legend",!0).attr("transform",`translate(${this.innerWidth-270},0)`);e.append("rect").attr("height","100px").attr("width","270px").attr("fill","white").attr("stroke","grey"),e.append("text").attr("transform","translate(100,24)").style("text-anchor","middle").style("font-size","24px").text("Legend"),this.data[0].labels.forEach((function(n,r){e.append("rect").attr("x",20).attr("y",38+30*r).attr("width",15).attr("height",15).attr("fill",t.colours[r]),e.append("text").text(n).attr("x",40).attr("y",50+30*r),e.append("text").classed(`legend-label legend-label-${r}`,!0).text("").attr("x",100).attr("y",50+30*r)})),this.plot.selectAll(".bar").data(this.data).enter().append("g").classed("bar",!0).each((function(e){const n=r.select(this);e.values.forEach((function(r,i){const a=`${e.values[i]} mÂ²`;n.append("rect").attr("data-toggle","tooltip").attr("data-placement","top").attr("title",a).attr("fill",t.colours[i]).attr("x",t.xScale(e.values[i-1])||0).attr("y",t.yBand(e.name)).attr("width",t.xScale(e.values[i])).attr("height",t.yBand.bandwidth()),n.append("text").attr("x",t.xScale(e.values[i])+3).attr("y",t.yBand(e.name)+t.yBand.bandwidth()/2+3).text(a)}))})),Ve()(".bar rect").tooltip()}circle(){const t=this.plot;console.log("Drawing a circle...",this.data);const e=2*this.innerWidth/3,n=this.innerHeight/2,i=.9*n,a=i/Math.sqrt(173),o=i/10;t.append("g").selectAll("circle").data(this.data).enter().append("circle").attr("id",(t=>`circle-${(0,je.P)(t.name)}`)).attr("stroke","black").attr("fill","rgba(0,0,0,0.05)").attr("cx",e).attr("cy",(t=>n+i-a*Math.sqrt(t.values[0]))).attr("r",(t=>a*Math.sqrt(t.values[0])));const s=t.append("g").attr("transform",`translate(${.05*this.innerHeight} ${.05*this.innerHeight})`);return s.append("rect").attr("x",0).attr("y",0).attr("height",2*i).attr("width",200).attr("fill","lightgrey").attr("stroke","black"),s.selectAll(".row").data(this.data).enter().append("g").attr("transform",((t,e)=>`translate(0, ${e*o})`)).each((function(t,e){const n=r.select(this);n.on("mouseover",(function(){r.select(`#circle-${(0,je.P)(t.name)}`).attr("fill",r.schemeCategory10[e%10])})).on("mouseout",(function(){r.select(`#circle-${(0,je.P)(t.name)}`).attr("fill","rgba(0,0,0,0.05)")})),n.append("rect").attr("width",200).attr("height",o).attr("stroke","black").attr("fill",r.schemeCategory10[e%10]),n.append("text").text(t.name).attr("x",10).attr("y",15),n.append("text").text(`${t.values[0]} mÂ²`).attr("x",190).attr("y",15).style("text-anchor","end")})),this}squares(){const t=this.innerWidth,e=this.innerHeight,n=this.plot;console.log("Drawing squares...",this.data);const i=1*t/3,a=.95*e,o=.9*e,s=o/Math.sqrt(173),l=o/20;n.append("g").selectAll("circle").data(this.data).enter().append("rect").attr("id",(t=>`square-${(0,je.P)(t.name)}`)).attr("stroke","black").attr("fill","rgba(0,0,0,0.05)").attr("x",i).attr("y",(t=>a-s*Math.sqrt(t.values[0]))).attr("height",(t=>s*Math.sqrt(t.values[0]))).attr("width",(t=>s*Math.sqrt(t.values[0])));const c=n.append("g").attr("transform",`translate(${.05*this.innerHeight} ${.05*this.innerHeight})`);return c.append("rect").attr("x",0).attr("y",0).attr("height",o).attr("width",200).attr("fill","lightgrey").attr("stroke","black"),c.selectAll(".row").data(this.data).enter().append("g").attr("transform",((t,e)=>`translate(0, ${e*l})`)).each((function(t,e){const n=r.select(this);n.on("mouseover",(function(){r.select(`#square-${(0,je.P)(t.name)}`).attr("fill",r.schemeCategory10[e%10])})).on("mouseout",(function(){r.select(`#square-${(0,je.P)(t.name)}`).attr("fill","rgba(0,0,0,0.05)")})),n.append("rect").attr("width",200).attr("height",l).attr("stroke","black").attr("fill",r.schemeCategory10[e%10]),n.append("text").text(t.name).attr("x",10).attr("y",15),n.append("text").text(`${t.values[0]} mÂ²`).attr("x",190).attr("y",15).style("text-anchor","end")})),this}treemap(){const t=this.innerWidth,e=this.innerHeight,n=this.plot,i=r.scaleOrdinal(r.schemeCategory10.map((function(t){return r.interpolateRgb(t,"#fff")(.2)}))),a=r.format(",d"),o={name:"cluster",children:this.data.map((function(t){return{name:t.name,size:parseInt(t.values[0]),blob:t.blob}}))},s=r.treemap().tile(r.treemapResquarify).size([t,e]).round(!0).paddingInner(1),l=r.hierarchy(o).eachBefore((function(t){t.data.id=(t.parent?t.parent.data.id+".":"")+(0,je.P)(t.data.name)})).sum($e).sort((function(t,e){return e.height-t.height||e.value-t.value}));s(l);const c=n.selectAll("g").data(l.leaves()).enter().append("g").attr("transform",(function(t){return"translate("+t.x0+","+t.y0+")"}));c.append("rect").attr("id",(t=>`rect-${t.data.id}`)).attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).attr("fill",(function(t){return i(t.parent.data.id)})),c.append("image").attr("id",(t=>`image-${t.data.id}`)).attr("x",3).attr("y",3).attr("width",(t=>t.x1-t.x0-6)).attr("height",(t=>t.y1-t.y0-6)).attr("preserveAspectRatio","xMidYMid slice").attr("xlink:href",(t=>`/data/mm/2018-05-28/photos/${t.data.blob.photo}`)),c.append("clipPath").attr("id",(function(t){return"clip-"+t.data.id})).append("use").attr("xlink:href",(function(t){return"#"+t.data.id})),c.append("text").attr("clip-path",(function(t){return"url(#clip-"+t.data.id+")"})).selectAll("tspan").data((function(t){return t.data.name.split(/(?=[A-Z][^A-Z])/g)})).enter().append("tspan").attr("x",4).attr("y",(function(t,e){return 13+10*e})).text((function(t){return t})),c.append("title").text((function(t){return t.data.id+"\n"+a(t.value)})),r.selectAll("input").data([$e,Xe],(function(t){return t.name})).on("change",(function(t){u.stop(),s(l.sum(t)),c.transition().duration(750).attr("transform",(function(t){return"translate("+t.x0+","+t.y0+")"})).select("rect").attr("width",(function(t){return t.x1-t.x0})).attr("height",(function(t){return t.y1-t.y0}))}));const u=r.timeout((function(){r.select('input[value="sumByCount"]').property("checked",!0).dispatch("change")}),2e3)}clear_canvas(){return this.canvas&&(this.canvas.node().getContext("2d")?(this.context.fillStyle="#213",this.context.fillRect(0,0,this.width,this.height)):this.canvas.node().getContext("webgl2")?(this.context.clear(this.context.COLOR_BUFFER_BIT),this.context.clearColor(.129,.129,.129,1),this.canvas.style("background-color","#213")):this.canvas.node().getContext("webgpu")),this.svg.selectAll("*").remove(),this}asyncScratchpad(t){const e=this;return t(this).then((()=>this||e))}scratchpad(t){return t(this)||this}updateTreemap(t){return r.select("svg").selectAll("g"),this}initTreemap(t){const e=this.innerWidth,n=this.innerHeight,i=this.plot,a=t.maxDepth||8,o=t.hierarchy,s=r.treemap().tile(r.treemapBinary).size([e,n]).padding(0)(o),l=r.scaleLinear().domain([10,Math.max(...t.hierarchy.children.map((e=>e[t.target])))]).range([.5,1]),c=this.color=t.color||r.scaleOrdinal().range(r.schemeCategory10);i.selectAll("rect.leaf").data(s.leaves().filter((t=>t.depth<a))).enter().append("rect").classed("leaf",!0).attr("x",(t=>t.x0)).attr("y",(t=>t.y0)).attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).style("stroke","black").style("fill",(t=>c(t.data.filetype))).style("opacity",(function(t){return t.parent?l.domain([10,t.parent.total])(t.data.value):1})).each((t=>{"folder"===t.data.filetype&&console.log("This is a folder!",t)}));const u=s.descendants().filter((t=>t.children)).filter((t=>t.depth<a));return i.append("g").classed("hoverOver",!0).selectAll("rect.folder").data(u).enter().append("rect").classed("folder",!0).attr("id",(t=>`folder-${Je(t.id)}`)).attr("x",(t=>t.x0)).attr("y",(t=>t.y0)).attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).style("stroke","black").style("fill","rgba(0,0,0,0.05)").style("opacity",.5).on("mouseover",(function(t,e){r.select(this).classed("mouseover",!0)})).on("mouseout",(function(t,e){r.select(this).classed("mouseover",!1)})),this}initMap(){return new Promise((t=>{const e=r.geoMercator().center([0,0]).translate([this.width/2,this.height/2]).scale(100),n=r.geoPath().projection(e);this.svg.classed("map",!0),r.json("/ne_110m_land.json").then((t=>(this.svg.selectAll("path.map-outlines").data(t.features).enter().append("path").classed("continent map-outlines",!0).attr("d",n).attr("fill","rgba(0,0,0,0)"),this.loadingAnimation=new Ke({chart:this,features:t.features,projectionPath:n}),this.loadingAnimation.animate(),this))).then(t)}))}drawMap(t){let e=this;e.calculate=t.calculate;let n=t.center?t.center.latitude:0,i=t.center?t.center.longitude:0,a=t.json||"/world-50.geo.json",o=t.aus||"/aust.json",s=t.usa||"/gz_2010_us_040_00_5m.json",l=t.zoom||100;const c=this.width,u=this.height,f=r.geoMercator().center([Math.floor(i),Math.floor(n)]).translate([c/2,u/2]).scale(l);this.projection=f;const h=r.geoPath().projection(f),d=this.svg;Promise.all([r.json(a),r.json(s),r.json(o)]).then((([n,i,a])=>{const o=[];if(d.selectAll(".continent").remove(),d.selectAll("path.map-outlines").data([...n.features,...i.features,...a.features]).enter().append("path").attr("class",(t=>{if("Georgia"===t.properties.NAME||"Georgia"===t.properties.name)return o.push(t),"map-outlines georgia";{const e=t.properties.name||t.properties.NAME||t.properties.STATE_NAME;return`map-outlines ${(0,je.P)(e)}`}})).attr("d",h).attr("stroke-width",1).attr("stroke","black").attr("fill","rgba(0,0,0,0)"),d.selectAll("text.map-labels").data(n.features).enter().append("text").classed("map-labels",!0).attr("transform",(function(t){return"translate("+h.centroid(t)+")"})).attr("text-anchor","middle").attr("dy",".35em").style("opacity",.5).text((function(t){return t.properties.STATE_NAME})),t.markers){const[n,i]=t.markers;this.loadingAnimation.stop({goto:e.projection([n.longitude,n.latitude])}).then((()=>{d.selectAll(".mark").data(t.markers,(t=>t.type)).join((function(t){return t.each(((t,n,i)=>{const a=r.select(i[n]).insert("g","g.mark").classed("mark",!0).attr("transform",(t=>`translate(${f([t.longitude,t.latitude])})`)),s=a.append("g").classed("marker",!0);s.append("rect").attr("width",100).attr("height",80).attr("x",-50).attr("y",-40).attr("rx",50).attr("fill","rgba(0,0,0,0.01)"),"Country"!==t.type&&"State"!==t.type&&"Island"!==t.type&&(s.append("circle").attr("r",10).attr("cx",0).attr("cy",0),s.append("line").attr("x1",0).attr("y1",-10).attr("x2",0).attr("y2",10),s.append("line").attr("x1",-10).attr("y1",0).attr("x2",10).attr("y2",0));var l=a;t.url&&(l=l.append("a").attr("xlink:href",t.url)),t.label&&l.append("text").classed("mark-label",!0).attr("x",0).attr("y",-15).text(t.label),t.draggable&&a.call(r.drag().on("start",(function(t,e){a.classed("active",!0),r.select("path.travel-line").classed("active",!0)})).on("drag",(function(t,e){a.attr("transform",`translate(${t.x},${t.y})`)})).on("end",(function(t,n){const[i,s]=f.invert([t.x,t.y]);a.classed("active",!1).datum({...n,longitude:i,latitude:s}),o.forEach((t=>{r.geoContains(t,[i,s])&&alert("You are in Georgia!")}));const l=e.calculate(e,{...n,longitude:i,latitude:s});d.selectAll(".mark").data(l,(t=>t.type)).each(((t,e,n)=>{r.select(n[e]).select(".mark-label").text(t.label)})),r.select("path.travel-line").classed("active",!1).attr("d",h({type:"LineString",coordinates:[[l[0].longitude,l[0].latitude],[l[1].longitude,l[1].latitude]]}))})))})),r.selectAll(".mark")}),(function(t){return t.each(((t,e,n)=>{const i=r.select(n[e]).attr("transform",(t=>`translate(${f([t.longitude,t.latitude])})`));i.select(".mark-label").text(t.label)})),r.selectAll(".mark")}),(function(t){return t.each(((t,e,n)=>{console.log("removing node",e),r.select(n[e]).remove()})),r.selectAll(".mark")})),d.append("path").classed("travel-line",!0).attr("d",h({type:"LineString",coordinates:[[n.longitude,n.latitude],[i.longitude,i.latitude]]})).attr("stroke","red").attr("stroke-width",2)}))}}))}venn(t){const e=this.plot,n=this.data,r=this.innerWidth,i=this.innerHeight,a=.4*i,o=.45*i,s=r/3,l=2*s;e.classed("vennDiagram",!0);const c=e.append("g").classed("left",!0).classed("activeShape",!0);c.append("circle").attr("cx",s).attr("cy",o).attr("r",a);const u=e.append("g").classed("right",!0).classed("activeShape",!0);u.append("circle").attr("cx",l).attr("cy",o).attr("r",a);const f=r/2,h=f-s,d=Math.sqrt(a*a-h*h),p=o-d,m=o+d,g=e.append("g").classed("mid",!0).classed("activeShape",!0);g.append("path").attr("d",`M ${f} ${p}\n                 A ${a} ${a}, 0, 0, 0, ${f} ${m}\n                 A ${a} ${a}, 0, 0, 0, ${f} ${p}`),Ve()(".activeShape").addClass("selected").on("click",(function(){const e=Ve()(this);e.toggleClass("selected"),e.hasClass("left")&&e.on("click",t.leftAction),e.hasClass("mid")&&e.on("click",t.midAction),e.hasClass("right")&&e.on("click",t.rightAction)})),e.append("text").text(t.left).attr("x",s).attr("y",.9*i).style("text-anchor","middle").style("font-size","24px"),e.append("text").text(t.right).attr("x",l).attr("y",.9*i).style("text-anchor","middle").style("font-size","24px");const v={left:[],both:[],right:[]};Object.keys(n).forEach((function(e){n[e][t.rightKey]?n[e].hash?v.both.push(n[e]):v.right.push(n[e]):n[e][t.leftKey]?v.left.push(n[e]):(console.error(n[e]),alert("What the hell, this isn't possible"))})),c.append("text").text(v.left.length).attr("x",s-30).attr("y",o).style("text-anchor","middle").style("font-size","36px"),g.append("text").text(v.both.length).attr("x",r/2).attr("y",o).style("text-anchor","middle").style("font-size","36px"),u.append("text").text(v.right.length).attr("x",l+30).attr("y",o).style("text-anchor","middle").style("font-size","36px"),console.log(v)}}function Xe(t){return t.children?0:1}function $e(t){return t.size}function Ye(t,e){const n=e?e.element:"#dataset table",r={info:!1,paging:!1,search:!1,searching:!1,data:t,pageLength:25,order:[[0,"desc"]],columns:(e.titles||t.columns||Object.keys(t[0])).map((function(t){return{title:t,data:t}})),columnDefs:[{targets:"_all",defaultContent:""}]};return e&&(Object.keys(e).forEach((function(t){r[t]=e[t]})),e.titles&&e.titles.forEach(((t,e)=>{r.columns[e].title=t})),e.render&&r.columns.forEach((t=>{t.render=e.render})),e.customRenderers&&Object.keys(e.customRenderers).forEach((t=>{const n=r.columns.findIndex((e=>e.data===t));r.columns[n].render=e.customRenderers[t]})),e.customData&&Object.keys(e.customData).forEach((t=>{const n=r.columns.findIndex((e=>e.data===t));console.log("Index is",n),console.log(r.columns[n]),r.columns[n].data=e.customData[t]}))),console.log("DataTable Options are",r),Ve()(n).DataTable(r)}class Ke{constructor({chart:t,features:e,projectionPath:n,speed:r=2e3}){this.chart=t,this.speed=r,this.loadingSvg=t.svg.append("g").classed("loading",!0),this.loadingSvg.selectAll("path.map-outlines").data(e).enter().append("path").classed("continent map-outlines",!0).attr("d",n).attr("fill","rgba(0,0,0,0)"),this.horizontalLine=this.loadingSvg.append("line").classed("loading",!0).attr("x1",0).attr("y1",0).attr("x2",t.width).attr("y2",0).attr("stroke","rgba(0,255,0,0.5)").attr("stroke-width",1),this.verticalLine=this.loadingSvg.append("line").classed("loading",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",t.height).attr("stroke","rgba(0,255,0,0.5)").attr("stroke-width",1)}animateTo([t,e]){return this.horizontalLine.transition().ease(r.easeLinear).duration(300).attr("y1",e).attr("y2",e),this.verticalLine.transition().ease(r.easeLinear).duration(300).attr("x1",t).attr("x2",t)}stop({goto:t}){return new Promise((e=>{var n=this;this.horizontalLine.interrupt(),this.verticalLine.interrupt(),t?this.animateTo(t).on("end",(()=>{n.loadingSvg.selectAll(".loading").remove(),e(!0)})):(this.loadingSvg.selectAll(".loading").remove(),e(!0))}))}animate(){this.animateForwards()}animateForwards(){this.horizontalLine.transition().ease(r.easeLinear).duration(this.speed).attr("y1",this.chart.height).attr("y2",this.chart.height),this.verticalLine.transition().ease(r.easeLinear).duration(this.speed).attr("x1",this.chart.width).attr("x2",this.chart.width).on("end",(()=>{this.animateBackwards()}))}animateBackwards(){this.horizontalLine.transition().ease(r.easeLinear).duration(this.speed).attr("y1",0).attr("y2",0),this.verticalLine.transition().ease(r.easeLinear).duration(this.speed).attr("x1",0).attr("x2",0).on("end",(()=>{this.animateRandom()}))}animateRandom(){const t=.8*(.1+Math.random())*this.chart.height,e=.8*(.1+Math.random())*this.chart.width;this.horizontalLine.transition().ease(r.easeLinear).duration(this.speed).attr("y1",t).attr("y2",t),this.verticalLine.transition().ease(r.easeLinear).duration(this.speed).attr("x1",e).attr("x2",e).on("end",(()=>{this.animateRandom()}))}}function Ze(t,e){const n=t.latitude,r=t.longitude,i=e.latitude,a=e.longitude,o=Qe(i-n),s=Qe(a-r),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(Qe(n))*Math.cos(Qe(i))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371}function Qe(t){return t*(Math.PI/180)}function Je(t){return t.replace(/[\/\\\!\[\]\&\s\(\)\.\']/gi,"-")}},1636:(t,e,n)=>{"use strict";function r(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})).replace(/[^a-zA-Z0-9]+/g,"")}n.d(e,{P:()=>r})},636:(t,e,n)=>{"use strict";function r(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}n.d(e,{A:()=>r})},3855:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(636);function i(t,e=r.A){let n,i=!1;if(1===e.length){let a;for(const o of t){const t=e(o);(i?(0,r.A)(t,a)>0:0===(0,r.A)(t,t))&&(n=o,a=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}},3188:(t,e,n)=>{"use strict";function r(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}n.d(e,{A:()=>r})},9844:(t,e,n)=>{"use strict";function r(t){for(var e in t){var n,r,a=t[e].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;i&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;t[e]=a}return t}n.d(e,{A:()=>r});const i=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},3287:(t,e,n)=>{"use strict";n.d(e,{Un:()=>s,e2:()=>o,fy:()=>a,hG:()=>l,oz:()=>c,sw:()=>i,zB:()=>u});var r=(0,n(1378).A)(","),i=r.parse,a=r.parseRows,o=r.format,s=r.formatBody,l=r.formatRows,c=r.formatRow,u=r.formatValue},1378:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r={},i={},a=34,o=10,s=13;function l(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function c(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function u(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function f(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function f(t,e){var l,c=[],u=t.length,f=0,h=0,d=u<=0,p=!1;function m(){if(d)return i;if(p)return p=!1,r;var e,l,c=f;if(t.charCodeAt(c)===a){for(;f++<u&&t.charCodeAt(f)!==a||t.charCodeAt(++f)===a;);return(e=f)>=u?d=!0:(l=t.charCodeAt(f++))===o?p=!0:l===s&&(p=!0,t.charCodeAt(f)===o&&++f),t.slice(c+1,e-1).replace(/""/g,'"')}for(;f<u;){if((l=t.charCodeAt(e=f++))===o)p=!0;else if(l===s)p=!0,t.charCodeAt(f)===o&&++f;else if(l!==n)continue;return t.slice(c,e)}return d=!0,t.slice(c,u)}for(t.charCodeAt(u-1)===o&&--u,t.charCodeAt(u-1)===s&&--u;(l=m())!==i;){for(var g=[];l!==r&&l!==i;)g.push(l),l=m();e&&null==(g=e(g,h++))||c.push(g)}return c}function h(e,n){return e.map((function(e){return n.map((function(t){return p(e[t])})).join(t)}))}function d(e){return e.map(p).join(t)}function p(t){return null==t?"":t instanceof Date?(i=(n=t).getUTCHours(),a=n.getUTCMinutes(),o=n.getUTCSeconds(),s=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((r=n.getUTCFullYear())<0?"-"+u(-r,6):r>9999?"+"+u(r,6):u(r,4))+"-"+u(n.getUTCMonth()+1,2)+"-"+u(n.getUTCDate(),2)+(s?"T"+u(i,2)+":"+u(a,2)+":"+u(o,2)+"."+u(s,3)+"Z":o?"T"+u(i,2)+":"+u(a,2)+":"+u(o,2)+"Z":a||i?"T"+u(i,2)+":"+u(a,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var n,r,i,a,o,s}return{parse:function(t,e){var n,r,i=f(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=l(t);return function(r,i){return e(n(r),i,t)}}(t,e):l(t)}));return i.columns=r||[],i},parseRows:f,format:function(e,n){return null==n&&(n=c(e)),[n.map(p).join(t)].concat(h(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=c(t)),h(t,e).join("\n")},formatRows:function(t){return t.map(d).join("\n")},formatRow:d,formatValue:p}}},1874:(t,e,n)=>{"use strict";n.d(e,{CL:()=>u,F2:()=>s,KS:()=>l,Nc:()=>o,Nu:()=>i,cP:()=>a,pn:()=>c});var r=(0,n(1378).A)("\t"),i=r.parse,a=r.parseRows,o=r.format,s=r.formatBody,l=r.formatRows,c=r.formatRow,u=r.formatValue},6580:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Adder:()=>R,Delaunay:()=>Ys,FormatSpecifier:()=>Wc,InternMap:()=>L,InternSet:()=>N,Node:()=>mm,Path:()=>uo,Voronoi:()=>Gs,ZoomTransform:()=>ST,active:()=>ma,arc:()=>lM,area:()=>gM,areaRadial:()=>TM,ascending:()=>r.A,autoType:()=>ol.A,axisBottom:()=>ye,axisLeft:()=>xe,axisRight:()=>_e,axisTop:()=>ve,bin:()=>dt,bisect:()=>h,bisectCenter:()=>f,bisectLeft:()=>u,bisectRight:()=>c,bisector:()=>a,blob:()=>$l,blur:()=>d,blur2:()=>p,blurImage:()=>m,brush:()=>Wa,brushSelection:()=>Ha,brushX:()=>Va,brushY:()=>Ga,buffer:()=>Kl,chord:()=>eo,chordDirected:()=>ro,chordTranspose:()=>no,cluster:()=>lm,color:()=>hr,contourDensity:()=>xs,contours:()=>hs,count:()=>x,create:()=>Ow,creator:()=>An,cross:()=>S,csv:()=>ec,csvFormat:()=>il.e2,csvFormatBody:()=>il.Un,csvFormatRow:()=>il.oz,csvFormatRows:()=>il.hG,csvFormatValue:()=>il.zB,csvParse:()=>il.sw,csvParseRows:()=>il.fy,cubehelix:()=>ns,cumsum:()=>T,curveBasis:()=>mS,curveBasisClosed:()=>vS,curveBasisOpen:()=>yS,curveBumpX:()=>RM,curveBumpY:()=>DM,curveBundle:()=>bS,curveCardinal:()=>SS,curveCardinalClosed:()=>ES,curveCardinalOpen:()=>CS,curveCatmullRom:()=>PS,curveCatmullRomClosed:()=>NS,curveCatmullRomOpen:()=>US,curveLinear:()=>hM,curveLinearClosed:()=>FS,curveMonotoneX:()=>jS,curveMonotoneY:()=>qS,curveNatural:()=>YS,curveStep:()=>ZS,curveStepAfter:()=>JS,curveStepBefore:()=>QS,descending:()=>i,deviation:()=>A,difference:()=>Zt,disjoint:()=>Qt,dispatch:()=>Ee,drag:()=>nl,dragDisable:()=>qn,dragEnable:()=>Xn,dsv:()=>tc,dsvFormat:()=>rl.A,easeBack:()=>Vl,easeBackIn:()=>zl,easeBackInOut:()=>Vl,easeBackOut:()=>Hl,easeBounce:()=>Fl,easeBounceIn:()=>Ol,easeBounceInOut:()=>kl,easeBounceOut:()=>Fl,easeCircle:()=>Tl,easeCircleIn:()=>Ml,easeCircleInOut:()=>Tl,easeCircleOut:()=>Sl,easeCubic:()=>fa,easeCubicIn:()=>ca,easeCubicInOut:()=>fa,easeCubicOut:()=>ua,easeElastic:()=>jl,easeElasticIn:()=>Wl,easeElasticInOut:()=>ql,easeElasticOut:()=>jl,easeExp:()=>wl,easeExpIn:()=>xl,easeExpInOut:()=>wl,easeExpOut:()=>bl,easeLinear:()=>sl,easePoly:()=>dl,easePolyIn:()=>fl,easePolyInOut:()=>dl,easePolyOut:()=>hl,easeQuad:()=>ul,easeQuadIn:()=>ll,easeQuadInOut:()=>ul,easeQuadOut:()=>cl,easeSin:()=>_l,easeSinIn:()=>gl,easeSinInOut:()=>_l,easeSinOut:()=>vl,every:()=>jt,extent:()=>C,fcumsum:()=>P,filter:()=>Xt,flatGroup:()=>V,flatRollup:()=>G,forceCenter:()=>uc,forceCollide:()=>Mc,forceLink:()=>Ec,forceManyBody:()=>Uc,forceRadial:()=>Oc,forceSimulation:()=>Ic,forceX:()=>Fc,forceY:()=>kc,format:()=>Yc,formatDefaultLocale:()=>tu,formatLocale:()=>Jc,formatPrefix:()=>Kc,formatSpecifier:()=>Gc,fsum:()=>D,geoAlbers:()=>Mp,geoAlbersUsa:()=>Sp,geoArea:()=>af,geoAzimuthalEqualArea:()=>Cp,geoAzimuthalEqualAreaRaw:()=>Ap,geoAzimuthalEquidistant:()=>Dp,geoAzimuthalEquidistantRaw:()=>Rp,geoBounds:()=>zf,geoCentroid:()=>Qf,geoCircle:()=>ch,geoClipAntimeridian:()=>xh,geoClipCircle:()=>bh,geoClipExtent:()=>Rh,geoClipRectangle:()=>Ch,geoConicConformal:()=>Op,geoConicConformalRaw:()=>Up,geoConicEqualArea:()=>wp,geoConicEqualAreaRaw:()=>bp,geoConicEquidistant:()=>zp,geoConicEquidistantRaw:()=>Bp,geoContains:()=>qh,geoDistance:()=>Fh,geoEqualEarth:()=>Xp,geoEqualEarthRaw:()=>qp,geoEquirectangular:()=>kp,geoEquirectangularRaw:()=>Fp,geoGnomonic:()=>Yp,geoGnomonicRaw:()=>$p,geoGraticule:()=>Yh,geoGraticule10:()=>Kh,geoIdentity:()=>Kp,geoInterpolate:()=>Zh,geoLength:()=>Ih,geoMercator:()=>Lp,geoMercatorRaw:()=>Pp,geoNaturalEarth1:()=>Qp,geoNaturalEarth1Raw:()=>Zp,geoOrthographic:()=>tm,geoOrthographicRaw:()=>Jp,geoPath:()=>ip,geoProjection:()=>_p,geoProjectionMutator:()=>yp,geoRotation:()=>oh,geoStereographic:()=>nm,geoStereographicRaw:()=>em,geoStream:()=>Iu,geoTransform:()=>ap,geoTransverseMercator:()=>im,geoTransverseMercatorRaw:()=>rm,gray:()=>Oo,greatest:()=>xt.A,greatestIndex:()=>Ft,group:()=>B,groupSort:()=>tt,groups:()=>z,hcl:()=>jo,hierarchy:()=>um,histogram:()=>dt,hsl:()=>Tr,html:()=>lc,image:()=>rc,index:()=>q,indexes:()=>X,interpolate:()=>Zr,interpolateArray:()=>Gr,interpolateBasis:()=>Pr,interpolateBasisClosed:()=>Lr,interpolateBlues:()=>cw,interpolateBrBG:()=>bb,interpolateBuGn:()=>Bb,interpolateBuPu:()=>Hb,interpolateCividis:()=>xw,interpolateCool:()=>Mw,interpolateCubehelix:()=>Rg,interpolateCubehelixDefault:()=>bw,interpolateCubehelixLong:()=>Dg,interpolateDate:()=>jr,interpolateDiscrete:()=>gg,interpolateGnBu:()=>Gb,interpolateGreens:()=>fw,interpolateGreys:()=>dw,interpolateHcl:()=>Eg,interpolateHclLong:()=>Ag,interpolateHsl:()=>wg,interpolateHslLong:()=>Mg,interpolateHue:()=>vg,interpolateInferno:()=>Iw,interpolateLab:()=>Sg,interpolateMagma:()=>Nw,interpolateNumber:()=>qr,interpolateNumberArray:()=>Hr,interpolateObject:()=>Xr,interpolateOrRd:()=>jb,interpolateOranges:()=>yw,interpolatePRGn:()=>Mb,interpolatePiYG:()=>Tb,interpolatePlasma:()=>Uw,interpolatePuBu:()=>Yb,interpolatePuBuGn:()=>Xb,interpolatePuOr:()=>Ab,interpolatePuRd:()=>Zb,interpolatePurples:()=>mw,interpolateRainbow:()=>Tw,interpolateRdBu:()=>Rb,interpolateRdGy:()=>Pb,interpolateRdPu:()=>Jb,interpolateRdYlBu:()=>Nb,interpolateRdYlGn:()=>Ub,interpolateReds:()=>vw,interpolateRgb:()=>Fr,interpolateRgbBasis:()=>Br,interpolateRgbBasisClosed:()=>zr,interpolateRound:()=>_g,interpolateSinebow:()=>Rw,interpolateSpectral:()=>Fb,interpolateString:()=>Kr,interpolateTransformCss:()=>ki,interpolateTransformSvg:()=>Bi,interpolateTurbo:()=>Dw,interpolateViridis:()=>Lw,interpolateWarm:()=>ww,interpolateYlGn:()=>rw,interpolateYlGnBu:()=>ew,interpolateYlOrBr:()=>aw,interpolateYlOrRd:()=>sw,interpolateZoom:()=>xg,interrupt:()=>Li,intersection:()=>Jt,interval:()=>bT,isoFormat:()=>_T,isoParse:()=>xT,json:()=>ac,lab:()=>Fo,lch:()=>Wo,least:()=>Ut,leastIndex:()=>Ot,line:()=>mM,lineRadial:()=>SM,link:()=>IM,linkHorizontal:()=>UM,linkRadial:()=>FM,linkVertical:()=>OM,local:()=>kw,map:()=>$t,matcher:()=>Le,max:()=>pt,maxIndex:()=>mt,mean:()=>Et,median:()=>At,medianIndex:()=>Ct,merge:()=>Rt,min:()=>gt,minIndex:()=>vt,mode:()=>Dt,namespace:()=>Xe,namespaces:()=>qe,nice:()=>ft,now:()=>fi,pack:()=>zm,packEnclose:()=>Sm,packSiblings:()=>km,pairs:()=>Pt,partition:()=>qm,path:()=>fo,pathRound:()=>ho,permute:()=>K,pie:()=>yM,piecewise:()=>Pg,pointRadial:()=>EM,pointer:()=>Jr,pointers:()=>zw,polygonArea:()=>Ng,polygonCentroid:()=>Ig,polygonContains:()=>Bg,polygonHull:()=>kg,polygonLength:()=>zg,precisionFixed:()=>eu,precisionPrefix:()=>nu,precisionRound:()=>ru,quadtree:()=>mc,quantile:()=>bt,quantileIndex:()=>Mt,quantileSorted:()=>wt,quantize:()=>Lg,quickselect:()=>_t,radialArea:()=>TM,radialLine:()=>SM,randomBates:()=>Xg,randomBernoulli:()=>Kg,randomBeta:()=>Jg,randomBinomial:()=>tv,randomCauchy:()=>nv,randomExponential:()=>$g,randomGamma:()=>Qg,randomGeometric:()=>Zg,randomInt:()=>Gg,randomIrwinHall:()=>qg,randomLcg:()=>lv,randomLogNormal:()=>jg,randomLogistic:()=>rv,randomNormal:()=>Wg,randomPareto:()=>Yg,randomPoisson:()=>iv,randomUniform:()=>Vg,randomWeibull:()=>ev,range:()=>Nt,rank:()=>It,reduce:()=>Yt,reverse:()=>Kt.A,rgb:()=>gr,ribbon:()=>So,ribbonArrow:()=>To,rollup:()=>W,rollups:()=>j,scaleBand:()=>dv,scaleDiverging:()=>nb,scaleDivergingLog:()=>rb,scaleDivergingPow:()=>ab,scaleDivergingSqrt:()=>ob,scaleDivergingSymlog:()=>ib,scaleIdentity:()=>Cv,scaleImplicit:()=>fv,scaleLinear:()=>Av,scaleLog:()=>Fv,scaleOrdinal:()=>hv,scalePoint:()=>mv,scalePow:()=>qv,scaleQuantile:()=>Kv,scaleQuantize:()=>Zv,scaleRadial:()=>Yv,scaleSequential:()=>Yx,scaleSequentialLog:()=>Kx,scaleSequentialPow:()=>Qx,scaleSequentialQuantile:()=>tb,scaleSequentialSqrt:()=>Jx,scaleSequentialSymlog:()=>Zx,scaleSqrt:()=>Xv,scaleSymlog:()=>Hv,scaleThreshold:()=>Qv,scaleTime:()=>jx,scaleUtc:()=>qx,scan:()=>kt,schemeAccent:()=>cb,schemeBlues:()=>lw,schemeBrBG:()=>xb,schemeBuGn:()=>kb,schemeBuPu:()=>zb,schemeCategory10:()=>lb,schemeDark2:()=>ub,schemeGnBu:()=>Vb,schemeGreens:()=>uw,schemeGreys:()=>hw,schemeObservable10:()=>fb,schemeOrRd:()=>Wb,schemeOranges:()=>_w,schemePRGn:()=>wb,schemePaired:()=>hb,schemePastel1:()=>db,schemePastel2:()=>pb,schemePiYG:()=>Sb,schemePuBu:()=>$b,schemePuBuGn:()=>qb,schemePuOr:()=>Eb,schemePuRd:()=>Kb,schemePurples:()=>pw,schemeRdBu:()=>Cb,schemeRdGy:()=>Db,schemeRdPu:()=>Qb,schemeRdYlBu:()=>Lb,schemeRdYlGn:()=>Ib,schemeReds:()=>gw,schemeSet1:()=>mb,schemeSet2:()=>gb,schemeSet3:()=>vb,schemeSpectral:()=>Ob,schemeTableau10:()=>_b,schemeYlGn:()=>nw,schemeYlGnBu:()=>tw,schemeYlOrBr:()=>iw,schemeYlOrRd:()=>ow,select:()=>Hn,selectAll:()=>Hw,selection:()=>zn,selector:()=>Ce,selectorAll:()=>Pe,shuffle:()=>Bt,shuffler:()=>zt,some:()=>qt,sort:()=>Z,stack:()=>iT,stackOffsetDiverging:()=>oT,stackOffsetExpand:()=>aT,stackOffsetNone:()=>tT,stackOffsetSilhouette:()=>sT,stackOffsetWiggle:()=>lT,stackOrderAppearance:()=>cT,stackOrderAscending:()=>fT,stackOrderDescending:()=>dT,stackOrderInsideOut:()=>pT,stackOrderNone:()=>eT,stackOrderReverse:()=>mT,stratify:()=>Qm,style:()=>an,subset:()=>re,sum:()=>Ht,superset:()=>ee,svg:()=>cc,symbol:()=>fS,symbolAsterisk:()=>BM,symbolCircle:()=>zM,symbolCross:()=>HM,symbolDiamond:()=>WM,symbolDiamond2:()=>jM,symbolPlus:()=>qM,symbolSquare:()=>XM,symbolSquare2:()=>$M,symbolStar:()=>QM,symbolTimes:()=>lS,symbolTriangle:()=>tS,symbolTriangle2:()=>nS,symbolWye:()=>sS,symbolX:()=>lS,symbols:()=>cS,symbolsFill:()=>cS,symbolsStroke:()=>uS,text:()=>Ql,thresholdFreedmanDiaconis:()=>St,thresholdScott:()=>Tt,thresholdSturges:()=>ht,tickFormat:()=>Tv,tickIncrement:()=>ct,tickStep:()=>ut,ticks:()=>lt,timeDay:()=>x_,timeDays:()=>b_,timeFormat:()=>xy,timeFormatDefaultLocale:()=>Hx,timeFormatLocale:()=>_y,timeFriday:()=>L_,timeFridays:()=>B_,timeHour:()=>g_,timeHours:()=>v_,timeInterval:()=>s_,timeMillisecond:()=>l_,timeMilliseconds:()=>c_,timeMinute:()=>h_,timeMinutes:()=>d_,timeMonday:()=>C_,timeMondays:()=>U_,timeMonth:()=>ny,timeMonths:()=>ry,timeParse:()=>by,timeSaturday:()=>N_,timeSaturdays:()=>z_,timeSecond:()=>u_,timeSeconds:()=>f_,timeSunday:()=>A_,timeSundays:()=>I_,timeThursday:()=>P_,timeThursdays:()=>k_,timeTickInterval:()=>py,timeTicks:()=>dy,timeTuesday:()=>R_,timeTuesdays:()=>O_,timeWednesday:()=>D_,timeWednesdays:()=>F_,timeWeek:()=>A_,timeWeeks:()=>I_,timeYear:()=>oy,timeYears:()=>sy,timeout:()=>yi,timer:()=>pi,timerFlush:()=>mi,transition:()=>oa,transpose:()=>Vt,tree:()=>sg,treemap:()=>hg,treemapBinary:()=>dg,treemapDice:()=>jm,treemapResquarify:()=>mg,treemapSlice:()=>lg,treemapSliceDice:()=>pg,treemapSquarify:()=>fg,tsv:()=>nc,tsvFormat:()=>al.Nc,tsvFormatBody:()=>al.F2,tsvFormatRow:()=>al.pn,tsvFormatRows:()=>al.KS,tsvFormatValue:()=>al.CL,tsvParse:()=>al.Nu,tsvParseRows:()=>al.cP,union:()=>ie,unixDay:()=>S_,unixDays:()=>T_,utcDay:()=>w_,utcDays:()=>M_,utcFormat:()=>wy,utcFriday:()=>X_,utcFridays:()=>ty,utcHour:()=>__,utcHours:()=>y_,utcMillisecond:()=>l_,utcMilliseconds:()=>c_,utcMinute:()=>p_,utcMinutes:()=>m_,utcMonday:()=>G_,utcMondays:()=>K_,utcMonth:()=>iy,utcMonths:()=>ay,utcParse:()=>My,utcSaturday:()=>$_,utcSaturdays:()=>ey,utcSecond:()=>u_,utcSeconds:()=>f_,utcSunday:()=>V_,utcSundays:()=>Y_,utcThursday:()=>q_,utcThursdays:()=>J_,utcTickInterval:()=>hy,utcTicks:()=>fy,utcTuesday:()=>W_,utcTuesdays:()=>Z_,utcWednesday:()=>j_,utcWednesdays:()=>Q_,utcWeek:()=>V_,utcWeeks:()=>Y_,utcYear:()=>ly,utcYears:()=>cy,variance:()=>E,window:()=>tn,xml:()=>sc,zip:()=>Wt,zoom:()=>UT,zoomIdentity:()=>TT,zoomTransform:()=>ET});var r=n(636);function i(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function a(t){let e,n,a;function s(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=r.A,n=(e,n)=>(0,r.A)(t(e),n),a=(e,n)=>t(e)-n):(e=t===r.A||t===i?t:o,n=t,a=t),{left:s,center:function(t,e,n=0,r=t.length){const i=s(t,e,n,r-1);return i>n&&a(t[i-1],e)>-a(t[i],e)?i-1:i},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function o(){return 0}function s(t){return null===t?NaN:+t}const l=a(r.A),c=l.right,u=l.left,f=a(s).center,h=c;function d(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=y(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const p=g(y),m=g((function(t){const e=y(t);return(t,n,r,i,a)=>{e(t,n,0+(r<<=2),0+(i<<=2),a<<=2),e(t,n,r+1,i+1,a),e(t,n,r+2,i+2,a),e(t,n,r+3,i+3,a)}}));function g(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(void 0!==o?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),c=i.slice();return s&&l?(v(s,c,i,a,o),v(s,i,c,a,o),v(s,c,i,a,o),_(l,i,c,a,o),_(l,c,i,a,o),_(l,i,c,a,o)):s?(v(s,i,c,a,o),v(s,c,i,a,o),v(s,i,c,a,o)):l&&(_(l,i,c,a,o),_(l,c,i,a,o),_(l,i,c,a,o)),e}}function v(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function _(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function y(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let t=i,e=i+l;t<e;t+=o)s+=r[Math.min(a,t)];for(let t=i,c=a;t<=c;t+=o)s+=r[Math.min(a,t+l)],n[t]=s/e,s-=r[Math.max(i,t-l)]}}(t);const n=t-e,r=2*t+1;return(t,i,a,o,s)=>{if(!((o-=s)>=a))return;let l=e*i[a];const c=s*e,u=c+s;for(let t=a,e=a+c;t<e;t+=s)l+=i[Math.min(o,t)];for(let e=a,f=o;e<=f;e+=s)l+=i[Math.min(o,e+c)],t[e]=(l+n*(i[Math.max(a,e-u)]+i[Math.min(o,e+u)]))/r,l-=i[Math.max(a,e-c)]}}function x(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function b(t){return 0|t.length}function w(t){return!(t>0)}function M(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function S(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(M)).map(b),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(w))return a;for(;;){a.push(i.map(((e,n)=>t[n][e])));let o=r;for(;++i[o]===n[o];){if(0===o)return e?a.map(e):a;i[o--]=0}}}function T(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function E(t,e){let n,r=0,i=0,a=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,a+=n*(e-i));else{let o=-1;for(let s of t)null!=(s=e(s,++o,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}function A(t,e){const n=E(t,e);return n?Math.sqrt(n):n}function C(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class R{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,a=0;if(i>0){for(a=t[--i];i>0&&(e=a,n=t[--i],a=e+n,r=n-(a-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=a+n,n==e-a&&(a=e))}return a}}function D(t,e){const n=new R;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function P(t,e){const n=new R;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class L extends Map{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(I(this,t))}has(t){return super.has(I(this,t))}set(t,e){return super.set(U(this,t),e)}delete(t){return super.delete(O(this,t))}}class N extends Set{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(I(this,t))}add(t){return super.add(U(this,t))}delete(t){return super.delete(O(this,t))}}function I({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function U({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function O({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function F(t){return null!==t&&"object"==typeof t?t.valueOf():t}function k(t){return t}function B(t,...e){return Y(t,k,k,e)}function z(t,...e){return Y(t,Array.from,k,e)}function H(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function V(t,...e){return H(z(t,...e),e)}function G(t,e,...n){return H(j(t,e,...n),n)}function W(t,e,...n){return Y(t,k,e,n)}function j(t,e,...n){return Y(t,Array.from,e,n)}function q(t,...e){return Y(t,k,$,e)}function X(t,...e){return Y(t,Array.from,$,e)}function $(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function Y(t,e,n,r){return function t(i,a){if(a>=r.length)return n(i);const o=new L,s=r[a++];let l=-1;for(const t of i){const e=s(t,++l,i),n=o.get(e);n?n.push(t):o.set(e,[t])}for(const[e,n]of o)o.set(e,t(n,a));return e(o)}(t,0)}function K(t,e){return Array.from(e,(e=>t[e]))}function Z(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=J(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>J(n[t],n[e])))),K(t,r)}return t.sort(Q(n))}function Q(t=r.A){if(t===r.A)return J;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function J(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function tt(t,e,n){return(2!==e.length?Z(W(t,e,n),(([t,e],[n,i])=>(0,r.A)(e,i)||(0,r.A)(t,n))):Z(B(t,n),(([t,n],[i,a])=>e(n,a)||(0,r.A)(t,i)))).map((([t])=>t))}var et=Array.prototype,nt=et.slice;function rt(t){return()=>t}et.map;const it=Math.sqrt(50),at=Math.sqrt(10),ot=Math.sqrt(2);function st(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=it?10:a>=at?5:a>=ot?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?st(t,e,2*n):[s,l,c]}function lt(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,a,o]=r?st(e,t,n):st(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let t=0;t<s;++t)l[t]=(a-t)/-o;else for(let t=0;t<s;++t)l[t]=(a-t)*o;else if(o<0)for(let t=0;t<s;++t)l[t]=(i+t)/-o;else for(let t=0;t<s;++t)l[t]=(i+t)*o;return l}function ct(t,e,n){return st(t=+t,e=+e,n=+n)[2]}function ut(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?ct(e,t,n):ct(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ft(t,e,n){let r;for(;;){const i=ct(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function ht(t){return Math.max(1,Math.ceil(Math.log(x(t))/Math.LN2)+1)}function dt(){var t=k,e=C,n=ht;function r(r){Array.isArray(r)||(r=Array.from(r));var i,a,o,s=r.length,l=new Array(s);for(i=0;i<s;++i)l[i]=t(r[i],i,r);var c=e(l),u=c[0],f=c[1],d=n(l,u,f);if(!Array.isArray(d)){const t=f,n=+d;if(e===C&&([u,f]=ft(u,f,n)),(d=lt(u,f,n))[0]<=u&&(o=ct(u,f,n)),d[d.length-1]>=f)if(t>=f&&e===C){const t=ct(u,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else d.pop()}for(var p=d.length,m=0,g=p;d[m]<=u;)++m;for(;d[g-1]>f;)--g;(m||g<p)&&(d=d.slice(m,g),p=g-m);var v,_=new Array(p+1);for(i=0;i<=p;++i)(v=_[i]=[]).x0=i>0?d[i-1]:u,v.x1=i<p?d[i]:f;if(isFinite(o)){if(o>0)for(i=0;i<s;++i)null!=(a=l[i])&&u<=a&&a<=f&&_[Math.min(p,Math.floor((a-u)/o))].push(r[i]);else if(o<0)for(i=0;i<s;++i)if(null!=(a=l[i])&&u<=a&&a<=f){const t=Math.floor((u-a)*o);_[Math.min(p,t+(d[t]<=a))].push(r[i])}}else for(i=0;i<s;++i)null!=(a=l[i])&&u<=a&&a<=f&&_[h(d,a,0,p)].push(r[i]);return _}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:rt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:rt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:rt(Array.isArray(t)?nt.call(t):t),r):n},r}function pt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function mt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let a of t)null!=(a=e(a,++i,t))&&(n<a||void 0===n&&a>=a)&&(n=a,r=i);return r}function gt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function vt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let a of t)null!=(a=e(a,++i,t))&&(n>a||void 0===n&&a>=a)&&(n=a,r=i);return r}function _t(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?J:Q(i);r>n;){if(r-n>600){const a=r-n+1,o=e-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);_t(t,e,Math.max(n,Math.floor(e-o*l/a+c)),Math.min(r,Math.floor(e+(a-o)*l/a+c)),i)}const a=t[e];let o=n,s=r;for(yt(t,n,e),i(t[r],a)>0&&yt(t,n,r);o<s;){for(yt(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}0===i(t[n],a)?yt(t,n,s):(++s,yt(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function yt(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var xt=n(3855);function bt(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return gt(t);if(e>=1)return pt(t);var r,i=(r-1)*e,a=Math.floor(i),o=pt(_t(t,a).subarray(0,a+1));return o+(gt(t.subarray(a+1))-o)*(i-a)}}function wt(t,e,n=s){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function Mt(t,e,n=s){if(!isNaN(e=+e)){if(r=Float64Array.from(t,((e,r)=>s(n(t[r],r,t)))),e<=0)return vt(r);if(e>=1)return mt(r);var r,i=Uint32Array.from(t,((t,e)=>e)),a=r.length-1,o=Math.floor(a*e);return _t(i,o,0,a,((t,e)=>J(r[t],r[e]))),(o=(0,xt.A)(i.subarray(0,o+1),(t=>r[t])))>=0?o:-1}}function St(t,e,n){const r=x(t),i=bt(t,.75)-bt(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Tt(t,e,n){const r=x(t),i=A(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Et(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function At(t,e){return bt(t,.5,e)}function Ct(t,e){return Mt(t,.5,e)}function Rt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Dt(t,e){const n=new L;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function Pt(t,e=Lt){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function Lt(t,e){return[t,e]}function Nt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function It(t,e=r.A){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=r.A);const a=(t,r)=>e(n[t],n[r]);let o,s;return(t=Uint32Array.from(n,((t,e)=>e))).sort(e===r.A?(t,e)=>J(n[t],n[e]):Q(a)),t.forEach(((t,e)=>{const n=a(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,s=e),i[t]=s):i[t]=NaN})),i}function Ut(t,e=r.A){let n,i=!1;if(1===e.length){let a;for(const o of t){const t=e(o);(i?(0,r.A)(t,a)<0:0===(0,r.A)(t,t))&&(n=o,a=t,i=!0)}}else for(const r of t)(i?e(r,n)<0:0===e(r,r))&&(n=r,i=!0);return n}function Ot(t,e=r.A){if(1===e.length)return vt(t,e);let n,i=-1,a=-1;for(const r of t)++a,(i<0?0===e(r,r):e(r,n)<0)&&(n=r,i=a);return i}function Ft(t,e=r.A){if(1===e.length)return mt(t,e);let n,i=-1,a=-1;for(const r of t)++a,(i<0?0===e(r,r):e(r,n)>0)&&(n=r,i=a);return i}function kt(t,e){const n=Ot(t,e);return n<0?void 0:n}const Bt=zt(Math.random);function zt(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,a=e[i+n];e[i+n]=e[r+n],e[r+n]=a}return e}}function Ht(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Vt(t){if(!(i=t.length))return[];for(var e=-1,n=gt(t,Gt),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function Gt(t){return t.length}function Wt(){return Vt(arguments)}function jt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function qt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Xt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function $t(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Yt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++o}for(;({done:i,value:a}=r.next()),!i;)n=e(n,a,++o,t);return n}var Kt=n(3188);function Zt(t,...e){t=new N(t);for(const n of e)for(const e of n)t.delete(e);return t}function Qt(t,e){const n=e[Symbol.iterator](),r=new N;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Jt(t,...e){t=new N(t),e=e.map(te);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function te(t){return t instanceof N?t:new N(t)}function ee(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=ne(t);if(r.has(e))continue;let i,a;for(;({value:i,done:a}=n.next());){if(a)return!1;const t=ne(i);if(r.add(t),Object.is(e,t))break}}return!0}function ne(t){return null!==t&&"object"==typeof t?t.valueOf():t}function re(t,e){return ee(e,t)}function ie(...t){const e=new N;for(const n of t)for(const t of n)e.add(t);return e}function ae(t){return t}var oe=1,se=2,le=3,ce=4,ue=1e-6;function fe(t){return"translate("+t+",0)"}function he(t){return"translate(0,"+t+")"}function de(t){return e=>+t(e)}function pe(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function me(){return!this.__axis}function ge(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===oe||t===ce?-1:1,u=t===ce||t===se?"x":"y",f=t===oe||t===le?fe:he;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):ae:i,m=Math.max(a,0)+s,g=e.range(),v=+g[0]+l,_=+g[g.length-1]+l,y=(e.bandwidth?pe:de)(e.copy(),l),x=h.selection?h.selection():h,b=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(d,e).order(),M=w.exit(),S=w.enter().append("g").attr("class","tick"),T=w.select("line"),E=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),E=E.merge(S.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",t===oe?"0em":t===le?"0.71em":"0.32em")),h!==x&&(b=b.transition(h),w=w.transition(h),T=T.transition(h),E=E.transition(h),M=M.transition(h).attr("opacity",ue).attr("transform",(function(t){return isFinite(t=y(t))?f(t+l):this.getAttribute("transform")})),S.attr("opacity",ue).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:y(t))+l)}))),M.remove(),b.attr("d",t===ce||t===se?o?"M"+c*o+","+v+"H"+l+"V"+_+"H"+c*o:"M"+l+","+v+"V"+_:o?"M"+v+","+c*o+"V"+l+"H"+_+"V"+c*o:"M"+v+","+l+"H"+_),w.attr("opacity",1).attr("transform",(function(t){return f(y(t)+l)})),T.attr(u+"2",c*a),E.attr(u,c*m).text(p),x.filter(me).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===se?"start":t===ce?"end":"middle"),x.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(l=+t,h):l},h}function ve(t){return ge(oe,t)}function _e(t){return ge(se,t)}function ye(t){return ge(le,t)}function xe(t){return ge(ce,t)}var be={value:()=>{}};function we(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Me(r)}function Me(t){this._=t}function Se(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Te(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=be,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Me.prototype=we.prototype={constructor:Me,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=Te(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Te(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=Se(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Me(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};const Ee=we;function Ae(){}function Ce(t){return null==t?Ae:function(){return this.querySelector(t)}}function Re(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function De(){return[]}function Pe(t){return null==t?De:function(){return this.querySelectorAll(t)}}function Le(t){return function(){return this.matches(t)}}function Ne(t){return function(e){return e.matches(t)}}var Ie=Array.prototype.find;function Ue(){return this.firstElementChild}var Oe=Array.prototype.filter;function Fe(){return Array.from(this.children)}function ke(t){return new Array(t.length)}function Be(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ze(t,e,n,r,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Be(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function He(t,e,n,r,i,a,o){var s,l,c,u=new Map,f=e.length,h=a.length,d=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(d[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<h;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new Be(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function Ve(t){return t.__data__}function Ge(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function We(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Be.prototype={constructor:Be,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var je="http://www.w3.org/1999/xhtml";const qe={svg:"http://www.w3.org/2000/svg",xhtml:je,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),qe.hasOwnProperty(e)?{space:qe[e],local:t}:t}function $e(t){return function(){this.removeAttribute(t)}}function Ye(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ke(t,e){return function(){this.setAttribute(t,e)}}function Ze(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Je(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function en(t){return function(){this.style.removeProperty(t)}}function nn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function rn(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function an(t,e){return t.style.getPropertyValue(e)||tn(t).getComputedStyle(t,null).getPropertyValue(e)}function on(t){return function(){delete this[t]}}function sn(t,e){return function(){this[t]=e}}function ln(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function cn(t){return t.trim().split(/^|\s+/)}function un(t){return t.classList||new fn(t)}function fn(t){this._node=t,this._names=cn(t.getAttribute("class")||"")}function hn(t,e){for(var n=un(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dn(t,e){for(var n=un(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pn(t){return function(){hn(this,t)}}function mn(t){return function(){dn(this,t)}}function gn(t,e){return function(){(e.apply(this,arguments)?hn:dn)(this,t)}}function vn(){this.textContent=""}function _n(t){return function(){this.textContent=t}}function yn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function xn(){this.innerHTML=""}function bn(t){return function(){this.innerHTML=t}}function wn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Mn(){this.nextSibling&&this.parentNode.appendChild(this)}function Sn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===je&&e.documentElement.namespaceURI===je?e.createElement(t):e.createElementNS(n,t)}}function En(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function An(t){var e=Xe(t);return(e.local?En:Tn)(e)}function Cn(){return null}function Rn(){var t=this.parentNode;t&&t.removeChild(this)}function Dn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ln(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Nn(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function In(t,e,n){var r=tn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Un(t,e){return function(){return In(this,t,e)}}function On(t,e){return function(){return In(this,t,e.apply(this,arguments))}}fn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Fn=[null];function kn(t,e){this._groups=t,this._parents=e}function Bn(){return new kn([[document.documentElement]],Fn)}kn.prototype=Bn.prototype={constructor:kn,select:function(t){"function"!=typeof t&&(t=Ce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new kn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Re(t.apply(this,arguments))}}(t):Pe(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new kn(r,i)},selectChild:function(t){return this.select(null==t?Ue:function(t){return function(){return Ie.call(this.children,t)}}("function"==typeof t?t:Ne(t)))},selectChildren:function(t){return this.selectAll(null==t?Fe:function(t){return function(){return Oe.call(this.children,t)}}("function"==typeof t?t:Ne(t)))},filter:function(t){"function"!=typeof t&&(t=Le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new kn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Ve);var n,r=e?He:ze,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var f=i[u],h=a[u],d=h.length,p=Ge(t.call(f,f&&f.__data__,u,i)),m=p.length,g=l[u]=new Array(m),v=s[u]=new Array(m);r(f,h,g,v,c[u]=new Array(d),p,e);for(var _,y,x=0,b=0;x<m;++x)if(_=g[x]){for(x>=b&&(b=x+1);!(y=v[b])&&++b<m;);_._next=y||null}}return(s=new kn(s,i))._enter=l,s._exit=c,s},enter:function(){return new kn(this._enter||this._groups.map(ke),this._parents)},exit:function(){return new kn(this._exit||this._groups.map(ke),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],f=r[l],h=u.length,d=s[l]=new Array(h),p=0;p<h;++p)(c=u[p]||f[p])&&(d[p]=c);for(;l<i;++l)s[l]=n[l];return new kn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=We);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new kn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Xe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Ye:$e:"function"==typeof e?n.local?Je:Qe:n.local?Ze:Ke)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?en:"function"==typeof e?rn:nn)(t,e,null==n?"":n)):an(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?on:"function"==typeof e?ln:sn)(t,e)):this.node()[t]},classed:function(t,e){var n=cn(t+"");if(arguments.length<2){for(var r=un(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?gn:e?pn:mn)(n,e))},text:function(t){return arguments.length?this.each(null==t?vn:("function"==typeof t?yn:_n)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?xn:("function"==typeof t?wn:bn)(t)):this.node().innerHTML},raise:function(){return this.each(Mn)},lower:function(){return this.each(Sn)},append:function(t){var e="function"==typeof t?t:An(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:An(t),r=null==e?Cn:"function"==typeof e?e:Ce(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Rn)},clone:function(t){return this.select(t?Pn:Dn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?Nn:Ln,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?On:Un)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const zn=Bn;function Hn(t){return"string"==typeof t?new kn([[document.querySelector(t)]],[document.documentElement]):new kn([[t]],Fn)}const Vn={passive:!1},Gn={capture:!0,passive:!1};function Wn(t){t.stopImmediatePropagation()}function jn(t){t.preventDefault(),t.stopImmediatePropagation()}function qn(t){var e=t.document.documentElement,n=Hn(t).on("dragstart.drag",jn,Gn);"onselectstart"in e?n.on("selectstart.drag",jn,Gn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xn(t,e){var n=t.document.documentElement,r=Hn(t).on("dragstart.drag",null);e&&(r.on("click.drag",jn,Gn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function $n(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Kn(){}var Zn=.7,Qn=1/Zn,Jn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,rr=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),ir=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),ar=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${tr}\\)$`),or=new RegExp(`^rgba\\(${er},${er},${er},${tr}\\)$`),sr=new RegExp(`^hsl\\(${tr},${er},${er}\\)$`),lr=new RegExp(`^hsla\\(${tr},${er},${er},${tr}\\)$`),cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ur(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function hr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?dr(e):3===n?new vr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=rr.exec(t))?new vr(e[1],e[2],e[3],1):(e=ir.exec(t))?new vr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ar.exec(t))?pr(e[1],e[2],e[3],e[4]):(e=or.exec(t))?pr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sr.exec(t))?Mr(e[1],e[2]/100,e[3]/100,1):(e=lr.exec(t))?Mr(e[1],e[2]/100,e[3]/100,e[4]):cr.hasOwnProperty(t)?dr(cr[t]):"transparent"===t?new vr(NaN,NaN,NaN,0):null}function dr(t){return new vr(t>>16&255,t>>8&255,255&t,1)}function pr(t,e,n,r){return r<=0&&(t=e=n=NaN),new vr(t,e,n,r)}function mr(t){return t instanceof Kn||(t=hr(t)),t?new vr((t=t.rgb()).r,t.g,t.b,t.opacity):new vr}function gr(t,e,n,r){return 1===arguments.length?mr(t):new vr(t,e,n,null==r?1:r)}function vr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function _r(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}`}function yr(){const t=xr(this.opacity);return`${1===t?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${1===t?")":`, ${t})`}`}function xr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function br(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wr(t){return((t=br(t))<16?"0":"")+t.toString(16)}function Mr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Er(t,e,n,r)}function Sr(t){if(t instanceof Er)return new Er(t.h,t.s,t.l,t.opacity);if(t instanceof Kn||(t=hr(t)),!t)return new Er;if(t instanceof Er)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Er(o,s,l,t.opacity)}function Tr(t,e,n,r){return 1===arguments.length?Sr(t):new Er(t,e,n,null==r?1:r)}function Er(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ar(t){return(t=(t||0)%360)<0?t+360:t}function Cr(t){return Math.max(0,Math.min(1,t||0))}function Rr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Dr(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Pr(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return Dr((n-r/e)*e,o,i,a,s)}}function Lr(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return Dr((n-r/e)*e,i,a,o,s)}}$n(Kn,hr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ur,formatHex:ur,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Sr(this).formatHsl()},formatRgb:fr,toString:fr}),$n(vr,gr,Yn(Kn,{brighter(t){return t=null==t?Qn:Math.pow(Qn,t),new vr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Zn:Math.pow(Zn,t),new vr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vr(br(this.r),br(this.g),br(this.b),xr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatHex8:function(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}${wr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:yr,toString:yr})),$n(Er,Tr,Yn(Kn,{brighter(t){return t=null==t?Qn:Math.pow(Qn,t),new Er(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Zn:Math.pow(Zn,t),new Er(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vr(Rr(t>=240?t-240:t+120,i,r),Rr(t,i,r),Rr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Er(Ar(this.h),Cr(this.s),Cr(this.l),xr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xr(this.opacity);return`${1===t?"hsl(":"hsla("}${Ar(this.h)}, ${100*Cr(this.s)}%, ${100*Cr(this.l)}%${1===t?")":`, ${t})`}`}}));const Nr=t=>()=>t;function Ir(t,e){return function(n){return t+n*e}}function Ur(t,e){var n=e-t;return n?Ir(t,n>180||n<-180?n-360*Math.round(n/360):n):Nr(isNaN(t)?e:t)}function Or(t,e){var n=e-t;return n?Ir(t,n):Nr(isNaN(t)?e:t)}const Fr=function t(e){var n=function(t){return 1==(t=+t)?Or:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Nr(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=gr(t)).r,(e=gr(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Or(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function kr(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gr(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var Br=kr(Pr),zr=kr(Lr);function Hr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Vr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gr(t,e){return(Vr(e)?Hr:Wr)(t,e)}function Wr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Zr(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function jr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function qr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Zr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yr=new RegExp($r.source,"g");function Kr(t,e){var n,r,i,a=$r.lastIndex=Yr.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=$r.exec(t))&&(r=Yr.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:qr(n,r)})),a=Yr.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Zr(t,e){var n,r=typeof e;return null==e||"boolean"===r?Nr(e):("number"===r?qr:"string"===r?(n=hr(e))?(e=n,Fr):Kr:e instanceof hr?Fr:e instanceof Date?jr:Vr(e)?Hr:Array.isArray(e)?Wr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Xr:qr)(t,e)}function Qr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Jr(t,e){if(t=Qr(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var ti,ei,ni=0,ri=0,ii=0,ai=1e3,oi=0,si=0,li=0,ci="object"==typeof performance&&performance.now?performance:Date,ui="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fi(){return si||(ui(hi),si=ci.now()+li)}function hi(){si=0}function di(){this._call=this._time=this._next=null}function pi(t,e,n){var r=new di;return r.restart(t,e,n),r}function mi(){fi(),++ni;for(var t,e=ti;e;)(t=si-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ni}function gi(){si=(oi=ci.now())+li,ni=ri=0;try{mi()}finally{ni=0,function(){for(var t,e,n=ti,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ti=e);ei=t,_i(r)}(),si=0}}function vi(){var t=ci.now(),e=t-oi;e>ai&&(li-=e,oi=t)}function _i(t){ni||(ri&&(ri=clearTimeout(ri)),t-si>24?(t<1/0&&(ri=setTimeout(gi,t-ci.now()-li)),ii&&(ii=clearInterval(ii))):(ii||(oi=ci.now(),ii=setInterval(vi,ai)),ni=1,ui(gi)))}function yi(t,e,n){var r=new di;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}di.prototype=pi.prototype={constructor:di,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fi():+n)+(null==e?0:+e),this._next||ei===this||(ei?ei._next=this:ti=this,ei=this),this._call=t,this._time=n,_i()},stop:function(){this._call&&(this._call=null,this._time=1/0,_i())}};var xi=Ee("start","end","cancel","interrupt"),bi=[],wi=0,Mi=1,Si=2,Ti=3,Ei=5,Ai=6;function Ci(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(l){var c,u,f,h;if(n.state!==Mi)return s();for(c in i)if((h=i[c]).name===n.name){if(h.state===Ti)return yi(a);4===h.state?(h.state=Ai,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=Ai,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(yi((function(){n.state===Ti&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))})),n.state=Si,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Si){for(n.state=Ti,r=new Array(f=n.tween.length),c=0,u=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=Ei,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===Ei&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=Ai,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=pi((function(t){n.state=Mi,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:xi,tween:bi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:wi})}function Ri(t,e){var n=Pi(t,e);if(n.state>wi)throw new Error("too late; already scheduled");return n}function Di(t,e){var n=Pi(t,e);if(n.state>Ti)throw new Error("too late; already running");return n}function Pi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Li(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>Si&&n.state<Ei,n.state=Ai,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}var Ni,Ii=180/Math.PI,Ui={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oi(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Ii,skewX:Math.atan(l)*Ii,scaleX:o,scaleY:s}}function Fi(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:qr(t,i)},{i:l-2,x:qr(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:qr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:qr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,l),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:qr(t,n)},{i:s-2,x:qr(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var ki=Fi((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ui:Oi(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Bi=Fi((function(t){return null==t?Ui:(Ni||(Ni=document.createElementNS("http://www.w3.org/2000/svg","g")),Ni.setAttribute("transform",t),(t=Ni.transform.baseVal.consolidate())?Oi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ui)}),", ",")",")");function zi(t,e){var n,r;return function(){var i=Di(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Hi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Di(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function Vi(t,e,n){var r=t._id;return t.each((function(){var t=Di(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Pi(t,r).value[e]}}function Gi(t,e){var n;return("number"==typeof e?qr:e instanceof hr?Fr:(n=hr(e))?(e=n,Fr):Kr)(t,e)}function Wi(t){return function(){this.removeAttribute(t)}}function ji(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qi(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Xi(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function $i(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttribute(t)}}function Yi(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function Ki(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Zi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Qi(t,e){return function(){Ri(this,t).delay=+e.apply(this,arguments)}}function Ji(t,e){return e=+e,function(){Ri(this,t).delay=e}}function ta(t,e){return function(){Di(this,t).duration=+e.apply(this,arguments)}}function ea(t,e){return e=+e,function(){Di(this,t).duration=e}}var na=zn.prototype.constructor;function ra(t){return function(){this.style.removeProperty(t)}}var ia=0;function aa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function oa(t){return zn().transition(t)}function sa(){return++ia}var la=zn.prototype;function ca(t){return t*t*t}function ua(t){return--t*t*t+1}function fa(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}aa.prototype=oa.prototype={constructor:aa,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ce(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,f=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=t.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),f[h]=l,Ci(f[h],e,n,h,f,Pi(s,n)));return new aa(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Pe(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,f=0;f<u;++f)if(l=c[f]){for(var h,d=t.call(l,l.__data__,f,c),p=Pi(l,n),m=0,g=d.length;m<g;++m)(h=d[m])&&Ci(h,e,n,m,d,p);a.push(d),o.push(l)}return new aa(a,o,e,n)},selectChild:la.selectChild,selectChildren:la.selectChildren,filter:function(t){"function"!=typeof t&&(t=Le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new aa(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=e[s],u=n[s],f=c.length,h=o[s]=new Array(f),d=0;d<f;++d)(l=c[d]||u[d])&&(h[d]=l);for(;s<r;++s)o[s]=e[s];return new aa(o,this._parents,this._name,this._id)},selection:function(){return new na(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=sa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=Pi(o,e);Ci(o,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new aa(r,this._parents,t,n)},call:la.call,nodes:la.nodes,node:la.node,size:la.size,empty:la.empty,each:la.each,on:function(t,e){var n=this._id;return arguments.length<2?Pi(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ri:Di;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=Xe(t),r="transform"===n?Bi:Gi;return this.attrTween(t,"function"==typeof e?(n.local?Yi:$i)(n,r,Vi(this,"attr."+t,e)):null==e?(n.local?ji:Wi)(n):(n.local?Xi:qi)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Xe(t);return this.tween(n,(r.local?Ki:Zi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ki:Gi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=an(this,t),o=(this.style.removeProperty(t),an(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,ra(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=an(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=an(this,t)),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}(t,r,Vi(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=Di(this,t),c=l.on,u=null==l.value[o]?a||(a=ra(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=an(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Vi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Pi(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?zi:Hi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Qi:Ji)(e,t)):Pi(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ta:ea)(e,t)):Pi(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Di(this,t).ease=e}}(e,t)):Pi(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Di(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=Di(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&a()}))},[Symbol.iterator]:la[Symbol.iterator]};var ha={time:null,delay:0,duration:250,ease:fa};function da(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}zn.prototype.interrupt=function(t){return this.each((function(){Li(this,t)}))},zn.prototype.transition=function(t){var e,n;t instanceof aa?(e=t._id,t=t._name):(e=sa(),(n=ha).time=fi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&Ci(o,t,e,c,s,n||da(o,e));return new aa(r,this._parents,t,e)};var pa=[null];function ma(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>Mi&&n.name===e)return new aa([[t]],pa,e,+r);return null}const ga=t=>()=>t;function va(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function _a(t){t.preventDefault(),t.stopImmediatePropagation()}var ya={name:"drag"},xa={name:"space"},ba={name:"handle"},wa={name:"center"};const{abs:Ma,max:Sa,min:Ta}=Math;function Ea(t){return[+t[0],+t[1]]}function Aa(t){return[Ea(t[0]),Ea(t[1])]}var Ca={name:"x",handles:["w","e"].map(Oa),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ra={name:"y",handles:["n","s"].map(Oa),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Da={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Oa),input:function(t){return null==t?null:Aa(t)},output:function(t){return t}},Pa={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},La={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Na={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ia={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ua={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Oa(t){return{type:t}}function Fa(t){return!t.ctrlKey&&!t.button}function ka(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ba(){return navigator.maxTouchPoints||"ontouchstart"in this}function za(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ha(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Va(){return ja(Ca)}function Ga(){return ja(Ra)}function Wa(){return ja(Da)}function ja(t){var e,n=ka,r=Fa,i=Ba,a=!0,o=Ee("start","brush","end"),s=6;function l(e){var n=e.property("__brush",m).selectAll(".overlay").data([Oa("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Pa.overlay).merge(n).each((function(){var t=za(this).extent;Hn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Oa("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Pa.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Pa[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Hn(this),e=za(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,o,s,l,f,h,d,p,m,g,v,_=this,y=n.target.__data__.type,x="selection"===(a&&n.metaKey?y="overlay":y)?ya:a&&n.altKey?wa:ba,b=t===Ra?null:Ia[y],w=t===Ca?null:Ua[y],M=za(_),S=M.extent,T=M.selection,E=S[0][0],A=S[0][1],C=S[1][0],R=S[1][1],D=0,P=0,L=b&&w&&a&&n.shiftKey,N=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=Jr(t,_)).point0=t.slice(),t.identifier=e,t}));Li(_);var I=u(_,arguments,!0).beforestart();if("overlay"===y){T&&(m=!0);const e=[N[0],N[1]||N[0]];M.selection=T=[[i=t===Ra?E:Ta(e[0][0],e[1][0]),s=t===Ca?A:Ta(e[0][1],e[1][1])],[f=t===Ra?C:Sa(e[0][0],e[1][0]),d=t===Ca?R:Sa(e[0][1],e[1][1])]],N.length>1&&B(n)}else i=T[0][0],s=T[0][1],f=T[1][0],d=T[1][1];o=i,l=s,h=f,p=d;var U=Hn(_).attr("pointer-events","none"),O=U.selectAll(".overlay").attr("cursor",Pa[y]);if(n.touches)I.moved=k,I.ended=z;else{var F=Hn(n.view).on("mousemove.brush",k,!0).on("mouseup.brush",z,!0);a&&F.on("keydown.brush",(function(t){switch(t.keyCode){case 16:L=b&&w;break;case 18:x===ba&&(b&&(f=h-D*b,i=o+D*b),w&&(d=p-P*w,s=l+P*w),x=wa,B(t));break;case 32:x!==ba&&x!==wa||(b<0?f=h-D:b>0&&(i=o-D),w<0?d=p-P:w>0&&(s=l-P),x=xa,O.attr("cursor",Pa.selection),B(t));break;default:return}_a(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:L&&(g=v=L=!1,B(t));break;case 18:x===wa&&(b<0?f=h:b>0&&(i=o),w<0?d=p:w>0&&(s=l),x=ba,B(t));break;case 32:x===xa&&(t.altKey?(b&&(f=h-D*b,i=o+D*b),w&&(d=p-P*w,s=l+P*w),x=wa):(b<0?f=h:b>0&&(i=o),w<0?d=p:w>0&&(s=l),x=ba),O.attr("cursor",Pa[y]),B(t));break;default:return}_a(t)}),!0),qn(n.view)}c.call(_),I.start(n,x.name)}function k(t){for(const e of t.changedTouches||[t])for(const t of N)t.identifier===e.identifier&&(t.cur=Jr(e,_));if(L&&!g&&!v&&1===N.length){const t=N[0];Ma(t.cur[0]-t[0])>Ma(t.cur[1]-t[1])?v=!0:g=!0}for(const t of N)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,_a(t),B(t)}function B(t){const e=N[0],n=e.point0;var r;switch(D=e[0]-n[0],P=e[1]-n[1],x){case xa:case ya:b&&(D=Sa(E-i,Ta(C-f,D)),o=i+D,h=f+D),w&&(P=Sa(A-s,Ta(R-d,P)),l=s+P,p=d+P);break;case ba:N[1]?(b&&(o=Sa(E,Ta(C,N[0][0])),h=Sa(E,Ta(C,N[1][0])),b=1),w&&(l=Sa(A,Ta(R,N[0][1])),p=Sa(A,Ta(R,N[1][1])),w=1)):(b<0?(D=Sa(E-i,Ta(C-i,D)),o=i+D,h=f):b>0&&(D=Sa(E-f,Ta(C-f,D)),o=i,h=f+D),w<0?(P=Sa(A-s,Ta(R-s,P)),l=s+P,p=d):w>0&&(P=Sa(A-d,Ta(R-d,P)),l=s,p=d+P));break;case wa:b&&(o=Sa(E,Ta(C,i-D*b)),h=Sa(E,Ta(C,f+D*b))),w&&(l=Sa(A,Ta(R,s-P*w)),p=Sa(A,Ta(R,d+P*w)))}h<o&&(b*=-1,r=i,i=f,f=r,r=o,o=h,h=r,y in La&&O.attr("cursor",Pa[y=La[y]])),p<l&&(w*=-1,r=s,s=d,d=r,r=l,l=p,p=r,y in Na&&O.attr("cursor",Pa[y=Na[y]])),M.selection&&(T=M.selection),g&&(o=T[0][0],h=T[1][0]),v&&(l=T[0][1],p=T[1][1]),T[0][0]===o&&T[0][1]===l&&T[1][0]===h&&T[1][1]===p||(M.selection=[[o,l],[h,p]],c.call(_),I.brush(t,x.name))}function z(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Xn(t.view,m),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);U.attr("pointer-events","all"),O.attr("cursor",Pa.overlay),M.selection&&(T=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(T)&&(M.selection=null,c.call(_)),I.end(t,x.name)}}function d(t){u(this,arguments).moved(t)}function p(t){u(this,arguments).ended(t)}function m(){var e=this.__brush||{selection:null};return e.extent=Aa(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){u(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){u(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=u(e,arguments),a=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Zr(a,o);function l(t){r.selection=1===t&&null===o?null:s(t),c.call(e),i.brush()}return null!==a&&null!==o?l:l(1)})):e.each((function(){var e=this,i=arguments,a=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,a.extent),s=u(e,i).beforestart();Li(e),a.selection=null===o?null:o,c.call(e),s.start(r).brush(r).end(r)}))},l.clear=function(t,e){l.move(t,null,e)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Hn(this.that).datum();o.call(e,this.that,new va(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:ga(Aa(t)),l):n},l.filter=function(t){return arguments.length?(r="function"==typeof t?t:ga(!!t),l):r},l.touchable=function(t){return arguments.length?(i="function"==typeof t?t:ga(!!t),l):i},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(a=!!t,l):a},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}var qa=Math.abs,Xa=Math.cos,$a=Math.sin,Ya=Math.PI,Ka=Ya/2,Za=2*Ya,Qa=Math.max,Ja=1e-12;function to(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function eo(){return io(!1,!1)}function no(){return io(!1,!0)}function ro(){return io(!0,!1)}function io(t,e){var n=0,r=null,i=null,a=null;function o(o){var s,l=o.length,c=new Array(l),u=to(0,l),f=new Array(l*l),h=new Array(l),d=0;o=Float64Array.from({length:l*l},e?(t,e)=>o[e%l][e/l|0]:(t,e)=>o[e/l|0][e%l]);for(let e=0;e<l;++e){let n=0;for(let r=0;r<l;++r)n+=o[e*l+r]+t*o[r*l+e];d+=c[e]=n}s=(d=Qa(0,Za-n*l)/d)?n:Za/l;{let e=0;r&&u.sort(((t,e)=>r(c[t],c[e])));for(const n of u){const r=e;if(t){const t=to(1+~l,l).filter((t=>t<0?o[~t*l+n]:o[n*l+t]));i&&t.sort(((t,e)=>i(t<0?-o[~t*l+n]:o[n*l+t],e<0?-o[~e*l+n]:o[n*l+e])));for(const r of t)r<0?(f[~r*l+n]||(f[~r*l+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=o[~r*l+n]*d,value:o[~r*l+n]}:(f[n*l+r]||(f[n*l+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]};h[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}else{const t=to(0,l).filter((t=>o[n*l+t]||o[t*l+n]));i&&t.sort(((t,e)=>i(o[n*l+t],o[n*l+e])));for(const r of t){let t;if(n<r?(t=f[n*l+r]||(f[n*l+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]}):(t=f[r*l+n]||(f[r*l+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=o[n*l+r]*d,value:o[n*l+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}h[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}e+=s}}return(f=Object.values(f)).groups=h,a?f.sort(a):f}return o.padAngle=function(t){return arguments.length?(n=Qa(0,t),o):n},o.sortGroups=function(t){return arguments.length?(r=t,o):r},o.sortSubgroups=function(t){return arguments.length?(i=t,o):i},o.sortChords=function(t){return arguments.length?(null==t?a=null:(e=t,a=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=t,o):a&&a._;var e},o}const ao=Math.PI,oo=2*ao,so=1e-6,lo=oo-so;function co(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class uo{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?co:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return co;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,f=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>so)if(Math.abs(u*s-l*c)>so&&i){let h=n-a,d=r-o,p=s*s+l*l,m=h*h+d*d,g=Math.sqrt(p),v=Math.sqrt(f),_=i*Math.tan((ao-Math.acos((p+f-m)/(2*g*v)))/2),y=_/v,x=_/g;Math.abs(y-1)>so&&this._append`L${t+y*c},${e+y*u}`,this._append`A${i},${i},0,0,${+(u*h>c*d)},${this._x1=t+x*s},${this._y1=e+x*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,f=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>so||Math.abs(this._y1-c)>so)&&this._append`L${l},${c}`,n&&(f<0&&(f=f%oo+oo),f>lo?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:f>so&&this._append`A${n},${n},0,${+(f>=ao)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function fo(){return new uo}function ho(t=3){return new uo(+t)}fo.prototype=uo.prototype;var po=Array.prototype.slice;function mo(t){return function(){return t}}function go(t){return t.source}function vo(t){return t.target}function _o(t){return t.radius}function yo(t){return t.startAngle}function xo(t){return t.endAngle}function bo(){return 0}function wo(){return 10}function Mo(t){var e=go,n=vo,r=_o,i=_o,a=yo,o=xo,s=bo,l=null;function c(){var c,u=e.apply(this,arguments),f=n.apply(this,arguments),h=s.apply(this,arguments)/2,d=po.call(arguments),p=+r.apply(this,(d[0]=u,d)),m=a.apply(this,d)-Ka,g=o.apply(this,d)-Ka,v=+i.apply(this,(d[0]=f,d)),_=a.apply(this,d)-Ka,y=o.apply(this,d)-Ka;if(l||(l=c=fo()),h>Ja&&(qa(g-m)>2*h+Ja?g>m?(m+=h,g-=h):(m-=h,g+=h):m=g=(m+g)/2,qa(y-_)>2*h+Ja?y>_?(_+=h,y-=h):(_-=h,y+=h):_=y=(_+y)/2),l.moveTo(p*Xa(m),p*$a(m)),l.arc(0,0,p,m,g),m!==_||g!==y)if(t){var x=v-+t.apply(this,arguments),b=(_+y)/2;l.quadraticCurveTo(0,0,x*Xa(_),x*$a(_)),l.lineTo(v*Xa(b),v*$a(b)),l.lineTo(x*Xa(y),x*$a(y))}else l.quadraticCurveTo(0,0,v*Xa(_),v*$a(_)),l.arc(0,0,v,_,y);if(l.quadraticCurveTo(0,0,p*Xa(m),p*$a(m)),l.closePath(),c)return l=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:mo(+e),c):t}),c.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:mo(+t),c):r},c.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:mo(+t),c):r},c.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:mo(+t),c):i},c.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:mo(+t),c):a},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:mo(+t),c):o},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:mo(+t),c):s},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}function So(){return Mo()}function To(){return Mo(wo)}const Eo=Math.PI/180,Ao=180/Math.PI,Co=.96422,Ro=1,Do=.82521,Po=4/29,Lo=6/29,No=3*Lo*Lo,Io=Lo*Lo*Lo;function Uo(t){if(t instanceof ko)return new ko(t.l,t.a,t.b,t.opacity);if(t instanceof qo)return Xo(t);t instanceof vr||(t=mr(t));var e,n,r=Vo(t.r),i=Vo(t.g),a=Vo(t.b),o=Bo((.2225045*r+.7168786*i+.0606169*a)/Ro);return r===i&&i===a?e=n=o:(e=Bo((.4360747*r+.3850649*i+.1430804*a)/Co),n=Bo((.0139322*r+.0971045*i+.7141733*a)/Do)),new ko(116*o-16,500*(e-o),200*(o-n),t.opacity)}function Oo(t,e){return new ko(t,0,0,null==e?1:e)}function Fo(t,e,n,r){return 1===arguments.length?Uo(t):new ko(t,e,n,null==r?1:r)}function ko(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Bo(t){return t>Io?Math.pow(t,1/3):t/No+Po}function zo(t){return t>Lo?t*t*t:No*(t-Po)}function Ho(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Go(t){if(t instanceof qo)return new qo(t.h,t.c,t.l,t.opacity);if(t instanceof ko||(t=Uo(t)),0===t.a&&0===t.b)return new qo(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ao;return new qo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Wo(t,e,n,r){return 1===arguments.length?Go(t):new qo(n,e,t,null==r?1:r)}function jo(t,e,n,r){return 1===arguments.length?Go(t):new qo(t,e,n,null==r?1:r)}function qo(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Xo(t){if(isNaN(t.h))return new ko(t.l,0,0,t.opacity);var e=t.h*Eo;return new ko(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}$n(ko,Fo,Yn(Kn,{brighter(t){return new ko(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new ko(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new vr(Ho(3.1338561*(e=Co*zo(e))-1.6168667*(t=Ro*zo(t))-.4906146*(n=Do*zo(n))),Ho(-.9787684*e+1.9161415*t+.033454*n),Ho(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),$n(qo,jo,Yn(Kn,{brighter(t){return new qo(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new qo(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Xo(this).rgb()}}));var $o=-.14861,Yo=1.78277,Ko=-.29227,Zo=-.90649,Qo=1.97294,Jo=Qo*Zo,ts=Qo*Yo,es=Yo*Ko-Zo*$o;function ns(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rs)return new rs(t.h,t.s,t.l,t.opacity);t instanceof vr||(t=mr(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(es*r+Jo*e-ts*n)/(es+Jo-ts),a=r-i,o=(Qo*(n-i)-Ko*a)/Zo,s=Math.sqrt(o*o+a*a)/(Qo*i*(1-i)),l=s?Math.atan2(o,a)*Ao-120:NaN;return new rs(l<0?l+360:l,s,i,t.opacity)}(t):new rs(t,e,n,null==r?1:r)}function rs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$n(rs,ns,Yn(Kn,{brighter(t){return t=null==t?Qn:Math.pow(Qn,t),new rs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Zn:Math.pow(Zn,t),new rs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Eo,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new vr(255*(e+n*($o*r+Yo*i)),255*(e+n*(Ko*r+Zo*i)),255*(e+n*(Qo*r)),this.opacity)}}));var is=Array.prototype.slice;function as(t,e){return t-e}const os=t=>()=>t;function ss(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ls(t,e[r]))return n;return 0}function ls(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],c=l[0],u=l[1],f=t[s],h=f[0],d=f[1];if(cs(l,f,e))return 0;u>r!=d>r&&n<(h-c)*(r-u)/(d-u)+c&&(i=-i)}return i}function cs(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}function us(){}var fs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function hs(){var t=1,e=1,n=ht,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(as);else{const n=C(t,ds);for(e=lt(...ft(n[0],n[1],e),e);e[e.length-1]>=n[1];)e.pop();for(;e[1]<n[0];)e.shift()}return e.map((e=>a(t,e)))}function a(n,i){const a=null==i?NaN:+i;if(isNaN(a))throw new Error(`invalid value: ${i}`);var s=[],l=[];return function(n,r,i){var a,s,l,c,u,f,h=new Array,d=new Array;for(a=s=-1,c=ps(n[0],r),fs[c<<1].forEach(p);++a<t-1;)l=c,c=ps(n[a+1],r),fs[l|c<<1].forEach(p);for(fs[0|c].forEach(p);++s<e-1;){for(a=-1,c=ps(n[s*t+t],r),u=ps(n[s*t],r),fs[c<<1|u<<2].forEach(p);++a<t-1;)l=c,c=ps(n[s*t+t+a+1],r),f=u,u=ps(n[s*t+a+1],r),fs[l|c<<1|u<<2|f<<3].forEach(p);fs[c|u<<3].forEach(p)}for(a=-1,u=n[s*t]>=r,fs[u<<2].forEach(p);++a<t-1;)f=u,u=ps(n[s*t+a+1],r),fs[u<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],l=[t[1][0]+a,t[1][1]+s],c=o(r),u=o(l);(e=d[c])?(n=h[u])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(l),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=u]=e):(e=h[u])?(n=d[c])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(l),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=d[u]={start:c,end:u,ring:[r,l]}}fs[u<<3].forEach(p)}(n,a,(function(t){r(t,n,a),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):l.push(t)})),l.forEach((function(t){for(var e,n=0,r=s.length;n<r;++n)if(-1!==ss((e=s[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:s}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var a=n[0],o=n[1],s=0|a,l=0|o,c=ms(r[l*t+s]);a>0&&a<t&&s===a&&(n[0]=gs(a,ms(r[l*t+s-1]),c,i)),o>0&&o<e&&l===o&&(n[1]=gs(o,ms(r[(l-1)*t+s]),c,i))}))}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),a=Math.floor(n[1]);if(!(r>=0&&a>=0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?os(is.call(t)):os(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:us,i):r===s},i}function ds(t){return isFinite(t)?t:NaN}function ps(t,e){return null!=t&&+t>=e}function ms(t){return null==t||isNaN(t=+t)?-1/0:t}function gs(t,e,n,r){const i=r-e,a=n-e,o=isFinite(i)||isFinite(a)?i/a:Math.sign(i)/Math.sign(a);return isNaN(o)?t:t+o-.5}function vs(t){return t[0]}function _s(t){return t[1]}function ys(){return 1}function xs(){var t=vs,e=_s,n=ys,r=960,i=500,a=20,o=2,s=3*a,l=r+2*s>>o,c=i+2*s>>o,u=os(20);function f(r){var i=new Float32Array(l*c),u=Math.pow(2,-o),f=-1;for(const a of r){var h=(t(a,++f,r)+s)*u,d=(e(a,f,r)+s)*u,m=+n(a,f,r);if(m&&h>=0&&h<l&&d>=0&&d<c){var g=Math.floor(h),v=Math.floor(d),_=h-g-.5,y=d-v-.5;i[g+v*l]+=(1-_)*(1-y)*m,i[g+1+v*l]+=_*(1-y)*m,i[g+1+(v+1)*l]+=_*y*m,i[g+(v+1)*l]+=(1-_)*y*m}}return p({data:i,width:l,height:c},a*u),i}function h(t){var e=f(t),n=u(e),r=Math.pow(2,2*o);return Array.isArray(n)||(n=lt(Number.MIN_VALUE,pt(e)/r,n)),hs().size([l,c]).thresholds(n.map((t=>t*r)))(e).map(((t,e)=>(t.value=+n[e],d(t))))}function d(t){return t.coordinates.forEach(m),t}function m(t){t.forEach(g)}function g(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function _(){return l=r+2*(s=3*a)>>o,c=i+2*s>>o,h}return h.contours=function(t){var e=f(t),n=hs().size([l,c]),r=Math.pow(2,2*o),i=t=>{t=+t;var i=d(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>pt(e)/r}),i},h.x=function(e){return arguments.length?(t="function"==typeof e?e:os(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:os(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:os(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,_()},h.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),_()},h.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?os(is.call(t)):os(t),h):u},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*t*t+1)-1)/2,_()},h}const bs=134217729;function ws(t,e,n,r,i){let a,o,s,l,c=e[0],u=r[0],f=0,h=0;u>c==u>-c?(a=c,c=e[++f]):(a=u,u=r[++h]);let d=0;if(f<t&&h<n)for(u>c==u>-c?(o=c+a,s=a-(o-c),c=e[++f]):(o=u+a,s=a-(o-u),u=r[++h]),a=o,0!==s&&(i[d++]=s);f<t&&h<n;)u>c==u>-c?(o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++f]):(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++h]),a=o,0!==s&&(i[d++]=s);for(;f<t;)o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++f],a=o,0!==s&&(i[d++]=s);for(;h<n;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++h],a=o,0!==s&&(i[d++]=s);return 0===a&&0!==d||(i[d++]=a),d}function Ms(t){return new Float64Array(t)}const Ss=Ms(4),Ts=Ms(8),Es=Ms(12),As=Ms(16),Cs=Ms(4);function Rs(t,e,n,r,i,a){const o=(e-a)*(n-i),s=(t-i)*(r-a),l=o-s,c=Math.abs(o+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(t,e,n,r,i,a,o){let s,l,c,u,f,h,d,p,m,g,v,_,y,x,b,w,M,S;const T=t-i,E=n-i,A=e-a,C=r-a;x=T*C,h=bs*T,d=h-(h-T),p=T-d,h=bs*C,m=h-(h-C),g=C-m,b=p*g-(x-d*m-p*m-d*g),w=A*E,h=bs*A,d=h-(h-A),p=A-d,h=bs*E,m=h-(h-E),g=E-m,M=p*g-(w-d*m-p*m-d*g),v=b-M,f=b-v,Ss[0]=b-(v+f)+(f-M),_=x+v,f=_-x,y=x-(_-f)+(v-f),v=y-w,f=y-v,Ss[1]=y-(v+f)+(f-w),S=_+v,f=S-_,Ss[2]=_-(S-f)+(v-f),Ss[3]=S;let R=function(t,e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(0,Ss),D=22204460492503146e-32*o;if(R>=D||-R>=D)return R;if(f=t-T,s=t-(T+f)+(f-i),f=n-E,c=n-(E+f)+(f-i),f=e-A,l=e-(A+f)+(f-a),f=r-C,u=r-(C+f)+(f-a),0===s&&0===l&&0===c&&0===u)return R;if(D=11093356479670487e-47*o+33306690738754706e-32*Math.abs(R),R+=T*u+C*s-(A*c+E*l),R>=D||-R>=D)return R;x=s*C,h=bs*s,d=h-(h-s),p=s-d,h=bs*C,m=h-(h-C),g=C-m,b=p*g-(x-d*m-p*m-d*g),w=l*E,h=bs*l,d=h-(h-l),p=l-d,h=bs*E,m=h-(h-E),g=E-m,M=p*g-(w-d*m-p*m-d*g),v=b-M,f=b-v,Cs[0]=b-(v+f)+(f-M),_=x+v,f=_-x,y=x-(_-f)+(v-f),v=y-w,f=y-v,Cs[1]=y-(v+f)+(f-w),S=_+v,f=S-_,Cs[2]=_-(S-f)+(v-f),Cs[3]=S;const P=ws(4,Ss,4,Cs,Ts);x=T*u,h=bs*T,d=h-(h-T),p=T-d,h=bs*u,m=h-(h-u),g=u-m,b=p*g-(x-d*m-p*m-d*g),w=A*c,h=bs*A,d=h-(h-A),p=A-d,h=bs*c,m=h-(h-c),g=c-m,M=p*g-(w-d*m-p*m-d*g),v=b-M,f=b-v,Cs[0]=b-(v+f)+(f-M),_=x+v,f=_-x,y=x-(_-f)+(v-f),v=y-w,f=y-v,Cs[1]=y-(v+f)+(f-w),S=_+v,f=S-_,Cs[2]=_-(S-f)+(v-f),Cs[3]=S;const L=ws(P,Ts,4,Cs,Es);x=s*u,h=bs*s,d=h-(h-s),p=s-d,h=bs*u,m=h-(h-u),g=u-m,b=p*g-(x-d*m-p*m-d*g),w=l*c,h=bs*l,d=h-(h-l),p=l-d,h=bs*c,m=h-(h-c),g=c-m,M=p*g-(w-d*m-p*m-d*g),v=b-M,f=b-v,Cs[0]=b-(v+f)+(f-M),_=x+v,f=_-x,y=x-(_-f)+(v-f),v=y-w,f=y-v,Cs[1]=y-(v+f)+(f-w),S=_+v,f=S-_,Cs[2]=_-(S-f)+(v-f),Cs[3]=S;const N=ws(L,Es,4,Cs,As);return As[N-1]}(t,e,n,r,i,a,c)}Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(8),Ms(8),Ms(8),Ms(4),Ms(8),Ms(8),Ms(8),Ms(12),Ms(192),Ms(192),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(8),Ms(8),Ms(8),Ms(8),Ms(8),Ms(8),Ms(8),Ms(8),Ms(8),Ms(4),Ms(4),Ms(4),Ms(8),Ms(16),Ms(16),Ms(16),Ms(32),Ms(32),Ms(48),Ms(64),Ms(1152),Ms(1152),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(4),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(24),Ms(1152),Ms(1152),Ms(1152),Ms(1152),Ms(1152),Ms(2304),Ms(2304),Ms(3456),Ms(5760),Ms(8),Ms(8),Ms(8),Ms(16),Ms(24),Ms(48),Ms(48),Ms(96),Ms(192),Ms(384),Ms(384),Ms(384),Ms(768),Ms(96),Ms(96),Ms(96),Ms(1152);const Ds=Math.pow(2,-52),Ps=new Uint32Array(512);class Ls{static from(t,e=ks,n=Bs){const r=t.length,i=new Float64Array(2*r);for(let a=0;a<r;a++){const r=t[a];i[2*a]=e(r),i[2*a+1]=n(r)}return new Ls(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,a=t.length>>1;let o=1/0,s=1/0,l=-1/0,c=-1/0;for(let e=0;e<a;e++){const n=t[2*e],r=t[2*e+1];n<o&&(o=n),r<s&&(s=r),n>l&&(l=n),r>c&&(c=r),this._ids[e]=e}const u=(o+l)/2,f=(s+c)/2;let h,d,p;for(let e=0,n=1/0;e<a;e++){const r=Ns(u,f,t[2*e],t[2*e+1]);r<n&&(h=e,n=r)}const m=t[2*h],g=t[2*h+1];for(let e=0,n=1/0;e<a;e++){if(e===h)continue;const r=Ns(m,g,t[2*e],t[2*e+1]);r<n&&r>0&&(d=e,n=r)}let v=t[2*d],_=t[2*d+1],y=1/0;for(let e=0;e<a;e++){if(e===h||e===d)continue;const n=Us(m,g,v,_,t[2*e],t[2*e+1]);n<y&&(p=e,y=n)}let x=t[2*p],b=t[2*p+1];if(y===1/0){for(let e=0;e<a;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Os(this._ids,this._dists,0,a-1);const e=new Uint32Array(a);let n=0;for(let t=0,r=-1/0;t<a;t++){const i=this._ids[t],a=this._dists[i];a>r&&(e[n++]=i,r=a)}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Rs(m,g,v,_,x,b)<0){const t=d,e=v,n=_;d=p,v=x,_=b,p=t,x=e,b=n}const w=function(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,c=a-e,u=o*o+s*s,f=l*l+c*c,h=.5/(o*c-s*l);return{x:t+(c*u-s*f)*h,y:e+(o*f-l*u)*h}}(m,g,v,_,x,b);this._cx=w.x,this._cy=w.y;for(let e=0;e<a;e++)this._dists[e]=Ns(t[2*e],t[2*e+1],w.x,w.y);Os(this._ids,this._dists,0,a-1),this._hullStart=h;let M=3;n[h]=e[p]=d,n[d]=e[h]=p,n[p]=e[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,g)]=h,i[this._hashKey(v,_)]=d,i[this._hashKey(x,b)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let a,o,s=0;s<this._ids.length;s++){const l=this._ids[s],c=t[2*l],u=t[2*l+1];if(s>0&&Math.abs(c-a)<=Ds&&Math.abs(u-o)<=Ds)continue;if(a=c,o=u,l===h||l===d||l===p)continue;let f=0;for(let t=0,e=this._hashKey(c,u);t<this._hashSize&&(f=i[(e+t)%this._hashSize],-1===f||f===n[f]);t++);f=e[f];let m,g=f;for(;m=n[g],Rs(c,u,t[2*g],t[2*g+1],t[2*m],t[2*m+1])>=0;)if(g=m,g===f){g=-1;break}if(-1===g)continue;let v=this._addTriangle(g,l,n[g],-1,-1,r[g]);r[l]=this._legalize(v+2),r[g]=v,M++;let _=n[g];for(;m=n[_],Rs(c,u,t[2*_],t[2*_+1],t[2*m],t[2*m+1])<0;)v=this._addTriangle(_,l,m,r[l],-1,r[_]),r[l]=this._legalize(v+2),n[_]=_,M--,_=m;if(g===f)for(;m=e[g],Rs(c,u,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)v=this._addTriangle(m,l,g,-1,r[g],r[m]),this._legalize(v+2),r[m]=v,n[g]=g,M--,g=m;this._hullStart=e[l]=g,n[g]=e[_]=l,n[l]=_,i[this._hashKey(c,u)]=l,i[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(M);for(let t=0,e=this._hullStart;t<M;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,a=0;for(;;){const o=n[t],s=t-t%3;if(a=s+(t+2)%3,-1===o){if(0===i)break;t=Ps[--i];continue}const l=o-o%3,c=s+(t+1)%3,u=l+(o+2)%3,f=e[a],h=e[t],d=e[c],p=e[u];if(Is(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[o]=f;const r=n[u];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(o,n[a]),this._link(a,u);const s=l+(o+1)%3;i<Ps.length&&(Ps[i++]=s)}else{if(0===i)break;t=Ps[--i]}}return a}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}function Ns(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function Is(t,e,n,r,i,a,o,s){const l=t-o,c=e-s,u=n-o,f=r-s,h=i-o,d=a-s,p=u*u+f*f,m=h*h+d*d;return l*(f*m-p*d)-c*(u*m-p*h)+(l*l+c*c)*(u*d-f*h)<0}function Us(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,c=a-e,u=o*o+s*s,f=l*l+c*c,h=.5/(o*c-s*l),d=(c*u-s*f)*h,p=(o*f-l*u)*h;return d*d+p*p}function Os(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],a=e[r];let o=i-1;for(;o>=n&&e[t[o]]>a;)t[o+1]=t[o--];t[o+1]=r}else{let i=n+1,a=r;Fs(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Fs(t,n,r),e[t[i]]>e[t[r]]&&Fs(t,i,r),e[t[n]]>e[t[i]]&&Fs(t,n,i);const o=t[i],s=e[o];for(;;){do{i++}while(e[t[i]]<s);do{a--}while(e[t[a]]>s);if(a<i)break;Fs(t,i,a)}t[n+1]=t[a],t[a]=o,r-i+1>=a-n?(Os(t,e,i,r),Os(t,e,n,a-1)):(Os(t,e,n,a-1),Os(t,e,i,r))}}function Fs(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ks(t){return t[0]}function Bs(t){return t[1]}const zs=1e-6;class Hs{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>zs||Math.abs(this._y1-i)>zs)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Vs{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Gs{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,l=0,c=0,u=n.length;l<u;l+=3,c+=2){const u=2*n[l],f=2*n[l+1],h=2*n[l+2],d=t[u],p=t[u+1],m=t[f],g=t[f+1],v=t[h],_=t[h+1],y=m-d,x=g-p,b=v-d,w=_-p,M=2*(y*w-x*b);if(Math.abs(M)<1e-9){if(void 0===i){i=a=0;for(const n of e)i+=t[2*n],a+=t[2*n+1];i/=e.length,a/=e.length}const n=1e9*Math.sign((i-d)*w-(a-p)*b);r=(d+v)/2-n*w,s=(p+_)/2+n*b}else{const t=1/M,e=y*y+x*x,n=b*b+w*w;r=d+(w*e-x*n)*t,s=p+(y*n-b*e)*t}o[c]=r,o[c+1]=s}let s,l,c,u=e[e.length-1],f=4*u,h=t[2*u],d=t[2*u+1];r.fill(0);for(let n=0;n<e.length;++n)u=e[n],s=f,l=h,c=d,f=4*u,h=t[2*u],d=t[2*u+1],r[s+2]=r[f]=c-d,r[s+3]=r[f+1]=h-l}render(t){const e=null==t?t=new Hs:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:a,vectors:o}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),o=2*Math.floor(r/3),s=a[i],l=a[i+1],c=a[o],u=a[o+1];this._renderSegment(s,l,c,u,t)}let s,l=i[i.length-1];for(let e=0;e<i.length;++e){s=l,l=i[e];const n=2*Math.floor(r[l]/3),c=a[n],u=a[n+1],f=4*s,h=this._project(c,u,o[f+2],o[f+3]);h&&this._renderSegment(c,u,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Hs:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Hs:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Vs;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let a;const o=this._regioncode(t,e),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(a=this._clipSegment(t,e,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let a=0,o=t.length;a<o;a+=2)if(e[r]===t[a]&&e[r+1]===t[a+1]&&e[(r+2)%i]===t[(a+o-2)%o]&&e[(r+3)%i]===t[(a+o-1)%o]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{const n=Math.floor(s/3);if(o.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,a,o,s=null,l=e[n-2],c=e[n-1],u=this._regioncode(l,c),f=0;for(let h=0;h<n;h+=2)if(r=l,i=c,l=e[h],c=e[h+1],a=u,u=this._regioncode(l,c),0===a&&0===u)o=f,f=0,s?s.push(l,c):s=[l,c];else{let e,n,h,d,p;if(0===a){if(null===(e=this._clipSegment(r,i,l,c,a,u)))continue;[n,h,d,p]=e}else{if(null===(e=this._clipSegment(l,c,r,i,u,a)))continue;[d,p,n,h]=e,o=f,f=this._edgecode(n,h),o&&f&&this._edge(t,o,f,s,s.length),s?s.push(n,h):s=[n,h]}o=f,f=this._edgecode(d,p),o&&f&&this._edge(t,o,f,s,s.length),s?s.push(d,p):s=[d,p]}if(s)o=f,f=this._edgecode(s[0],s[1]),o&&f&&this._edge(t,o,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,a){const o=i<a;for(o&&([t,e,n,r,i,a]=[n,r,t,e,a,i]);;){if(0===i&&0===a)return o?[n,r,t,e]:[t,e,n,r];if(i&a)return null;let s,l,c=i||a;8&c?(s=t+(n-t)*(this.ymax-e)/(r-e),l=this.ymax):4&c?(s=t+(n-t)*(this.ymin-e)/(r-e),l=this.ymin):2&c?(l=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(l=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=l,i=this._regioncode(t,e)):(n=s,r=l,a=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,a){let o,s=Array.from(e);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,a;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,a=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,a=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,a=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,a=this.ymin}r[i]===n&&r[i+1]===a||!this.contains(t,n,a)||(r.splice(i,0,n,a),i+=2)}return i}_project(t,e,n,r){let i,a,o,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(o=this.ymin,a=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(o=this.ymax,a=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=i)*r)}return[a,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const Ws=2*Math.PI,js=Math.pow;function qs(t){return t[0]}function Xs(t){return t[1]}function $s(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Ys{static from(t,e=qs,n=Xs,r){return new Ys("length"in t?function(t,e,n,r){const i=t.length,a=new Float64Array(2*i);for(let o=0;o<i;++o){const i=t[o];a[2*o]=e.call(r,i,o,t),a[2*o+1]=n.call(r,i,o,t)}return a}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new Ls(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],a=2*e[t+2];if((n[a]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=$s(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new Ls(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==a[e]||(a[e]=t)}for(let t=0,e=r.length;t<e;++t)o[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,2===r.length&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Gs(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:a,collinear:o}=this;if(o){const e=o.indexOf(t);return e>0&&(yield o[e-1]),void(e<o.length-1&&(yield o[e+1]))}const s=e[t];if(-1===s)return;let l=s,c=-1;do{if(yield c=a[l],l=l%3==2?l-2:l+1,a[l]!==t)return;if(l=i[l],-1===l){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(l!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:a,halfedges:o,triangles:s,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let c=t,u=js(e-l[2*t],2)+js(n-l[2*t+1],2);const f=r[t];let h=f;do{let r=s[h];const f=js(e-l[2*r],2)+js(n-l[2*r+1],2);if(f<u&&(u=f,c=r),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=o[h],-1===h){if(h=i[(a[t]+1)%i.length],h!==r&&js(e-l[2*h],2)+js(n-l[2*h+1],2)<u)return h;break}}while(h!==f);return c}render(t){const e=null==t?t=new Hs:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,a=r.length;e<a;++e){const a=r[e];if(a<e)continue;const o=2*i[e],s=2*i[a];t.moveTo(n[o],n[o+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Hs:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],a=r[n+1];t.moveTo(i+e,a),t.arc(i,a,e,0,Ws)}return n&&n.value()}renderHull(t){const e=null==t?t=new Hs:void 0,{hull:n,points:r}=this,i=2*n[0],a=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<a;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Vs;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Hs:void 0,{points:r,triangles:i}=this,a=2*i[t*=3],o=2*i[t+1],s=2*i[t+2];return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Vs;return this.renderTriangle(t,e),e.value()}}const Ks=t=>()=>t;function Zs(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function Qs(t){return!t.ctrlKey&&!t.button}function Js(){return this.parentNode}function tl(t,e){return null==e?{x:t.x,y:t.y}:e}function el(){return navigator.maxTouchPoints||"ontouchstart"in this}function nl(){var t,e,n,r,i=Qs,a=Js,o=tl,s=el,l={},c=Ee("start","drag","end"),u=0,f=0;function h(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,Vn).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(o,s){if(!r&&i.call(this,o,s)){var l=y(this,a.call(this,o,s),o,s,"mouse");l&&(Hn(o.view).on("mousemove.drag",p,Gn).on("mouseup.drag",m,Gn),qn(o.view),Wn(o),n=!1,t=o.clientX,e=o.clientY,l("start",o))}}function p(r){if(jn(r),!n){var i=r.clientX-t,a=r.clientY-e;n=i*i+a*a>f}l.mouse("drag",r)}function m(t){Hn(t.view).on("mousemove.drag mouseup.drag",null),Xn(t.view,n),jn(t),l.mouse("end",t)}function g(t,e){if(i.call(this,t,e)){var n,r,o=t.changedTouches,s=a.call(this,t,e),l=o.length;for(n=0;n<l;++n)(r=y(this,s,t,e,o[n].identifier,o[n]))&&(Wn(t),r("start",t,o[n]))}}function v(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=l[r[e].identifier])&&(jn(t),n("drag",t,r[e]))}function _(t){var e,n,i=t.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<a;++e)(n=l[i[e].identifier])&&(Wn(t),n("end",t,i[e]))}function y(t,e,n,r,i,a){var s,f,d,p=c.copy(),m=Jr(a||n,e);if(null!=(d=o.call(t,new Zs("beforestart",{sourceEvent:n,target:h,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=d.x-m[0]||0,f=d.y-m[1]||0,function n(a,o,c){var g,v=m;switch(a){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=Jr(c||o,e),g=u}p.call(a,t,new Zs(a,{sourceEvent:o,subject:d,target:h,identifier:i,active:g,x:m[0]+s,y:m[1]+f,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ks(!!t),h):i},h.container=function(t){return arguments.length?(a="function"==typeof t?t:Ks(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:Ks(t),h):o},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Ks(!!t),h):s},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}Zs.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var rl=n(1378),il=n(3287),al=n(1874),ol=n(9844);const sl=t=>+t;function ll(t){return t*t}function cl(t){return t*(2-t)}function ul(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var fl=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),hl=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),dl=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),pl=Math.PI,ml=pl/2;function gl(t){return 1==+t?1:1-Math.cos(t*ml)}function vl(t){return Math.sin(t*ml)}function _l(t){return(1-Math.cos(pl*t))/2}function yl(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function xl(t){return yl(1-+t)}function bl(t){return 1-yl(t)}function wl(t){return((t*=2)<=1?yl(1-t):2-yl(t-1))/2}function Ml(t){return 1-Math.sqrt(1-t*t)}function Sl(t){return Math.sqrt(1- --t*t)}function Tl(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var El=4/11,Al=6/11,Cl=8/11,Rl=3/4,Dl=9/11,Pl=10/11,Ll=15/16,Nl=21/22,Il=63/64,Ul=1/El/El;function Ol(t){return 1-Fl(1-t)}function Fl(t){return(t=+t)<El?Ul*t*t:t<Cl?Ul*(t-=Al)*t+Rl:t<Pl?Ul*(t-=Dl)*t+Ll:Ul*(t-=Nl)*t+Il}function kl(t){return((t*=2)<=1?1-Fl(1-t):Fl(t-1)+1)/2}var Bl=1.70158,zl=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(Bl),Hl=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(Bl),Vl=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Bl),Gl=2*Math.PI,Wl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Gl);function i(t){return e*yl(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Gl)},i.period=function(n){return t(e,n)},i}(1,.3),jl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Gl);function i(t){return 1-e*yl(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Gl)},i.period=function(n){return t(e,n)},i}(1,.3),ql=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Gl);function i(t){return((t=2*t-1)<0?e*yl(-t)*Math.sin((r-t)/n):2-e*yl(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Gl)},i.period=function(n){return t(e,n)},i}(1,.3);function Xl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function $l(t,e){return fetch(t,e).then(Xl)}function Yl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Kl(t,e){return fetch(t,e).then(Yl)}function Zl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ql(t,e){return fetch(t,e).then(Zl)}function Jl(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Ql(e,n).then((function(e){return t(e,r)}))}}function tc(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=(0,rl.A)(t);return Ql(e,n).then((function(t){return i.parse(t,r)}))}var ec=Jl(il.sw),nc=Jl(al.Nu);function rc(t,e){return new Promise((function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function ic(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function ac(t,e){return fetch(t,e).then(ic)}function oc(t){return(e,n)=>Ql(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const sc=oc("application/xml");var lc=oc("text/html"),cc=oc("image/svg+xml");function uc(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,l=0;for(i=0;i<o;++i)s+=(a=n[i]).x,l+=a.y;for(s=(s/o-t)*r,l=(l/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function fc(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,c,u,f,h,d=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(a=(m+v)/2))?m=a:v=a,(u=n>=(o=(g+_)/2))?g=o:_=o,i=d,!(d=d[f=u<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(a=(m+v)/2))?m=a:v=a,(u=n>=(o=(g+_)/2))?g=o:_=o}while((f=u<<1|c)==(h=(l>=o)<<1|s>=a));return i[h]=d,i[f]=p,t}function hc(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function dc(t){return t[0]}function pc(t){return t[1]}function mc(t,e,n){var r=new gc(null==e?dc:e,null==n?pc:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function gc(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function vc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var _c=mc.prototype=gc.prototype;function yc(t){return function(){return t}}function xc(t){return 1e-6*(t()-.5)}function bc(t){return t.x+t.vx}function wc(t){return t.y+t.vy}function Mc(t){var e,n,r,i=1,a=1;function o(){for(var t,o,l,c,u,f,h,d=e.length,p=0;p<a;++p)for(o=mc(e,bc,wc).visitAfter(s),t=0;t<d;++t)l=e[t],f=n[l.index],h=f*f,c=l.x+l.vx,u=l.y+l.vy,o.visit(m);function m(t,e,n,a,o){var s=t.data,d=t.r,p=f+d;if(!s)return e>c+p||a<c-p||n>u+p||o<u-p;if(s.index>l.index){var m=c-s.x-s.vx,g=u-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=xc(r))*m),0===g&&(v+=(g=xc(r))*g),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(p=(d*=d)/(h+d)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=yc(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,l()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:yc(+e),l(),o):t},o}function Sc(t){return t.index}function Tc(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Ec(t){var e,n,r,i,a,o,s=Sc,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=yc(30),u=1;function f(r){for(var i=0,s=t.length;i<u;++i)for(var l,c,f,h,d,p,m,g=0;g<s;++g)c=(l=t[g]).source,h=(f=l.target).x+f.vx-c.x-c.vx||xc(o),d=f.y+f.vy-c.y-c.vy||xc(o),h*=p=((p=Math.sqrt(h*h+d*d))-n[g])/p*r*e[g],d*=p,f.vx-=h*(m=a[g]),f.vy-=d*m,c.vx+=h*(m=1-m),c.vy+=d*m}function h(){if(r){var o,l,c=r.length,u=t.length,f=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(o=0,i=new Array(c);o<u;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=Tc(f,l.source)),"object"!=typeof l.target&&(l.target=Tc(f,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(o=0,a=new Array(u);o<u;++o)l=t[o],a[o]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(u),d(),n=new Array(u),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,o=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(u=+t,f):u},f.strength=function(t){return arguments.length?(l="function"==typeof t?t:yc(+t),d(),f):l},f.distance=function(t){return arguments.length?(c="function"==typeof t?t:yc(+t),p(),f):c},f}_c.copy=function(){var t,e,n=new gc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=vc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=vc(e));return n},_c.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return fc(this.cover(e,n),e,n,t)},_c.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>f&&(f=i));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<a;++n)fc(this,o[n],s[n],t[n]);return this},_c.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=c,c=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},_c.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},_c.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_c.find=function(t,e,n){var r,i,a,o,s,l,c,u=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new hc(m,u,f,h,d)),null==n?n=1/0:(u=t-n,f=e-n,h=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(a=l.y0)>d||(o=l.x1)<u||(s=l.y1)<f))if(m.length){var g=(i+o)/2,v=(a+s)/2;p.push(new hc(m[3],g,v,o,s),new hc(m[2],i,v,g,s),new hc(m[1],g,a,o,v),new hc(m[0],i,a,g,v)),(c=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var _=t-+this._x.call(null,m.data),y=e-+this._y.call(null,m.data),x=_*_+y*y;if(x<n){var b=Math.sqrt(n=x);u=t-b,f=e-b,h=t+b,d=e+b,r=m.data}}return r},_c.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,c,u,f,h,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=a>=(s=(p+g)/2))?p=s:g=s,(u=o>=(l=(m+v)/2))?m=l:v=l,e=d,!(d=d[f=u<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},_c.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},_c.root=function(){return this._root},_c.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},_c.visit=function(t){var e,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new hc(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&l.length){var c=(r+a)/2,u=(i+o)/2;(n=l[3])&&s.push(new hc(n,c,u,a,o)),(n=l[2])&&s.push(new hc(n,r,u,c,o)),(n=l[1])&&s.push(new hc(n,c,i,a,u)),(n=l[0])&&s.push(new hc(n,r,i,c,u))}return this},_c.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new hc(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(o+l)/2,f=(s+c)/2;(a=i[0])&&n.push(new hc(a,o,s,u,f)),(a=i[1])&&n.push(new hc(a,u,s,l,f)),(a=i[2])&&n.push(new hc(a,o,f,u,c)),(a=i[3])&&n.push(new hc(a,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},_c.x=function(t){return arguments.length?(this._x=t,this):this._x},_c.y=function(t){return arguments.length?(this._y=t,this):this._y};const Ac=1664525,Cc=1013904223,Rc=4294967296;function Dc(t){return t.x}function Pc(t){return t.y}var Lc=10,Nc=Math.PI*(3-Math.sqrt(5));function Ic(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=pi(f),c=Ee("tick","end"),u=function(){let t=1;return()=>(t=(Ac*t+Cc)%Rc)/Rc}();function f(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(r){var l,c,u=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=Lc*Math.sqrt(.5+n),a=n*Nc;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(u=t,s.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(o=(i=e-(s=t[c]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function Uc(){var t,e,n,r,i,a=yc(-30),o=1,s=1/0,l=.81;function c(n){var i,a=t.length,o=mc(t,Dc,Pc).visitAfter(f);for(r=n,i=0;i<a;++i)e=t[i],o.visit(h)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function f(t){var e,n,r,a,o,s=0,l=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,a+=n*e.y);t.x=r/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,a,c,u){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,d=u-a,p=f*f+h*h;if(d*d/l<p)return p<s&&(0===f&&(p+=(f=xc(n))*f),0===h&&(p+=(h=xc(n))*h),p<o&&(p=Math.sqrt(o*p)),e.vx+=f*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=xc(n))*f),0===h&&(p+=(h=xc(n))*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=f*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(a="function"==typeof t?t:yc(+t),u(),c):a},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}function Oc(t,e,n){var r,i,a,o=yc(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var l=r[o],c=l.x-e||1e-6,u=l.y-n||1e-6,f=Math.sqrt(c*c+u*u),h=(a[o]-f)*i[o]*t/f;l.vx+=c*h,l.vy+=u*h}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=yc(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:yc(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:yc(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function Fc(t){var e,n,r,i=yc(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=yc(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:yc(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:yc(+e),o(),a):t},a}function kc(t){var e,n,r,i=yc(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=yc(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:yc(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:yc(+e),o(),a):t},a}function Bc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function zc(t){return(t=Bc(Math.abs(t)))?t[1]:NaN}var Hc,Vc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gc(t){if(!(e=Vc.exec(t)))throw new Error("invalid format: "+t);var e;return new Wc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Wc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function jc(t,e){var n=Bc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Gc.prototype=Wc.prototype,Wc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const qc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>jc(100*t,e),r:jc,s:function(t,e){var n=Bc(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Hc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Bc(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xc(t){return t}var $c,Yc,Kc,Zc=Array.prototype.map,Qc=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Jc(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Xc:(e=Zc.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Xc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Zc.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"â":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Gc(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,_=t.type;"n"===_?(m=!0,_="g"):qc[_]||(void 0===g&&(g=12),v=!0,_="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",x="$"===h?a:/[%p]/.test(_)?l:"",b=qc[_],w=/[defgprs%]/.test(_);function M(t){var i,a,l,h=y,M=x;if("c"===_)M=b(t)+M,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,M=("s"===_?Qc[8+Hc/3]:"")+M+(S&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){M=(46===l?o+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var T=h.length+t.length+M.length,E=T<p?new Array(p-T+1).join(e):"";switch(m&&d&&(t=r(E+t,E.length?p-M.length:1/0),E=""),n){case"<":t=h+t+M+E;break;case"=":t=h+E+t+M;break;case"^":t=E.slice(0,T=E.length>>1)+h+t+M+E.slice(T);break;default:t=E+h+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:f,formatPrefix:function(t,e){var n=f(((t=Gc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(zc(e)/3))),i=Math.pow(10,-r),a=Qc[8+r/3];return function(t){return n(i*t)+a}}}}function tu(t){return $c=Jc(t),Yc=$c.format,Kc=$c.formatPrefix,$c}function eu(t){return Math.max(0,-zc(Math.abs(t)))}function nu(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zc(e)/3)))-zc(Math.abs(t)))}function ru(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zc(e)-zc(t))+1}tu({thousands:",",grouping:[3],currency:["$",""]});var iu=1e-6,au=1e-12,ou=Math.PI,su=ou/2,lu=ou/4,cu=2*ou,uu=180/ou,fu=ou/180,hu=Math.abs,du=Math.atan,pu=Math.atan2,mu=Math.cos,gu=Math.ceil,vu=Math.exp,_u=(Math.floor,Math.hypot),yu=Math.log,xu=Math.pow,bu=Math.sin,wu=Math.sign||function(t){return t>0?1:t<0?-1:0},Mu=Math.sqrt,Su=Math.tan;function Tu(t){return t>1?0:t<-1?ou:Math.acos(t)}function Eu(t){return t>1?su:t<-1?-su:Math.asin(t)}function Au(t){return(t=bu(t/2))*t}function Cu(){}function Ru(t,e){t&&Pu.hasOwnProperty(t.type)&&Pu[t.type](t,e)}var Du={Feature:function(t,e){Ru(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ru(n[r].geometry,e)}},Pu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Lu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Lu(n[r],e,0)},Polygon:function(t,e){Nu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ru(n[r],e)}};function Lu(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Nu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Lu(t[n],e,1);e.polygonEnd()}function Iu(t,e){t&&Du.hasOwnProperty(t.type)?Du[t.type](t,e):Ru(t,e)}var Uu,Ou,Fu,ku,Bu,zu,Hu,Vu,Gu,Wu,ju,qu,Xu,$u,Yu,Ku,Zu=new R,Qu=new R,Ju={point:Cu,lineStart:Cu,lineEnd:Cu,polygonStart:function(){Zu=new R,Ju.lineStart=tf,Ju.lineEnd=ef},polygonEnd:function(){var t=+Zu;Qu.add(t<0?cu+t:t),this.lineStart=this.lineEnd=this.point=Cu},sphere:function(){Qu.add(cu)}};function tf(){Ju.point=nf}function ef(){rf(Uu,Ou)}function nf(t,e){Ju.point=rf,Uu=t,Ou=e,Fu=t*=fu,ku=mu(e=(e*=fu)/2+lu),Bu=bu(e)}function rf(t,e){var n=(t*=fu)-Fu,r=n>=0?1:-1,i=r*n,a=mu(e=(e*=fu)/2+lu),o=bu(e),s=Bu*o,l=ku*a+s*mu(i),c=s*r*bu(i);Zu.add(pu(c,l)),Fu=t,ku=a,Bu=o}function af(t){return Qu=new R,Iu(t,Ju),2*Qu}function of(t){return[pu(t[1],t[0]),Eu(t[2])]}function sf(t){var e=t[0],n=t[1],r=mu(n);return[r*mu(e),r*bu(e),bu(n)]}function lf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cf(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function uf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ff(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function hf(t){var e=Mu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var df,pf,mf,gf,vf,_f,yf,xf,bf,wf,Mf,Sf,Tf,Ef,Af,Cf,Rf={point:Df,lineStart:Lf,lineEnd:Nf,polygonStart:function(){Rf.point=If,Rf.lineStart=Uf,Rf.lineEnd=Of,$u=new R,Ju.polygonStart()},polygonEnd:function(){Ju.polygonEnd(),Rf.point=Df,Rf.lineStart=Lf,Rf.lineEnd=Nf,Zu<0?(zu=-(Vu=180),Hu=-(Gu=90)):$u>iu?Gu=90:$u<-iu&&(Hu=-90),Ku[0]=zu,Ku[1]=Vu},sphere:function(){zu=-(Vu=180),Hu=-(Gu=90)}};function Df(t,e){Yu.push(Ku=[zu=t,Vu=t]),e<Hu&&(Hu=e),e>Gu&&(Gu=e)}function Pf(t,e){var n=sf([t*fu,e*fu]);if(Xu){var r=cf(Xu,n),i=cf([r[1],-r[0],0],r);hf(i),i=of(i);var a,o=t-Wu,s=o>0?1:-1,l=i[0]*uu*s,c=hu(o)>180;c^(s*Wu<l&&l<s*t)?(a=i[1]*uu)>Gu&&(Gu=a):c^(s*Wu<(l=(l+360)%360-180)&&l<s*t)?(a=-i[1]*uu)<Hu&&(Hu=a):(e<Hu&&(Hu=e),e>Gu&&(Gu=e)),c?t<Wu?Ff(zu,t)>Ff(zu,Vu)&&(Vu=t):Ff(t,Vu)>Ff(zu,Vu)&&(zu=t):Vu>=zu?(t<zu&&(zu=t),t>Vu&&(Vu=t)):t>Wu?Ff(zu,t)>Ff(zu,Vu)&&(Vu=t):Ff(t,Vu)>Ff(zu,Vu)&&(zu=t)}else Yu.push(Ku=[zu=t,Vu=t]);e<Hu&&(Hu=e),e>Gu&&(Gu=e),Xu=n,Wu=t}function Lf(){Rf.point=Pf}function Nf(){Ku[0]=zu,Ku[1]=Vu,Rf.point=Df,Xu=null}function If(t,e){if(Xu){var n=t-Wu;$u.add(hu(n)>180?n+(n>0?360:-360):n)}else ju=t,qu=e;Ju.point(t,e),Pf(t,e)}function Uf(){Ju.lineStart()}function Of(){If(ju,qu),Ju.lineEnd(),hu($u)>iu&&(zu=-(Vu=180)),Ku[0]=zu,Ku[1]=Vu,Xu=null}function Ff(t,e){return(e-=t)<0?e+360:e}function kf(t,e){return t[0]-e[0]}function Bf(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function zf(t){var e,n,r,i,a,o,s;if(Gu=Vu=-(zu=Hu=1/0),Yu=[],Iu(t,Rf),n=Yu.length){for(Yu.sort(kf),e=1,a=[r=Yu[0]];e<n;++e)Bf(r,(i=Yu[e])[0])||Bf(r,i[1])?(Ff(r[0],i[1])>Ff(r[0],r[1])&&(r[1]=i[1]),Ff(i[0],r[1])>Ff(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=Ff(r[1],i[0]))>o&&(o=s,zu=i[0],Vu=r[1])}return Yu=Ku=null,zu===1/0||Hu===1/0?[[NaN,NaN],[NaN,NaN]]:[[zu,Hu],[Vu,Gu]]}var Hf={sphere:Cu,point:Vf,lineStart:Wf,lineEnd:Xf,polygonStart:function(){Hf.lineStart=$f,Hf.lineEnd=Yf},polygonEnd:function(){Hf.lineStart=Wf,Hf.lineEnd=Xf}};function Vf(t,e){t*=fu;var n=mu(e*=fu);Gf(n*mu(t),n*bu(t),bu(e))}function Gf(t,e,n){++df,mf+=(t-mf)/df,gf+=(e-gf)/df,vf+=(n-vf)/df}function Wf(){Hf.point=jf}function jf(t,e){t*=fu;var n=mu(e*=fu);Ef=n*mu(t),Af=n*bu(t),Cf=bu(e),Hf.point=qf,Gf(Ef,Af,Cf)}function qf(t,e){t*=fu;var n=mu(e*=fu),r=n*mu(t),i=n*bu(t),a=bu(e),o=pu(Mu((o=Af*a-Cf*i)*o+(o=Cf*r-Ef*a)*o+(o=Ef*i-Af*r)*o),Ef*r+Af*i+Cf*a);pf+=o,_f+=o*(Ef+(Ef=r)),yf+=o*(Af+(Af=i)),xf+=o*(Cf+(Cf=a)),Gf(Ef,Af,Cf)}function Xf(){Hf.point=Vf}function $f(){Hf.point=Kf}function Yf(){Zf(Sf,Tf),Hf.point=Vf}function Kf(t,e){Sf=t,Tf=e,t*=fu,e*=fu,Hf.point=Zf;var n=mu(e);Ef=n*mu(t),Af=n*bu(t),Cf=bu(e),Gf(Ef,Af,Cf)}function Zf(t,e){t*=fu;var n=mu(e*=fu),r=n*mu(t),i=n*bu(t),a=bu(e),o=Af*a-Cf*i,s=Cf*r-Ef*a,l=Ef*i-Af*r,c=_u(o,s,l),u=Eu(c),f=c&&-u/c;bf.add(f*o),wf.add(f*s),Mf.add(f*l),pf+=u,_f+=u*(Ef+(Ef=r)),yf+=u*(Af+(Af=i)),xf+=u*(Cf+(Cf=a)),Gf(Ef,Af,Cf)}function Qf(t){df=pf=mf=gf=vf=_f=yf=xf=0,bf=new R,wf=new R,Mf=new R,Iu(t,Hf);var e=+bf,n=+wf,r=+Mf,i=_u(e,n,r);return i<au&&(e=_f,n=yf,r=xf,pf<iu&&(e=mf,n=gf,r=vf),(i=_u(e,n,r))<au)?[NaN,NaN]:[pu(n,e)*uu,Eu(r/i)*uu]}function Jf(t){return function(){return t}}function th(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function eh(t,e){return hu(t)>ou&&(t-=Math.round(t/cu)*cu),[t,e]}function nh(t,e,n){return(t%=cu)?e||n?th(ih(t),ah(e,n)):ih(t):e||n?ah(e,n):eh}function rh(t){return function(e,n){return hu(e+=t)>ou&&(e-=Math.round(e/cu)*cu),[e,n]}}function ih(t){var e=rh(t);return e.invert=rh(-t),e}function ah(t,e){var n=mu(t),r=bu(t),i=mu(e),a=bu(e);function o(t,e){var o=mu(e),s=mu(t)*o,l=bu(t)*o,c=bu(e),u=c*n+s*r;return[pu(l*i-u*a,s*n-c*r),Eu(u*i+l*a)]}return o.invert=function(t,e){var o=mu(e),s=mu(t)*o,l=bu(t)*o,c=bu(e),u=c*i-l*a;return[pu(l*i+c*a,s*n+u*r),Eu(u*n-s*r)]},o}function oh(t){function e(e){return(e=t(e[0]*fu,e[1]*fu))[0]*=uu,e[1]*=uu,e}return t=nh(t[0]*fu,t[1]*fu,t.length>2?t[2]*fu:0),e.invert=function(e){return(e=t.invert(e[0]*fu,e[1]*fu))[0]*=uu,e[1]*=uu,e},e}function sh(t,e,n,r,i,a){if(n){var o=mu(e),s=bu(e),l=r*n;null==i?(i=e+r*cu,a=e-l/2):(i=lh(o,i),a=lh(o,a),(r>0?i<a:i>a)&&(i+=r*cu));for(var c,u=i;r>0?u>a:u<a;u-=l)c=of([o,-s*mu(u),-s*bu(u)]),t.point(c[0],c[1])}}function lh(t,e){(e=sf(e))[0]-=t,hf(e);var n=Tu(-e[1]);return((-e[2]<0?-n:n)+cu-iu)%cu}function ch(){var t,e,n=Jf([0,0]),r=Jf(90),i=Jf(2),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=uu,n[1]*=uu}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*fu,l=i.apply(this,arguments)*fu;return t=[],e=nh(-o[0]*fu,-o[1]*fu,0).invert,sh(a,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:Jf([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(r="function"==typeof t?t:Jf(+t),o):r},o.precision=function(t){return arguments.length?(i="function"==typeof t?t:Jf(+t),o):i},o}function uh(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Cu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function fh(t,e){return hu(t[0]-e[0])<iu&&hu(t[1]-e[1])<iu}function hh(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function dh(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(fh(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*iu}s.push(n=new hh(r,t,null,!0)),l.push(n.o=new hh(r,null,n,!1)),s.push(n=new hh(o,t,null,!1)),l.push(n.o=new hh(o,null,n,!0))}})),s.length){for(l.sort(e),ph(s),ph(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var c,u,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=c.length;a<o;++a)i.point((u=c[a])[0],u[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,a=c.length-1;a>=0;--a)i.point((u=c[a])[0],u[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function ph(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function mh(t){return hu(t[0])<=ou?t[0]:wu(t[0])*((hu(t[0])+ou)%cu-ou)}function gh(t,e){var n=mh(e),r=e[1],i=bu(r),a=[bu(n),-mu(n),0],o=0,s=0,l=new R;1===i?r=su+iu:-1===i&&(r=-su-iu);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,d=f[h-1],p=mh(d),m=d[1]/2+lu,g=bu(m),v=mu(m),_=0;_<h;++_,p=x,g=w,v=M,d=y){var y=f[_],x=mh(y),b=y[1]/2+lu,w=bu(b),M=mu(b),S=x-p,T=S>=0?1:-1,E=T*S,A=E>ou,C=g*w;if(l.add(pu(C*T*bu(E),v*M+C*mu(E))),o+=A?S+T*cu:S,A^p>=n^x>=n){var D=cf(sf(d),sf(y));hf(D);var P=cf(a,D);hf(P);var L=(A^S>=0?-1:1)*Eu(P[2]);(r>L||r===L&&(D[0]||D[1]))&&(s+=A^S>=0?1:-1)}}return(o<-iu||o<iu&&l<-au)^1&s}function vh(t,e,n,r){return function(i){var a,o,s,l=e(i),c=uh(),u=e(c),f=!1,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=y,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,o=Rt(o);var t=gh(a,r);o.length?(f||(i.polygonStart(),f=!0),dh(o,yh,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function m(){h.point=p,l.lineStart()}function g(){h.point=d,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function _(){u.lineStart(),s=[]}function y(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),h=c.result(),d=h.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&h.push(h.pop().concat(h.shift())),o.push(h.filter(_h))}return h}}function _h(t){return t.length>1}function yh(t,e){return((t=t.x)[0]<0?t[1]-su-iu:su-t[1])-((e=e.x)[0]<0?e[1]-su-iu:su-e[1])}eh.invert=eh;const xh=vh((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?ou:-ou,l=hu(a-n);hu(l-ou)<iu?(t.point(n,r=(r+o)/2>0?su:-su),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=ou&&(hu(n-i)<iu&&(n-=i*iu),hu(a-s)<iu&&(a-=s*iu),r=function(t,e,n,r){var i,a,o=bu(t-n);return hu(o)>iu?du((bu(e)*(a=mu(r))*bu(n)-bu(r)*(i=mu(e))*bu(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*su,r.point(-ou,i),r.point(0,i),r.point(ou,i),r.point(ou,0),r.point(ou,-i),r.point(0,-i),r.point(-ou,-i),r.point(-ou,0),r.point(-ou,i);else if(hu(t[0]-e[0])>iu){var a=t[0]<e[0]?ou:-ou;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-ou,-su]);function bh(t){var e=mu(t),n=2*fu,r=e>0,i=hu(e)>iu;function a(t,n){return mu(t)*mu(n)>e}function o(t,n,r){var i=[1,0,0],a=cf(sf(t),sf(n)),o=lf(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var c=e*o/l,u=-e*s/l,f=cf(i,a),h=ff(i,c);uf(h,ff(a,u));var d=f,p=lf(h,d),m=lf(d,d),g=p*p-m*(lf(h,h)-1);if(!(g<0)){var v=Mu(g),_=ff(d,(-p-v)/m);if(uf(_,h),_=of(_),!r)return _;var y,x=t[0],b=n[0],w=t[1],M=n[1];b<x&&(y=x,x=b,b=y);var S=b-x,T=hu(S-ou)<iu;if(!T&&M<w&&(y=w,w=M,M=y),T||S<iu?T?w+M>0^_[1]<(hu(_[0]-x)<iu?w:M):w<=_[1]&&_[1]<=M:S>ou^(x<=_[0]&&_[0]<=b)){var E=ff(d,(-p+v)/m);return uf(E,h),[_,of(E)]}}}function s(e,n){var i=r?t:ou-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return vh(a,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,h){var d,p=[f,h],m=a(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?ou:-ou),h):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(d=o(e,p))||fh(e,d)||fh(p,d))&&(p[2]=1),m!==l)u=0,m?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^m){var v;g&n||!(v=o(p,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&fh(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,a){sh(a,t,n,i,e,r)}),r?[0,-t]:[-ou,t-ou])}var wh,Mh,Sh,Th,Eh=1e9,Ah=-Eh;function Ch(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var u=0,f=0;if(null==i||(u=o(i,s))!==(f=o(a,s))||l(i,a)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return hu(r[0]-t)<iu?i>0?0:3:hu(r[0]-n)<iu?i>0?2:1:hu(r[1]-e)<iu?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,f,h,d,p,m,g,v,_,y=o,x=uh(),b={point:w,lineStart:function(){b.point=M,c&&c.push(u=[]),v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(M(f,h),d&&g&&x.rejoin(),l.push(x.result())),b.point=w,g&&y.lineEnd()},polygonStart:function(){y=x,l=[],c=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],l=1,u=s.length,f=s[0],h=f[0],d=f[1];l<u;++l)a=h,o=d,h=(f=s[l])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=_&&e,i=(l=Rt(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&dh(l,s,e,a,o),o.polygonEnd()),y=o,l=c=u=null}};function w(t,e){i(t,e)&&y.point(t,e)}function M(a,o){var s=i(a,o);if(c&&u.push([a,o]),v)f=a,h=o,d=s,v=!1,s&&(y.lineStart(),y.point(a,o));else if(s&&g)y.point(a,o);else{var l=[p=Math.max(Ah,Math.min(Eh,p)),m=Math.max(Ah,Math.min(Eh,m))],x=[a=Math.max(Ah,Math.min(Eh,a)),o=Math.max(Ah,Math.min(Eh,o))];!function(t,e,n,r,i,a){var o,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,h=e[1]-l;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=a-l,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=s+c*f,t[1]=l+c*h),u<1&&(e[0]=s+u*f,e[1]=l+u*h),!0}}}}}(l,x,t,e,n,r)?s&&(y.lineStart(),y.point(a,o),_=!1):(g||(y.lineStart(),y.point(l[0],l[1])),y.point(x[0],x[1]),s||y.lineEnd(),_=!1)}p=a,m=o,g=s}return b}}function Rh(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=Ch(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}}var Dh={sphere:Cu,point:Cu,lineStart:function(){Dh.point=Lh,Dh.lineEnd=Ph},lineEnd:Cu,polygonStart:Cu,polygonEnd:Cu};function Ph(){Dh.point=Dh.lineEnd=Cu}function Lh(t,e){Mh=t*=fu,Sh=bu(e*=fu),Th=mu(e),Dh.point=Nh}function Nh(t,e){t*=fu;var n=bu(e*=fu),r=mu(e),i=hu(t-Mh),a=mu(i),o=r*bu(i),s=Th*n-Sh*r*a,l=Sh*n+Th*r*a;wh.add(pu(Mu(o*o+s*s),l)),Mh=t,Sh=n,Th=r}function Ih(t){return wh=new R,Iu(t,Dh),+wh}var Uh=[null,null],Oh={type:"LineString",coordinates:Uh};function Fh(t,e){return Uh[0]=t,Uh[1]=e,Ih(Oh)}var kh={Feature:function(t,e){return zh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(zh(n[r].geometry,e))return!0;return!1}},Bh={Sphere:function(){return!0},Point:function(t,e){return Hh(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hh(n[r],e))return!0;return!1},LineString:function(t,e){return Vh(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Vh(n[r],e))return!0;return!1},Polygon:function(t,e){return Gh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Gh(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(zh(n[r],e))return!0;return!1}};function zh(t,e){return!(!t||!Bh.hasOwnProperty(t.type))&&Bh[t.type](t,e)}function Hh(t,e){return 0===Fh(t,e)}function Vh(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=Fh(t[a],e)))return!0;if(a>0&&(i=Fh(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<au*i)return!0;n=r}return!1}function Gh(t,e){return!!gh(t.map(Wh),jh(e))}function Wh(t){return(t=t.map(jh)).pop(),t}function jh(t){return[t[0]*fu,t[1]*fu]}function qh(t,e){return(t&&kh.hasOwnProperty(t.type)?kh[t.type]:zh)(t,e)}function Xh(t,e,n){var r=Nt(t,e-iu,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function $h(t,e,n){var r=Nt(t,e-iu,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Yh(){var t,e,n,r,i,a,o,s,l,c,u,f,h=10,d=h,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return Nt(gu(r/p)*p,n,p).map(u).concat(Nt(gu(s/m)*m,o,m).map(f)).concat(Nt(gu(e/h)*h,t,h).filter((function(t){return hu(t%p)>iu})).map(l)).concat(Nt(gu(a/d)*d,i,d).filter((function(t){return hu(t%m)>iu})).map(c))}return v.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(f(o).slice(1),u(n).reverse().slice(1),f(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),v.precision(g)):[[r,s],[n,o]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),v.precision(g)):[[e,a],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],v):[h,d]},v.precision=function(h){return arguments.length?(g=+h,l=Xh(a,i,90),c=$h(e,t,g),u=Xh(s,o,90),f=$h(r,n,g),v):g},v.extentMajor([[-180,-90+iu],[180,90-iu]]).extentMinor([[-180,-80-iu],[180,80+iu]])}function Kh(){return Yh()()}function Zh(t,e){var n=t[0]*fu,r=t[1]*fu,i=e[0]*fu,a=e[1]*fu,o=mu(r),s=bu(r),l=mu(a),c=bu(a),u=o*mu(n),f=o*bu(n),h=l*mu(i),d=l*bu(i),p=2*Eu(Mu(Au(a-r)+o*l*Au(i-n))),m=bu(p),g=p?function(t){var e=bu(t*=p)/m,n=bu(p-t)/m,r=n*u+e*h,i=n*f+e*d,a=n*s+e*c;return[pu(i,r)*uu,pu(a,Mu(r*r+i*i))*uu]}:function(){return[n*uu,r*uu]};return g.distance=p,g}const Qh=t=>t;var Jh,td,ed,nd,rd=new R,id=new R,ad={point:Cu,lineStart:Cu,lineEnd:Cu,polygonStart:function(){ad.lineStart=od,ad.lineEnd=cd},polygonEnd:function(){ad.lineStart=ad.lineEnd=ad.point=Cu,rd.add(hu(id)),id=new R},result:function(){var t=rd/2;return rd=new R,t}};function od(){ad.point=sd}function sd(t,e){ad.point=ld,Jh=ed=t,td=nd=e}function ld(t,e){id.add(nd*t-ed*e),ed=t,nd=e}function cd(){ld(Jh,td)}const ud=ad;var fd=1/0,hd=fd,dd=-fd,pd=dd,md={point:function(t,e){t<fd&&(fd=t),t>dd&&(dd=t),e<hd&&(hd=e),e>pd&&(pd=e)},lineStart:Cu,lineEnd:Cu,polygonStart:Cu,polygonEnd:Cu,result:function(){var t=[[fd,hd],[dd,pd]];return dd=pd=-(hd=fd=1/0),t}};const gd=md;var vd,_d,yd,xd,bd=0,wd=0,Md=0,Sd=0,Td=0,Ed=0,Ad=0,Cd=0,Rd=0,Dd={point:Pd,lineStart:Ld,lineEnd:Ud,polygonStart:function(){Dd.lineStart=Od,Dd.lineEnd=Fd},polygonEnd:function(){Dd.point=Pd,Dd.lineStart=Ld,Dd.lineEnd=Ud},result:function(){var t=Rd?[Ad/Rd,Cd/Rd]:Ed?[Sd/Ed,Td/Ed]:Md?[bd/Md,wd/Md]:[NaN,NaN];return bd=wd=Md=Sd=Td=Ed=Ad=Cd=Rd=0,t}};function Pd(t,e){bd+=t,wd+=e,++Md}function Ld(){Dd.point=Nd}function Nd(t,e){Dd.point=Id,Pd(yd=t,xd=e)}function Id(t,e){var n=t-yd,r=e-xd,i=Mu(n*n+r*r);Sd+=i*(yd+t)/2,Td+=i*(xd+e)/2,Ed+=i,Pd(yd=t,xd=e)}function Ud(){Dd.point=Pd}function Od(){Dd.point=kd}function Fd(){Bd(vd,_d)}function kd(t,e){Dd.point=Bd,Pd(vd=yd=t,_d=xd=e)}function Bd(t,e){var n=t-yd,r=e-xd,i=Mu(n*n+r*r);Sd+=i*(yd+t)/2,Td+=i*(xd+e)/2,Ed+=i,Ad+=(i=xd*t-yd*e)*(yd+t),Cd+=i*(xd+e),Rd+=3*i,Pd(yd=t,xd=e)}const zd=Dd;function Hd(t){this._context=t}Hd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,cu)}},result:Cu};var Vd,Gd,Wd,jd,qd,Xd=new R,$d={point:Cu,lineStart:function(){$d.point=Yd},lineEnd:function(){Vd&&Kd(Gd,Wd),$d.point=Cu},polygonStart:function(){Vd=!0},polygonEnd:function(){Vd=null},result:function(){var t=+Xd;return Xd=new R,t}};function Yd(t,e){$d.point=Kd,Gd=jd=t,Wd=qd=e}function Kd(t,e){jd-=t,qd-=e,Xd.add(Mu(jd*jd+qd*qd)),jd=t,qd=e}const Zd=$d;let Qd,Jd,tp,ep;class np{constructor(t){this._append=null==t?rp:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return rp;if(e!==Qd){const t=10**e;Qd=e,Jd=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return Jd}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==tp||this._append!==Jd){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,tp=t,Jd=this._append,ep=this._,this._=e}this._+=ep}}result(){const t=this._;return this._="",t.length?t:null}}function rp(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ip(t,e){let n,r,i=3,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Iu(t,n(r))),r.result()}return o.area=function(t){return Iu(t,n(ud)),ud.result()},o.measure=function(t){return Iu(t,n(Zd)),Zd.result()},o.bounds=function(t){return Iu(t,n(gd)),gd.result()},o.centroid=function(t){return Iu(t,n(zd)),zd.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Qh):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new np(i)):new Hd(e=t),"function"!=typeof a&&r.pointRadius(a),o):e},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new np(i)),o},o.projection(t).digits(i).context(e)}function ap(t){return{stream:op(t)}}function op(t){return function(e){var n=new sp;for(var r in t)n[r]=t[r];return n.stream=e,n}}function sp(){}function lp(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Iu(n,t.stream(gd)),e(gd.result()),null!=r&&t.clipExtent(r),t}function cp(t,e,n){return lp(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function up(t,e,n){return cp(t,[[0,0],e],n)}function fp(t,e,n){return lp(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function hp(t,e,n){return lp(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}sp.prototype={constructor:sp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var dp=16,pp=mu(30*fu);function mp(t,e){return+e?function(t,e){function n(r,i,a,o,s,l,c,u,f,h,d,p,m,g){var v=c-r,_=u-i,y=v*v+_*_;if(y>4*e&&m--){var x=o+h,b=s+d,w=l+p,M=Mu(x*x+b*b+w*w),S=Eu(w/=M),T=hu(hu(w)-1)<iu||hu(a-f)<iu?(a+f)/2:pu(b,x),E=t(T,S),A=E[0],C=E[1],R=A-r,D=C-i,P=_*R-v*D;(P*P/y>e||hu((v*R+_*D)/y-.5)>.3||o*h+s*d+l*p<pp)&&(n(r,i,a,o,s,l,A,C,T,x/=M,b/=M,w,m,g),g.point(A,C),n(A,C,T,x,b,w,c,u,f,h,d,p,m,g))}}return function(e){var r,i,a,o,s,l,c,u,f,h,d,p,m={point:g,lineStart:v,lineEnd:y,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,m.point=_,e.lineStart()}function _(r,i){var a=sf([r,i]),o=t(r,i);n(u,f,c,h,d,p,u=o[0],f=o[1],c=r,h=a[0],d=a[1],p=a[2],dp,e),e.point(u,f)}function y(){m.point=g,e.lineEnd()}function x(){v(),m.point=b,m.lineEnd=w}function b(t,e){_(r=t,e),i=u,a=f,o=h,s=d,l=p,m.point=_}function w(){n(u,f,c,h,d,p,i,a,r,o,s,l,dp,e),m.lineEnd=y,y()}return m}}(t,e):function(t){return op({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var gp=op({point:function(t,e){this.stream.point(t*fu,e*fu)}});function vp(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=mu(a),s=bu(a),l=o*t,c=s*t,u=o/t,f=s/t,h=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(t,a){return[l*(t*=r)-c*(a*=i)+e,n-c*t-l*a]}return p.invert=function(t,e){return[r*(u*t-f*e+h),i*(d-f*t-u*e)]},p}function _p(t){return yp((function(){return t}))()}function yp(t){var e,n,r,i,a,o,s,l,c,u,f=150,h=480,d=250,p=0,m=0,g=0,v=0,_=0,y=0,x=1,b=1,w=null,M=xh,S=null,T=Qh,E=.5;function A(t){return l(t[0]*fu,t[1]*fu)}function C(t){return(t=l.invert(t[0],t[1]))&&[t[0]*uu,t[1]*uu]}function R(){var t=vp(f,0,0,x,b,y).apply(null,e(p,m)),r=vp(f,h-t[0],d-t[1],x,b,y);return n=nh(g,v,_),s=th(e,r),l=th(n,s),o=mp(s,E),D()}function D(){return c=u=null,A}return A.stream=function(t){return c&&u===t?c:c=gp(function(t){return op({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(o(T(u=t)))))},A.preclip=function(t){return arguments.length?(M=t,w=void 0,D()):M},A.postclip=function(t){return arguments.length?(T=t,S=r=i=a=null,D()):T},A.clipAngle=function(t){return arguments.length?(M=+t?bh(w=t*fu):(w=null,xh),D()):w*uu},A.clipExtent=function(t){return arguments.length?(T=null==t?(S=r=i=a=null,Qh):Ch(S=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),D()):null==S?null:[[S,r],[i,a]]},A.scale=function(t){return arguments.length?(f=+t,R()):f},A.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],R()):[h,d]},A.center=function(t){return arguments.length?(p=t[0]%360*fu,m=t[1]%360*fu,R()):[p*uu,m*uu]},A.rotate=function(t){return arguments.length?(g=t[0]%360*fu,v=t[1]%360*fu,_=t.length>2?t[2]%360*fu:0,R()):[g*uu,v*uu,_*uu]},A.angle=function(t){return arguments.length?(y=t%360*fu,R()):y*uu},A.reflectX=function(t){return arguments.length?(x=t?-1:1,R()):x<0},A.reflectY=function(t){return arguments.length?(b=t?-1:1,R()):b<0},A.precision=function(t){return arguments.length?(o=mp(s,E=t*t),D()):Mu(E)},A.fitExtent=function(t,e){return cp(A,t,e)},A.fitSize=function(t,e){return up(A,t,e)},A.fitWidth=function(t,e){return fp(A,t,e)},A.fitHeight=function(t,e){return hp(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&C,R()}}function xp(t){var e=0,n=ou/3,r=yp(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*fu,n=t[1]*fu):[e*uu,n*uu]},i}function bp(t,e){var n=bu(t),r=(n+bu(e))/2;if(hu(r)<iu)return function(t){var e=mu(t);function n(t,n){return[t*e,bu(n)/e]}return n.invert=function(t,n){return[t/e,Eu(n*e)]},n}(t);var i=1+n*(2*r-n),a=Mu(i)/r;function o(t,e){var n=Mu(i-2*r*bu(e))/r;return[n*bu(t*=r),a-n*mu(t)]}return o.invert=function(t,e){var n=a-e,o=pu(t,hu(n))*wu(n);return n*r<0&&(o-=ou*wu(t)*wu(n)),[o/r,Eu((i-(t*t+n*n)*r*r)/(2*r))]},o}function wp(){return xp(bp).scale(155.424).center([0,33.6442])}function Mp(){return wp().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Sp(){var t,e,n,r,i,a,o=Mp(),s=wp().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=wp().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){a=[t,e]}};function u(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,u}return u.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:o).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},u.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),f()):o.precision()},u.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),u.translate(o.translate())):o.scale()},u.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],u=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,u-.238*e],[a+.455*e,u+.238*e]]).stream(c),r=s.translate([a-.307*e,u+.201*e]).clipExtent([[a-.425*e+iu,u+.12*e+iu],[a-.214*e-iu,u+.234*e-iu]]).stream(c),i=l.translate([a-.205*e,u+.212*e]).clipExtent([[a-.214*e+iu,u+.166*e+iu],[a-.115*e-iu,u+.234*e-iu]]).stream(c),f()},u.fitExtent=function(t,e){return cp(u,t,e)},u.fitSize=function(t,e){return up(u,t,e)},u.fitWidth=function(t,e){return fp(u,t,e)},u.fitHeight=function(t,e){return hp(u,t,e)},u.scale(1070)}function Tp(t){return function(e,n){var r=mu(e),i=mu(n),a=t(r*i);return a===1/0?[2,0]:[a*i*bu(e),a*bu(n)]}}function Ep(t){return function(e,n){var r=Mu(e*e+n*n),i=t(r),a=bu(i),o=mu(i);return[pu(e*a,r*o),Eu(r&&n*a/r)]}}var Ap=Tp((function(t){return Mu(2/(1+t))}));function Cp(){return _p(Ap).scale(124.75).clipAngle(179.999)}Ap.invert=Ep((function(t){return 2*Eu(t/2)}));var Rp=Tp((function(t){return(t=Tu(t))&&t/bu(t)}));function Dp(){return _p(Rp).scale(79.4188).clipAngle(179.999)}function Pp(t,e){return[t,yu(Su((su+e)/2))]}function Lp(){return Np(Pp).scale(961/cu)}function Np(t){var e,n,r,i=_p(t),a=i.center,o=i.scale,s=i.translate,l=i.clipExtent,c=null;function u(){var a=ou*o(),s=i(oh(i.rotate()).invert([0,0]));return l(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Pp?[[Math.max(s[0]-a,c),e],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),u()):o()},i.translate=function(t){return arguments.length?(s(t),u()):s()},i.center=function(t){return arguments.length?(a(t),u()):a()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[n,r]]},u()}function Ip(t){return Su((su+t)/2)}function Up(t,e){var n=mu(t),r=t===e?bu(t):yu(n/mu(e))/yu(Ip(e)/Ip(t)),i=n*xu(Ip(t),r)/r;if(!r)return Pp;function a(t,e){i>0?e<-su+iu&&(e=-su+iu):e>su-iu&&(e=su-iu);var n=i/xu(Ip(e),r);return[n*bu(r*t),i-n*mu(r*t)]}return a.invert=function(t,e){var n=i-e,a=wu(r)*Mu(t*t+n*n),o=pu(t,hu(n))*wu(n);return n*r<0&&(o-=ou*wu(t)*wu(n)),[o/r,2*du(xu(i/a,1/r))-su]},a}function Op(){return xp(Up).scale(109.5).parallels([30,30])}function Fp(t,e){return[t,e]}function kp(){return _p(Fp).scale(152.63)}function Bp(t,e){var n=mu(t),r=t===e?bu(t):(n-mu(e))/(e-t),i=n/r+t;if(hu(r)<iu)return Fp;function a(t,e){var n=i-e,a=r*t;return[n*bu(a),i-n*mu(a)]}return a.invert=function(t,e){var n=i-e,a=pu(t,hu(n))*wu(n);return n*r<0&&(a-=ou*wu(t)*wu(n)),[a/r,i-wu(r)*Mu(t*t+n*n)]},a}function zp(){return xp(Bp).scale(131.154).center([0,13.9389])}Rp.invert=Ep((function(t){return t})),Pp.invert=function(t,e){return[t,2*du(vu(e))-su]},Fp.invert=Fp;var Hp=1.340264,Vp=-.081106,Gp=893e-6,Wp=.003796,jp=Mu(3)/2;function qp(t,e){var n=Eu(jp*bu(e)),r=n*n,i=r*r*r;return[t*mu(n)/(jp*(Hp+3*Vp*r+i*(7*Gp+9*Wp*r))),n*(Hp+Vp*r+i*(Gp+Wp*r))]}function Xp(){return _p(qp).scale(177.158)}function $p(t,e){var n=mu(e),r=mu(t)*n;return[n*bu(t)/r,bu(e)/r]}function Yp(){return _p($p).scale(144.049).clipAngle(60)}function Kp(){var t,e,n,r,i,a,o,s=1,l=0,c=0,u=1,f=1,h=0,d=null,p=1,m=1,g=op({point:function(t,e){var n=y([t,e]);this.stream.point(n[0],n[1])}}),v=Qh;function _(){return p=s*u,m=s*f,a=o=null,y}function y(n){var r=n[0]*p,i=n[1]*m;if(h){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+l,i+c]}return y.invert=function(n){var r=n[0]-l,i=n[1]-c;if(h){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/m]},y.stream=function(t){return a&&o===t?a:a=g(v(o=t))},y.postclip=function(t){return arguments.length?(v=t,d=n=r=i=null,_()):v},y.clipExtent=function(t){return arguments.length?(v=null==t?(d=n=r=i=null,Qh):Ch(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),_()):null==d?null:[[d,n],[r,i]]},y.scale=function(t){return arguments.length?(s=+t,_()):s},y.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],_()):[l,c]},y.angle=function(n){return arguments.length?(e=bu(h=n%360*fu),t=mu(h),_()):h*uu},y.reflectX=function(t){return arguments.length?(u=t?-1:1,_()):u<0},y.reflectY=function(t){return arguments.length?(f=t?-1:1,_()):f<0},y.fitExtent=function(t,e){return cp(y,t,e)},y.fitSize=function(t,e){return up(y,t,e)},y.fitWidth=function(t,e){return fp(y,t,e)},y.fitHeight=function(t,e){return hp(y,t,e)},y}function Zp(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Qp(){return _p(Zp).scale(175.295)}function Jp(t,e){return[mu(e)*bu(t),bu(e)]}function tm(){return _p(Jp).scale(249.5).clipAngle(90+iu)}function em(t,e){var n=mu(e),r=1+mu(t)*n;return[n*bu(t)/r,bu(e)/r]}function nm(){return _p(em).scale(250).clipAngle(142)}function rm(t,e){return[yu(Su((su+e)/2)),-t]}function im(){var t=Np(rm),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function am(t,e){return t.parent===e.parent?1:2}function om(t,e){return t+e.x}function sm(t,e){return Math.max(t,e.y)}function lm(){var t=am,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(om,0)/t.length}(n),e.y=function(t){return 1+t.reduce(sm,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,l)/2,u=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function cm(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function um(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=hm)):void 0===e&&(e=fm);for(var n,r,i,a,o,s=new mm(t),l=[s];n=l.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new mm(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(pm)}function fm(t){return t.children}function hm(t){return Array.isArray(t)?t[1]:null}function dm(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function pm(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function mm(t){this.data=t,this.depth=this.height=0,this.parent=null}function gm(t){return null==t?null:vm(t)}function vm(t){if("function"!=typeof t)throw new Error;return t}function _m(){return 0}function ym(t){return function(){return t}}qp.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(Hp+Vp*i+a*(Gp+Wp*i))-e)/(Hp+3*Vp*i+a*(7*Gp+9*Wp*i)))*r)*i*i,!(hu(n)<au));++o);return[jp*t*(Hp+3*Vp*i+a*(7*Gp+9*Wp*i))/mu(r),Eu(bu(r)/jp)]},$p.invert=Ep(du),Zp.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(hu(n)>iu&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},Jp.invert=Ep(Eu),em.invert=Ep((function(t){return 2*du(t)})),rm.invert=function(t,e){return[-e,2*du(vu(t))-su]},mm.prototype=um.prototype={constructor:mm,count:function(){return this.eachAfter(cm)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)t.call(e,a,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return um(this).eachBefore(dm)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,a=[i];do{for(t=a.reverse(),a=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n])}while(a.length)}};const xm=1664525,bm=1013904223,wm=4294967296;function Mm(){let t=1;return()=>(t=(xm*t+bm)%wm)/wm}function Sm(t){return Tm(t,Mm())}function Tm(t,e){for(var n,r,i=0,a=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,o=[];i<a;)n=t[i],r&&Cm(r,n)?++i:(r=Dm(o=Em(o,n)),i=0);return r}function Em(t,e){var n,r;if(Rm(e,t))return[e];for(n=0;n<t.length;++n)if(Am(e,t[n])&&Rm(Pm(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Am(Pm(t[n],t[r]),e)&&Am(Pm(t[n],e),t[r])&&Am(Pm(t[r],e),t[n])&&Rm(Lm(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Am(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Cm(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Rm(t,e){for(var n=0;n<e.length;++n)if(!Cm(t,e[n]))return!1;return!0}function Dm(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Pm(t[0],t[1]);case 3:return Lm(t[0],t[1],t[2])}}function Pm(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,c=o-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(n+a+l/f*u)/2,y:(r+o+c/f*u)/2,r:(f+i+s)/2}}function Lm(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,c=n.x,u=n.y,f=n.r,h=r-o,d=r-c,p=i-s,m=i-u,g=l-a,v=f-a,_=r*r+i*i-a*a,y=_-o*o-s*s+l*l,x=_-c*c-u*u+f*f,b=d*p-h*m,w=(p*x-m*y)/(2*b)-r,M=(m*g-p*v)/b,S=(d*y-h*x)/(2*b)-i,T=(h*v-d*g)/b,E=M*M+T*T-1,A=2*(a+w*M+S*T),C=w*w+S*S-a*a,R=-(Math.abs(E)>1e-6?(A+Math.sqrt(A*A-4*E*C))/(2*E):C/A);return{x:r+w+M*R,y:i+S+T*R,r:R}}function Nm(t,e,n){var r,i,a,o,s=t.x-e.x,l=t.y-e.y,c=s*s+l*l;c?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*s-a*l,n.y=t.y-r*l+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-a*l,n.y=e.y+r*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Im(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Um(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Om(t){this._=t,this.next=null,this.previous=null}function Fm(t,e){if(!(o=(n=t,t="object"==typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,r,i,a,o,s,l,c,u,f,h,d;if((r=t[0]).x=0,r.y=0,!(o>1))return r.r;if(i=t[1],r.x=-i.r,i.x=r.r,i.y=0,!(o>2))return r.r+i.r;Nm(i,r,a=t[2]),r=new Om(r),i=new Om(i),a=new Om(a),r.next=a.previous=i,i.next=r.previous=a,a.next=i.previous=r;t:for(c=3;c<o;++c){Nm(r._,i._,a=t[c]),a=new Om(a),u=i.next,f=r.previous,h=i._.r,d=r._.r;do{if(h<=d){if(Im(u._,a._)){i=u,r.next=i,i.previous=r,--c;continue t}h+=u._.r,u=u.next}else{if(Im(f._,a._)){(r=f).next=i,i.previous=r,--c;continue t}d+=f._.r,f=f.previous}}while(u!==f.next);for(a.previous=r,a.next=i,r.next=i.previous=i=a,s=Um(r);(a=a.next)!==i;)(l=Um(a))<s&&(r=a,s=l);i=r.next}for(r=[i._],a=i;(a=a.next)!==i;)r.push(a._);for(a=Tm(r,e),c=0;c<o;++c)(r=t[c]).x-=a.x,r.y-=a.y;return a.r}function km(t){return Fm(t,Mm()),t}function Bm(t){return Math.sqrt(t.value)}function zm(){var t=null,e=1,n=1,r=_m;function i(i){const a=Mm();return i.x=e/2,i.y=n/2,t?i.eachBefore(Hm(t)).eachAfter(Vm(r,.5,a)).eachBefore(Gm(1)):i.eachBefore(Hm(Bm)).eachAfter(Vm(_m,1,a)).eachAfter(Vm(r,i.r/Math.min(e,n),a)).eachBefore(Gm(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=gm(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:ym(+t),i):r},i}function Hm(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Vm(t,e,n){return function(r){if(i=r.children){var i,a,o,s=i.length,l=t(r)*e||0;if(l)for(a=0;a<s;++a)i[a].r+=l;if(o=Fm(i,n),l)for(a=0;a<s;++a)i[a].r-=l;r.r=o+l}}}function Gm(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Wm(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function jm(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,c=t.value&&(r-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function qm(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&jm(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Wm),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var Xm={depth:-1},$m={},Ym={};function Km(t){return t.id}function Zm(t){return t.parentId}function Qm(){var t,e=Km,n=Zm;function r(r){var i,a,o,s,l,c,u,f,h=Array.from(r),d=e,p=n,m=new Map;if(null!=t){const e=h.map(((e,n)=>function(t){let e=(t=`${t}`).length;return tg(t,e-1)&&!tg(t,e-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:`/${t}`}(t(e,n,r)))),n=e.map(Jm),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(Jm(t)),h.push(Ym));d=(t,n)=>e[n],p=(t,e)=>n[e]}for(o=0,i=h.length;o<i;++o)a=h[o],c=h[o]=new mm(a),null!=(u=d(a,o,r))&&(u+="")&&(f=c.id=u,m.set(f,m.has(f)?$m:c)),null!=(u=p(a,o,r))&&(u+="")&&(c.parent=u);for(o=0;o<i;++o)if(u=(c=h[o]).parent){if(!(l=m.get(u)))throw new Error("missing: "+u);if(l===$m)throw new Error("ambiguous: "+u);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===Ym&&1===s.children.length;)s=s.children[0],--i;for(let t=h.length-1;t>=0&&(c=h[t]).data===Ym;--t)c.data=null}if(s.parent=Xm,s.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(pm),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=gm(t),r):e},r.parentId=function(t){return arguments.length?(n=gm(t),r):n},r.path=function(e){return arguments.length?(t=gm(e),r):t},r}function Jm(t){let e=t.length;if(e<2)return"";for(;--e>1&&!tg(t,e););return t.slice(0,e)}function tg(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function eg(t,e){return t.parent===e.parent?1:2}function ng(t){var e=t.children;return e?e[0]:t.t}function rg(t){var e=t.children;return e?e[e.length-1]:t.t}function ig(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ag(t,e,n){return t.a.parent===e.parent?t.a:n}function og(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function sg(){var t=eg,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,a,o=new og(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new og(r[i],i)),n.parent=e;return(o.parent=new og(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var c=i,u=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>f.depth&&(f=t)}));var h=c===u?1:t(c,u)/2,d=h-c.x,p=e/(u.x+h+d),m=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,l=a.parent.children[0],c=a.m,u=o.m,f=s.m,h=l.m;s=rg(s),a=ng(a),s&&a;)l=ng(l),(o=rg(o)).a=e,(i=s.z+f-a.z-c+t(s._,a._))>0&&(ig(ag(s,e,r),e,i),c+=i,u+=i),f+=s.m,c+=a.m,h+=l.m,u+=o.m;s&&!rg(o)&&(o.t=s,o.m+=f-u),a&&!ng(l)&&(l.t=a,l.m+=c-h,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function lg(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,c=t.value&&(i-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}og.prototype=Object.create(mm.prototype);var cg=(1+Math.sqrt(5))/2;function ug(t,e,n,r,i,a){for(var o,s,l,c,u,f,h,d,p,m,g,v=[],_=e.children,y=0,x=0,b=_.length,w=e.value;y<b;){l=i-n,c=a-r;do{u=_[x++].value}while(!u&&x<b);for(f=h=u,g=u*u*(m=Math.max(c/l,l/c)/(w*t)),p=Math.max(h/g,g/f);x<b;++x){if(u+=s=_[x].value,s<f&&(f=s),s>h&&(h=s),g=u*u*m,(d=Math.max(h/g,g/f))>p){u-=s;break}p=d}v.push(o={value:u,dice:l<c,children:_.slice(y,x)}),o.dice?jm(o,n,r,i,w?r+=c*u/w:a):lg(o,n,r,w?n+=l*u/w:i,a),w-=u,y=x}return v}const fg=function t(e){function n(t,n,r,i,a){ug(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(cg);function hg(){var t=fg,e=!1,n=1,r=1,i=[0],a=_m,o=_m,s=_m,l=_m,c=_m;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(Wm),t}function f(e){var n=i[e.depth],r=e.x0+n,u=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<u&&(u=h=(u+h)/2),e.x0=r,e.y0=u,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=a(e)/2,r+=c(e)-n,u+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=l(e)-n)<u&&(u=h=(u+h)/2),t(e,r,u,f,h))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.tile=function(e){return arguments.length?(t=vm(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:ym(+t),u):a},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:ym(+t),u):o},u.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:ym(+t),u):s},u.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:ym(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:ym(+t),u):c},u}function dg(t,e,n,r,i){var a,o,s=t.children,l=s.length,c=new Array(l+1);for(c[0]=o=a=0;a<l;++a)c[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,l){if(e>=n-1){var u=s[e];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=l)}for(var f=c[e],h=r/2+f,d=e+1,p=n-1;d<p;){var m=d+p>>>1;c[m]<h?d=m+1:p=m}h-c[d-1]<c[d]-h&&e+1<d&&--d;var g=c[d]-f,v=r-g;if(o-i>l-a){var _=r?(i*v+o*g)/r:o;t(e,d,g,i,a,_,l),t(d,n,v,_,a,o,l)}else{var y=r?(a*v+l*g)/r:l;t(e,d,g,i,a,o,y),t(d,n,v,i,y,o,l)}}(0,l,t.value,e,n,r,i)}function pg(t,e,n,r,i){(1&t.depth?lg:jm)(t,e,n,r,i)}const mg=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,c,u,f=-1,h=o.length,d=t.value;++f<h;){for(l=(s=o[f]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?jm(s,n,r,i,d?r+=(a-r)*s.value/d:a):lg(s,n,r,d?n+=(i-n)*s.value/d:i,a),d-=s.value}else t._squarify=o=ug(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(cg);function gg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function vg(t,e){var n=Ur(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function _g(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function yg(t){return((t=Math.exp(t))+1/t)/2}const xg=function t(e,n,r){function i(t,i){var a,o,s=t[0],l=t[1],c=t[2],u=i[0],f=i[1],h=i[2],d=u-s,p=f-l,m=d*d+p*p;if(m<1e-12)o=Math.log(h/c)/e,a=function(t){return[s+t*d,l+t*p,c*Math.exp(e*t*o)]};else{var g=Math.sqrt(m),v=(h*h-c*c+r*m)/(2*c*n*g),_=(h*h-c*c-r*m)/(2*h*n*g),y=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(_*_+1)-_);o=(x-y)/e,a=function(t){var r,i=t*o,a=yg(y),u=c/(n*g)*(a*(r=e*i+y,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[s+u*d,l+u*p,c*a/yg(e*i+y)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function bg(t){return function(e,n){var r=t((e=Tr(e)).h,(n=Tr(n)).h),i=Or(e.s,n.s),a=Or(e.l,n.l),o=Or(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}const wg=bg(Ur);var Mg=bg(Or);function Sg(t,e){var n=Or((t=Fo(t)).l,(e=Fo(e)).l),r=Or(t.a,e.a),i=Or(t.b,e.b),a=Or(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function Tg(t){return function(e,n){var r=t((e=jo(e)).h,(n=jo(n)).h),i=Or(e.c,n.c),a=Or(e.l,n.l),o=Or(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}const Eg=Tg(Ur);var Ag=Tg(Or);function Cg(t){return function e(n){function r(e,r){var i=t((e=ns(e)).h,(r=ns(r)).h),a=Or(e.s,r.s),o=Or(e.l,r.l),s=Or(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}const Rg=Cg(Ur);var Dg=Cg(Or);function Pg(t,e){void 0===e&&(e=t,t=Zr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}function Lg(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function Ng(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2}function Ig(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],l=0;++r<i;)e=s,s=t[r],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]}function Ug(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Og(t,e){return t[0]-e[0]||t[1]-e[1]}function Fg(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&Ug(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function kg(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Og),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=Fg(r),o=Fg(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],c=[];for(e=a.length-1;e>=0;--e)c.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)c.push(t[r[o[e]][2]]);return c}function Bg(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],l=a[0],c=a[1],u=!1,f=0;f<i;++f)n=(a=t[f])[0],(r=a[1])>s!=c>s&&o<(l-n)*(s-r)/(c-r)+n&&(u=!u),l=n,c=r;return u}function zg(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],l=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],l+=Math.hypot(e,n);return l}const Hg=Math.random,Vg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Hg),Gg=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(Hg),Wg=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Hg),jg=function t(e){var n=Wg.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Hg),qg=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(Hg),Xg=function t(e){var n=qg.source(e);function r(t){if(0==(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(Hg),$g=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Hg),Yg=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Hg),Kg=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Hg),Zg=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Hg),Qg=function t(e){var n=Wg.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(i)),o=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+a*t}while(s<=0);s*=s*s;var l=1-e()}while(l>=1-.0331*t*t*t*t&&Math.log(l)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*o()*r}}return r.source=t,r}(Hg),Jg=function t(e){var n=Qg.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Hg),tv=function t(e){var n=Zg.source(e),r=Jg.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,a=t,o=e;a*o>16&&a*(1-o)>16;){var s=Math.floor((a+1)*o),l=r(s,a-s+1)();l<=o?(i+=s,a-=s,o=(o-l)/(1-l)):(a=s-1,o/=l)}for(var c=o<.5,u=n(c?o:1-o),f=u(),h=0;f<=a;++h)f+=u();return i+(c?h:a-h)}}return i.source=t,i}(Hg),ev=function t(e){function n(t,n,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(Hg),nv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(Hg),rv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(Hg),iv=function t(e){var n=Qg.source(e),r=tv.source(e);function i(t){return function(){for(var i=0,a=t;a>16;){var o=Math.floor(.875*a),s=n(o)();if(s>a)return i+r(o-1,a/s)();i+=o,a-=s}for(var l=-Math.log1p(-e()),c=0;l<=a;++c)l-=Math.log1p(-e());return i+c}}return i.source=t,i}(Hg),av=1664525,ov=1013904223,sv=1/4294967296;function lv(t=Math.random()){let e=0|(0<=t&&t<1?t/sv:Math.abs(t));return()=>(e=av*e+ov|0,sv*(e>>>0))}function cv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function uv(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const fv=Symbol("implicit");function hv(){var t=new L,e=[],n=[],r=fv;function i(i){let a=t.get(i);if(void 0===a){if(r!==fv)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new L;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return hv(e,n).unknown(r)},cv.apply(i,arguments),i}function dv(){var t,e,n=hv().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,s=!1,l=0,c=0,u=.5;function f(){var n=r().length,f=o<a,h=f?o:a,d=f?a:o;t=(d-h)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),h+=(d-h-t*(n-l))*u,e=t*(1-l),s&&(h=Math.round(h),e=Math.round(e));var p=Nt(n).map((function(e){return h+t*e}));return i(f?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,f()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),f()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),f()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,f()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),f()):u},n.copy=function(){return dv(r(),[a,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},cv.apply(f(),arguments)}function pv(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pv(e())},t}function mv(){return pv(dv.apply(null,arguments).paddingInner(1))}function gv(t){return+t}var vv=[0,1];function _v(t){return t}function yv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function xv(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=yv(i,r),a=n(o,a)):(r=yv(r,i),a=n(a,o)),function(t){return a(r(t))}}function bv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=yv(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=h(t,e,1,r)-1;return a[n](i[n](e))}}function wv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Mv(){var t,e,n,r,i,a,o=vv,s=vv,l=Zr,c=_v;function u(){var t=Math.min(o.length,s.length);return c!==_v&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?bv:xv,i=a=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((a||(a=r(s,o.map(t),qr)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,gv),u()):o.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=_g,u()},f.clamp=function(t){return arguments.length?(c=!!t||_v,u()):c!==_v},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function Sv(){return Mv()(_v,_v)}function Tv(t,e,n,r){var i,a=ut(t,e,n);switch((r=Gc(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=nu(a,o))||(r.precision=i),Kc(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ru(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=eu(a))||(r.precision=i-2*("%"===r.type))}return Yc(r)}function Ev(t){var e=t.domain;return t.ticks=function(t){var n=e();return lt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Tv(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=ct(l,c,n))===r)return a[o]=l,a[s]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Av(){var t=Sv();return t.copy=function(){return wv(t,Av())},cv.apply(t,arguments),Ev(t)}function Cv(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,gv),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Cv(t).unknown(e)},t=arguments.length?Array.from(t,gv):[0,1],Ev(n)}function Rv(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Dv(t){return Math.log(t)}function Pv(t){return Math.exp(t)}function Lv(t){return-Math.log(-t)}function Nv(t){return-Math.exp(-t)}function Iv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Uv(t){return(e,n)=>-t(-e,n)}function Ov(t){const e=t(Dv,Pv),n=e.domain;let r,i,a=10;function o(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(a),i=function(t){return 10===t?Iv:t===Math.E?Math.exp:e=>Math.pow(t,e)}(a),n()[0]<0?(r=Uv(r),i=Uv(i),t(Lv,Nv)):t(Dv,Pv),e}return e.base=function(t){return arguments.length?(a=+t,o()):a},e.domain=function(t){return arguments.length?(n(t),o()):n()},e.ticks=t=>{const e=n();let o=e[0],s=e[e.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,f=r(o),h=r(s);const d=null==t?10:+t;let p=[];if(!(a%1)&&h-f<d){if(f=Math.floor(f),h=Math.ceil(h),o>0){for(;f<=h;++f)for(c=1;c<a;++c)if(u=f<0?c/i(-f):c*i(f),!(u<o)){if(u>s)break;p.push(u)}}else for(;f<=h;++f)for(c=a-1;c>=1;--c)if(u=f>0?c/i(-f):c*i(f),!(u<o)){if(u>s)break;p.push(u)}2*p.length<d&&(p=lt(o,s,d))}else p=lt(f,h,Math.min(h-f,d)).map(i);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===a?"s":","),"function"!=typeof n&&(a%1||null!=(n=Gc(n)).precision||(n.trim=!0),n=Yc(n)),t===1/0)return n;const o=Math.max(1,a*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*a<a-.5&&(e*=a),e<=o?n(t):""}},e.nice=()=>n(Rv(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Fv(){const t=Ov(Mv()).domain([1,10]);return t.copy=()=>wv(t,Fv()).base(t.base()),cv.apply(t,arguments),t}function kv(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zv(t){var e=1,n=t(kv(e),Bv(e));return n.constant=function(n){return arguments.length?t(kv(e=+n),Bv(e)):e},Ev(n)}function Hv(){var t=zv(Mv());return t.copy=function(){return wv(t,Hv()).constant(t.constant())},cv.apply(t,arguments)}function Vv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Gv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Wv(t){return t<0?-t*t:t*t}function jv(t){var e=t(_v,_v),n=1;return e.exponent=function(e){return arguments.length?1==(n=+e)?t(_v,_v):.5===n?t(Gv,Wv):t(Vv(n),Vv(1/n)):n},Ev(e)}function qv(){var t=jv(Mv());return t.copy=function(){return wv(t,qv()).exponent(t.exponent())},cv.apply(t,arguments),t}function Xv(){return qv.apply(null,arguments).exponent(.5)}function $v(t){return Math.sign(t)*t*t}function Yv(){var t,e=Sv(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert($v(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,gv)).map($v)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Yv(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},cv.apply(i,arguments),Ev(i)}function Kv(){var t,e=[],n=[],i=[];function a(){var t=0,r=Math.max(1,n.length);for(i=new Array(r-1);++t<r;)i[t-1]=wt(e,t/r);return o}function o(e){return null==e||isNaN(e=+e)?t:n[h(i,e)]}return o.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(r.A),a()},o.range=function(t){return arguments.length?(n=Array.from(t),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return i.slice()},o.copy=function(){return Kv().domain(e).range(n).unknown(t)},cv.apply(o,arguments)}function Zv(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return null!=e&&e<=e?a[h(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Array.from(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return Zv().domain([e,n]).range(a).unknown(t)},cv.apply(Ev(o),arguments)}function Qv(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[h(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Qv().domain(e).range(n).unknown(t)},cv.apply(i,arguments)}const Jv=1e3,t_=6e4,e_=36e5,n_=864e5,r_=6048e5,i_=31536e6,a_=new Date,o_=new Date;function s_(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let s;do{o.push(s=new Date(+n)),e(n,a),t(n)}while(s<n&&n<r);return o},i.filter=n=>s_((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(a_.setTime(+e),o_.setTime(+r),t(a_),t(o_),Math.floor(n(a_,o_))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const l_=s_((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));l_.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?s_((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):l_:null);const c_=l_.range,u_=s_((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*Jv)}),((t,e)=>(e-t)/Jv),(t=>t.getUTCSeconds())),f_=u_.range,h_=s_((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jv)}),((t,e)=>{t.setTime(+t+e*t_)}),((t,e)=>(e-t)/t_),(t=>t.getMinutes())),d_=h_.range,p_=s_((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*t_)}),((t,e)=>(e-t)/t_),(t=>t.getUTCMinutes())),m_=p_.range,g_=s_((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jv-t.getMinutes()*t_)}),((t,e)=>{t.setTime(+t+e*e_)}),((t,e)=>(e-t)/e_),(t=>t.getHours())),v_=g_.range,__=s_((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*e_)}),((t,e)=>(e-t)/e_),(t=>t.getUTCHours())),y_=__.range,x_=s_((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*t_)/n_),(t=>t.getDate()-1)),b_=x_.range,w_=s_((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/n_),(t=>t.getUTCDate()-1)),M_=w_.range,S_=s_((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/n_),(t=>Math.floor(t/n_))),T_=S_.range;function E_(t){return s_((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*t_)/r_))}const A_=E_(0),C_=E_(1),R_=E_(2),D_=E_(3),P_=E_(4),L_=E_(5),N_=E_(6),I_=A_.range,U_=C_.range,O_=R_.range,F_=D_.range,k_=P_.range,B_=L_.range,z_=N_.range;function H_(t){return s_((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/r_))}const V_=H_(0),G_=H_(1),W_=H_(2),j_=H_(3),q_=H_(4),X_=H_(5),$_=H_(6),Y_=V_.range,K_=G_.range,Z_=W_.range,Q_=j_.range,J_=q_.range,ty=X_.range,ey=$_.range,ny=s_((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),ry=ny.range,iy=s_((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),ay=iy.range,oy=s_((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));oy.every=t=>isFinite(t=Math.floor(t))&&t>0?s_((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const sy=oy.range,ly=s_((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));ly.every=t=>isFinite(t=Math.floor(t))&&t>0?s_((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const cy=ly.range;function uy(t,e,n,r,i,o){const s=[[u_,1,Jv],[u_,5,5e3],[u_,15,15e3],[u_,30,3e4],[o,1,t_],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,e_],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,n_],[r,2,1728e5],[n,1,r_],[e,1,2592e6],[e,3,7776e6],[t,1,i_]];function l(e,n,r){const i=Math.abs(n-e)/r,o=a((([,,t])=>t)).right(s,i);if(o===s.length)return t.every(ut(e/i_,n/i_,r));if(0===o)return l_.every(Math.max(ut(e,n,r),1));const[l,c]=s[i/s[o-1][2]<s[o][2]/i?o-1:o];return l.every(c)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:l(t,e,n),a=i?i.range(t,+e+1):[];return r?a.reverse():a},l]}const[fy,hy]=uy(ly,iy,V_,S_,__,p_),[dy,py]=uy(oy,ny,A_,x_,g_,h_);function my(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gy(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _y(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Dy(i),u=Py(i),f=Dy(a),h=Py(a),d=Dy(o),p=Py(o),m=Dy(s),g=Py(s),v=Dy(l),_=Py(l),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Qy,e:Qy,f:rx,g:px,G:gx,H:Jy,I:tx,j:ex,L:nx,m:ix,M:ax,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Bx,s:zx,S:ox,u:sx,U:lx,V:ux,w:fx,W:hx,x:null,X:null,y:dx,Y:mx,Z:vx,"%":kx},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:_x,e:_x,f:Mx,g:Ix,G:Ox,H:yx,I:xx,j:bx,L:wx,m:Sx,M:Tx,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Bx,s:zx,S:Ex,u:Ax,U:Cx,V:Dx,w:Px,W:Lx,x:null,X:null,y:Nx,Y:Ux,Z:Fx,"%":kx},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Vy,e:Vy,f:$y,g:ky,G:Fy,H:Wy,I:Wy,j:Gy,L:Xy,m:Hy,M:jy,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:zy,Q:Ky,s:Zy,S:qy,u:Ny,U:Iy,V:Uy,w:Ly,W:Oy,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:ky,Y:Fy,Z:By,"%":Yy};function w(t,e){return function(n){var r,i,a,o=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=Sy[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function M(t,e){return function(n){var r,i,a=vy(1900,void 0,1);if(S(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=gy(vy(a.y,0,1))).getUTCDay(),r=i>4||0===i?G_.ceil(r):G_(r),r=w_.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=my(vy(a.y,0,1))).getDay(),r=i>4||0===i?C_.ceil(r):C_(r),r=x_.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?gy(vy(a.y,0,1)).getUTCDay():my(vy(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,gy(a)):my(a)}}function S(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=b[i in Sy?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var yy,xy,by,wy,My,Sy={"-":"",_:" ",0:"0"},Ty=/^\s*\d+/,Ey=/^%/,Ay=/[\\^$*+?|[\]().{}]/g;function Cy(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ry(t){return t.replace(Ay,"\\$&")}function Dy(t){return new RegExp("^(?:"+t.map(Ry).join("|")+")","i")}function Py(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Ly(t,e,n){var r=Ty.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ny(t,e,n){var r=Ty.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Iy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Uy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Oy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Fy(t,e,n){var r=Ty.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ky(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function By(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zy(t,e,n){var r=Ty.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Hy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Vy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Gy(t,e,n){var r=Ty.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Wy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function jy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function qy(t,e,n){var r=Ty.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Xy(t,e,n){var r=Ty.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $y(t,e,n){var r=Ty.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yy(t,e,n){var r=Ey.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ky(t,e,n){var r=Ty.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Zy(t,e,n){var r=Ty.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Qy(t,e){return Cy(t.getDate(),e,2)}function Jy(t,e){return Cy(t.getHours(),e,2)}function tx(t,e){return Cy(t.getHours()%12||12,e,2)}function ex(t,e){return Cy(1+x_.count(oy(t),t),e,3)}function nx(t,e){return Cy(t.getMilliseconds(),e,3)}function rx(t,e){return nx(t,e)+"000"}function ix(t,e){return Cy(t.getMonth()+1,e,2)}function ax(t,e){return Cy(t.getMinutes(),e,2)}function ox(t,e){return Cy(t.getSeconds(),e,2)}function sx(t){var e=t.getDay();return 0===e?7:e}function lx(t,e){return Cy(A_.count(oy(t)-1,t),e,2)}function cx(t){var e=t.getDay();return e>=4||0===e?P_(t):P_.ceil(t)}function ux(t,e){return t=cx(t),Cy(P_.count(oy(t),t)+(4===oy(t).getDay()),e,2)}function fx(t){return t.getDay()}function hx(t,e){return Cy(C_.count(oy(t)-1,t),e,2)}function dx(t,e){return Cy(t.getFullYear()%100,e,2)}function px(t,e){return Cy((t=cx(t)).getFullYear()%100,e,2)}function mx(t,e){return Cy(t.getFullYear()%1e4,e,4)}function gx(t,e){var n=t.getDay();return Cy((t=n>=4||0===n?P_(t):P_.ceil(t)).getFullYear()%1e4,e,4)}function vx(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Cy(e/60|0,"0",2)+Cy(e%60,"0",2)}function _x(t,e){return Cy(t.getUTCDate(),e,2)}function yx(t,e){return Cy(t.getUTCHours(),e,2)}function xx(t,e){return Cy(t.getUTCHours()%12||12,e,2)}function bx(t,e){return Cy(1+w_.count(ly(t),t),e,3)}function wx(t,e){return Cy(t.getUTCMilliseconds(),e,3)}function Mx(t,e){return wx(t,e)+"000"}function Sx(t,e){return Cy(t.getUTCMonth()+1,e,2)}function Tx(t,e){return Cy(t.getUTCMinutes(),e,2)}function Ex(t,e){return Cy(t.getUTCSeconds(),e,2)}function Ax(t){var e=t.getUTCDay();return 0===e?7:e}function Cx(t,e){return Cy(V_.count(ly(t)-1,t),e,2)}function Rx(t){var e=t.getUTCDay();return e>=4||0===e?q_(t):q_.ceil(t)}function Dx(t,e){return t=Rx(t),Cy(q_.count(ly(t),t)+(4===ly(t).getUTCDay()),e,2)}function Px(t){return t.getUTCDay()}function Lx(t,e){return Cy(G_.count(ly(t)-1,t),e,2)}function Nx(t,e){return Cy(t.getUTCFullYear()%100,e,2)}function Ix(t,e){return Cy((t=Rx(t)).getUTCFullYear()%100,e,2)}function Ux(t,e){return Cy(t.getUTCFullYear()%1e4,e,4)}function Ox(t,e){var n=t.getUTCDay();return Cy((t=n>=4||0===n?q_(t):q_.ceil(t)).getUTCFullYear()%1e4,e,4)}function Fx(){return"+0000"}function kx(){return"%"}function Bx(t){return+t}function zx(t){return Math.floor(+t/1e3)}function Hx(t){return yy=_y(t),xy=yy.format,by=yy.parse,wy=yy.utcFormat,My=yy.utcParse,yy}function Vx(t){return new Date(t)}function Gx(t){return t instanceof Date?+t:+new Date(+t)}function Wx(t,e,n,r,i,a,o,s,l,c){var u=Sv(),f=u.invert,h=u.domain,d=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),_=c("%b %d"),y=c("%B"),x=c("%Y");function b(t){return(l(t)<t?d:s(t)<t?p:o(t)<t?m:a(t)<t?g:r(t)<t?i(t)<t?v:_:n(t)<t?y:x)(t)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?h(Array.from(t,Gx)):h().map(Vx)},u.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?b:c(e)},u.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(Rv(n,t)):u},u.copy=function(){return wv(u,Wx(t,e,n,r,i,a,o,s,l,c))},u}function jx(){return cv.apply(Wx(dy,py,oy,ny,A_,x_,g_,h_,u_,xy).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qx(){return cv.apply(Wx(fy,hy,ly,iy,V_,w_,__,p_,u_,wy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xx(){var t,e,n,r,i,a=0,o=1,s=_v,l=!1;function c(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),c):[a,o]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=u(Zr),c.rangeRound=u(_g),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),c}}function $x(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Yx(){var t=Ev(Xx()(_v));return t.copy=function(){return $x(t,Yx())},uv.apply(t,arguments)}function Kx(){var t=Ov(Xx()).domain([1,10]);return t.copy=function(){return $x(t,Kx()).base(t.base())},uv.apply(t,arguments)}function Zx(){var t=zv(Xx());return t.copy=function(){return $x(t,Zx()).constant(t.constant())},uv.apply(t,arguments)}function Qx(){var t=jv(Xx());return t.copy=function(){return $x(t,Qx()).exponent(t.exponent())},uv.apply(t,arguments)}function Jx(){return Qx.apply(null,arguments).exponent(.5)}function tb(){var t=[],e=_v;function n(n){if(null!=n&&!isNaN(n=+n))return e((h(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(r.A),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>bt(t,r/e)))},n.copy=function(){return tb(e).domain(t)},uv.apply(n,arguments)}function eb(){var t,e,n,r,i,a,o,s=0,l=.5,c=1,u=1,f=_v,h=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(u*t<u*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=Pg(t,[n,r,i]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){return arguments.length?([s,l,c]=o,t=a(s=+s),e=a(l=+l),n=a(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,d):[s,l,c]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(Zr),d.rangeRound=p(_g),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(s),e=o(l),n=o(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,d}}function nb(){var t=Ev(eb()(_v));return t.copy=function(){return $x(t,nb())},uv.apply(t,arguments)}function rb(){var t=Ov(eb()).domain([.1,1,10]);return t.copy=function(){return $x(t,rb()).base(t.base())},uv.apply(t,arguments)}function ib(){var t=zv(eb());return t.copy=function(){return $x(t,ib()).constant(t.constant())},uv.apply(t,arguments)}function ab(){var t=jv(eb());return t.copy=function(){return $x(t,ab()).exponent(t.exponent())},uv.apply(t,arguments)}function ob(){return ab.apply(null,arguments).exponent(.5)}function sb(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}Hx({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const lb=sb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),cb=sb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ub=sb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fb=sb("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),hb=sb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),db=sb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),pb=sb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),mb=sb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),gb=sb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),vb=sb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),_b=sb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),yb=t=>Br(t[t.length-1]);var xb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(sb);const bb=yb(xb);var wb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(sb);const Mb=yb(wb);var Sb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(sb);const Tb=yb(Sb);var Eb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(sb);const Ab=yb(Eb);var Cb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(sb);const Rb=yb(Cb);var Db=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(sb);const Pb=yb(Db);var Lb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(sb);const Nb=yb(Lb);var Ib=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(sb);const Ub=yb(Ib);var Ob=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(sb);const Fb=yb(Ob);var kb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(sb);const Bb=yb(kb);var zb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(sb);const Hb=yb(zb);var Vb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(sb);const Gb=yb(Vb);var Wb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(sb);const jb=yb(Wb);var qb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(sb);const Xb=yb(qb);var $b=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(sb);const Yb=yb($b);var Kb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(sb);const Zb=yb(Kb);var Qb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(sb);const Jb=yb(Qb);var tw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(sb);const ew=yb(tw);var nw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(sb);const rw=yb(nw);var iw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(sb);const aw=yb(iw);var ow=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(sb);const sw=yb(ow);var lw=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(sb);const cw=yb(lw);var uw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(sb);const fw=yb(uw);var hw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(sb);const dw=yb(hw);var pw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(sb);const mw=yb(pw);var gw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(sb);const vw=yb(gw);var _w=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(sb);const yw=yb(_w);function xw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const bw=Dg(ns(300,.5,0),ns(-240,.5,1));var ww=Dg(ns(-100,.75,.35),ns(80,1.5,.8)),Mw=Dg(ns(260,.75,.35),ns(80,1.5,.8)),Sw=ns();function Tw(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Sw.h=360*t-100,Sw.s=1.5-1.5*e,Sw.l=.8-.9*e,Sw+""}var Ew=gr(),Aw=Math.PI/3,Cw=2*Math.PI/3;function Rw(t){var e;return t=(.5-t)*Math.PI,Ew.r=255*(e=Math.sin(t))*e,Ew.g=255*(e=Math.sin(t+Aw))*e,Ew.b=255*(e=Math.sin(t+Cw))*e,Ew+""}function Dw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function Pw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Lw=Pw(sb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Nw=Pw(sb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Iw=Pw(sb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Uw=Pw(sb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ow(t){return Hn(An(t).call(document.documentElement))}var Fw=0;function kw(){return new Bw}function Bw(){this._="@"+(++Fw).toString(36)}function zw(t,e){return t.target&&(t=Qr(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Jr(t,e)))}function Hw(t){return"string"==typeof t?new kn([document.querySelectorAll(t)],[document.documentElement]):new kn([Re(t)],Fn)}function Vw(t){return function(){return t}}Bw.prototype=kw.prototype={constructor:Bw,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const Gw=Math.abs,Ww=Math.atan2,jw=Math.cos,qw=Math.max,Xw=Math.min,$w=Math.sin,Yw=Math.sqrt,Kw=1e-12,Zw=Math.PI,Qw=Zw/2,Jw=2*Zw;function tM(t){return t>=1?Qw:t<=-1?-Qw:Math.asin(t)}function eM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new uo(e)}function nM(t){return t.innerRadius}function rM(t){return t.outerRadius}function iM(t){return t.startAngle}function aM(t){return t.endAngle}function oM(t){return t&&t.padAngle}function sM(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/Yw(s*s+l*l),u=c*l,f=-c*s,h=t+u,d=e+f,p=n+u,m=r+f,g=(h+p)/2,v=(d+m)/2,_=p-h,y=m-d,x=_*_+y*y,b=i-a,w=h*m-p*d,M=(y<0?-1:1)*Yw(qw(0,b*b*x-w*w)),S=(w*y-_*M)/x,T=(-w*_-y*M)/x,E=(w*y+_*M)/x,A=(-w*_+y*M)/x,C=S-g,R=T-v,D=E-g,P=A-v;return C*C+R*R>D*D+P*P&&(S=E,T=A),{cx:S,cy:T,x01:-u,y01:-f,x11:S*(i/b-1),y11:T*(i/b-1)}}function lM(){var t=nM,e=rM,n=Vw(0),r=null,i=iM,a=aM,o=oM,s=null,l=eM(c);function c(){var c,u,f,h=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-Qw,m=a.apply(this,arguments)-Qw,g=Gw(m-p),v=m>p;if(s||(s=c=l()),d<h&&(u=d,d=h,h=u),d>Kw)if(g>Jw-Kw)s.moveTo(d*jw(p),d*$w(p)),s.arc(0,0,d,p,m,!v),h>Kw&&(s.moveTo(h*jw(m),h*$w(m)),s.arc(0,0,h,m,p,v));else{var _,y,x=p,b=m,w=p,M=m,S=g,T=g,E=o.apply(this,arguments)/2,A=E>Kw&&(r?+r.apply(this,arguments):Yw(h*h+d*d)),C=Xw(Gw(d-h)/2,+n.apply(this,arguments)),R=C,D=C;if(A>Kw){var P=tM(A/h*$w(E)),L=tM(A/d*$w(E));(S-=2*P)>Kw?(w+=P*=v?1:-1,M-=P):(S=0,w=M=(p+m)/2),(T-=2*L)>Kw?(x+=L*=v?1:-1,b-=L):(T=0,x=b=(p+m)/2)}var N=d*jw(x),I=d*$w(x),U=h*jw(M),O=h*$w(M);if(C>Kw){var F,k=d*jw(b),B=d*$w(b),z=h*jw(w),H=h*$w(w);if(g<Zw)if(F=function(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,u=o-i,f=s-a,h=f*l-u*c;if(!(h*h<Kw))return[t+(h=(u*(e-a)-f*(t-i))/h)*l,e+h*c]}(N,I,z,H,k,B,U,O)){var V=N-F[0],G=I-F[1],W=k-F[0],j=B-F[1],q=1/$w(((f=(V*W+G*j)/(Yw(V*V+G*G)*Yw(W*W+j*j)))>1?0:f<-1?Zw:Math.acos(f))/2),X=Yw(F[0]*F[0]+F[1]*F[1]);R=Xw(C,(h-X)/(q-1)),D=Xw(C,(d-X)/(q+1))}else R=D=0}T>Kw?D>Kw?(_=sM(z,H,N,I,d,D,v),y=sM(k,B,U,O,d,D,v),s.moveTo(_.cx+_.x01,_.cy+_.y01),D<C?s.arc(_.cx,_.cy,D,Ww(_.y01,_.x01),Ww(y.y01,y.x01),!v):(s.arc(_.cx,_.cy,D,Ww(_.y01,_.x01),Ww(_.y11,_.x11),!v),s.arc(0,0,d,Ww(_.cy+_.y11,_.cx+_.x11),Ww(y.cy+y.y11,y.cx+y.x11),!v),s.arc(y.cx,y.cy,D,Ww(y.y11,y.x11),Ww(y.y01,y.x01),!v))):(s.moveTo(N,I),s.arc(0,0,d,x,b,!v)):s.moveTo(N,I),h>Kw&&S>Kw?R>Kw?(_=sM(U,O,k,B,h,-R,v),y=sM(N,I,z,H,h,-R,v),s.lineTo(_.cx+_.x01,_.cy+_.y01),R<C?s.arc(_.cx,_.cy,R,Ww(_.y01,_.x01),Ww(y.y01,y.x01),!v):(s.arc(_.cx,_.cy,R,Ww(_.y01,_.x01),Ww(_.y11,_.x11),!v),s.arc(0,0,h,Ww(_.cy+_.y11,_.cx+_.x11),Ww(y.cy+y.y11,y.cx+y.x11),v),s.arc(y.cx,y.cy,R,Ww(y.y11,y.x11),Ww(y.y01,y.x01),!v))):s.arc(0,0,h,M,w,v):s.lineTo(U,O)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Zw/2;return[jw(r)*n,$w(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Vw(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Vw(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Vw(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Vw(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Vw(+t),c):i},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Vw(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Vw(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}var cM=Array.prototype.slice;function uM(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function fM(t){this._context=t}function hM(t){return new fM(t)}function dM(t){return t[0]}function pM(t){return t[1]}function mM(t,e){var n=Vw(!0),r=null,i=hM,a=null,o=eM(s);function s(s){var l,c,u,f=(s=uM(s)).length,h=!1;for(null==r&&(a=i(u=o())),l=0;l<=f;++l)!(l<f&&n(c=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(c,l,s),+e(c,l,s));if(u)return a=null,u+""||null}return t="function"==typeof t?t:void 0===t?dM:Vw(t),e="function"==typeof e?e:void 0===e?pM:Vw(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:Vw(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:Vw(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:Vw(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function gM(t,e,n){var r=null,i=Vw(!0),a=null,o=hM,s=null,l=eM(c);function c(c){var u,f,h,d,p,m=(c=uM(c)).length,g=!1,v=new Array(m),_=new Array(m);for(null==a&&(s=o(p=l())),u=0;u<=m;++u){if(!(u<m&&i(d=c[u],u,c))===g)if(g=!g)f=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=f;--h)s.point(v[h],_[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+t(d,u,c),_[u]=+e(d,u,c),s.point(r?+r(d,u,c):v[u],n?+n(d,u,c):_[u]))}if(p)return s=null,p+""||null}function u(){return mM().defined(i).curve(o).context(a)}return t="function"==typeof t?t:void 0===t?dM:Vw(+t),e="function"==typeof e?e:Vw(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?pM:Vw(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:Vw(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:Vw(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Vw(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Vw(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:Vw(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Vw(+t),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Vw(!!t),c):i},c.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),c):a},c}function vM(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function _M(t){return t}function yM(){var t=_M,e=vM,n=null,r=Vw(0),i=Vw(Jw),a=Vw(0);function o(o){var s,l,c,u,f,h=(o=uM(o)).length,d=0,p=new Array(h),m=new Array(h),g=+r.apply(this,arguments),v=Math.min(Jw,Math.max(-Jw,i.apply(this,arguments)-g)),_=Math.min(Math.abs(v)/h,a.apply(this,arguments)),y=_*(v<0?-1:1);for(s=0;s<h;++s)(f=m[p[s]=s]=+t(o[s],s,o))>0&&(d+=f);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),s=0,c=d?(v-h*y)/d:0;s<h;++s,g=u)l=p[s],u=g+((f=m[l])>0?f*c:0)+y,m[l]={data:o[l],index:s,value:f,startAngle:g,endAngle:u,padAngle:_};return m}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:Vw(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Vw(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Vw(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Vw(+t),o):a},o}fM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var xM=wM(hM);function bM(t){this._curve=t}function wM(t){function e(e){return new bM(t(e))}return e._curve=t,e}function MM(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(wM(t)):e()._curve},t}function SM(){return MM(mM().curve(xM))}function TM(){var t=gM().curve(xM),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return MM(n())},delete t.lineX0,t.lineEndAngle=function(){return MM(r())},delete t.lineX1,t.lineInnerRadius=function(){return MM(i())},delete t.lineY0,t.lineOuterRadius=function(){return MM(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(wM(t)):e()._curve},t}function EM(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}bM.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class AM{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class CM{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0===this._point)this._point=1;else{const n=EM(this._x0,this._y0),r=EM(this._x0,this._y0=(this._y0+e)/2),i=EM(t,this._y0),a=EM(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...a)}this._x0=t,this._y0=e}}function RM(t){return new AM(t,!0)}function DM(t){return new AM(t,!1)}function PM(t){return new CM(t)}function LM(t){return t.source}function NM(t){return t.target}function IM(t){let e=LM,n=NM,r=dM,i=pM,a=null,o=null,s=eM(l);function l(){let l;const c=cM.call(arguments),u=e.apply(this,c),f=n.apply(this,c);if(null==a&&(o=t(l=s())),o.lineStart(),c[0]=u,o.point(+r.apply(this,c),+i.apply(this,c)),c[0]=f,o.point(+r.apply(this,c),+i.apply(this,c)),o.lineEnd(),l)return o=null,l+""||null}return l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.x=function(t){return arguments.length?(r="function"==typeof t?t:Vw(+t),l):r},l.y=function(t){return arguments.length?(i="function"==typeof t?t:Vw(+t),l):i},l.context=function(e){return arguments.length?(null==e?a=o=null:o=t(a=e),l):a},l}function UM(){return IM(RM)}function OM(){return IM(DM)}function FM(){const t=IM(PM);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const kM=Yw(3),BM={draw(t,e){const n=.59436*Yw(e+Xw(e/28,.75)),r=n/2,i=r*kM;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},zM={draw(t,e){const n=Yw(e/Zw);t.moveTo(n,0),t.arc(0,0,n,0,Jw)}},HM={draw(t,e){const n=Yw(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},VM=Yw(1/3),GM=2*VM,WM={draw(t,e){const n=Yw(e/GM),r=n*VM;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},jM={draw(t,e){const n=.62625*Yw(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},qM={draw(t,e){const n=.87559*Yw(e-Xw(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},XM={draw(t,e){const n=Yw(e),r=-n/2;t.rect(r,r,n,n)}},$M={draw(t,e){const n=.4431*Yw(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},YM=$w(Zw/10)/$w(7*Zw/10),KM=$w(Jw/10)*YM,ZM=-jw(Jw/10)*YM,QM={draw(t,e){const n=Yw(.8908130915292852*e),r=KM*n,i=ZM*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const a=Jw*e/5,o=jw(a),s=$w(a);t.lineTo(s*n,-o*n),t.lineTo(o*r-s*i,s*r+o*i)}t.closePath()}},JM=Yw(3),tS={draw(t,e){const n=-Yw(e/(3*JM));t.moveTo(0,2*n),t.lineTo(-JM*n,-n),t.lineTo(JM*n,-n),t.closePath()}},eS=Yw(3),nS={draw(t,e){const n=.6824*Yw(e),r=n/2,i=n*eS/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},rS=-.5,iS=Yw(3)/2,aS=1/Yw(12),oS=3*(aS/2+1),sS={draw(t,e){const n=Yw(e/oS),r=n/2,i=n*aS,a=r,o=n*aS+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(rS*r-iS*i,iS*r+rS*i),t.lineTo(rS*a-iS*o,iS*a+rS*o),t.lineTo(rS*s-iS*l,iS*s+rS*l),t.lineTo(rS*r+iS*i,rS*i-iS*r),t.lineTo(rS*a+iS*o,rS*o-iS*a),t.lineTo(rS*s+iS*l,rS*l-iS*s),t.closePath()}},lS={draw(t,e){const n=.6189*Yw(e-Xw(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},cS=[zM,HM,WM,XM,QM,tS,sS],uS=[zM,qM,lS,nS,BM,$M,jM];function fS(t,e){let n=null,r=eM(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:Vw(t||zM),e="function"==typeof e?e:Vw(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:Vw(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Vw(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function hS(){}function dS(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function pS(t){this._context=t}function mS(t){return new pS(t)}function gS(t){this._context=t}function vS(t){return new gS(t)}function _S(t){this._context=t}function yS(t){return new _S(t)}function xS(t,e){this._basis=new pS(t),this._beta=e}pS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},gS.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:dS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:dS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},xS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const bS=function t(e){function n(t){return 1===e?new pS(t):new xS(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function wS(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function MS(t,e){this._context=t,this._k=(1-e)/6}MS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wS(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:wS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const SS=function t(e){function n(t){return new MS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function TS(t,e){this._context=t,this._k=(1-e)/6}TS.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ES=function t(e){function n(t){return new TS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function AS(t,e){this._context=t,this._k=(1-e)/6}AS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const CS=function t(e){function n(t){return new AS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function RS(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Kw){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Kw){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function DS(t,e){this._context=t,this._alpha=e}DS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:RS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const PS=function t(e){function n(t){return e?new DS(t,e):new MS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function LS(t,e){this._context=t,this._alpha=e}LS.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:RS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const NS=function t(e){function n(t){return e?new LS(t,e):new TS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function IS(t,e){this._context=t,this._alpha=e}IS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:RS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const US=function t(e){function n(t){return e?new IS(t,e):new AS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function OS(t){this._context=t}function FS(t){return new OS(t)}function kS(t){return t<0?-1:1}function BS(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(kS(a)+kS(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function zS(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HS(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function VS(t){this._context=t}function GS(t){this._context=new WS(t)}function WS(t){this._context=t}function jS(t){return new VS(t)}function qS(t){return new GS(t)}function XS(t){this._context=t}function $S(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function YS(t){return new XS(t)}function KS(t,e){this._context=t,this._t=e}function ZS(t){return new KS(t,.5)}function QS(t){return new KS(t,0)}function JS(t){return new KS(t,1)}function tT(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function eT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function nT(t,e){return t[e]}function rT(t){const e=[];return e.key=t,e}function iT(){var t=Vw([]),e=eT,n=tT,r=nT;function i(i){var a,o,s=Array.from(t.apply(this,arguments),rT),l=s.length,c=-1;for(const t of i)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(t,s[a].key,c,i)]).data=t;for(a=0,o=uM(e(s));a<l;++a)s[o[a]].index=a;return n(s,o),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:Vw(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Vw(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?eT:"function"==typeof t?t:Vw(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?tT:t,i):n},i}function aT(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}tT(t,e)}}function oT(t,e){if((s=t.length)>0)for(var n,r,i,a,o,s,l=0,c=t[e[0]].length;l<c;++l)for(a=o=0,n=0;n<s;++n)(i=(r=t[e[n]][l])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function sT(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}tT(t,e)}}function lT(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,c=0;s<i;++s){for(var u=t[e[s]],f=u[o][1]||0,h=(f-(u[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=f,c+=h*f}n[o-1][1]+=n[o-1][0]=a,l&&(a-=c/l)}n[o-1][1]+=n[o-1][0]=a,tT(t,e)}}function cT(t){var e=t.map(uT);return eT(t).sort((function(t,n){return e[t]-e[n]}))}function uT(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}function fT(t){var e=t.map(hT);return eT(t).sort((function(t,n){return e[t]-e[n]}))}function hT(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function dT(t){return fT(t).reverse()}function pT(t){var e,n,r=t.length,i=t.map(hT),a=cT(t),o=0,s=0,l=[],c=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],l.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(l)}function mT(t){return eT(t).reverse()}OS.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},VS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HS(this,this._t0,zS(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HS(this,zS(this,n=BS(this,t,e)),n);break;default:HS(this,this._t0,n=BS(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(GS.prototype=Object.create(VS.prototype)).point=function(t,e){VS.prototype.point.call(this,e,t)},WS.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},XS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=$S(t),i=$S(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},KS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var gT="%Y-%m-%dT%H:%M:%S.%LZ",vT=Date.prototype.toISOString?function(t){return t.toISOString()}:wy(gT);const _T=vT;var yT=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:My(gT);const xT=yT;function bT(t,e,n){var r=new di,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?fi():+n,r._restart((function a(o){o+=i,r._restart(a,i+=e,n),t(o)}),e,n)},r.restart(t,e,n),r)}const wT=t=>()=>t;function MT(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ST(t,e,n){this.k=t,this.x=e,this.y=n}ST.prototype={constructor:ST,scale:function(t){return 1===t?this:new ST(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ST(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var TT=new ST(1,0,0);function ET(t){for(;!t.__zoom;)if(!(t=t.parentNode))return TT;return t.__zoom}function AT(t){t.stopImmediatePropagation()}function CT(t){t.preventDefault(),t.stopImmediatePropagation()}function RT(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function DT(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function PT(){return this.__zoom||TT}function LT(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function NT(){return navigator.maxTouchPoints||"ontouchstart"in this}function IT(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function UT(){var t,e,n,r=RT,i=DT,a=IT,o=LT,s=NT,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,f=xg,h=Ee("start","zoom","end"),d=500,p=150,m=0,g=10;function v(t){t.property("__zoom",PT).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",A).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new ST(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new ST(t.k,r,i)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,r){t.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,a=arguments,o=w(t,a).event(r),s=i.apply(t,a),l=null==n?x(s):"function"==typeof n?n.apply(t,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,h="function"==typeof e?e.apply(t,a):e,d=f(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(t){if(1===t)t=h;else{var e=d(t),n=c/e[2];t=new ST(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new M(t,e)}function M(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function S(t,...e){if(r.apply(this,arguments)){var n=w(this,e).event(t),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,o.apply(this,arguments)))),u=Jr(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[u,i.invert(u)],Li(this),n.start()}CT(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),p),n.zoom("mouse",a(y(_(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function T(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,o=w(this,e,!0).event(t),s=Hn(t.view).on("mousemove.zoom",(function(t){if(CT(t),!o.moved){var e=t.clientX-u,n=t.clientY-f;o.moved=e*e+n*n>m}o.event(t).zoom("mouse",a(y(o.that.__zoom,o.mouse[0]=Jr(t,i),o.mouse[1]),o.extent,c))}),!0).on("mouseup.zoom",(function(t){s.on("mousemove.zoom mouseup.zoom",null),Xn(t.view,o.moved),CT(t),o.event(t).end()}),!0),l=Jr(t,i),u=t.clientX,f=t.clientY;qn(t.view),AT(t),o.mouse=[l,this.__zoom.invert(l)],Li(this),o.start()}}function E(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,o=Jr(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(o),l=n.k*(t.shiftKey?.5:2),f=a(y(_(n,l),o,s),i.apply(this,e),c);CT(t),u>0?Hn(this).transition().duration(u).call(b,f,o,t):Hn(this).call(v.transform,f,o,t)}}function A(n,...i){if(r.apply(this,arguments)){var a,o,s,l,c=n.touches,u=c.length,f=w(this,i,n.changedTouches.length===u).event(n);for(AT(n),o=0;o<u;++o)l=[l=Jr(s=c[o],this),this.__zoom.invert(l),s.identifier],f.touch0?f.touch1||f.touch0[2]===l[2]||(f.touch1=l,f.taps=0):(f.touch0=l,a=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(f.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),d)),Li(this),f.start())}}function C(t,...e){if(this.__zooming){var n,r,i,o,s=w(this,e).event(t),l=t.changedTouches,u=l.length;for(CT(t),n=0;n<u;++n)i=Jr(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],h=s.touch0[1],d=s.touch1[0],p=s.touch1[1],m=(m=d[0]-f[0])*m+(m=d[1]-f[1])*m,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;r=_(r,Math.sqrt(m/g)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(y(r,i,o),s.extent,c))}}function R(t,...r){if(this.__zooming){var i,a,o=w(this,r).event(t),s=t.changedTouches,l=s.length;for(AT(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),d),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=Jr(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<g)){var c=Hn(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",PT),t!==i?b(t,e,n,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},v.scaleBy=function(t,e,n,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},v.scaleTo=function(t,e,n,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?x(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return a(y(_(r,l),o,s),t,c)}),n,r)},v.translateBy=function(t,e,n,r){v.transform(t,(function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},v.translateTo=function(t,e,n,r,o){v.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==r?x(t):"function"==typeof r?r.apply(this,arguments):r;return a(TT.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),r,o)},M.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Hn(this.that).datum();h.call(t,this.that,new MT(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:h}),e)}},v.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:wT(+t),v):o},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:wT(!!t),v):r},v.touchable=function(t){return arguments.length?(s="function"==typeof t?t:wT(!!t),v):s},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:wT([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],v):[l[0],l[1]]},v.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],v):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},v.constrain=function(t){return arguments.length?(a=t,v):a},v.duration=function(t){return arguments.length?(u=+t,v):u},v.interpolate=function(t){return arguments.length?(f=t,v):f},v.on=function(){var t=h.on.apply(h,arguments);return t===h?v:t},v.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,v):Math.sqrt(m)},v.tapDistance=function(t){return arguments.length?(g=+t,v):g},v}ET.prototype=ST.prototype},9717:(t,e,n)=>{"use strict";var r,i,a,o,s=n(7569),l=function(t,e){if(l.factory(t,e))return l;if(this instanceof l)return s(t).DataTable(e);var n=this,r=void 0===(e=t),a=this.length;return r&&(e={}),this.api=function(){return new i(this)},this.each((function(){var t,o=a>1?$t({},e,!0):e,c=0,u=this.getAttribute("id"),f=!1,h=l.defaults,d=s(this);if("table"==this.nodeName.toLowerCase()){s(this).trigger("options.dt",o),N(h),I(h.column),P(h,h,!0),P(h.column,h.column,!0),P(h,s.extend(o,d.data()),!0);var p=l.settings;for(c=0,t=p.length;c<t;c++){var m=p[c];if(m.nTable==this||m.nTHead&&m.nTHead.parentNode==this||m.nTFoot&&m.nTFoot.parentNode==this){var g=void 0!==o.bRetrieve?o.bRetrieve:h.bRetrieve,v=void 0!==o.bDestroy?o.bDestroy:h.bDestroy;if(r||g)return m.oInstance;if(v){new l.Api(m).destroy();break}return void qt(m,0,"Cannot reinitialise DataTable",3)}if(m.sTableId==this.id){p.splice(c,1);break}}null!==u&&""!==u||(u="DataTables_Table_"+l.ext._unique++,this.id=u);var _=s.extend(!0,{},l.models.oSettings,{sDestroyWidth:d[0].style.width,sInstance:u,sTableId:u,colgroup:s("<colgroup>").prependTo(this),fastData:function(t,e,n){return Y(_,t,e,n)}});_.nTable=this,_.oInit=o,p.push(_),_.api=new i(_),_.oInstance=1===n.length?n:d.dataTable(),N(o),o.aLengthMenu&&!o.iDisplayLength&&(o.iDisplayLength=Array.isArray(o.aLengthMenu[0])?o.aLengthMenu[0][0]:s.isPlainObject(o.aLengthMenu[0])?o.aLengthMenu[0].value:o.aLengthMenu[0]),o=$t(s.extend(!0,{},h),o),Xt(_.oFeatures,o,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Xt(_,o,["ajax","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","iStateDuration","bSortCellsTop","iTabIndex","sDom","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId","caption","layout",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),Xt(_.oScroll,o,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Xt(_.oLanguage,o,"fnInfoCallback"),Kt(_,"aoDrawCallback",o.fnDrawCallback),Kt(_,"aoStateSaveParams",o.fnStateSaveParams),Kt(_,"aoStateLoadParams",o.fnStateLoadParams),Kt(_,"aoStateLoaded",o.fnStateLoaded),Kt(_,"aoRowCallback",o.fnRowCallback),Kt(_,"aoRowCreatedCallback",o.fnCreatedRow),Kt(_,"aoHeaderCallback",o.fnHeaderCallback),Kt(_,"aoFooterCallback",o.fnFooterCallback),Kt(_,"aoInitComplete",o.fnInitComplete),Kt(_,"aoPreDrawCallback",o.fnPreDrawCallback),_.rowIdFn=tt(o.rowId),function(t){if(!l.__browser){var e={};l.__browser=e;var n=s("<div/>").css({position:"fixed",top:0,left:-1*window.pageXOffset,height:1,width:1,overflow:"hidden"}).append(s("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(s("<div/>").css({width:"100%",height:10}))).appendTo("body"),r=n.children(),i=r.children();e.barWidth=r[0].offsetWidth-r[0].clientWidth,e.bScrollbarLeft=1!==Math.round(i.offset().left),n.remove()}s.extend(t.oBrowser,l.__browser),t.oScroll.iBarWidth=l.__browser.barWidth}(_);var y=_.oClasses;s.extend(y,l.ext.classes,o.oClasses),d.addClass(y.table),_.oFeatures.bPaginate||(o.iDisplayStart=0),void 0===_.iInitDisplayStart&&(_.iInitDisplayStart=o.iDisplayStart,_._iDisplayStart=o.iDisplayStart);var x=_.oLanguage;s.extend(!0,x,o.oLanguage),x.sUrl?(s.ajax({dataType:"json",url:x.sUrl,success:function(t){P(h.oLanguage,t),s.extend(!0,x,t,_.oInit.oLanguage),Zt(_,null,"i18n",[_],!0),Et(_)},error:function(){qt(_,0,"i18n file loading error",21),Et(_)}}),f=!0):Zt(_,null,"i18n",[_]);var b=[],w=this.getElementsByTagName("thead"),M=vt(_,w[0]);if(o.aoColumns)b=o.aoColumns;else if(M.length)for(c=0,t=M[0].length;c<t;c++)b.push(null);for(c=0,t=b.length;c<t;c++)U(_);!function(t,e,n,r,i){var a,o,l,c,u,f,h,d=t.aoColumns;if(n)for(a=0,o=n.length;a<o;a++)n[a]&&n[a].name&&(d[a].sName=n[a].name);if(e)for(a=e.length-1;a>=0;a--){var p=void 0!==(h=e[a]).target?h.target:void 0!==h.targets?h.targets:h.aTargets;for(Array.isArray(p)||(p=[p]),l=0,c=p.length;l<c;l++){var m=p[l];if("number"==typeof m&&m>=0){for(;d.length<=m;)U(t);i(m,h)}else if("number"==typeof m&&m<0)i(d.length+m,h);else if("string"==typeof m)for(u=0,f=d.length;u<f;u++)"_all"===m?i(u,h):-1!==m.indexOf(":name")?d[u].sName===m.replace(":name","")&&i(u,h):r.forEach((function(t){if(t[u]){var e=s(t[u].cell);m.match(/^[a-z][\w-]*$/i)&&(m="."+m),e.is(m)&&i(u,h)}}))}}if(n)for(a=0,o=n.length;a<o;a++)i(a,n[a])}(_,o.aoColumnDefs,b,M,(function(t,e){O(_,t,e)}));var S=d.children("tbody").find("tr").eq(0);if(S.length){var T=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};s(S[0]).children("th, td").each((function(t,e){var n=_.aoColumns[t];if(n||qt(_,0,"Incorrect column count",18),n.mData===t){var r=T(e,"sort")||T(e,"order"),i=T(e,"filter")||T(e,"search");null===r&&null===i||(n.mData={_:t+".display",sort:null!==r?t+".@data-"+r:void 0,type:null!==r?t+".@data-"+r:void 0,filter:null!==i?t+".@data-"+i:void 0},n._isArrayHost=!0,O(_,t))}}))}var E=_.oFeatures,A=function(){if(void 0===o.aaSorting){var e=_.aaSorting;for(c=0,t=e.length;c<t;c++)e[c][1]=_.aoColumns[c].asSorting[0]}Vt(_),Kt(_,"aoDrawCallback",(function(){(_.bSorted||"ssp"===te(_)||E.bDeferRender)&&Vt(_)}));var n=d.children("caption");_.caption&&(0===n.length&&(n=s("<caption/>").appendTo(d)),n.html(_.caption)),n.length&&(n[0]._captionSide=n.css("caption-side"),_.captionNode=n[0]),0===w.length&&(w=s("<thead/>").appendTo(d)),_.nTHead=w[0],s("tr",w).addClass(y.thead.row);var r=d.children("tbody");0===r.length&&(r=s("<tbody/>").insertAfter(w)),_.nTBody=r[0];var i=d.children("tfoot");if(0===i.length&&(i=s("<tfoot/>").appendTo(d)),_.nTFoot=i[0],s("tr",i).addClass(y.tfoot.row),o.aaData)for(c=0;c<o.aaData.length;c++)X(_,o.aaData[c]);else"dom"==te(_)&&$(_,s(_.nTBody).children("tr"));_.aiDisplay=_.aiDisplayMaster.slice(),_.bInitialised=!0,!1===f&&Et(_)};Kt(_,"aoDrawCallback",Wt),o.bStateSave?(E.bStateSave=!0,function(t,e,n){if(t.oFeatures.bStateSave){var r=t.fnStateLoadCallback.call(t.oInstance,t,(function(e){jt(t,e,n)}));void 0!==r&&jt(t,r,n)}else n()}(_,0,A)):A()}else qt(null,0,"Non-table node initialisation ("+this.nodeName+")",2)})),n=null,this};l.ext=r={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],features:{},search:[],selector:{cell:[],column:[],row:[]},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{className:{},detect:[],render:{},search:{},order:{}},_unique:0,fnVersionCheck:l.fnVersionCheck,iApiIndex:0,sVersion:l.version},s.extend(r,{afnFiltering:r.search,aTypes:r.type.detect,ofnSearch:r.type.search,oSort:r.type.order,afnSortData:r.order,aoFeatures:r.feature,oStdClasses:r.classes,oPagination:r.pager}),s.extend(l.ext.classes,{container:"dt-container",empty:{row:"dt-empty"},info:{container:"dt-info"},length:{container:"dt-length",select:"dt-input"},order:{canAsc:"dt-orderable-asc",canDesc:"dt-orderable-desc",isAsc:"dt-ordering-asc",isDesc:"dt-ordering-desc",none:"dt-orderable-none",position:"sorting_"},processing:{container:"dt-processing"},scrolling:{body:"dt-scroll-body",container:"dt-scroll",footer:{self:"dt-scroll-foot",inner:"dt-scroll-footInner"},header:{self:"dt-scroll-head",inner:"dt-scroll-headInner"}},search:{container:"dt-search",input:"dt-input"},table:"dataTable",tbody:{cell:"",row:""},thead:{cell:"",row:""},tfoot:{cell:"",row:""},paging:{active:"current",button:"dt-paging-button",container:"dt-paging",disabled:"disabled"}});var c={},u=/[\r\n\u2028]/g,f=/<.*?>/g,h=/^\d{2,4}[./-]\d{1,2}[./-]\d{1,2}([T ]{1}\d{1,2}[:.]\d{2}([.:]\d{2})?)?$/,d=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),p=/['\u00A0,$Â£â¬Â¥%\u2009\u202F\u20BD\u20a9\u20BArfkÉÎ]/gi,m=function(t){return!t||!0===t||"-"===t},g=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},v=function(t,e){return c[e]||(c[e]=new RegExp(Mt(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(c[e],"."):t},_=function(t,e,n){var r=typeof t,i="string"===r;return"number"===r||"bigint"===r||!!m(t)||(e&&i&&(t=v(t,e)),n&&i&&(t=t.replace(p,"")),!isNaN(parseFloat(t))&&isFinite(t))},y=function(t,e,n){if(m(t))return!0;if("string"==typeof t&&t.match(/<(input|select)/i))return null;var r=function(t){return m(t)||"string"==typeof t}(t);return r&&!!_(S(t),e,n)||null},x=function(t,e,n){var r=[],i=0,a=t.length;if(void 0!==n)for(;i<a;i++)t[i]&&t[i][e]&&r.push(t[i][e][n]);else for(;i<a;i++)t[i]&&r.push(t[i][e]);return r},b=function(t,e,n,r){var i=[],a=0,o=e.length;if(void 0!==r)for(;a<o;a++)t[e[a]][n]&&i.push(t[e[a]][n][r]);else for(;a<o;a++)t[e[a]]&&i.push(t[e[a]][n]);return i},w=function(t,e){var n,r=[];void 0===e?(e=0,n=t):(n=e,e=t);for(var i=e;i<n;i++)r.push(i);return r},M=function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]&&e.push(t[n]);return e},S=function(t){return t.replace(f,"").replace(/<script/i,"")},T=function(t){return Array.isArray(t)&&(t=t.join(",")),"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t},E=function(t,e){if("string"!=typeof t)return t;var n=t.normalize("NFD");return n.length!==t.length?(!0===e?t+" ":"")+n.replace(/[\u0300-\u036f]/g,""):n},A=function(t){if(Array.from&&Set)return Array.from(new Set(t));if(function(t){if(t.length<2)return!0;for(var e=t.slice().sort(),n=e[0],r=1,i=e.length;r<i;r++){if(e[r]===n)return!1;n=e[r]}return!0}(t))return t.slice();var e,n,r,i=[],a=t.length,o=0;t:for(n=0;n<a;n++){for(e=t[n],r=0;r<o;r++)if(i[r]===e)continue t;i.push(e),o++}return i},C=function(t,e){if(Array.isArray(e))for(var n=0;n<e.length;n++)C(t,e[n]);else t.push(e);return t};function R(t,e){e&&e.split(" ").forEach((function(e){e&&t.classList.add(e)}))}function D(t){var e,n,r={};s.each(t,(function(i){(e=i.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(e[1]+" ")&&(n=i.replace(e[0],e[2].toLowerCase()),r[n]=i,"o"===e[1]&&D(t[i]))})),t._hungarianMap=r}function P(t,e,n){var r;t._hungarianMap||D(t),s.each(e,(function(i){void 0===(r=t._hungarianMap[i])||!n&&void 0!==e[r]||("o"===r.charAt(0)?(e[r]||(e[r]={}),s.extend(!0,e[r],e[i]),P(t[r],e[r],n)):e[r]=e[i])}))}l.util={diacritics:function(t,e){if("function"!=typeof t)return E(t,e);E=t},debounce:function(t,e){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(r,i)}),e||250)}},throttle:function(t,e){var n,r,i=void 0!==e?e:200;return function(){var e=this,a=+new Date,o=arguments;n&&a<n+i?(clearTimeout(r),r=setTimeout((function(){n=void 0,t.apply(e,o)}),i)):(n=a,t.apply(e,o))}},escapeRegex:function(t){return t.replace(d,"\\$1")},set:function(t){if(s.isPlainObject(t))return l.util.set(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n,r){t(e,"set",n,r)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){e[t]=n};var e=function(t,n,r){for(var i,a,o,s,l,c=J(r),u=c[c.length-1],f=0,h=c.length-1;f<h;f++){if("__proto__"===c[f]||"constructor"===c[f])throw new Error("Cannot set prototype values");if(a=c[f].match(Z),o=c[f].match(Q),a){if(c[f]=c[f].replace(Z,""),t[c[f]]=[],(i=c.slice()).splice(0,f+1),l=i.join("."),Array.isArray(n))for(var d=0,p=n.length;d<p;d++)e(s={},n[d],l),t[c[f]].push(s);else t[c[f]]=n;return}o&&(c[f]=c[f].replace(Q,""),t=t[c[f]](n)),null!==t[c[f]]&&void 0!==t[c[f]]||(t[c[f]]={}),t=t[c[f]]}u.match(Q)?t=t[u.replace(Q,"")](n):t[u.replace(Z,"")]=n};return function(n,r){return e(n,r,t)}},get:function(t){if(s.isPlainObject(t)){var e={};return s.each(t,(function(t,n){n&&(e[t]=l.util.get(n))})),function(t,n,r,i){var a=e[n]||e._;return void 0!==a?a(t,n,r,i):t}}if(null===t)return function(t){return t};if("function"==typeof t)return function(e,n,r,i){return t(e,n,r,i)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e){return e[t]};var n=function(t,e,r){var i,a,o,s;if(""!==r)for(var l=J(r),c=0,u=l.length;c<u;c++){if(i=l[c].match(Z),a=l[c].match(Q),i){if(l[c]=l[c].replace(Z,""),""!==l[c]&&(t=t[l[c]]),o=[],l.splice(0,c+1),s=l.join("."),Array.isArray(t))for(var f=0,h=t.length;f<h;f++)o.push(n(t[f],e,s));var d=i[0].substring(1,i[0].length-1);t=""===d?o:o.join(d);break}if(a)l[c]=l[c].replace(Q,""),t=t[l[c]]();else{if(null===t||null===t[l[c]])return null;if(void 0===t||void 0===t[l[c]])return;t=t[l[c]]}}return t};return function(e,r){return n(e,r,t)}},stripHtml:function(t){var e=typeof t;if("function"!==e)return"string"===e?S(t):t;S=t},escapeHtml:function(t){var e=typeof t;if("function"!==e)return"string"===e||Array.isArray(t)?T(t):t;T=t},unique:A};var L=function(t,e,n){void 0!==t[e]&&(t[n]=t[e])};function N(t){L(t,"ordering","bSort"),L(t,"orderMulti","bSortMulti"),L(t,"orderClasses","bSortClasses"),L(t,"orderCellsTop","bSortCellsTop"),L(t,"order","aaSorting"),L(t,"orderFixed","aaSortingFixed"),L(t,"paging","bPaginate"),L(t,"pagingType","sPaginationType"),L(t,"pageLength","iDisplayLength"),L(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":"");var e=t.aoSearchCols;if(e)for(var n=0,r=e.length;n<r;n++)e[n]&&P(l.models.oSearch,e[n]);t.serverSide&&!t.searchDelay&&(t.searchDelay=400)}function I(t){L(t,"orderable","bSortable"),L(t,"orderData","aDataSort"),L(t,"orderSequence","asSorting"),L(t,"orderDataType","sortDataType");var e=t.aDataSort;"number"!=typeof e||Array.isArray(e)||(t.aDataSort=[e])}function U(t){var e=l.defaults.column,n=t.aoColumns.length,r=s.extend({},l.models.oColumn,e,{aDataSort:e.aDataSort?e.aDataSort:[n],mData:e.mData?e.mData:n,idx:n,searchFixed:{},colEl:s("<col>")});t.aoColumns.push(r);var i=t.aoPreSearchCols;i[n]=s.extend({},l.models.oSearch,i[n])}function O(t,e,n){var r=t.aoColumns[e];if(null!=n){I(n),P(l.defaults.column,n,!0),void 0===n.mDataProp||n.mData||(n.mData=n.mDataProp),n.sType&&(r._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className);var i=r.sClass;s.extend(r,n),Xt(r,n,"sWidth","sWidthOrig"),i!==r.sClass&&(r.sClass=i+" "+r.sClass),void 0!==n.iDataSort&&(r.aDataSort=[n.iDataSort]),Xt(r,n,"aDataSort")}var a=r.mData,o=tt(a);if(r.mRender&&Array.isArray(r.mRender)){var c=r.mRender.slice(),u=c.shift();r.mRender=l.render[u].apply(window,c)}r._render=r.mRender?tt(r.mRender):null;var f=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};r._bAttrSrc=s.isPlainObject(a)&&(f(a.sort)||f(a.type)||f(a.filter)),r._setter=null,r.fnGetData=function(t,e,n){var i=o(t,e,void 0,n);return r._render&&e?r._render(i,e,t,n):i},r.fnSetData=function(t,e,n){return et(a)(t,e,n)},"number"==typeof a||r._isArrayHost||(t._rowReadObject=!0),t.oFeatures.bSort||(r.bSortable=!1)}function F(t){!function(t){if(t.oFeatures.bAutoWidth){var e,n,i,a=t.nTable,o=t.aoColumns,c=t.oScroll,u=c.sY,f=c.sX,h=c.sXInner,d=H(t,"bVisible"),p=a.getAttribute("width"),m=a.parentNode,g=a.style.width;g&&-1!==g.indexOf("%")&&(p=g),Zt(t,null,"column-calc",{visible:d},!1);var v=s(a.cloneNode()).css("visibility","hidden").removeAttr("id");v.append("<tbody>");var _=s("<tr/>").appendTo(v.find("tbody"));for(v.append(s(t.nTHead).clone()).append(s(t.nTFoot).clone()),v.find("tfoot th, tfoot td").css("width",""),v.find("thead th, thead td").each((function(){var e=j(t,this,!0,!1);e?(this.style.width=e,f&&s(this).append(s("<div/>").css({width:e,margin:0,padding:0,border:0,height:1}))):this.style.width=""})),e=0;e<d.length;e++){n=o[i=d[e]];var y=Nt(t,i),x=r.type.className[n.sType],b=y+n.sContentPadding,w=-1===y.indexOf("<")?document.createTextNode(b):b;s("<td/>").addClass(x).addClass(n.sClass).append(w).appendTo(_)}s("[name]",v).removeAttr("name");var M=s("<div/>").css(f||u?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(v).appendTo(m);f&&h?v.width(h):f?(v.css("width","auto"),v.removeAttr("width"),v.width()<m.clientWidth&&p&&v.width(m.clientWidth)):u?v.width(m.clientWidth):p&&v.width(p);var S=0,T=v.find("tbody tr").eq(0).children();for(e=0;e<d.length;e++){var E=T[e].getBoundingClientRect().width;S+=E,o[d[e]].sWidth=It(E)}a.style.width=It(S),M.remove(),p&&(a.style.width=It(p)),!p&&!f||t._reszEvt||(s(window).on("resize.DT-"+t.sInstance,l.util.throttle((function(){t.bDestroying||F(t)}))),t._reszEvt=!0)}}(t),function(t){for(var e=t.aoColumns,n=0;n<e.length;n++){var r=j(t,[n],!1,!1);e[n].colEl.css("width",r)}}(t);var e=t.oScroll;""===e.sY&&""===e.sX||Lt(t),Zt(t,null,"column-sizing",[t])}function k(t,e){var n=H(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function B(t,e){var n=H(t,"bVisible").indexOf(e);return-1!==n?n:null}function z(t){var e=t.aoHeader,n=t.aoColumns,r=0;if(e.length)for(var i=0,a=e[0].length;i<a;i++)n[i].bVisible&&"none"!==s(e[0][i].cell).css("display")&&r++;return r}function H(t,e){var n=[];return t.aoColumns.map((function(t,r){t[e]&&n.push(r)})),n}function V(t){var e,n,i,a,o,s,c,u,f,h=t.aoColumns,d=t.aoData,p=l.ext.type.detect;for(e=0,n=h.length;e<n;e++){if(f=[],!(c=h[e]).sType&&c._sManualType)c.sType=c._sManualType;else if(!c.sType){for(i=0,a=p.length;i<a;i++){for(o=0,s=d.length;o<s;o++)if(d[o]){if(void 0===f[o]&&(f[o]=Y(t,o,e,"type")),!(u=p[i](f[o],t))&&i!==p.length-2)break;if("html"===u&&!m(f[o]))break}if(u){c.sType=u;break}}c.sType||(c.sType="string")}var g=r.type.className[c.sType];g&&(W(t.aoHeader,e,g),W(t.aoFooter,e,g));var v=r.type.render[c.sType];v&&!c._render&&(c._render=l.util.get(v),G(t,e))}}function G(t,e){for(var n=t.aoData,r=0;r<n.length;r++)if(n[r].nTr){var i=Y(t,r,e,"display");n[r].displayData[e]=i,K(n[r].anCells[e],i)}}function W(t,e,n){t.forEach((function(t){t[e]&&t[e].unique&&R(t[e].cell,n)}))}function j(t,e,n,r){Array.isArray(e)||(e=q(e));for(var i,a=0,o=t.aoColumns,s=0,l=e.length;s<l;s++){var c=o[e[s]],u=n?c.sWidthOrig:c.sWidth;if(r||!1!==c.bVisible){if(null==u)return null;if("number"==typeof u)i="px",a+=u;else{var f=u.match(/([\d\.]+)([^\d]*)/);f&&(a+=1*f[1],i=3===f.length?f[2]:"px")}}}return a+i}function q(t){var e=s(t).closest("[data-dt-column]").attr("data-dt-column");return e?e.split(",").map((function(t){return 1*t})):[]}function X(t,e,n,r){var i=t.aoData.length,a=s.extend(!0,{},l.models.oRow,{src:n?"dom":"data",idx:i});a._aData=e,t.aoData.push(a);for(var o=t.aoColumns,c=0,u=o.length;c<u;c++)o[c].sType=null;t.aiDisplayMaster.push(i);var f=t.rowIdFn(e);return void 0!==f&&(t.aIds[f]=a),!n&&t.oFeatures.bDeferRender||st(t,i,n,r),i}function $(t,e){var n;return e instanceof s||(e=s(e)),e.map((function(e,r){return n=at(t,r),X(t,n.data,r,n.cells)}))}function Y(t,e,n,r){"search"===r?r="filter":"order"===r&&(r="sort");var i=t.iDraw,a=t.aoColumns[n],o=t.aoData[e]._aData,s=a.sDefaultContent,c=a.fnGetData(o,r,{settings:t,row:e,col:n});if("display"!==r&&c&&"object"==typeof c&&c.nodeName&&(c=c.innerHTML),void 0===c)return t.iDrawError!=i&&null===s&&(qt(t,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=i),s;if(c!==o&&null!==c||null===s||void 0===r){if("function"==typeof c)return c.call(o)}else c=s;if(null===c&&"display"===r)return"";if("filter"===r){var u=l.ext.type.search;u[a.sType]&&(c=u[a.sType](c))}return c}function K(t,e){e&&"object"==typeof e&&e.nodeName?s(t).empty().append(e):t.innerHTML=e}var Z=/\[.*?\]$/,Q=/\(\)$/;function J(t){return(t.match(/(\\.|[^.])+/g)||[""]).map((function(t){return t.replace(/\\\./g,".")}))}var tt=l.util.get,et=l.util.set;function nt(t){return x(t.aoData,"_aData")}function rt(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function it(t,e,n,r){var i,a,o=t.aoData[e];if(o._aSortData=null,o._aFilterData=null,o.displayData=null,"dom"!==n&&(n&&"auto"!==n||"dom"!==o.src)){var s=o.anCells,l=ot(t,e);if(s)if(void 0!==r)K(s[r],l[r]);else for(i=0,a=s.length;i<a;i++)K(s[i],l[i])}else o._aData=at(t,o,r,void 0===r?void 0:o._aData).data;var c=t.aoColumns;if(void 0!==r)c[r].sType=null,c[r].maxLenString=null;else{for(i=0,a=c.length;i<a;i++)c[i].sType=null,c[i].maxLenString=null;lt(t,o)}}function at(t,e,n,r){var i,a,o,s=[],l=e.firstChild,c=0,u=t.aoColumns,f=t._rowReadObject;r=void 0!==r?r:f?{}:[];var h=function(t,e){if("string"==typeof t){var n=t.indexOf("@");if(-1!==n){var i=t.substring(n+1);et(t)(r,e.getAttribute(i))}}},d=function(t){void 0!==n&&n!==c||(a=u[c],o=t.innerHTML.trim(),a&&a._bAttrSrc?(et(a.mData._)(r,o),h(a.mData.sort,t),h(a.mData.type,t),h(a.mData.filter,t)):f?(a._setter||(a._setter=et(a.mData)),a._setter(r,o)):r[c]=o),c++};if(l)for(;l;)"TD"!=(i=l.nodeName.toUpperCase())&&"TH"!=i||(d(l),s.push(l)),l=l.nextSibling;else for(var p=0,m=(s=e.anCells).length;p<m;p++)d(s[p]);var g=e.firstChild?e:e.nTr;if(g){var v=g.getAttribute("id");v&&et(t.rowId)(r,v)}return{data:r,cells:s}}function ot(t,e){let n=t.aoData[e],r=t.aoColumns;if(!n.displayData){n.displayData=[];for(var i=0,a=r.length;i<a;i++)n.displayData.push(Y(t,e,i,"display"))}return n.displayData}function st(t,e,n,r){var i,a,o,l,c,u,f=t.aoData[e],h=f._aData,d=[],p=t.oClasses.tbody.row;if(null===f.nTr){for(i=n||document.createElement("tr"),f.nTr=i,f.anCells=d,R(i,p),i._DT_RowIndex=e,lt(t,f),l=0,c=t.aoColumns.length;l<c;l++){o=t.aoColumns[l],(a=(u=!n||!r[l])?document.createElement(o.sCellType):r[l])||qt(t,0,"Incorrect column count",18),a._DT_CellIndex={row:e,column:l},d.push(a);var m=ot(t,e);!u&&(!o.mRender&&o.mData===l||s.isPlainObject(o.mData)&&o.mData._===l+".display")||K(a,m[l]),o.bVisible&&u?i.appendChild(a):o.bVisible||u||a.parentNode.removeChild(a),o.fnCreatedCell&&o.fnCreatedCell.call(t.oInstance,a,Y(t,e,l),h,e,l)}Zt(t,"aoRowCreatedCallback","row-created",[i,h,e,d])}else R(f.nTr,p)}function lt(t,e){var n=e.nTr,r=e._aData;if(n){var i=t.rowIdFn(r);if(i&&(n.id=i),r.DT_RowClass){var a=r.DT_RowClass.split(" ");e.__rowc=e.__rowc?A(e.__rowc.concat(a)):a,s(n).removeClass(e.__rowc.join(" ")).addClass(r.DT_RowClass)}r.DT_RowAttr&&s(n).attr(r.DT_RowAttr),r.DT_RowData&&s(n).data(r.DT_RowData)}}function ct(t,e){var n,r,i,a=t.oClasses,o=t.aoColumns,l="header"===e?t.nTHead:t.nTFoot,c="header"===e?"sTitle":e;if(l){if(("header"===e||x(t.aoColumns,c).join(""))&&((i=s("tr",l)).length||(i=s("<tr/>").appendTo(l)),1===i.length))for(n=s("td, th",i).length,r=o.length;n<r;n++)s("<th/>").html(o[n][c]||"").appendTo(i);var u=vt(t,l,!0);"header"===e?t.aoHeader=u:t.aoFooter=u,s(l).children("tr").attr("role","row"),s(l).children("tr").children("th, td").each((function(){Jt(t,e)(t,s(this),a)}))}}function ut(t,e,n){var r,i,a,o,l,c=[],u=[],f=t.aoColumns,h=f.length;if(e){for(n||(n=w(h).filter((function(t){return f[t].bVisible}))),r=0;r<e.length;r++)c[r]=e[r].slice().filter((function(t,e){return n.includes(e)})),u.push([]);for(r=0;r<c.length;r++)for(i=0;i<c[r].length;i++)if(o=1,l=1,void 0===u[r][i]){for(a=c[r][i].cell;void 0!==c[r+o]&&c[r][i].cell==c[r+o][i].cell;)u[r+o][i]=null,o++;for(;void 0!==c[r][i+l]&&c[r][i].cell==c[r][i+l].cell;){for(var d=0;d<o;d++)u[r+d][i+l]=null;l++}var p=s("span.dt-column-title",a);u[r][i]={cell:a,colspan:l,rowspan:o,title:p.length?p.html():s(a).html()}}return u}}function ft(t,e){for(var n,r,i=ut(t,e),a=0;a<e.length;a++){if(n=e[a].row)for(;r=n.firstChild;)n.removeChild(r);for(var o=0;o<i[a].length;o++){var l=i[a][o];l&&s(l.cell).appendTo(n).attr("rowspan",l.rowspan).attr("colspan",l.colspan)}}}function ht(t,e){if(function(t){var e="ssp"==te(t),n=t.iInitDisplayStart;void 0!==n&&-1!==n&&(t._iDisplayStart=e?n:n>=t.fnRecordsDisplay()?0:n,t.iInitDisplayStart=-1)}(t),-1===Zt(t,"aoPreDrawCallback","preDraw",[t]).indexOf(!1)){var n,i=[],a=0,o="ssp"==te(t),l=t.aiDisplay,c=t._iDisplayStart,u=t.fnDisplayEnd(),f=t.aoColumns,h=s(t.nTBody);if(t.bDrawing=!0,o){if(!t.bDestroying&&!e)return 0===t.iDraw&&h.empty().append(pt(t)),(n=t).iDraw++,Dt(n,!0),void _t(n,function(t){var e=t.aoColumns,n=t.oFeatures,r=t.oPreviousSearch,i=t.aoPreSearchCols,a=function(t,n){return"function"==typeof e[t][n]?"function":e[t][n]};return{draw:t.iDraw,columns:e.map((function(t,e){return{data:a(e,"mData"),name:t.sName,searchable:t.bSearchable,orderable:t.bSortable,search:{value:i[e].search,regex:i[e].regex,fixed:Object.keys(t.searchFixed).map((function(e){return{name:e,term:t.searchFixed[e].toString()}}))}}})),order:Bt(t).map((function(t){return{column:t.col,dir:t.dir,name:a(t.col,"sName")}})),start:t._iDisplayStart,length:n.bPaginate?t._iDisplayLength:-1,search:{value:r.search,regex:r.regex,fixed:Object.keys(t.searchFixed).map((function(e){return{name:e,term:t.searchFixed[e].toString()}}))}}}(n),(function(t){!function(t,e){var n=yt(t,e),r=xt(t,"draw",e),i=xt(t,"recordsTotal",e),a=xt(t,"recordsFiltered",e);if(void 0!==r){if(1*r<t.iDraw)return;t.iDraw=1*r}n||(n=[]),rt(t),t._iRecordsTotal=parseInt(i,10),t._iRecordsDisplay=parseInt(a,10);for(var o=0,s=n.length;o<s;o++)X(t,n[o]);t.aiDisplay=t.aiDisplayMaster.slice(),ht(t,!0),At(t),Dt(t,!1)}(n,t)}))}else t.iDraw++;if(0!==l.length)for(var d=o?0:c,p=o?t.aoData.length:u,m=d;m<p;m++){var g=l[m],v=t.aoData[g];null===v.nTr&&st(t,g);for(var _=v.nTr,y=0;y<f.length;y++){var x=f[y],b=v.anCells[y];R(b,r.type.className[x.sType]),R(b,x.sClass),R(b,t.oClasses.tbody.cell)}Zt(t,"aoRowCallback",null,[_,v._aData,a,m,g]),i.push(_),a++}else i[0]=pt(t);Zt(t,"aoHeaderCallback","header",[s(t.nTHead).children("tr")[0],nt(t),c,u,l]),Zt(t,"aoFooterCallback","footer",[s(t.nTFoot).children("tr")[0],nt(t),c,u,l]),h[0].replaceChildren?h[0].replaceChildren.apply(h[0],i):(h.children().detach(),h.append(s(i))),s(t.nTableWrapper).toggleClass("dt-empty-footer",0===s("tr",t.nTFoot).length),Zt(t,"aoDrawCallback","draw",[t],!0),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}else Dt(t,!1)}function dt(t,e,n){var r=t.oFeatures,i=r.bSort,a=r.bFilter;void 0!==n&&!0!==n||(i&&zt(t),a?bt(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice()),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,ht(t),t._drawHold=!1}function pt(t){var e=t.oLanguage,n=e.sZeroRecords,r=te(t);return t.iDraw<1&&"ssp"===r||t.iDraw<=1&&"ajax"===r?n=e.sLoadingRecords:e.sEmptyTable&&0===t.fnRecordsTotal()&&(n=e.sEmptyTable),s("<tr/>").append(s("<td />",{colSpan:z(t),class:t.oClasses.empty.row}).html(n))[0]}function mt(t,e,n){var r={};s.each(e,(function(t,e){if(null!==e){var n=t.replace(/([A-Z])/g," $1").split(" ");r[n[0]]||(r[n[0]]={});var i=1===n.length?"full":n[1].toLowerCase(),a=r[n[0]],o=function(t,e){s.isPlainObject(e)?Object.keys(e).map((function(n){t.push({feature:n,opts:e[n]})})):t.push(e)};if(a[i]&&a[i].contents||(a[i]={contents:[]}),Array.isArray(e))for(var l=0;l<e.length;l++)o(a[i].contents,e[l]);else o(a[i].contents,e);Array.isArray(a[i].contents)||(a[i].contents=[a[i].contents])}}));var i=Object.keys(r).map((function(t){return 0!==t.indexOf(n)?null:{name:t,val:r[t]}})).filter((function(t){return null!==t}));i.sort((function(t,e){var n=1*t.name.replace(/[^0-9]/g,"");return 1*e.name.replace(/[^0-9]/g,"")-n})),"bottom"===n&&i.reverse();for(var a=[],o=0,l=i.length;o<l;o++)i[o].val.full&&(a.push({full:i[o].val.full}),gt(t,a[a.length-1]),delete i[o].val.full),Object.keys(i[o].val).length&&(a.push(i[o].val),gt(t,a[a.length-1]));return a}function gt(t,e){var n=function(e,n){return r.features[e]||qt(t,0,"Unknown feature: "+e),r.features[e].apply(this,[t,n])};s.each(e,(function(r){!function(r){for(var i=e[r].contents,a=0,o=i.length;a<o;a++)if(i[a])if("string"==typeof i[a])i[a]=n(i[a],null);else if(s.isPlainObject(i[a]))i[a]=n(i[a].feature,i[a].opts);else if("function"==typeof i[a].node)i[a]=i[a].node(t);else if("function"==typeof i[a]){var l=i[a](t);i[a]="function"==typeof l.node?l.node():l}}(r)}))}function vt(t,e,n){var r,i,a,o,l,c,u,f,h,d,p=t.aoColumns,m=s(e).children("tr"),g=e&&"thead"===e.nodeName.toLowerCase(),v=[],_=function(t,e,n){for(var r=t[e];r[n];)n++;return n};for(a=0,c=m.length;a<c;a++)v.push([]);for(a=0,c=m.length;a<c;a++)for(i=(r=m[a]).firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){var y=[];if(f=(f=1*i.getAttribute("colspan"))&&0!==f&&1!==f?f:1,h=(h=1*i.getAttribute("rowspan"))&&0!==h&&1!==h?h:1,u=_(v,a,0),d=1===f,n){if(d){O(t,u,s(i).data());var x=p[u],b=i.getAttribute("width")||null,w=i.style.width.match(/width:\s*(\d+[pxem%]+)/);w&&(b=w[1]),x.sWidthOrig=x.sWidth||b,g?(null===x.sTitle||x.autoTitle||(i.innerHTML=x.sTitle),!x.sTitle&&d&&(x.sTitle=i.innerHTML.replace(/<.*?>/g,""),x.autoTitle=!0)):x.footer&&(i.innerHTML=x.footer),x.ariaTitle||(x.ariaTitle=s(i).attr("aria-label")||x.sTitle),x.className&&s(i).addClass(x.className)}0===s("span.dt-column-title",i).length&&s("<span>").addClass("dt-column-title").append(i.childNodes).appendTo(i),g&&0===s("span.dt-column-order",i).length&&s("<span>").addClass("dt-column-order").appendTo(i)}for(l=0;l<f;l++){for(o=0;o<h;o++)v[a+o][u+l]={cell:i,unique:d},v[a+o].row=r;y.push(u+l)}i.setAttribute("data-dt-column",A(y).join(","))}i=i.nextSibling}return v}function _t(t,e,n){var r,i=t.ajax,a=t.oInstance,o=function(e){var r=t.jqXHR?t.jqXHR.status:null;(null===e||"number"==typeof r&&204==r)&&yt(t,e={},[]);var i=e.error||e.sError;i&&qt(t,0,i),t.json=e,Zt(t,null,"xhr",[t,e,t.jqXHR],!0),n(e)};if(s.isPlainObject(i)&&i.data){var c="function"==typeof(r=i.data)?r(e,t):r;e="function"==typeof r&&c?c:s.extend(!0,e,c),delete i.data}var u={url:"string"==typeof i?i:"",data:e,success:o,dataType:"json",cache:!1,type:t.sServerMethod,error:function(e,n){-1===Zt(t,null,"xhr",[t,null,t.jqXHR],!0).indexOf(!0)&&("parsererror"==n?qt(t,0,"Invalid JSON response",1):4===e.readyState&&qt(t,0,"Ajax error",7)),Dt(t,!1)}};if(s.isPlainObject(i)&&s.extend(u,i),t.oAjaxData=e,Zt(t,null,"preXhr",[t,e,u],!0),"function"==typeof i)t.jqXHR=i.call(a,e,o,t);else if(""===i.url){var f={};l.util.set(i.dataSrc)(f,[]),o(f)}else t.jqXHR=s.ajax(u),r&&(i.data=r)}function yt(t,e,n){var r="data";if(s.isPlainObject(t.ajax)&&void 0!==t.ajax.dataSrc){var i=t.ajax.dataSrc;"string"==typeof i||"function"==typeof i?r=i:void 0!==i.data&&(r=i.data)}if(!n)return"data"===r?e.aaData||e[r]:""!==r?tt(r)(e):e;et(r)(e,n)}function xt(t,e,n){var r=s.isPlainObject(t.ajax)?t.ajax.dataSrc:null;if(r&&r[e])return tt(r[e])(n);var i="";return"draw"===e?i="sEcho":"recordsTotal"===e?i="iTotalRecords":"recordsFiltered"===e&&(i="iTotalDisplayRecords"),void 0!==n[i]?n[i]:n[e]}function bt(t,e){var n=t.aoPreSearchCols;if(V(t),"ssp"!=te(t)){!function(t){for(var e,n,r,i,a,o=t.aoColumns,s=t.aoData,l=0;l<s.length;l++)if(s[l]&&!(a=s[l])._aFilterData){for(r=[],e=0,n=o.length;e<n;e++)o[e].bSearchable?(null===(i=Y(t,l,e,"filter"))&&(i=""),"string"!=typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(St.innerHTML=i,i=Tt?St.textContent:St.innerText),i.replace&&(i=i.replace(/[\r\n\u2028]/g,"")),r.push(i);a._aFilterData=r,a._sFilterRow=r.join("  "),!0}}(t),t.aiDisplay=t.aiDisplayMaster.slice(),wt(t.aiDisplay,t,e.search,e),s.each(t.searchFixed,(function(e,n){wt(t.aiDisplay,t,n,{})}));for(var r=0;r<n.length;r++){var i=n[r];wt(t.aiDisplay,t,i.search,i,r),s.each(t.aoColumns[r].searchFixed,(function(e,n){wt(t.aiDisplay,t,n,{},r)}))}!function(t){for(var e,n,r=l.ext.search,i=t.aiDisplay,a=0,o=r.length;a<o;a++){for(var s=[],c=0,u=i.length;c<u;c++)n=i[c],e=t.aoData[n],r[a](t,e._aFilterData,n,e._aData,c)&&s.push(n);i.length=0,i.push.apply(i,s)}}(t)}t.bFiltered=!0,Zt(t,null,"search",[t])}function wt(t,e,n,r,i){if(""!==n)for(var a=0,o="function"==typeof n?n:null,l=n instanceof RegExp?n:o?null:function(t,e){var n=[],r=s.extend({},{boundary:!1,caseInsensitive:!0,exact:!1,regex:!1,smart:!0},e);if("string"!=typeof t&&(t=t.toString()),t=E(t),r.exact)return new RegExp("^"+Mt(t)+"$",r.caseInsensitive?"i":"");if(t=r.regex?t:Mt(t),r.smart){var i=(t.match(/!?["\u201C][^"\u201D]+["\u201D]|[^ ]+/g)||[""]).map((function(t){var e,r=!1;return"!"===t.charAt(0)&&(r=!0,t=t.substring(1)),'"'===t.charAt(0)?(e=t.match(/^"(.*)"$/),t=e?e[1]:t):"â"===t.charAt(0)&&(e=t.match(/^\u201C(.*)\u201D$/),t=e?e[1]:t),r&&(t.length>1&&n.push("(?!"+t+")"),t=""),t.replace('"',"")})),a=n.length?n.join(""):"",o=r.boundary?"\\b":"";t="^(?=.*?"+o+i.join(")(?=.*?"+o)+")("+a+".)*$"}return new RegExp(t,r.caseInsensitive?"i":"")}(n,r);a<t.length;){var c=e.aoData[t[a]],u=void 0===i?c._sFilterRow:c._aFilterData[i];(o&&!o(u,c._aData,t[a],i)||l&&!l.test(u))&&(t.splice(a,1),a--),a++}}var Mt=l.util.escapeRegex,St=s("<div>")[0],Tt=void 0!==St.textContent;function Et(t){var e,n=t.iInitDisplayStart;if(t.bInitialised){ct(t,"header"),ct(t,"footer"),ft(t,t.aoHeader),ft(t,t.aoFooter),function(t){var e=t.oClasses,n=s(t.nTable),r=s("<div/>").attr({id:t.sTableId+"_wrapper",class:e.container}).insertBefore(n);if(t.nTableWrapper=r[0],t.sDom)!function(t,e,n){for(var r,i,a,o,c,u=e.match(/(".*?")|('.*?')|./g),f=0;f<u.length;f++){if(r=null,"<"==(i=u[f])){if(a=s("<div/>"),"'"==(o=u[f+1])[0]||'"'==o[0]){var h,d="";if(-1!=(c=o.replace(/['"]/g,"")).indexOf(".")){var p=c.split(".");d=p[0],h=p[1]}else"#"==c[0]?d=c:h=c;a.attr("id",d.substring(1)).addClass(h),f++}n.append(a),n=a}else">"==i?n=n.parent():"t"==i?r=Pt(t):l.ext.feature.forEach((function(e){i==e.cFeature&&(r=e.fnInit(t))}));r&&n.append(r)}}(t,t.sDom,r);else{var i=mt(t,t.layout,"top"),a=mt(t,t.layout,"bottom"),o=Jt(t,"layout");i.forEach((function(e){o(t,r,e)})),o(t,r,{full:{table:!0,contents:[Pt(t)]}}),a.forEach((function(e){o(t,r,e)}))}!function(t){var e=t.nTable;if(t.oFeatures.bProcessing){var n=s("<div/>",{id:t.sTableId+"_processing",class:t.oClasses.processing.container,role:"status"}).html(t.oLanguage.sProcessing).append("<div><div></div><div></div><div></div><div></div></div>").insertBefore(e);s(e).on("processing.dt.DT",(function(t,e,r){n.css("display",r?"block":"none")}))}}(t)}(t),function(t){var e=t.nTHead,n=e.querySelectorAll("tr"),r=t.bSortCellsTop,i=':not([data-dt-order="disable"]):not([data-dt-order="icon-only"])';!0===r?e=n[0]:!1===r&&(e=n[n.length-1]),Ot(t,e,e===t.nTHead?"tr"+i+" th"+i+", tr"+i+" td"+i:"th"+i+", td"+i);var a=[];kt(t,a,t.aaSorting),t.aaSorting=a}(t),Ut(t),Dt(t,!0),Zt(t,null,"preInit",[t],!0),dt(t);var r=te(t);"ssp"!=r&&("ajax"==r?_t(t,{},(function(r){var i=yt(t,r);for(e=0;e<i.length;e++)X(t,i[e]);t.iInitDisplayStart=n,dt(t),Dt(t,!1),At(t)})):(At(t),Dt(t,!1)))}else setTimeout((function(){Et(t)}),200)}function At(t){if(!t._bInitComplete){var e=[t,t.json];t._bInitComplete=!0,F(t),Zt(t,null,"plugin-init",e,!0),Zt(t,"aoInitComplete","init",e,!0)}}function Ct(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Qt(t),Zt(t,null,"length",[t,n])}function Rt(t,e,n){var r=t._iDisplayStart,i=t._iDisplayLength,a=t.fnRecordsDisplay();if(0===a||-1===i)r=0;else if("number"==typeof e)(r=e*i)>a&&(r=0);else if("first"==e)r=0;else if("previous"==e)(r=i>=0?r-i:0)<0&&(r=0);else if("next"==e)r+i<a&&(r+=i);else if("last"==e)r=Math.floor((a-1)/i)*i;else{if("ellipsis"===e)return;qt(t,0,"Unknown paging action: "+e,5)}var o=t._iDisplayStart!==r;return t._iDisplayStart=r,Zt(t,null,o?"page":"page-nc",[t]),o&&n&&ht(t),o}function Dt(t,e){Zt(t,null,"processing",[t,e])}function Pt(t){var e=s(t.nTable),n=t.oScroll;if(""===n.sX&&""===n.sY)return t.nTable;var r=n.sX,i=n.sY,a=t.oClasses.scrolling,o=t.captionNode,l=o?o._captionSide:null,c=s(e[0].cloneNode(!1)),u=s(e[0].cloneNode(!1)),f=e.children("tfoot"),h="<div/>",d=function(t){return t?It(t):null};f.length||(f=null);var p=s(h,{class:a.container}).append(s(h,{class:a.header.self}).css({overflow:"hidden",position:"relative",border:0,width:r?d(r):"100%"}).append(s(h,{class:a.header.inner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?o:null).append(e.children("thead"))))).append(s(h,{class:a.body}).css({position:"relative",overflow:"auto",width:d(r)}).append(e));f&&p.append(s(h,{class:a.footer.self}).css({overflow:"hidden",border:0,width:r?d(r):"100%"}).append(s(h,{class:a.footer.inner}).append(u.removeAttr("id").css("margin-left",0).append("bottom"===l?o:null).append(e.children("tfoot")))));var m=p.children(),g=m[0],v=m[1],_=f?m[2]:null;return s(v).on("scroll.DT",(function(){var t=this.scrollLeft;g.scrollLeft=t,f&&(_.scrollLeft=t)})),s("th, td",g).on("focus",(function(){var t=g.scrollLeft;v.scrollLeft=t,f&&(v.scrollLeft=t)})),s(v).css("max-height",i),n.bCollapse||s(v).css("height",i),t.nScrollHead=g,t.nScrollBody=v,t.nScrollFoot=_,t.aoDrawCallback.push(Lt),p[0]}function Lt(t){var e,n,r=t.oScroll.iBarWidth,i=s(t.nScrollHead).children("div"),a=i.children("table"),o=t.nScrollBody,l=s(o),c=s(t.nScrollFoot).children("div"),u=c.children("table"),f=s(t.nTHead),h=s(t.nTable),d=t.nTFoot&&s("th, td",t.nTFoot).length?s(t.nTFoot):null,p=t.oBrowser,m=o.scrollHeight>o.clientHeight;if(t.scrollBarVis!==m&&void 0!==t.scrollBarVis)return t.scrollBarVis=m,void F(t);if(t.scrollBarVis=m,h.children("thead, tfoot").remove(),(e=f.clone().prependTo(h)).find("th, td").removeAttr("tabindex"),e.find("[id]").removeAttr("id"),d&&(n=d.clone().prependTo(h)).find("[id]").removeAttr("id"),t.aiDisplay.length){var g=h.find("tbody tr").eq(0).find("th, td").map((function(){return s(this).outerWidth()}));s("col",t.colgroup).each((function(t){this.style.width.replace("px","")!==g[t]&&(this.style.width=g[t]+"px")}))}a.find("colgroup").remove(),a.append(t.colgroup.clone()),d&&(u.find("colgroup").remove(),u.append(t.colgroup.clone())),s("th, td",e).each((function(){s(this.childNodes).wrapAll('<div class="dt-scroll-sizing">')})),d&&s("th, td",n).each((function(){s(this.childNodes).wrapAll('<div class="dt-scroll-sizing">')}));var v=Math.floor(h.height())>o.clientHeight||"scroll"==l.css("overflow-y"),_="padding"+(p.bScrollbarLeft?"Left":"Right"),y=h.outerWidth();a.css("width",It(y)),i.css("width",It(y)).css(_,v?r+"px":"0px"),d&&(u.css("width",It(y)),c.css("width",It(y)).css(_,v?r+"px":"0px")),h.children("colgroup").prependTo(h),l.trigger("scroll"),!t.bSorted&&!t.bFiltered||t._drawHold||(o.scrollTop=0)}function Nt(t,e){var n=t.aoColumns[e];if(!n.maxLenString){for(var r,i="",a=-1,o=0,s=t.aiDisplayMaster.length;o<s;o++){var l=ot(t,t.aiDisplayMaster[o])[e],c=l&&"object"==typeof l&&l.nodeType?l.innerHTML:l+"";c=c.replace(/id=".*?"/g,"").replace(/name=".*?"/g,""),(r=S(c).replace(/&nbsp;/g," ")).length>a&&(i=c,a=r.length)}n.maxLenString=i}return n.maxLenString}function It(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Ut(t){var e=t.aoColumns;for(t.colgroup.empty(),Pe=0;Pe<e.length;Pe++)e[Pe].bVisible&&t.colgroup.append(e[Pe].colEl)}function Ot(t,e,n,r,i){Yt(e,n,(function(e){var n=!1,a=void 0===r?q(e.target):[r];if(a.length){for(var o=0,s=a.length;o<s&&(!1!==Ht(t,a[o],o,e.shiftKey)&&(n=!0),1!==t.aaSorting.length||""!==t.aaSorting[0][1]);o++);n&&(Dt(t,!0),setTimeout((function(){zt(t),Ft(t,t.aiDisplay),Dt(t,!1),dt(t,!1,!1),i&&i()}),0))}}))}function Ft(t,e){var n,r=t.aiDisplayMaster,i={},a={};for(n=0;n<r.length;n++)i[r[n]]=n;for(n=0;n<e.length;n++)a[e[n]]=i[e[n]];e.sort((function(t,e){return a[t]-a[e]}))}function kt(t,e,n){var r=function(n){if(s.isPlainObject(n)){if(void 0!==n.idx)e.push([n.idx,n.dir]);else if(n.name){var r=x(t.aoColumns,"sName").indexOf(n.name);-1!==r&&e.push([r,n.dir])}}else e.push(n)};if(s.isPlainObject(n))r(n);else if(n.length&&"number"==typeof n[0])r(n);else if(n.length)for(var i=0;i<n.length;i++)r(n[i])}function Bt(t){var e,n,r,i,a,o,c,u=[],f=l.ext.type.order,h=t.aoColumns,d=t.aaSortingFixed,p=s.isPlainObject(d),m=[];if(!t.oFeatures.bSort)return u;for(Array.isArray(d)&&kt(t,m,d),p&&d.pre&&kt(t,m,d.pre),kt(t,m,t.aaSorting),p&&d.post&&kt(t,m,d.post),e=0;e<m.length;e++)if(h[c=m[e][0]])for(n=0,r=(i=h[c].aDataSort).length;n<r;n++)o=h[a=i[n]].sType||"string",void 0===m[e]._idx&&(m[e]._idx=h[a].asSorting.indexOf(m[e][1])),m[e][1]&&u.push({src:c,col:a,dir:m[e][1],index:m[e]._idx,type:o,formatter:f[o+"-pre"],sorter:f[o+"-"+m[e][1]]});return u}function zt(t,e,n){var r,i,a,o,s=[],c=l.ext.type.order,u=t.aoData,f=t.aiDisplayMaster;if(V(t),void 0!==e){var h=t.aoColumns[e];o=[{src:e,col:e,dir:n,index:0,type:h.sType,formatter:c[h.sType+"-pre"],sorter:c[h.sType+"-"+n]}],f=f.slice()}else o=Bt(t);for(r=0,i=o.length;r<i;r++)Gt(t,o[r].col);if("ssp"!=te(t)&&0!==o.length){for(r=0,a=f.length;r<a;r++)s[r]=r;o.length&&"desc"===o[0].dir&&s.reverse(),f.sort((function(t,e){var n,r,i,a,l,c=o.length,f=u[t]._aSortData,h=u[e]._aSortData;for(i=0;i<c;i++)if(n=f[(l=o[i]).col],r=h[l.col],l.sorter){if(0!==(a=l.sorter(n,r)))return a}else if(0!=(a=n<r?-1:n>r?1:0))return"asc"===l.dir?a:-a;return(n=s[t])<(r=s[e])?-1:n>r?1:0}))}else 0===o.length&&f.sort((function(t,e){return t<e?-1:t>e?1:0}));return void 0===e&&(t.bSorted=!0,Zt(t,null,"order",[t,o])),f}function Ht(t,e,n,r){var i,a=t.aoColumns[e],o=t.aaSorting,s=a.asSorting,l=function(t,e){var n=t._idx;return void 0===n&&(n=s.indexOf(t[1])),n+1<s.length?n+1:e?null:0};if(!a.bSortable)return!1;if("number"==typeof o[0]&&(o=t.aaSorting=[o]),(r||n)&&t.oFeatures.bSortMulti){var c=x(o,"0").indexOf(e);-1!==c?(null===(i=l(o[c],!0))&&1===o.length&&(i=0),null===i?o.splice(c,1):(o[c][1]=s[i],o[c]._idx=i)):r?(o.push([e,s[0],0]),o[o.length-1]._idx=0):(o.push([e,o[0][1],0]),o[o.length-1]._idx=0)}else o.length&&o[0][0]==e?(i=l(o[0]),o.length=1,o[0][1]=s[i],o[0]._idx=i):(o.length=0,o.push([e,s[0]]),o[0]._idx=0)}function Vt(t){var e,n,r,i=t.aLastSort,a=t.oClasses.order.position,o=Bt(t),l=t.oFeatures;if(l.bSort&&l.bSortClasses){for(e=0,n=i.length;e<n;e++)r=i[e].src,s(x(t.aoData,"anCells",r)).removeClass(a+(e<2?e+1:3));for(e=0,n=o.length;e<n;e++)r=o[e].src,s(x(t.aoData,"anCells",r)).addClass(a+(e<2?e+1:3))}t.aLastSort=o}function Gt(t,e){var n,r,i,a=t.aoColumns[e],o=l.ext.order[a.sSortDataType];o&&(n=o.call(t.oInstance,t,e,B(t,e)));for(var s=l.ext.type.order[a.sType+"-pre"],c=t.aoData,u=0;u<c.length;u++)c[u]&&((r=c[u])._aSortData||(r._aSortData=[]),r._aSortData[e]&&!o||(i=o?n[u]:Y(t,u,e,"sort"),r._aSortData[e]=s?s(i,t):i))}function Wt(t){if(!t._bLoadingState){var e={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:s.extend(!0,[],t.aaSorting),search:s.extend({},t.oPreviousSearch),columns:t.aoColumns.map((function(e,n){return{visible:e.bVisible,search:s.extend({},t.aoPreSearchCols[n])}}))};t.oSavedState=e,Zt(t,"aoStateSaveParams","stateSaveParams",[t,e]),t.oFeatures.bStateSave&&!t.bDestroying&&t.fnStateSaveCallback.call(t.oInstance,t,e)}}function jt(t,e,n){var r,i,a=t.aoColumns;t._bLoadingState=!0;var o=t._bInitComplete?new l.Api(t):null;if(!e||!e.time)return t._bLoadingState=!1,void n();var c=t.iStateDuration;if(c>0&&e.time<+new Date-1e3*c)return t._bLoadingState=!1,void n();if(-1!==Zt(t,"aoStateLoadParams","stateLoadParams",[t,e]).indexOf(!1))return t._bLoadingState=!1,void n();if(e.columns&&a.length!==e.columns.length)return t._bLoadingState=!1,void n();if(t.oLoadedState=s.extend(!0,{},e),Zt(t,null,"stateLoadInit",[t,e],!0),void 0!==e.length&&(o?o.page.len(e.length):t._iDisplayLength=e.length),void 0!==e.start&&(null===o?(t._iDisplayStart=e.start,t.iInitDisplayStart=e.start):Rt(t,e.start/t._iDisplayLength)),void 0!==e.order&&(t.aaSorting=[],s.each(e.order,(function(e,n){t.aaSorting.push(n[0]>=a.length?[0,n[1]]:n)}))),void 0!==e.search&&s.extend(t.oPreviousSearch,e.search),e.columns){for(r=0,i=e.columns.length;r<i;r++){var u=e.columns[r];void 0!==u.visible&&(o?o.column(r).visible(u.visible,!1):a[r].bVisible=u.visible),void 0!==u.search&&s.extend(t.aoPreSearchCols[r],u.search)}o&&o.columns.adjust()}t._bLoadingState=!1,Zt(t,"aoStateLoaded","stateLoaded",[t,e]),n()}function qt(t,e,n,r){if(n="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+n,r&&(n+=". For more information about this error, please see https://datatables.net/tn/"+r),e)window.console&&console.log&&console.log(n);else{var i=l.ext,a=i.sErrMode||i.errMode;if(t&&Zt(t,null,"dt-error",[t,r,n],!0),"alert"==a)alert(n);else{if("throw"==a)throw new Error(n);"function"==typeof a&&a(t,r,n)}}}function Xt(t,e,n,r){Array.isArray(n)?s.each(n,(function(n,r){Array.isArray(r)?Xt(t,e,r[0],r[1]):Xt(t,e,r)})):(void 0===r&&(r=n),void 0!==e[n]&&(t[r]=e[n]))}function $t(t,e,n){var r;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r=e[i],s.isPlainObject(r)?(s.isPlainObject(t[i])||(t[i]={}),s.extend(!0,t[i],r)):n&&"data"!==i&&"aaData"!==i&&Array.isArray(r)?t[i]=r.slice():t[i]=r);return t}function Yt(t,e,n){s(t).on("click.DT",e,(function(t){n(t)})).on("keypress.DT",e,(function(t){13===t.which&&(t.preventDefault(),n(t))})).on("selectstart.DT",e,(function(){return!1}))}function Kt(t,e,n){n&&t[e].push(n)}function Zt(t,e,n,r,i){var a=[];if(e&&(a=t[e].slice().reverse().map((function(e){return e.apply(t.oInstance,r)}))),null!==n){var o=s.Event(n+".dt"),l=s(t.nTable);o.dt=t.api,l[i?"trigger":"triggerHandler"](o,r),i&&0===l.parents("body").length&&s("body").trigger(o,r),a.push(o.result)}return a}function Qt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),r=t._iDisplayLength;e>=n&&(e=n-r),e-=e%r,(-1===r||e<0)&&(e=0),t._iDisplayStart=e}function Jt(t,e){var n=t.renderer,r=l.ext.renderer[e];return s.isPlainObject(n)&&n[e]?r[n[e]]||r._:"string"==typeof n&&r[n]||r._}function te(t){return t.oFeatures.bServerSide?"ssp":t.ajax?"ajax":"dom"}function ee(t,e,n){var r=t.fnFormatNumber,i=t._iDisplayStart+1,a=t._iDisplayLength,o=t.fnRecordsDisplay(),s=t.fnRecordsTotal(),l=-1===a;return e.replace(/_START_/g,r.call(t,i)).replace(/_END_/g,r.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,r.call(t,s)).replace(/_TOTAL_/g,r.call(t,o)).replace(/_PAGE_/g,r.call(t,l?1:Math.ceil(i/a))).replace(/_PAGES_/g,r.call(t,l?1:Math.ceil(o/a))).replace(/_ENTRIES_/g,t.api.i18n("entries","",n)).replace(/_ENTRIES-MAX_/g,t.api.i18n("entries","",s)).replace(/_ENTRIES-TOTAL_/g,t.api.i18n("entries","",o))}var ne=[],re=Array.prototype;function ie(t,e,n){return function(){var r=e.apply(t||this,arguments);return i.extend(r,r,n.methodExt),r}}function ae(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n].name===e)return t[n];return null}i=function(t,e){if(!(this instanceof i))return new i(t,e);var n=[],r=function(t){var e=function(t){var e,n,r=l.settings,i=x(r,"nTable");return t?t.nTable&&t.oFeatures?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?-1!==(e=i.indexOf(t))?[r[e]]:null:t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=s(t).get():t instanceof s&&(n=t.get()),n?r.filter((function(t,e){return n.includes(i[e])})):void 0):[]}(t);e&&n.push.apply(n,e)};if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)r(t[a]);else r(t);this.context=n.length>1?A(n):n,e&&this.push.apply(this,e),this.selector={rows:null,cols:null,opts:null},i.extend(this,this,ne)},l.Api=i,s.extend(i.prototype,{any:function(){return 0!==this.count()},context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new i(e[t],this[t]):null},filter:function(t){var e=re.filter.call(this,t,this);return new i(this.context,e)},flatten:function(){var t=[];return new i(this.context,t.concat.apply(t,this.toArray()))},get:function(t){return this[t]},join:re.join,includes:function(t){return-1!==this.indexOf(t)},indexOf:re.indexOf,iterator:function(t,e,n,r){var a,o,s,l,c,u,f,h,d=[],p=this.context,m=this.selector;for("string"==typeof t&&(r=n,n=e,e=t,t=!1),o=0,s=p.length;o<s;o++){var g=new i(p[o]);if("table"===e)void 0!==(a=n.call(g,p[o],o))&&d.push(a);else if("columns"===e||"rows"===e)void 0!==(a=n.call(g,p[o],this[o],o))&&d.push(a);else if("every"===e||"column"===e||"column-rows"===e||"row"===e||"cell"===e)for(f=this[o],"column-rows"===e&&(u=fe(p[o],m.opts)),l=0,c=f.length;l<c;l++)h=f[l],void 0!==(a="cell"===e?n.call(g,p[o],h.row,h.column,o,l):n.call(g,p[o],h,o,l,u))&&d.push(a)}if(d.length||r){var v=new i(p,t?d.concat.apply([],d):d),_=v.selector;return _.rows=m.rows,_.cols=m.cols,_.opts=m.opts,v}return this},lastIndexOf:re.lastIndexOf,length:0,map:function(t){var e=re.map.call(this,t,this);return new i(this.context,e)},pluck:function(t){var e=l.util.get(t);return this.map((function(t){return e(t)}))},pop:re.pop,push:re.push,reduce:re.reduce,reduceRight:re.reduceRight,reverse:re.reverse,selector:null,shift:re.shift,slice:function(){return new i(this.context,this)},sort:re.sort,splice:re.splice,toArray:function(){return re.slice.call(this)},to$:function(){return s(this)},toJQuery:function(){return s(this)},unique:function(){return new i(this.context,A(this.toArray()))},unshift:re.unshift}),window.__apiStruct=ne,i.extend=function(t,e,n){var r,a,o;if(n.length&&e&&(e instanceof i||e.__dt_wrapper))for(r=0,a=n.length;r<a;r++)e[(o=n[r]).name]="function"===o.type?ie(t,o.val,o):"object"===o.type?{}:o.val,e[o.name].__dt_wrapper=!0,i.extend(t,e[o.name],o.propExt)},i.register=a=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.register(t[n],e);else{var a,o,l,c,u=t.split("."),f=ne;for(a=0,o=u.length;a<o;a++){var h=ae(f,l=(c=-1!==u[a].indexOf("()"))?u[a].replace("()",""):u[a]);h||(h={name:l,val:{},methodExt:[],propExt:[],type:"object"},f.push(h)),a===o-1?(h.val=e,h.type="function"==typeof e?"function":s.isPlainObject(e)?"object":"other"):f=c?h.methodExt:h.propExt}}},i.registerPlural=o=function(t,e,n){i.register(t,n),i.register(e,(function(){var t=n.apply(this,arguments);return t===this?this:t instanceof i?t.length?Array.isArray(t[0])?new i(t.context,t[0]):t[0]:void 0:t}))};var oe=function(t,e){if(Array.isArray(t)){var n=[];return t.forEach((function(t){var r=oe(t,e);n.push.apply(n,r)})),n.filter((function(t){return t}))}if("number"==typeof t)return[e[t]];var r=e.map((function(t){return t.nTable}));return s(r).filter(t).map((function(){var t=r.indexOf(this);return e[t]})).toArray()};a("tables()",(function(t){return null!=t?new i(oe(t,this.context)):this})),a("table()",(function(t){var e=this.tables(t),n=e.context;return n.length?new i(n[0]):e})),[["nodes","node","nTable"],["body","body","nTBody"],["header","header","nTHead"],["footer","footer","nTFoot"]].forEach((function(t){o("tables()."+t[0]+"()","table()."+t[1]+"()",(function(){return this.iterator("table",(function(e){return e[t[2]]}),1)}))})),[["header","aoHeader"],["footer","aoFooter"]].forEach((function(t){a("table()."+t[0]+".structure()",(function(e){var n=this.columns(e).indexes().flatten(),r=this.context[0];return ut(r,r[t[1]],n)}))})),o("tables().containers()","table().container()",(function(){return this.iterator("table",(function(t){return t.nTableWrapper}),1)})),a("tables().every()",(function(t){var e=this;return this.iterator("table",(function(n,r){t.call(e.table(r),r)}))})),a("caption()",(function(t,e){var n=this.context;if(void 0===t){var r=n[0].captionNode;return r&&n.length?r.innerHTML:null}return this.iterator("table",(function(n){var r=s(n.nTable),i=s(n.captionNode),a=s(n.nTableWrapper);if(i.length||(i=s("<caption/>").html(t),n.captionNode=i[0],e||(r.prepend(i),e=i.css("caption-side"))),i.html(t),e&&(i.css("caption-side",e),i[0]._captionSide=e),a.find("div.dataTables_scroll").length){var o="top"===e?"Head":"Foot";a.find("div.dataTables_scroll"+o+" table").prepend(i)}else r.prepend(i)}),1)})),a("caption.node()",(function(){var t=this.context;return t.length?t[0].captionNode:null})),a("draw()",(function(t){return this.iterator("table",(function(e){"page"===t?ht(e):("string"==typeof t&&(t="full-hold"!==t),dt(e,!1===t))}))})),a("page()",(function(t){return void 0===t?this.page.info().page:this.iterator("table",(function(e){Rt(e,t)}))})),a("page.info()",(function(){if(0!==this.context.length){var t=this.context[0],e=t._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,r=t.fnRecordsDisplay(),i=-1===n;return{page:i?0:Math.floor(e/n),pages:i?1:Math.ceil(r/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:r,serverSide:"ssp"===te(t)}}})),a("page.len()",(function(t){return void 0===t?0!==this.context.length?this.context[0]._iDisplayLength:void 0:this.iterator("table",(function(e){Ct(e,t)}))}));var se=function(t,e,n){if(n){var r=new i(t);r.one("draw",(function(){n(r.ajax.json())}))}if("ssp"==te(t))dt(t,e);else{Dt(t,!0);var a=t.jqXHR;a&&4!==a.readyState&&a.abort(),_t(t,{},(function(n){rt(t);for(var r=yt(t,n),i=0,a=r.length;i<a;i++)X(t,r[i]);dt(t,e),At(t),Dt(t,!1)}))}};a("ajax.json()",(function(){var t=this.context;if(t.length>0)return t[0].json})),a("ajax.params()",(function(){var t=this.context;if(t.length>0)return t[0].oAjaxData})),a("ajax.reload()",(function(t,e){return this.iterator("table",(function(n){se(n,!1===e,t)}))})),a("ajax.url()",(function(t){var e=this.context;if(void 0===t){if(0===e.length)return;return e=e[0],s.isPlainObject(e.ajax)?e.ajax.url:e.ajax}return this.iterator("table",(function(e){s.isPlainObject(e.ajax)?e.ajax.url=t:e.ajax=t}))})),a("ajax.url().load()",(function(t,e){return this.iterator("table",(function(n){se(n,!1===e,t)}))}));var le=function(t,e,n,i,a){var o,s,l,c,u,f,h=[],d=typeof e;for(e&&"string"!==d&&"function"!==d&&void 0!==e.length||(e=[e]),l=0,c=e.length;l<c;l++)for(u=0,f=(s=e[l]&&e[l].split&&!e[l].match(/[[(:]/)?e[l].split(","):[e[l]]).length;u<f;u++)(o=(o=n("string"==typeof s[u]?s[u].trim():s[u])).filter((function(t){return null!=t})))&&o.length&&(h=h.concat(o));var p=r.selector[t];if(p.length)for(l=0,c=p.length;l<c;l++)h=p[l](i,a,h);return A(h)},ce=function(t){return t||(t={}),t.filter&&void 0===t.search&&(t.search=t.filter),s.extend({search:"none",order:"current",page:"all"},t)},ue=function(t){let e=new i(t.context[0]);return t.length&&e.push(t[0]),e.selector=t.selector,e.length&&e[0].length>1&&e[0].splice(1),e},fe=function(t,e){var n,r,i,a=[],o=t.aiDisplay,s=t.aiDisplayMaster,l=e.search,c=e.order,u=e.page;if("ssp"==te(t))return"removed"===l?[]:w(0,s.length);if("current"==u)for(n=t._iDisplayStart,r=t.fnDisplayEnd();n<r;n++)a.push(o[n]);else if("current"==c||"applied"==c){if("none"==l)a=s.slice();else if("applied"==l)a=o.slice();else if("removed"==l){var f={};for(n=0,r=o.length;n<r;n++)f[o[n]]=null;s.forEach((function(t){Object.prototype.hasOwnProperty.call(f,t)||a.push(t)}))}}else if("index"==c||"original"==c)for(n=0,r=t.aoData.length;n<r;n++)t.aoData[n]&&("none"==l||-1===(i=o.indexOf(n))&&"removed"==l||i>=0&&"applied"==l)&&a.push(n);else if("number"==typeof c){var h=zt(t,c,"asc");if("none"===l)a=h;else for(n=0;n<h.length;n++)(-1===(i=o.indexOf(h[n]))&&"removed"==l||i>=0&&"applied"==l)&&a.push(h[n])}return a};a("rows()",(function(t,e){void 0===t?t="":s.isPlainObject(t)&&(e=t,t=""),e=ce(e);var n=this.iterator("table",(function(n){return function(t,e,n){var r,i=le("row",e,(function(e){var i=g(e),a=t.aoData;if(null!==i&&!n)return[i];if(r||(r=fe(t,n)),null!==i&&-1!==r.indexOf(i))return[i];if(null==e||""===e)return r;if("function"==typeof e)return r.map((function(t){var n=a[t];return e(t,n._aData,n.nTr)?t:null}));if(e.nodeName){var o=e._DT_RowIndex,l=e._DT_CellIndex;if(void 0!==o)return a[o]&&a[o].nTr===e?[o]:[];if(l)return a[l.row]&&a[l.row].nTr===e.parentNode?[l.row]:[];var c=s(e).closest("*[data-dt-row]");return c.length?[c.data("dt-row")]:[]}if("string"==typeof e&&"#"===e.charAt(0)){var u=t.aIds[e.replace(/^#/,"")];if(void 0!==u)return[u.idx]}var f=M(b(t.aoData,r,"nTr"));return s(f).filter(e).map((function(){return this._DT_RowIndex})).toArray()}),t,n);return"current"!==n.order&&"applied"!==n.order||Ft(t,i),i}(n,t,e)}),1);return n.selector.rows=t,n.selector.opts=e,n})),a("rows().nodes()",(function(){return this.iterator("row",(function(t,e){return t.aoData[e].nTr||void 0}),1)})),a("rows().data()",(function(){return this.iterator(!0,"rows",(function(t,e){return b(t.aoData,e,"_aData")}),1)})),o("rows().cache()","row().cache()",(function(t){return this.iterator("row",(function(e,n){var r=e.aoData[n];return"search"===t?r._aFilterData:r._aSortData}),1)})),o("rows().invalidate()","row().invalidate()",(function(t){return this.iterator("row",(function(e,n){it(e,n,t)}))})),o("rows().indexes()","row().index()",(function(){return this.iterator("row",(function(t,e){return e}),1)})),o("rows().ids()","row().id()",(function(t){for(var e=[],n=this.context,r=0,a=n.length;r<a;r++)for(var o=0,s=this[r].length;o<s;o++){var l=n[r].rowIdFn(n[r].aoData[this[r][o]]._aData);e.push((!0===t?"#":"")+l)}return new i(n,e)})),o("rows().remove()","row().remove()",(function(){return this.iterator("row",(function(t,e){var n=t.aoData,r=n[e],i=t.aiDisplayMaster.indexOf(e);-1!==i&&t.aiDisplayMaster.splice(i,1),-1!==(i=t.aiDisplay.indexOf(e))&&t.aiDisplay.splice(i,1),t._iRecordsDisplay>0&&t._iRecordsDisplay--,Qt(t);var a=t.rowIdFn(r._aData);void 0!==a&&delete t.aIds[a],n[e]=null})),this})),a("rows.add()",(function(t){var e=this.iterator("table",(function(e){var n,r,i,a=[];for(r=0,i=t.length;r<i;r++)(n=t[r]).nodeName&&"TR"===n.nodeName.toUpperCase()?a.push($(e,n)[0]):a.push(X(e,n));return a}),1),n=this.rows(-1);return n.pop(),n.push.apply(n,e),n})),a("row()",(function(t,e){return ue(this.rows(t,e))})),a("row().data()",(function(t){var e=this.context;if(void 0===t)return e.length&&this.length&&this[0].length?e[0].aoData[this[0]]._aData:void 0;var n=e[0].aoData[this[0]];return n._aData=t,Array.isArray(t)&&n.nTr&&n.nTr.id&&et(e[0].rowId)(t,n.nTr.id),it(e[0],this[0],"data"),this})),a("row().node()",(function(){var t=this.context;return t.length&&this.length&&this[0].length&&t[0].aoData[this[0]].nTr||null})),a("row.add()",(function(t){t instanceof s&&t.length&&(t=t[0]);var e=this.iterator("table",(function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?$(e,t)[0]:X(e,t)}));return this.row(e[0])})),s(document).on("plugin-init.dt",(function(t,e){var n=new i(e);n.on("stateSaveParams.DT",(function(t,e,n){for(var r=e.rowIdFn,i=e.aiDisplayMaster,a=[],o=0;o<i.length;o++){var s=i[o],l=e.aoData[s];l._detailsShow&&a.push("#"+r(l._aData))}n.childRows=a})),n.on("stateLoaded.DT",(function(t,e,r){he(n,r)})),he(n,n.state.loaded())}));var he=function(t,e){e&&e.childRows&&t.rows(e.childRows.map((function(t){return t.replace(/:/g,"\\:")}))).every((function(){Zt(t.settings()[0],null,"requestChild",[this])}))},de=l.util.throttle((function(t){Wt(t[0])}),500),pe=function(t,e){var n=t.context;if(n.length){var r=n[0].aoData[void 0!==e?e:t[0]];r&&r._details&&(r._details.remove(),r._detailsShow=void 0,r._details=void 0,s(r.nTr).removeClass("dt-hasChild"),de(n))}},me=function(t,e){var n=t.context;if(n.length&&t.length){var r=n[0].aoData[t[0]];r._details&&(r._detailsShow=e,e?(r._details.insertAfter(r.nTr),s(r.nTr).addClass("dt-hasChild")):(r._details.detach(),s(r.nTr).removeClass("dt-hasChild")),Zt(n[0],null,"childRow",[e,t.row(t[0])]),ge(n[0]),de(n))}},ge=function(t){var e=new i(t),n=".dt.DT_details",r="draw"+n,a="column-sizing"+n,o="destroy"+n,l=t.aoData;e.off(r+" "+a+" "+o),x(l,"_details").length>0&&(e.on(r,(function(n,r){t===r&&e.rows({page:"current"}).eq(0).each((function(t){var e=l[t];e._detailsShow&&e._details.insertAfter(e.nTr)}))})),e.on(a,(function(e,n){if(t===n)for(var r,i=z(n),a=0,o=l.length;a<o;a++)(r=l[a])&&r._details&&r._details.each((function(){var t=s(this).children("td");1==t.length&&t.attr("colspan",i)}))})),e.on(o,(function(n,r){if(t===r)for(var i=0,a=l.length;i<a;i++)l[i]&&l[i]._details&&pe(e,i)})))},ve="row().child",_e=ve+"()";a(_e,(function(t,e){var n=this.context;return void 0===t?n.length&&this.length&&n[0].aoData[this[0]]?n[0].aoData[this[0]]._details:void 0:(!0===t?this.child.show():!1===t?pe(this):n.length&&this.length&&function(t,e,n,r){var i=[],a=function(n,r){if(Array.isArray(n)||n instanceof s)for(var o=0,l=n.length;o<l;o++)a(n[o],r);else if(n.nodeName&&"tr"===n.nodeName.toLowerCase())n.setAttribute("data-dt-row",e.idx),i.push(n);else{var c=s("<tr><td></td></tr>").attr("data-dt-row",e.idx).addClass(r);s("td",c).addClass(r).html(n)[0].colSpan=z(t),i.push(c[0])}};a(n,r),e._details&&e._details.detach(),e._details=s(i),e._detailsShow&&e._details.insertAfter(e.nTr)}(n[0],n[0].aoData[this[0]],t,e),this)})),a([ve+".show()",_e+".show()"],(function(){return me(this,!0),this})),a([ve+".hide()",_e+".hide()"],(function(){return me(this,!1),this})),a([ve+".remove()",_e+".remove()"],(function(){return pe(this),this})),a(ve+".isShown()",(function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1}));var ye=/^([^:]+):(name|title|visIdx|visible)$/,xe=function(t,e,n,r,i,a){for(var o=[],s=0,l=i.length;s<l;s++)o.push(Y(t,i[s],e,a));return o};a("columns()",(function(t,e){void 0===t?t="":s.isPlainObject(t)&&(e=t,t=""),e=ce(e);var n=this.iterator("table",(function(n){return function(t,e,n){var r=t.aoColumns,i=x(r,"sName"),a=x(r,"sTitle"),o=l.util.get("[].[].cell")(t.aoHeader),c=A(C([],o));return le("column",e,(function(e){var o=g(e);if(""===e)return w(r.length);if(null!==o)return[o>=0?o:r.length+o];if("function"==typeof e){var l=fe(t,n);return r.map((function(n,r){return e(r,xe(t,r,0,0,l))?r:null}))}var u="string"==typeof e?e.match(ye):"";if(u)switch(u[2]){case"visIdx":case"visible":var f=parseInt(u[1],10);if(f<0){var h=r.map((function(t,e){return t.bVisible?e:null}));return[h[h.length+f]]}return[k(t,f)];case"name":return i.map((function(t,e){return t===u[1]?e:null}));case"title":return a.map((function(t,e){return t===u[1]?e:null}));default:return[]}if(e.nodeName&&e._DT_CellIndex)return[e._DT_CellIndex.column];var d=s(c).filter(e).map((function(){return q(this)})).toArray();if(d.length||!e.nodeName)return d;var p=s(e).closest("*[data-dt-column]");return p.length?[p.data("dt-column")]:[]}),t,n)}(n,t,e)}),1);return n.selector.cols=t,n.selector.opts=e,n})),o("columns().header()","column().header()",(function(t){return this.iterator("column",(function(e,n){var r=e.aoHeader;return r[void 0!==t?t:e.bSortCellsTop?0:r.length-1][n].cell}),1)})),o("columns().footer()","column().footer()",(function(t){return this.iterator("column",(function(e,n){return e.aoFooter.length?e.aoFooter[void 0!==t?t:0][n].cell:null}),1)})),o("columns().data()","column().data()",(function(){return this.iterator("column-rows",xe,1)})),o("columns().render()","column().render()",(function(t){return this.iterator("column-rows",(function(e,n,r,i,a){return xe(e,n,0,0,a,t)}),1)})),o("columns().dataSrc()","column().dataSrc()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e].mData}),1)})),o("columns().cache()","column().cache()",(function(t){return this.iterator("column-rows",(function(e,n,r,i,a){return b(e.aoData,a,"search"===t?"_aFilterData":"_aSortData",n)}),1)})),o("columns().init()","column().init()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e]}),1)})),o("columns().nodes()","column().nodes()",(function(){return this.iterator("column-rows",(function(t,e,n,r,i){return b(t.aoData,i,"anCells",e)}),1)})),o("columns().titles()","column().title()",(function(t,e){return this.iterator("column",(function(n,r){"number"==typeof t&&(e=t,t=void 0);var i=s("span.dt-column-title",this.column(r).header(e));return void 0!==t?(i.html(t),this):i.html()}),1)})),o("columns().types()","column().type()",(function(){return this.iterator("column",(function(t,e){var n=t.aoColumns[e].sType;return n||V(t),n}),1)})),o("columns().visible()","column().visible()",(function(t,e){var n=this,r=[],i=this.iterator("column",(function(e,n){if(void 0===t)return e.aoColumns[n].bVisible;(function(t,e,n){var r,i,a,o,l=t.aoColumns,c=l[e],u=t.aoData;if(void 0===n)return c.bVisible;if(c.bVisible===n)return!1;if(n){var f=x(l,"bVisible").indexOf(!0,e+1);for(i=0,a=u.length;i<a;i++)u[i]&&(o=u[i].nTr,r=u[i].anCells,o&&o.insertBefore(r[e],r[f]||null))}else s(x(t.aoData,"anCells",e)).detach();return c.bVisible=n,Ut(t),!0})(e,n,t)&&r.push(n)}));return void 0!==t&&this.iterator("table",(function(i){ft(i,i.aoHeader),ft(i,i.aoFooter),i.aiDisplay.length||s(i.nTBody).find("td[colspan]").attr("colspan",z(i)),Wt(i),n.iterator("column",(function(n,i){r.includes(i)&&Zt(n,null,"column-visibility",[n,i,t,e])})),r.length&&(void 0===e||e)&&n.columns.adjust()})),i})),o("columns().widths()","column().width()",(function(){var t=this.columns(":visible").count(),e=s("<tr>").html("<td>"+Array(t).join("</td><td>")+"</td>");s(this.table().body()).append(e);var n=e.children().map((function(){return s(this).outerWidth()}));return e.remove(),this.iterator("column",(function(t,e){var r=B(t,e);return null!==r?n[r]:0}),1)})),o("columns().indexes()","column().index()",(function(t){return this.iterator("column",(function(e,n){return"visible"===t?B(e,n):n}),1)})),a("columns.adjust()",(function(){return this.iterator("table",(function(t){F(t)}),1)})),a("column.index()",(function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return k(n,e);if("fromData"===t||"toVisible"===t)return B(n,e)}})),a("column()",(function(t,e){return ue(this.columns(t,e))})),a("cells()",(function(t,e,n){if(s.isPlainObject(t)&&(void 0===t.row?(n=t,t=null):(n=e,e=null)),s.isPlainObject(e)&&(n=e,e=null),null==e)return this.iterator("table",(function(e){return function(t,e,n){var r,i,a,o,l,c,u,f=t.aoData,h=fe(t,n),d=M(b(f,h,"anCells")),p=s(C([],d)),m=t.aoColumns.length;return le("cell",e,(function(e){var n="function"==typeof e;if(null==e||n){for(i=[],a=0,o=h.length;a<o;a++)for(r=h[a],l=0;l<m;l++)c={row:r,column:l},n?(u=f[r],e(c,Y(t,r,l),u.anCells?u.anCells[l]:null)&&i.push(c)):i.push(c);return i}if(s.isPlainObject(e))return void 0!==e.column&&void 0!==e.row&&-1!==h.indexOf(e.row)?[e]:[];var d=p.filter(e).map((function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}})).toArray();return d.length||!e.nodeName?d:(u=s(e).closest("*[data-dt-row]")).length?[{row:u.data("dt-row"),column:u.data("dt-column")}]:[]}),t,n)}(e,t,ce(n))}));var r,i,a,o,l=n?{page:n.page,order:n.order,search:n.search}:{},c=this.columns(e,l),u=this.rows(t,l),f=this.iterator("table",(function(t,e){var n=[];for(r=0,i=u[e].length;r<i;r++)for(a=0,o=c[e].length;a<o;a++)n.push({row:u[e][r],column:c[e][a]});return n}),1),h=n&&n.selected?this.cells(f,n):f;return s.extend(h.selector,{cols:e,rows:t,opts:n}),h})),o("cells().nodes()","cell().node()",(function(){return this.iterator("cell",(function(t,e,n){var r=t.aoData[e];return r&&r.anCells?r.anCells[n]:void 0}),1)})),a("cells().data()",(function(){return this.iterator("cell",(function(t,e,n){return Y(t,e,n)}),1)})),o("cells().cache()","cell().cache()",(function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",(function(e,n,r){return e.aoData[n][t][r]}),1)})),o("cells().render()","cell().render()",(function(t){return this.iterator("cell",(function(e,n,r){return Y(e,n,r,t)}),1)})),o("cells().indexes()","cell().index()",(function(){return this.iterator("cell",(function(t,e,n){return{row:e,column:n,columnVisible:B(t,n)}}),1)})),o("cells().invalidate()","cell().invalidate()",(function(t){return this.iterator("cell",(function(e,n,r){it(e,n,t,r)}))})),a("cell()",(function(t,e,n){return ue(this.cells(t,e,n))})),a("cell().data()",(function(t){var e,n,r,i,a,o,s=this.context,l=this[0];return void 0===t?s.length&&l.length?Y(s[0],l[0].row,l[0].column):void 0:(e=s[0],n=l[0].row,r=l[0].column,i=t,a=e.aoColumns[r],o=e.aoData[n]._aData,a.fnSetData(o,i,{settings:e,row:n,col:r}),it(s[0],l[0].row,"data",l[0].column),this)})),a("order()",(function(t,e){var n=this.context,r=Array.prototype.slice.call(arguments);return void 0===t?0!==n.length?n[0].aaSorting:void 0:("number"==typeof t?t=[[t,e]]:r.length>1&&(t=r),this.iterator("table",(function(e){e.aaSorting=Array.isArray(t)?t.slice():t})))})),a("order.listener()",(function(t,e,n){return this.iterator("table",(function(r){Ot(r,t,{},e,n)}))})),a("order.fixed()",(function(t){if(!t){var e=this.context,n=e.length?e[0].aaSortingFixed:void 0;return Array.isArray(n)?{pre:n}:n}return this.iterator("table",(function(e){e.aaSortingFixed=s.extend(!0,{},t)}))})),a(["columns().order()","column().order()"],(function(t){var e=this;return t?this.iterator("table",(function(n,r){n.aaSorting=e[r].map((function(e){return[e,t]}))})):this.iterator("column",(function(t,e){for(var n=Bt(t),r=0,i=n.length;r<i;r++)if(n[r].col===e)return n[r].dir;return null}),1)})),o("columns().orderable()","column().orderable()",(function(t){return this.iterator("column",(function(e,n){var r=e.aoColumns[n];return t?r.asSorting:r.bSortable}),1)})),a("processing()",(function(t){return this.iterator("table",(function(e){Dt(e,t)}))})),a("search()",(function(t,e,n,r){var i=this.context;return void 0===t?0!==i.length?i[0].oPreviousSearch.search:void 0:this.iterator("table",(function(i){i.oFeatures.bFilter&&bt(i,"object"==typeof e?s.extend(i.oPreviousSearch,e,{search:t}):s.extend(i.oPreviousSearch,{search:t,regex:null!==e&&e,smart:null===n||n,caseInsensitive:null===r||r}))}))})),a("search.fixed()",(function(t,e){var n=this.iterator(!0,"table",(function(n){var r=n.searchFixed;return t?void 0===e?r[t]:(null===e?delete r[t]:r[t]=e,this):Object.keys(r)}));return void 0!==t&&void 0===e?n[0]:n})),o("columns().search()","column().search()",(function(t,e,n,r){return this.iterator("column",(function(i,a){var o=i.aoPreSearchCols;if(void 0===t)return o[a].search;i.oFeatures.bFilter&&("object"==typeof e?s.extend(o[a],e,{search:t}):s.extend(o[a],{search:t,regex:null!==e&&e,smart:null===n||n,caseInsensitive:null===r||r}),bt(i,i.oPreviousSearch))}))})),a(["columns().search.fixed()","column().search.fixed()"],(function(t,e){var n=this.iterator(!0,"column",(function(n,r){var i=n.aoColumns[r].searchFixed;return t?void 0===e?i[t]:(null===e?delete i[t]:i[t]=e,this):Object.keys(i)}));return void 0!==t&&void 0===e?n[0]:n})),a("state()",(function(t,e){if(!t)return this.context.length?this.context[0].oSavedState:null;var n=s.extend(!0,{},t);return this.iterator("table",(function(t){!1!==e&&(n.time=+new Date+100),jt(t,n,(function(){}))}))})),a("state.clear()",(function(){return this.iterator("table",(function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})}))})),a("state.loaded()",(function(){return this.context.length?this.context[0].oLoadedState:null})),a("state.save()",(function(){return this.iterator("table",(function(t){Wt(t)}))})),l.use=function(t,e){"lib"===e||t.fn?s=t:"win"==e||t.document?(window=t,document=t.document):"datetime"!==e&&"DateTime"!==t.type||(l.DateTime=t)},l.factory=function(t,e){var n=!1;return t&&t.document&&(window=t,document=t.document),e&&e.fn&&e.fn.jquery&&(s=e,n=!0),n},l.versionCheck=function(t,e){for(var n,r,i=e?e.split("."):l.version.split("."),a=t.split("."),o=0,s=a.length;o<s;o++)if((n=parseInt(i[o],10)||0)!==(r=parseInt(a[o],10)||0))return n>r;return!0},l.isDataTable=function(t){var e=s(t).get(0),n=!1;return t instanceof l.Api||(s.each(l.settings,(function(t,r){var i=r.nScrollHead?s("table",r.nScrollHead)[0]:null,a=r.nScrollFoot?s("table",r.nScrollFoot)[0]:null;r.nTable!==e&&i!==e&&a!==e||(n=!0)})),n)},l.tables=function(t){var e=!1;s.isPlainObject(t)&&(e=t.api,t=t.visible);var n=l.settings.filter((function(e){return!!(!t||t&&s(e.nTable).is(":visible"))})).map((function(t){return t.nTable}));return e?new i(n):n},l.camelToHungarian=P,a("$()",(function(t,e){var n=this.rows(e).nodes(),r=s(n);return s([].concat(r.filter(t).toArray(),r.find(t).toArray()))})),s.each(["on","one","off"],(function(t,e){a(e+"()",(function(){var t=Array.prototype.slice.call(arguments);t[0]=t[0].split(/\s/).map((function(t){return t.match(/\.dt\b/)?t:t+".dt"})).join(" ");var n=s(this.tables().nodes());return n[e].apply(n,t),this}))})),a("clear()",(function(){return this.iterator("table",(function(t){rt(t)}))})),a("error()",(function(t){return this.iterator("table",(function(e){qt(e,0,t)}))})),a("settings()",(function(){return new i(this.context,this.context)})),a("init()",(function(){var t=this.context;return t.length?t[0].oInit:null})),a("data()",(function(){return this.iterator("table",(function(t){return x(t.aoData,"_aData")})).flatten()})),a("trigger()",(function(t,e,n){return this.iterator("table",(function(r){return Zt(r,null,t,e,n)})).flatten()})),a("ready()",(function(t){var e=this.context;return t?this.tables().every((function(){this.context[0]._bInitComplete?t.call(this):this.on("init",(function(){t.call(this)}))})):e.length?e[0]._bInitComplete||!1:null})),a("destroy()",(function(t){return t=t||!1,this.iterator("table",(function(e){var n=e.oClasses,r=e.nTable,a=e.nTBody,o=e.nTHead,c=e.nTFoot,u=s(r),f=s(a),h=s(e.nTableWrapper),d=e.aoData.map((function(t){return t?t.nTr:null})),p=n.order;e.bDestroying=!0,Zt(e,"aoDestroyCallback","destroy",[e],!0),t||new i(e).columns().visible(!0),h.off(".DT").find(":not(tbody *)").off(".DT"),s(window).off(".DT-"+e.sInstance),r!=o.parentNode&&(u.children("thead").detach(),u.append(o)),c&&r!=c.parentNode&&(u.children("tfoot").detach(),u.append(c)),e.colgroup.remove(),e.aaSorting=[],e.aaSortingFixed=[],Vt(e),s("th, td",o).removeClass(p.canAsc+" "+p.canDesc+" "+p.isAsc+" "+p.isDesc).css("width",""),f.children().detach(),f.append(d);var m=e.nTableWrapper.parentNode,g=e.nTableWrapper.nextSibling,v=t?"remove":"detach";u[v](),h[v](),!t&&m&&(m.insertBefore(r,g),u.css("width",e.sDestroyWidth).removeClass(n.table));var _=l.settings.indexOf(e);-1!==_&&l.settings.splice(_,1)}))})),s.each(["column","row","cell"],(function(t,e){a(e+"s().every()",(function(t){var n,r=this.selector.opts,i=this,a=0;return this.iterator("every",(function(o,s,l){n=i[e](s,r),"cell"===e?t.call(n,n[0][0].row,n[0][0].column,l,a):t.call(n,s,l,a),a++}))}))})),a("i18n()",(function(t,e,n){var r=this.context[0],i=tt(t)(r.oLanguage);return void 0===i&&(i=e),s.isPlainObject(i)&&(i=void 0!==n&&void 0!==i[n]?i[n]:i._),"string"==typeof i?i.replace("%d",n):i})),l.version="2.0.3",l.settings=[],l.models={},l.models.oSearch={caseInsensitive:!0,search:"",regex:!1,smart:!0,return:!1},l.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,src:null,idx:-1,displayData:null},l.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null,maxLenString:null,searchFixed:null},l.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],bAutoWidth:!0,bDeferRender:!0,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:null,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(t){}},fnStateSaveParams:null,iStateDuration:7200,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{orderable:": Activate to sort",orderableReverse:": Activate to invert sorting",orderableRemove:": Activate to remove sorting",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}},oPaginate:{sFirst:"Â«",sLast:"Â»",sNext:"âº",sPrevious:"â¹"},entries:{_:"entries",1:"entry"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ _ENTRIES-TOTAL_",sInfoEmpty:"Showing 0 to 0 of 0 _ENTRIES-TOTAL_",sInfoFiltered:"(filtered from _MAX_ total _ENTRIES-MAX_)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"_MENU_ _ENTRIES_ per page",sLoadingRecords:"Loading...",sProcessing:"",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:s.extend({},l.models.oSearch),layout:{topStart:"pageLength",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},sDom:null,searchDelay:null,sPaginationType:"full_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId",caption:null},D(l.defaults),l.defaults.column={aDataSort:null,iDataSort:-1,ariaTitle:"",asSorting:["asc","desc",""],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},D(l.defaults.column),l.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:!0,bLengthChange:!0,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollbarLeft:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},searchFixed:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",pagingControls:0,iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,bAjaxDataGet:!0,jqXHR:null,json:void 0,oAjaxData:void 0,sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==te(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==te(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,r=this.aiDisplay.length,i=this.oFeatures,a=i.bPaginate;return i.bServerSide?!1===a||-1===t?e+r:Math.min(e+t,this._iRecordsDisplay):!a||n>r||-1===t?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null,caption:"",captionNode:null,colgroup:null},l.ext=r={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],features:{},search:[],selector:{cell:[],column:[],row:[]},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{className:{},detect:[],render:{},search:{},order:{}},_unique:0,fnVersionCheck:l.fnVersionCheck,iApiIndex:0,sVersion:l.version},s.extend(r,{afnFiltering:r.search,aTypes:r.type.detect,ofnSearch:r.type.search,oSort:r.type.order,afnSortData:r.order,aoFeatures:r.feature,oStdClasses:r.classes,oPagination:r.pager}),s.extend(l.ext.classes,{container:"dt-container",empty:{row:"dt-empty"},info:{container:"dt-info"},length:{container:"dt-length",select:"dt-input"},order:{canAsc:"dt-orderable-asc",canDesc:"dt-orderable-desc",isAsc:"dt-ordering-asc",isDesc:"dt-ordering-desc",none:"dt-orderable-none",position:"sorting_"},processing:{container:"dt-processing"},scrolling:{body:"dt-scroll-body",container:"dt-scroll",footer:{self:"dt-scroll-foot",inner:"dt-scroll-footInner"},header:{self:"dt-scroll-head",inner:"dt-scroll-headInner"}},search:{container:"dt-search",input:"dt-input"},table:"dataTable",tbody:{cell:"",row:""},thead:{cell:"",row:""},tfoot:{cell:"",row:""},paging:{active:"current",button:"dt-paging-button",container:"dt-paging",disabled:"disabled"}});var be=l.ext.pager;s.extend(be,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(){return["numbers"]},simple_numbers:function(){return["previous","numbers","next"]},full_numbers:function(){return["first","previous","numbers","next","last"]},first_last:function(){return["first","last"]},first_last_numbers:function(){return["first","numbers","last"]},_numbers:Fe,numbers_length:7}),s.extend(!0,l.ext.renderer,{pagingButton:{_:function(t,e,n,r,i){var a,o=t.oClasses.paging,l=[o.button];return r&&l.push(o.active),i&&l.push(o.disabled),{display:a="ellipsis"===e?s('<span class="ellipsis"></span>').html(n)[0]:s("<button>",{class:l.join(" "),role:"link",type:"button"}).html(n),clicker:a}}},pagingContainer:{_:function(t,e){return e}}});var we=function(t,e){return function(n){return m(n)||"string"!=typeof n||(n=n.replace(u," "),t&&(n=S(n)),e&&(n=E(n,!1))),n}};function Me(t){return t.replace(/[\W]/g,"_")}function Se(t,e,n,r,i){return window.moment?t[e](i):window.luxon?t[n](i):r?t[r](i):t}var Te=!1;function Ee(t,e,n){var r;if(window.moment){if(!(r=window.moment.utc(t,e,n,!0)).isValid())return null}else if(window.luxon){if(!(r=e&&"string"==typeof t?window.luxon.DateTime.fromFormat(t,e):window.luxon.DateTime.fromISO(t)).isValid)return null;r.setLocale(n)}else e?(Te||alert("DataTables warning: Formatted date without Moment.js or Luxon - https://datatables.net/tn/17"),Te=!0):r=new Date(t);return r}function Ae(t){return function(e,n,r,i){0===arguments.length?(r="en",n=null,e=null):1===arguments.length?(r="en",n=e,e=null):2===arguments.length&&(r=n,n=e,e=null);var a="datetime"+(n?"-"+Me(n):"");return l.ext.type.order[a]||l.type(a,{detect:function(t){return t===a&&a},order:{pre:function(t){return t.valueOf()}},className:"dt-right"}),function(o,s){if(null==o)if("--now"===i){var l=new Date;o=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()))}else o="";if("type"===s)return a;if(""===o)return"sort"!==s?"":Ee("0000-01-01 00:00:00",null,r);if(null!==n&&e===n&&"sort"!==s&&"type"!==s&&!(o instanceof Date))return o;var c=Ee(o,e,r);if(null===c)return o;if("sort"===s)return c;var u=null===n?Se(c,"toDate","toJSDate","")[t]():Se(c,"format","toFormat","toISOString",n);return"display"===s?T(u):u}}}var Ce=",",Re=".";if(void 0!==window.Intl)try{for(var De=(new Intl.NumberFormat).formatToParts(100000.1),Pe=0;Pe<De.length;Pe++)"group"===De[Pe].type?Ce=De[Pe].value:"decimal"===De[Pe].type&&(Re=De[Pe].value)}catch(t){}l.datetime=function(t,e){var n="datetime-detect-"+Me(t);e||(e="en"),l.ext.type.order[n]||l.type(n,{detect:function(r){var i=Ee(r,t,e);return!(""!==r&&!i)&&n},order:{pre:function(n){return Ee(n,t,e)||0}},className:"dt-right"})},l.render={date:Ae("toLocaleDateString"),datetime:Ae("toLocaleString"),time:Ae("toLocaleTimeString"),number:function(t,e,n,r,i){return null==t&&(t=Ce),null==e&&(e=Re),{display:function(a){if("number"!=typeof a&&"string"!=typeof a)return a;if(""===a||null===a)return a;var o=a<0?"-":"",s=parseFloat(a),l=Math.abs(s);if(l>=1e11||l<1e-4&&0!==l){var c=s.toExponential(n).split(/e\+?/);return c[0]+" x 10<sup>"+c[1]+"</sup>"}if(isNaN(s))return T(a);s=s.toFixed(n),a=Math.abs(s);var u=parseInt(a,10),f=n?e+(a-u).toFixed(n).substring(2):"";return 0===u&&0===parseFloat(f)&&(o=""),o+(r||"")+u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+f+(i||"")}}},text:function(){return{display:T,filter:T}}};var Le=l.ext.type;l.type=function(t,e,n){if(!e)return{className:Le.className[t],detect:Le.detect.find((function(e){return e.name===t})),order:{pre:Le.order[t+"-pre"],asc:Le.order[t+"-asc"],desc:Le.order[t+"-desc"]},render:Le.render[t],search:Le.search[t]};var r=function(e,n){Le[e][t]=n},i=function(e){var n=function(n,r){var i=e(n,r);return!0===i?t:i};Object.defineProperty(n,"name",{value:t});var r=Le.detect.findIndex((function(e){return e.name===t}));-1===r?Le.detect.unshift(n):Le.detect.splice(r,1,n)},a=function(e){Le.order[t+"-pre"]=e.pre,Le.order[t+"-asc"]=e.asc,Le.order[t+"-desc"]=e.desc};void 0===n&&(n=e,e=null),"className"===e?r("className",n):"detect"===e?i(n):"order"===e?a(n):"render"===e?r("render",n):"search"===e?r("search",n):e||(n.className&&r("className",n.className),void 0!==n.detect&&i(n.detect),n.order&&a(n.order),void 0!==n.render&&r("render",n.render),void 0!==n.search&&r("search",n.search))},l.types=function(){return Le.detect.map((function(t){return t.name}))},l.type("string",{detect:function(){return"string"},order:{pre:function(t){return m(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""}},search:we(!1,!0)}),l.type("html",{detect:function(t){return m(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null},order:{pre:function(t){return m(t)?"":t.replace?S(t).trim().toLowerCase():t+""}},search:we(!0,!0)}),l.type("date",{className:"dt-type-date",detect:function(t){if(t&&!(t instanceof Date)&&!h.test(t))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||m(t)?"date":null},order:{pre:function(t){var e=Date.parse(t);return isNaN(e)?-1/0:e}}}),l.type("html-num-fmt",{className:"dt-type-numeric",detect:function(t,e){var n=e.oLanguage.sDecimal;return y(t,n,!0)?"html-num-fmt":null},order:{pre:function(t,e){var n=e.oLanguage.sDecimal;return Ne(t,n,f,p)}},search:we(!0,!0)}),l.type("html-num",{className:"dt-type-numeric",detect:function(t,e){var n=e.oLanguage.sDecimal;return y(t,n)?"html-num":null},order:{pre:function(t,e){var n=e.oLanguage.sDecimal;return Ne(t,n,f)}},search:we(!0,!0)}),l.type("num-fmt",{className:"dt-type-numeric",detect:function(t,e){var n=e.oLanguage.sDecimal;return _(t,n,!0)?"num-fmt":null},order:{pre:function(t,e){var n=e.oLanguage.sDecimal;return Ne(t,n,p)}}}),l.type("num",{className:"dt-type-numeric",detect:function(t,e){var n=e.oLanguage.sDecimal;return _(t,n)?"num":null},order:{pre:function(t,e){var n=e.oLanguage.sDecimal;return Ne(t,n)}}});var Ne=function(t,e,n,r){if(0!==t&&(!t||"-"===t))return-1/0;var i=typeof t;return"number"===i||"bigint"===i?t:(e&&(t=v(t,e)),t.replace&&(n&&(t=t.replace(n,"")),r&&(t=t.replace(r,""))),1*t)};s.extend(!0,l.ext.renderer,{footer:{_:function(t,e,n){e.addClass(n.tfoot.cell)}},header:{_:function(t,e,n){e.addClass(n.thead.cell),t.oFeatures.bSort||e.addClass(n.order.none);var r=t.bSortCellsTop,i=e.closest("thead").find("tr"),a=e.parent().index();"disable"===e.attr("data-dt-order")||"disable"===e.parent().attr("data-dt-order")||!0===r&&0!==a||!1===r&&a!==i.length-1||s(t.nTable).on("order.dt.DT",(function(r,i,a){if(t===i){var o=n.order,s=i.api.columns(e),l=t.aoColumns[s.flatten()[0]],c=s.orderable().includes(!0),u="",f=s.indexes(),h=s.orderable(!0).flatten(),d=","+a.map((function(t){return t.col})).join(",")+",";e.removeClass(o.isAsc+" "+o.isDesc).toggleClass(o.none,!c).toggleClass(o.canAsc,c&&h.includes("asc")).toggleClass(o.canDesc,c&&h.includes("desc"));var p=d.indexOf(","+f.toArray().join(",")+",");if(-1!==p){var m=s.order();e.addClass(m.includes("asc")?o.isAsc:""+m.includes("desc")?o.isDesc:"")}if(0===p){var g=a[0],v=l.asSorting;e.attr("aria-sort","asc"===g.dir?"ascending":"descending"),u=v[g.index+1]?"Reverse":"Remove"}else e.removeAttr("aria-sort");e.attr("aria-label",c?l.ariaTitle+i.api.i18n("oAria.orderable"+u):l.ariaTitle),c&&(e.find(".dt-column-title").attr("role","button"),e.attr("tabindex",0))}}))}},layout:{_:function(t,e,n){var r=s("<div/>").addClass("dt-layout-row").appendTo(e);s.each(n,(function(t,e){var n=e.table?"":"dt-"+t+" ";e.table&&r.addClass("dt-layout-table"),s("<div/>").attr({id:e.id||null,class:"dt-layout-cell "+n+(e.className||"")}).append(e.contents).appendTo(r)}))}}}),l.feature={},l.feature.register=function(t,e,n){l.ext.features[t]=e,n&&r.feature.push({cFeature:n,fnInit:e})},l.feature.register("info",(function(t,e){if(!t.oFeatures.bInfo)return null;var n=t.oLanguage,r=t.sTableId,i=s("<div/>",{class:t.oClasses.info.container});return e=s.extend({callback:n.fnInfoCallback,empty:n.sInfoEmpty,postfix:n.sInfoPostFix,search:n.sInfoFiltered,text:n.sInfo},e),t.aoDrawCallback.push((function(t){!function(t,e,n){var r=t._iDisplayStart+1,i=t.fnDisplayEnd(),a=t.fnRecordsTotal(),o=t.fnRecordsDisplay(),s=o?e.text:e.empty;o!==a&&(s+=" "+e.search),s=ee(t,s+=e.postfix),e.callback&&(s=e.callback.call(t.oInstance,t,r,i,a,o,s)),n.html(s),Zt(t,null,"info",[t,n[0],s])}(t,e,i)})),s("#"+r+"_info",t.nWrapper).length||(i.attr({"aria-live":"polite",id:r+"_info",role:"status"}),s(t.nTable).attr("aria-describedby",r+"_info")),i}),"i");var Ie=0;function Ue(t,e,n){if(t._bInitComplete){for(var r=l.ext.pager[n.type],i=t.oLanguage.oAria.paginate||{},a=t._iDisplayStart,o=t._iDisplayLength,c=t.fnRecordsDisplay(),u=-1===o,f=u?0:Math.ceil(a/o),h=u?1:Math.ceil(c/o),d=r().map((function(t){return"numbers"===t?Fe(f,h,n.numbers):t})).flat(),p=[],m=0;m<d.length;m++){var g=d[m],v=Oe(t,g,f,h),_=Jt(t,"pagingButton")(t,g,v.display,v.active,v.disabled);s(_.clicker).attr({"aria-controls":t.sTableId,"aria-disabled":v.disabled?"true":null,"aria-current":v.active?"page":null,"aria-label":i[g],"data-dt-idx":g,tabIndex:v.disabled?-1:t.iTabIndex}),"number"!=typeof g&&s(_.clicker).addClass(g),Yt(_.clicker,{action:g},(function(e){e.preventDefault(),Rt(t,e.data.action,!0)})),p.push(_.display)}var y=Jt(t,"pagingContainer")(t,p),x=e.find(document.activeElement).data("dt-idx");e.empty().append(y),void 0!==x&&e.find("[data-dt-idx="+x+"]").trigger("focus"),p.length&&n.numbers>1&&s(e).height()>=2*s(p[0]).outerHeight()-10&&Ue(t,e,s.extend({},n,{numbers:n.numbers-2}))}}function Oe(t,e,n,r){var i=t.oLanguage.oPaginate,a={display:"",active:!1,disabled:!1};switch(e){case"ellipsis":a.display="&#x2026;",a.disabled=!0;break;case"first":a.display=i.sFirst,0===n&&(a.disabled=!0);break;case"previous":a.display=i.sPrevious,0===n&&(a.disabled=!0);break;case"next":a.display=i.sNext,0!==r&&n!==r-1||(a.disabled=!0);break;case"last":a.display=i.sLast,0!==r&&n!==r-1||(a.disabled=!0);break;default:"number"==typeof e&&(a.display=t.fnFormatNumber(e+1),n===e&&(a.active=!0))}return a}function Fe(t,e,n){var r=[],i=Math.floor(n/2);return e<=n?r=w(0,e):1===n?r=[t]:3===n?t<=1?r=[0,1,"ellipsis"]:t>=e-2?(r=w(e-2,e)).unshift("ellipsis"):r=["ellipsis",t,"ellipsis"]:t<=i?(r=w(0,n-2)).push("ellipsis",e-1):t>=e-1-i?(r=w(e-(n-2),e)).unshift(0,"ellipsis"):((r=w(t-i+2,t+i-1)).push("ellipsis",e-1),r.unshift(0,"ellipsis")),r}l.feature.register("search",(function(t,e){if(!t.oFeatures.bFilter)return null;var n=t.oClasses.search,r=t.sTableId,i=t.oLanguage,a=t.oPreviousSearch,o='<input type="search" class="'+n.input+'"/>';-1===(e=s.extend({placeholder:i.sSearchPlaceholder,text:i.sSearch},e)).text.indexOf("_INPUT_")&&(e.text+="_INPUT_"),e.text=ee(t,e.text);var c=e.text.match(/_INPUT_$/),u=e.text.match(/^_INPUT_/),f=e.text.replace(/_INPUT_/,""),h="<label>"+e.text+"</label>";u?h="_INPUT_<label>"+f+"</label>":c&&(h="<label>"+f+"</label>_INPUT_");var d=s("<div>").addClass(n.container).append(h.replace(/_INPUT_/,o));d.find("label").attr("for","dt-search-"+Ie),d.find("input").attr("id","dt-search-"+Ie),Ie++;var p=function(e){var n=this.value;a.return&&"Enter"!==e.key||n!=a.search&&(a.search=n,bt(t,a),t._iDisplayStart=0,ht(t))},m=null!==t.searchDelay?t.searchDelay:0,g=s("input",d).val(a.search).attr("placeholder",e.placeholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",m?l.util.debounce(p,m):p).on("mouseup.DT",(function(t){setTimeout((function(){p.call(g[0],t)}),10)})).on("keypress.DT",(function(t){if(13==t.keyCode)return!1})).attr("aria-controls",r);return s(t.nTable).on("search.dt.DT",(function(e,n){t===n&&g[0]!==document.activeElement&&g.val("function"!=typeof a.search?a.search:"")})),d}),"f"),l.feature.register("paging",(function(t,e){if(!t.oFeatures.bPaginate)return null;e=s.extend({numbers:l.ext.pager.numbers_length,type:t.sPaginationType},e);var n=s("<div/>").addClass(t.oClasses.paging.container+" paging_"+e.type),r=function(){Ue(t,n,e)};return t.aoDrawCallback.push(r),s(t.nTable).on("column-sizing.dt.DT",r),n}),"p");var ke=0;l.feature.register("pageLength",(function(t,e){var n=t.oFeatures;if(!n.bPaginate||!n.bLengthChange)return null;e=s.extend({menu:t.aLengthMenu,text:t.oLanguage.sLengthMenu},e);var r,i=t.oClasses.length,a=t.sTableId,o=e.menu,l=[],c=[];if(Array.isArray(o[0]))l=o[0],c=o[1];else for(r=0;r<o.length;r++)s.isPlainObject(o[r])?(l.push(o[r].value),c.push(o[r].label)):(l.push(o[r]),c.push(o[r]));var u=e.text.match(/_MENU_$/),f=e.text.match(/^_MENU_/),h=e.text.replace(/_MENU_/,""),d="<label>"+e.text+"</label>";f?d="_MENU_<label>"+h+"</label>":u&&(d="<label>"+h+"</label>_MENU_");var p=s("<div/>").addClass(i.container).append(d.replace("_MENU_","<span></span>")),m=[];p.find("label")[0].childNodes.forEach((function(t){t.nodeType===Node.TEXT_NODE&&m.push({el:t,text:t.textContent})}));var g=function(e){m.forEach((function(n){n.el.textContent=ee(t,n.text,e)}))},v=s("<select/>",{name:a+"_length","aria-controls":a,class:i.select});for(r=0;r<l.length;r++)v[0][r]=new Option("number"==typeof c[r]?t.fnFormatNumber(c[r]):c[r],l[r]);return p.find("label").attr("for","dt-length-"+ke),v.attr("id","dt-length-"+ke),ke++,p.find("span").replaceWith(v),s("select",p).val(t._iDisplayLength).on("change.DT",(function(){Ct(t,s(this).val()),ht(t)})),s(t.nTable).on("length.dt.DT",(function(e,n,r){t===n&&(s("select",p).val(r),g(r))})),g(t._iDisplayLength),p}),"l"),s.fn.dataTable=l,l.$=s,s.fn.dataTableSettings=l.settings,s.fn.dataTableExt=l.ext,s.fn.DataTable=function(t){return s(this).dataTable(t).api()},s.each(l,(function(t,e){s.fn.DataTable[t]=e}))},9464:(t,e,n)=>{"use strict";n.d(e,{$EB:()=>h,$Yl:()=>O,$_I:()=>vt,$ei:()=>M,$p8:()=>io,A$4:()=>ai,AQS:()=>en,BH$:()=>fa,BKk:()=>Ii,BXX:()=>jt,B_h:()=>te,CMB:()=>It,CSG:()=>Sa,CVz:()=>Kt,CWW:()=>ye,Cfg:()=>pt,DXC:()=>ua,Dmk:()=>Rt,EZo:()=>m,EdD:()=>v,FFZ:()=>Be,FV:()=>tt,FXf:()=>x,Fn:()=>de,GJx:()=>ct,GWd:()=>Lt,Gwm:()=>W,H23:()=>pe,HIg:()=>Pt,HO_:()=>_e,HXV:()=>$t,HiM:()=>to,I9Y:()=>Qe,IE4:()=>Vt,IUQ:()=>Mn,Iit:()=>Pi,Jnc:()=>o,K52:()=>j,KDk:()=>Qt,KLL:()=>De,KRh:()=>$,Kef:()=>ge,Kwu:()=>g,Kzv:()=>Nt,LAk:()=>nt,LiQ:()=>A,LlO:()=>Ni,LoY:()=>mi,MW4:()=>oi,Mjd:()=>Q,Mmk:()=>cn,N5j:()=>Me,NTi:()=>p,Nex:()=>mo,Nt7:()=>P,Nz6:()=>Gt,O9p:()=>mr,ONl:()=>ga,OUM:()=>_t,Om:()=>lt,OuU:()=>R,PPD:()=>Zi,PTz:()=>Cn,Pq0:()=>Rn,Q1f:()=>Zr,QP0:()=>s,Qev:()=>Ge,Qrf:()=>re,RQf:()=>St,Riy:()=>Zt,RrE:()=>U,RyA:()=>c,S$4:()=>he,THS:()=>ii,Tap:()=>Wa,TdN:()=>He,TiK:()=>Ue,TkQ:()=>zt,U3G:()=>G,V3x:()=>Ct,V9B:()=>ei,VCu:()=>ya,VT0:()=>Ft,Vb5:()=>a,VxR:()=>Re,W9U:()=>me,WNZ:()=>i,Wdf:()=>ze,Wew:()=>Et,Wk7:()=>l,XG_:()=>ve,XIg:()=>d,XrR:()=>Y,Y9S:()=>Va,YJl:()=>_a,Yuy:()=>wt,Z58:()=>Wi,ZQM:()=>kt,Zcv:()=>$i,Zr2:()=>Ce,ZyN:()=>ro,_4j:()=>ba,_QJ:()=>oe,_Ut:()=>Li,a55:()=>qe,a5J:()=>ae,aEY:()=>N,aHM:()=>Ba,aJ8:()=>rt,aVO:()=>Ta,amv:()=>Le,b4q:()=>Vi,bC7:()=>ce,bCz:()=>_,bI3:()=>Se,bdM:()=>xa,bkx:()=>Mt,brA:()=>H,bw0:()=>q,c90:()=>Ht,cHt:()=>bt,caT:()=>X,czI:()=>ee,dYF:()=>An,dcC:()=>Ot,dwI:()=>Je,e0p:()=>F,eHc:()=>B,eaF:()=>Ai,eoi:()=>Oe,er$:()=>Ae,f4X:()=>E,fBL:()=>xt,g7M:()=>et,gJ2:()=>At,gO9:()=>y,gPd:()=>wn,gWB:()=>ke,ghU:()=>ut,hB5:()=>u,h_9:()=>ka,hdd:()=>D,hgQ:()=>I,hsX:()=>f,hxR:()=>ht,hy7:()=>it,iNn:()=>Ri,ie2:()=>C,imn:()=>ti,ix0:()=>Tt,jR7:()=>Wt,jej:()=>sn,jf0:()=>Ee,jzd:()=>Fe,k6Q:()=>qt,k6q:()=>mt,kO0:()=>Ie,kRr:()=>gt,kTW:()=>ft,kTp:()=>Xt,kn4:()=>ar,kyO:()=>Z,lGu:()=>z,lPF:()=>rn,lxW:()=>Di,lyL:()=>le,mcG:()=>on,mrM:()=>Qi,nNL:()=>J,nST:()=>b,nWS:()=>Tn,nZQ:()=>oo,o6l:()=>Gi,ojh:()=>S,ojs:()=>fe,ov9:()=>k,pBf:()=>Yt,pHI:()=>dt,paN:()=>Bt,ppV:()=>dn,psI:()=>ie,qBx:()=>Ma,qUd:()=>eo,qa3:()=>Jt,qad:()=>T,qq$:()=>nn,qtW:()=>si,r6x:()=>ao,rFo:()=>En,rSH:()=>ne,sPf:()=>r,tJf:()=>yt,tXL:()=>wa,uB5:()=>se,uV5:()=>st,ubm:()=>Bi,vim:()=>Ne,vyJ:()=>Te,wfO:()=>ot,wn6:()=>L,wrO:()=>Dt,xFO:()=>at,xSv:()=>V,xiE:()=>ln,y3Z:()=>ue,y_p:()=>K,zdS:()=>Ut,zgK:()=>gr,znC:()=>w});const r="172",i=0,a=1,o=2,s=1,l=2,c=3,u=0,f=1,h=2,d=0,p=1,m=2,g=3,v=4,_=5,y=100,x=101,b=102,w=103,M=104,S=200,T=201,E=202,A=203,C=204,R=205,D=206,P=207,L=208,N=209,I=210,U=211,O=212,F=213,k=214,B=0,z=1,H=2,V=3,G=4,W=5,j=6,q=7,X=0,$=1,Y=2,K=0,Z=1,Q=2,J=3,tt=4,et=5,nt=6,rt=7,it=301,at=302,ot=303,st=304,lt=306,ct=1e3,ut=1001,ft=1002,ht=1003,dt=1004,pt=1005,mt=1006,gt=1007,vt=1008,_t=1009,yt=1010,xt=1011,bt=1012,wt=1013,Mt=1014,St=1015,Tt=1016,Et=1017,At=1018,Ct=1020,Rt=35902,Dt=1021,Pt=1022,Lt=1023,Nt=1024,It=1025,Ut=1026,Ot=1027,Ft=1028,kt=1029,Bt=1030,zt=1031,Ht=1033,Vt=33776,Gt=33777,Wt=33778,jt=33779,qt=35840,Xt=35841,$t=35842,Yt=35843,Kt=36196,Zt=37492,Qt=37496,Jt=37808,te=37809,ee=37810,ne=37811,re=37812,ie=37813,ae=37814,oe=37815,se=37816,le=37817,ce=37818,ue=37819,fe=37820,he=37821,de=36492,pe=36494,me=36495,ge=36283,ve=36284,_e=36285,ye=36286,xe=2300,be=2301,we=2302,Me=3201,Se=0,Te=1,Ee="",Ae="srgb",Ce="srgb-linear",Re="linear",De="srgb",Pe=7680,Le=512,Ne=513,Ie=514,Ue=515,Oe=516,Fe=517,ke=518,Be=519,ze="300 es",He=2e3,Ve=2001;class Ge{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const We=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],je=Math.PI/180,qe=180/Math.PI;function Xe(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(We[255&t]+We[t>>8&255]+We[t>>16&255]+We[t>>24&255]+"-"+We[255&e]+We[e>>8&255]+"-"+We[e>>16&15|64]+We[e>>24&255]+"-"+We[63&n|128]+We[n>>8&255]+"-"+We[n>>16&255]+We[n>>24&255]+We[255&r]+We[r>>8&255]+We[r>>16&255]+We[r>>24&255]).toLowerCase()}function $e(t,e,n){return Math.max(e,Math.min(n,t))}function Ye(t,e,n){return(1-n)*t+n*e}function Ke(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ze(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class Qe{constructor(t=0,e=0){Qe.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=$e(this.x,t.x,e.x),this.y=$e(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=$e(this.x,t,e),this.y=$e(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar($e(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos($e(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Je{constructor(t,e,n,r,i,a,o,s,l){Je.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,a,o,s,l)}set(t,e,n,r,i,a,o,s,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=o,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],f=n[2],h=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],x=r[2],b=r[5],w=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*_+s*b,i[6]=a*g+o*y+s*w,i[1]=l*p+c*v+u*x,i[4]=l*m+c*_+u*b,i[7]=l*g+c*y+u*w,i[2]=f*p+h*v+d*x,i[5]=f*m+h*_+d*b,i[8]=f*g+h*y+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8];return e*a*c-e*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=c*a-o*l,f=o*s-c*i,h=l*i-a*s,d=e*u+n*f+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=u*p,t[1]=(r*l-c*n)*p,t[2]=(o*n-r*a)*p,t[3]=f*p,t[4]=(c*e-r*s)*p,t[5]=(r*i-o*e)*p,t[6]=h*p,t[7]=(n*s-l*e)*p,t[8]=(a*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-r*l,r*s,-r*(-l*a+s*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(tn.makeScale(t,e)),this}rotate(t){return this.premultiply(tn.makeRotation(-t)),this}translate(t,e){return this.premultiply(tn.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const tn=new Je;function en(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function nn(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function rn(){const t=nn("canvas");return t.style.display="block",t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const an={};function on(t){t in an||(an[t]=!0,console.warn(t))}function sn(t,e,n){return new Promise((function(r,i){setTimeout((function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}),n)}))}function ln(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function cn(t){const e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}const un=(new Je).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),fn=(new Je).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hn(){const t={enabled:!0,workingColorSpace:Ce,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===De&&(t.r=pn(t.r),t.g=pn(t.g),t.b=pn(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===De&&(t.r=mn(t.r),t.g=mn(t.g),t.b=mn(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===Ee?Re:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Ce]:{primaries:e,whitePoint:r,transfer:Re,toXYZ:un,fromXYZ:fn,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Ae},outputColorSpaceConfig:{drawingBufferColorSpace:Ae}},[Ae]:{primaries:e,whitePoint:r,transfer:De,toXYZ:un,fromXYZ:fn,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Ae}}}),t}const dn=hn();function pn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function mn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let gn;class vn{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===gn&&(gn=nn("canvas")),gn.width=t.width,gn.height=t.height;const n=gn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=gn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=nn("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*pn(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*pn(e[t]/255)):e[t]=pn(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let _n=0;class yn{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_n++}),this.uuid=Xe(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(xn(r[e].image)):t.push(xn(r[e]))}else t=xn(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function xn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?vn.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bn=0;class wn extends Ge{constructor(t=wn.DEFAULT_IMAGE,e=wn.DEFAULT_MAPPING,n=ut,r=ut,i=mt,a=vt,o=Lt,s=_t,l=wn.DEFAULT_ANISOTROPY,c=Ee){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bn++}),this.uuid=Xe(),this.name="",this.source=new yn(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Je,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ct:t.x=t.x-Math.floor(t.x);break;case ut:t.x=t.x<0?0:1;break;case ft:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ct:t.y=t.y-Math.floor(t.y);break;case ut:t.y=t.y<0?0:1;break;case ft:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}wn.DEFAULT_IMAGE=null,wn.DEFAULT_MAPPING=300,wn.DEFAULT_ANISOTROPY=1;class Mn{constructor(t=0,e=0,n=0,r=1){Mn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const a=.01,o=.1,s=t.elements,l=s[0],c=s[4],u=s[8],f=s[1],h=s[5],d=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-f)<a&&Math.abs(u-p)<a&&Math.abs(d-m)<a){if(Math.abs(c+f)<o&&Math.abs(u+p)<o&&Math.abs(d+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(h+1)/2,v=(g+1)/2,_=(c+f)/4,y=(u+p)/4,x=(d+m)/4;return t>s&&t>v?t<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=_/n,i=y/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=_/r,i=x/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=x/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-d)*(m-d)+(u-p)*(u-p)+(f-c)*(f-c));return Math.abs(v)<.001&&(v=1),this.x=(m-d)/v,this.y=(u-p)/v,this.z=(f-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=$e(this.x,t.x,e.x),this.y=$e(this.y,t.y,e.y),this.z=$e(this.z,t.z,e.z),this.w=$e(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=$e(this.x,t,e),this.y=$e(this.y,t,e),this.z=$e(this.z,t,e),this.w=$e(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar($e(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Sn extends Ge{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Mn(0,0,t,e),this.scissorTest=!1,this.viewport=new Mn(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new wn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let t=0;t<a;t++)this.textures[t]=i.clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++)this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const e=Object.assign({},t.texture.image);return this.texture.source=new yn(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Tn extends Sn{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class En extends wn{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class An extends wn{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Cn{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return t[e+0]=s,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===o)return t[e+0]=f,t[e+1]=h,t[e+2]=d,void(t[e+3]=p);if(u!==p||s!==f||l!==h||c!==d){let t=1-o;const e=s*f+l*h+c*d+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,e*n);t=Math.sin(t*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*t+f*i,l=l*t+h*i,c=c*t+d*i,u=u*t+p*i,t===1-o){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],f=i[a+1],h=i[a+2],d=i[a+3];return t[e]=o*d+c*u+s*h-l*f,t[e+1]=s*d+c*f+l*u-o*h,t[e+2]=l*d+c*h+o*f-s*u,t[e+3]=c*d-o*u-s*f-l*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,i=t._z,a=t._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),f=s(n/2),h=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=f*c*u+l*h*d,this._y=l*h*u-f*c*d,this._z=l*c*d+f*h*u,this._w=l*c*u-f*h*d;break;case"YXZ":this._x=f*c*u+l*h*d,this._y=l*h*u-f*c*d,this._z=l*c*d-f*h*u,this._w=l*c*u+f*h*d;break;case"ZXY":this._x=f*c*u-l*h*d,this._y=l*h*u+f*c*d,this._z=l*c*d+f*h*u,this._w=l*c*u-f*h*d;break;case"ZYX":this._x=f*c*u-l*h*d,this._y=l*h*u+f*c*d,this._z=l*c*d-f*h*u,this._w=l*c*u+f*h*d;break;case"YZX":this._x=f*c*u+l*h*d,this._y=l*h*u+f*c*d,this._z=l*c*d-f*h*u,this._w=l*c*u-f*h*d;break;case"XZY":this._x=f*c*u-l*h*d,this._y=l*h*u-f*c*d,this._z=l*c*d+f*h*u,this._w=l*c*u+f*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],a=e[1],o=e[5],s=e[9],l=e[2],c=e[6],u=e[10],f=n+o+u;if(f>0){const t=.5/Math.sqrt(f+1);this._w=.25/t,this._x=(c-s)*t,this._y=(i-l)*t,this._z=(a-r)*t}else if(n>o&&n>u){const t=2*Math.sqrt(1+n-o-u);this._w=(c-s)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(i+l)/t}else if(o>u){const t=2*Math.sqrt(1+o-n-u);this._w=(i-l)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-o);this._w=(a-r)/t,this._x=(i+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs($e(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-e)*c)/l,f=Math.sin(e*c)/l;return this._w=a*u+this._w*f,this._x=n*u+this._x*f,this._y=r*u+this._y*f,this._z=i*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),i*Math.sin(e),i*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Rn{constructor(t=0,e=0,n=0){Rn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Pn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Pn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,l=2*(a*r-o*n),c=2*(o*e-i*r),u=2*(i*n-a*e);return this.x=e+s*l+a*u-o*c,this.y=n+s*c+o*l-i*u,this.z=r+s*u+i*c-a*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=$e(this.x,t.x,e.x),this.y=$e(this.y,t.y,e.y),this.z=$e(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=$e(this.x,t,e),this.y=$e(this.y,t,e),this.z=$e(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar($e(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Dn.copy(this).projectOnVector(t),this.sub(Dn)}reflect(t){return this.sub(Dn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos($e(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dn=new Rn,Pn=new Cn;class Ln{constructor(t=new Rn(1/0,1/0,1/0),e=new Rn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(In.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(In.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=In.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,n=r.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,In):In.fromBufferAttribute(r,e),In.applyMatrix4(t.matrixWorld),this.expandByPoint(In);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Un.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Un.copy(n.boundingBox)),Un.applyMatrix4(t.matrixWorld),this.union(Un)}const r=t.children;for(let t=0,n=r.length;t<n;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,In),In.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Vn),Gn.subVectors(this.max,Vn),On.subVectors(t.a,Vn),Fn.subVectors(t.b,Vn),kn.subVectors(t.c,Vn),Bn.subVectors(Fn,On),zn.subVectors(kn,Fn),Hn.subVectors(On,kn);let e=[0,-Bn.z,Bn.y,0,-zn.z,zn.y,0,-Hn.z,Hn.y,Bn.z,0,-Bn.x,zn.z,0,-zn.x,Hn.z,0,-Hn.x,-Bn.y,Bn.x,0,-zn.y,zn.x,0,-Hn.y,Hn.x,0];return!!qn(e,On,Fn,kn,Gn)&&(e=[1,0,0,0,1,0,0,0,1],!!qn(e,On,Fn,kn,Gn)&&(Wn.crossVectors(Bn,zn),e=[Wn.x,Wn.y,Wn.z],qn(e,On,Fn,kn,Gn)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,In).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(In).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Nn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Nn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Nn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Nn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Nn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Nn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Nn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Nn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Nn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Nn=[new Rn,new Rn,new Rn,new Rn,new Rn,new Rn,new Rn,new Rn],In=new Rn,Un=new Ln,On=new Rn,Fn=new Rn,kn=new Rn,Bn=new Rn,zn=new Rn,Hn=new Rn,Vn=new Rn,Gn=new Rn,Wn=new Rn,jn=new Rn;function qn(t,e,n,r,i){for(let a=0,o=t.length-3;a<=o;a+=3){jn.fromArray(t,a);const o=i.x*Math.abs(jn.x)+i.y*Math.abs(jn.y)+i.z*Math.abs(jn.z),s=e.dot(jn),l=n.dot(jn),c=r.dot(jn);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const Xn=new Ln,$n=new Rn,Yn=new Rn;class Kn{constructor(t=new Rn,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Xn.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;$n.subVectors(t,this.center);const e=$n.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector($n,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Yn.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint($n.copy(t.center).add(Yn)),this.expandByPoint($n.copy(t.center).sub(Yn))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Zn=new Rn,Qn=new Rn,Jn=new Rn,tr=new Rn,er=new Rn,nr=new Rn,rr=new Rn;class ir{constructor(t=new Rn,e=new Rn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Zn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Zn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Zn.copy(this.origin).addScaledVector(this.direction,e),Zn.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Qn.copy(t).add(e).multiplyScalar(.5),Jn.copy(e).sub(t).normalize(),tr.copy(this.origin).sub(Qn);const i=.5*t.distanceTo(e),a=-this.direction.dot(Jn),o=tr.dot(this.direction),s=-tr.dot(Jn),l=tr.lengthSq(),c=Math.abs(1-a*a);let u,f,h,d;if(c>0)if(u=a*s-o,f=a*o-s,d=i*c,u>=0)if(f>=-d)if(f<=d){const t=1/c;u*=t,f*=t,h=u*(u+a*f+2*o)+f*(a*u+f+2*s)+l}else f=i,u=Math.max(0,-(a*f+o)),h=-u*u+f*(f+2*s)+l;else f=-i,u=Math.max(0,-(a*f+o)),h=-u*u+f*(f+2*s)+l;else f<=-d?(u=Math.max(0,-(-a*i+o)),f=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+f*(f+2*s)+l):f<=d?(u=0,f=Math.min(Math.max(-i,-s),i),h=f*(f+2*s)+l):(u=Math.max(0,-(a*i+o)),f=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+f*(f+2*s)+l);else f=a>0?-i:i,u=Math.max(0,-(a*f+o)),h=-u*u+f*(f+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Qn).addScaledVector(Jn,f),h}intersectSphere(t,e){Zn.subVectors(t.center,this.origin);const n=Zn.dot(this.direction),r=Zn.dot(Zn)-n*n,i=t.radius*t.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return l>=0?(n=(t.min.x-f.x)*l,r=(t.max.x-f.x)*l):(n=(t.max.x-f.x)*l,r=(t.min.x-f.x)*l),c>=0?(i=(t.min.y-f.y)*c,a=(t.max.y-f.y)*c):(i=(t.max.y-f.y)*c,a=(t.min.y-f.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(o=(t.min.z-f.z)*u,s=(t.max.z-f.z)*u):(o=(t.max.z-f.z)*u,s=(t.min.z-f.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,Zn)}intersectTriangle(t,e,n,r,i){er.subVectors(e,t),nr.subVectors(n,t),rr.crossVectors(er,nr);let a,o=this.direction.dot(rr);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}tr.subVectors(this.origin,t);const s=a*this.direction.dot(nr.crossVectors(tr,nr));if(s<0)return null;const l=a*this.direction.dot(er.cross(tr));if(l<0)return null;if(s+l>o)return null;const c=-a*tr.dot(rr);return c<0?null:this.at(c/o,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ar{constructor(t,e,n,r,i,a,o,s,l,c,u,f,h,d,p,m){ar.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,a,o,s,l,c,u,f,h,d,p,m)}set(t,e,n,r,i,a,o,s,l,c,u,f,h,d,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=f,g[3]=h,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ar).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/or.setFromMatrixColumn(t,0).length(),i=1/or.setFromMatrixColumn(t,1).length(),a=1/or.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=a*c,n=a*u,r=o*c,i=o*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-o*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=a*s}else if("YXZ"===t.order){const t=s*c,n=s*u,r=l*c,i=l*u;e[0]=t+i*o,e[4]=r*o-n,e[8]=a*l,e[1]=a*u,e[5]=a*c,e[9]=-o,e[2]=n*o-r,e[6]=i+t*o,e[10]=a*s}else if("ZXY"===t.order){const t=s*c,n=s*u,r=l*c,i=l*u;e[0]=t-i*o,e[4]=-a*u,e[8]=r+n*o,e[1]=n+r*o,e[5]=a*c,e[9]=i-t*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){const t=a*c,n=a*u,r=o*c,i=o*u;e[0]=s*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*u,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){const t=a*s,n=a*l,r=o*s,i=o*l;e[0]=s*c,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=a*c,e[9]=-o*c,e[2]=-l*c,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=a*s,n=a*l,r=o*s,i=o*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+i,e[5]=a*c,e[9]=n*u-r,e[2]=r*u-n,e[6]=o*c,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(lr,t,cr)}lookAt(t,e,n){const r=this.elements;return hr.subVectors(t,e),0===hr.lengthSq()&&(hr.z=1),hr.normalize(),ur.crossVectors(n,hr),0===ur.lengthSq()&&(1===Math.abs(n.z)?hr.x+=1e-4:hr.z+=1e-4,hr.normalize(),ur.crossVectors(n,hr)),ur.normalize(),fr.crossVectors(hr,ur),r[0]=ur.x,r[4]=fr.x,r[8]=hr.x,r[1]=ur.y,r[5]=fr.y,r[9]=hr.y,r[2]=ur.z,r[6]=fr.z,r[10]=hr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],f=n[9],h=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],x=n[15],b=r[0],w=r[4],M=r[8],S=r[12],T=r[1],E=r[5],A=r[9],C=r[13],R=r[2],D=r[6],P=r[10],L=r[14],N=r[3],I=r[7],U=r[11],O=r[15];return i[0]=a*b+o*T+s*R+l*N,i[4]=a*w+o*E+s*D+l*I,i[8]=a*M+o*A+s*P+l*U,i[12]=a*S+o*C+s*L+l*O,i[1]=c*b+u*T+f*R+h*N,i[5]=c*w+u*E+f*D+h*I,i[9]=c*M+u*A+f*P+h*U,i[13]=c*S+u*C+f*L+h*O,i[2]=d*b+p*T+m*R+g*N,i[6]=d*w+p*E+m*D+g*I,i[10]=d*M+p*A+m*P+g*U,i[14]=d*S+p*C+m*L+g*O,i[3]=v*b+_*T+y*R+x*N,i[7]=v*w+_*E+y*D+x*I,i[11]=v*M+_*A+y*P+x*U,i[15]=v*S+_*C+y*L+x*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],u=t[6],f=t[10],h=t[14];return t[3]*(+i*s*u-r*l*u-i*o*f+n*l*f+r*o*h-n*s*h)+t[7]*(+e*s*h-e*l*f+i*a*f-r*a*h+r*l*c-i*s*c)+t[11]*(+e*l*u-e*o*h-i*a*u+n*a*h+i*o*c-n*l*c)+t[15]*(-r*o*c-e*s*u+e*o*f+r*a*u-n*a*f+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],g=t[15],v=u*m*l-p*f*l+p*s*h-o*m*h-u*s*g+o*f*g,_=d*f*l-c*m*l-d*s*h+a*m*h+c*s*g-a*f*g,y=c*p*l-d*u*l+d*o*h-a*p*h-c*o*g+a*u*g,x=d*u*s-c*p*s-d*o*f+a*p*f+c*o*m-a*u*m,b=e*v+n*_+r*y+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=v*w,t[1]=(p*f*i-u*m*i-p*r*h+n*m*h+u*r*g-n*f*g)*w,t[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*w,t[3]=(u*s*i-o*f*i-u*r*l+n*f*l+o*r*h-n*s*h)*w,t[4]=_*w,t[5]=(c*m*i-d*f*i+d*r*h-e*m*h-c*r*g+e*f*g)*w,t[6]=(d*s*i-a*m*i-d*r*l+e*m*l+a*r*g-e*s*g)*w,t[7]=(a*f*i-c*s*i+c*r*l-e*f*l-a*r*h+e*s*h)*w,t[8]=y*w,t[9]=(d*u*i-c*p*i-d*n*h+e*p*h+c*n*g-e*u*g)*w,t[10]=(a*p*i-d*o*i+d*n*l-e*p*l-a*n*g+e*o*g)*w,t[11]=(c*o*i-a*u*i-c*n*l+e*u*l+a*n*h-e*o*h)*w,t[12]=x*w,t[13]=(c*p*r-d*u*r+d*n*f-e*p*f-c*n*m+e*u*m)*w,t[14]=(d*o*r-a*p*r-d*n*s+e*p*s+a*n*m-e*o*m)*w,t[15]=(a*u*r-c*o*r+c*n*s-e*u*s-a*n*f+e*o*f)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,a){return this.set(1,n,i,0,t,1,a,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,l=i+i,c=a+a,u=o+o,f=i*l,h=i*c,d=i*u,p=a*c,m=a*u,g=o*u,v=s*l,_=s*c,y=s*u,x=n.x,b=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+y)*x,r[2]=(d-_)*x,r[3]=0,r[4]=(h-y)*b,r[5]=(1-(f+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(d+_)*w,r[9]=(m-v)*w,r[10]=(1-(f+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=or.set(r[0],r[1],r[2]).length();const a=or.set(r[4],r[5],r[6]).length(),o=or.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],sr.copy(this);const s=1/i,l=1/a,c=1/o;return sr.elements[0]*=s,sr.elements[1]*=s,sr.elements[2]*=s,sr.elements[4]*=l,sr.elements[5]*=l,sr.elements[6]*=l,sr.elements[8]*=c,sr.elements[9]*=c,sr.elements[10]*=c,e.setFromRotationMatrix(sr),n.x=i,n.y=a,n.z=o,this}makePerspective(t,e,n,r,i,a,o=He){const s=this.elements,l=2*i/(e-t),c=2*i/(n-r),u=(e+t)/(e-t),f=(n+r)/(n-r);let h,d;if(o===He)h=-(a+i)/(a-i),d=-2*a*i/(a-i);else{if(o!==Ve)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);h=-a/(a-i),d=-a*i/(a-i)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=f,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,a,o=He){const s=this.elements,l=1/(e-t),c=1/(n-r),u=1/(a-i),f=(e+t)*l,h=(n+r)*c;let d,p;if(o===He)d=(a+i)*u,p=-2*u;else{if(o!==Ve)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);d=i*u,p=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-f,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=p,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const or=new Rn,sr=new ar,lr=new Rn(0,0,0),cr=new Rn(1,1,1),ur=new Rn,fr=new Rn,hr=new Rn,dr=new ar,pr=new Cn;class mr{constructor(t=0,e=0,n=0,r=mr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],f=r[6],h=r[10];switch(e){case"XYZ":this._y=Math.asin($e(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-$e(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin($e(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-$e(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin($e(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-$e(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return dr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(dr,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return pr.setFromEuler(this),this.setFromQuaternion(pr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mr.DEFAULT_ORDER="XYZ";class gr{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let vr=0;const _r=new Rn,yr=new Cn,xr=new ar,br=new Rn,wr=new Rn,Mr=new Rn,Sr=new Cn,Tr=new Rn(1,0,0),Er=new Rn(0,1,0),Ar=new Rn(0,0,1),Cr={type:"added"},Rr={type:"removed"},Dr={type:"childadded",child:null},Pr={type:"childremoved",child:null};class Lr extends Ge{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vr++}),this.uuid=Xe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lr.DEFAULT_UP.clone();const t=new Rn,e=new mr,n=new Cn,r=new Rn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ar},normalMatrix:{value:new Je}}),this.matrix=new ar,this.matrixWorld=new ar,this.matrixAutoUpdate=Lr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return yr.setFromAxisAngle(t,e),this.quaternion.multiply(yr),this}rotateOnWorldAxis(t,e){return yr.setFromAxisAngle(t,e),this.quaternion.premultiply(yr),this}rotateX(t){return this.rotateOnAxis(Tr,t)}rotateY(t){return this.rotateOnAxis(Er,t)}rotateZ(t){return this.rotateOnAxis(Ar,t)}translateOnAxis(t,e){return _r.copy(t).applyQuaternion(this.quaternion),this.position.add(_r.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Tr,t)}translateY(t){return this.translateOnAxis(Er,t)}translateZ(t){return this.translateOnAxis(Ar,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(xr.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?br.copy(t):br.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),wr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xr.lookAt(wr,br,this.up):xr.lookAt(br,wr,this.up),this.quaternion.setFromRotationMatrix(xr),r&&(xr.extractRotation(r.matrixWorld),yr.setFromRotationMatrix(xr),this.quaternion.premultiply(yr.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Cr),Dr.child=t,this.dispatchEvent(Dr),Dr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Rr),Pr.child=t,this.dispatchEvent(Pr),Pr.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),xr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),xr.multiply(t.parent.matrixWorld)),t.applyMatrix4(xr),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Cr),Dr.child=t,this.dispatchEvent(Dr),Dr.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wr,t,Mr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wr,Sr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=a(t.geometries),r=a(t.materials),i=a(t.textures),o=a(t.images),s=a(t.shapes),l=a(t.skeletons),c=a(t.animations),u=a(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Lr.DEFAULT_UP=new Rn(0,1,0),Lr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Nr=new Rn,Ir=new Rn,Ur=new Rn,Or=new Rn,Fr=new Rn,kr=new Rn,Br=new Rn,zr=new Rn,Hr=new Rn,Vr=new Rn,Gr=new Mn,Wr=new Mn,jr=new Mn;class qr{constructor(t=new Rn,e=new Rn,n=new Rn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Nr.subVectors(t,e),r.cross(Nr);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){Nr.subVectors(r,e),Ir.subVectors(n,e),Ur.subVectors(t,e);const a=Nr.dot(Nr),o=Nr.dot(Ir),s=Nr.dot(Ur),l=Ir.dot(Ir),c=Ir.dot(Ur),u=a*l-o*o;if(0===u)return i.set(0,0,0),null;const f=1/u,h=(l*s-o*c)*f,d=(a*c-o*s)*f;return i.set(1-h-d,d,h)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,Or)&&Or.x>=0&&Or.y>=0&&Or.x+Or.y<=1}static getInterpolation(t,e,n,r,i,a,o,s){return null===this.getBarycoord(t,e,n,r,Or)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Or.x),s.addScaledVector(a,Or.y),s.addScaledVector(o,Or.z),s)}static getInterpolatedAttribute(t,e,n,r,i,a){return Gr.setScalar(0),Wr.setScalar(0),jr.setScalar(0),Gr.fromBufferAttribute(t,e),Wr.fromBufferAttribute(t,n),jr.fromBufferAttribute(t,r),a.setScalar(0),a.addScaledVector(Gr,i.x),a.addScaledVector(Wr,i.y),a.addScaledVector(jr,i.z),a}static isFrontFacing(t,e,n,r){return Nr.subVectors(n,e),Ir.subVectors(t,e),Nr.cross(Ir).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Nr.subVectors(this.c,this.b),Ir.subVectors(this.a,this.b),.5*Nr.cross(Ir).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return qr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return qr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,i){return qr.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return qr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return qr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let a,o;Fr.subVectors(r,n),kr.subVectors(i,n),zr.subVectors(t,n);const s=Fr.dot(zr),l=kr.dot(zr);if(s<=0&&l<=0)return e.copy(n);Hr.subVectors(t,r);const c=Fr.dot(Hr),u=kr.dot(Hr);if(c>=0&&u<=c)return e.copy(r);const f=s*u-c*l;if(f<=0&&s>=0&&c<=0)return a=s/(s-c),e.copy(n).addScaledVector(Fr,a);Vr.subVectors(t,i);const h=Fr.dot(Vr),d=kr.dot(Vr);if(d>=0&&h<=d)return e.copy(i);const p=h*l-s*d;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(kr,o);const m=c*d-h*u;if(m<=0&&u-c>=0&&h-d>=0)return Br.subVectors(i,r),o=(u-c)/(u-c+(h-d)),e.copy(r).addScaledVector(Br,o);const g=1/(m+p+f);return a=p*g,o=f*g,e.copy(n).addScaledVector(Fr,a).addScaledVector(kr,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$r={h:0,s:0,l:0},Yr={h:0,s:0,l:0};function Kr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Zr{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ae){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,dn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=dn.workingColorSpace){return this.r=t,this.g=e,this.b=n,dn.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=dn.workingColorSpace){if(t=(t%(i=1)+i)%i,e=$e(e,0,1),n=$e(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Kr(i,r,t+1/3),this.g=Kr(i,r,t),this.b=Kr(i,r,t-1/3)}var i;return dn.toWorkingColorSpace(this,r),this}setStyle(t,e=Ae){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ae){const n=Xr[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=pn(t.r),this.g=pn(t.g),this.b=pn(t.b),this}copyLinearToSRGB(t){return this.r=mn(t.r),this.g=mn(t.g),this.b=mn(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ae){return dn.fromWorkingColorSpace(Qr.copy(this),t),65536*Math.round($e(255*Qr.r,0,255))+256*Math.round($e(255*Qr.g,0,255))+Math.round($e(255*Qr.b,0,255))}getHexString(t=Ae){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=dn.workingColorSpace){dn.fromWorkingColorSpace(Qr.copy(this),e);const n=Qr.r,r=Qr.g,i=Qr.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const t=a-o;switch(l=c<=.5?t/(a+o):t/(2-a-o),a){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=l,t.l=c,t}getRGB(t,e=dn.workingColorSpace){return dn.fromWorkingColorSpace(Qr.copy(this),e),t.r=Qr.r,t.g=Qr.g,t.b=Qr.b,t}getStyle(t=Ae){dn.fromWorkingColorSpace(Qr.copy(this),t);const e=Qr.r,n=Qr.g,r=Qr.b;return t!==Ae?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL($r),this.setHSL($r.h+t,$r.s+e,$r.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL($r),t.getHSL(Yr);const n=Ye($r.h,Yr.h,e),r=Ye($r.s,Yr.s,e),i=Ye($r.l,Yr.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new Zr;Zr.NAMES=Xr;let Jr=0;class ti extends Ge{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jr++}),this.uuid=Xe(),this.name="",this.type="Material",this.blending=p,this.side=u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=C,this.blendDst=R,this.blendEquation=y,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Zr(0,0,0),this.blendAlpha=0,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pe,this.stencilZFail=Pe,this.stencilZPass=Pe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==p&&(n.blending=this.blending),this.side!==u&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==C&&(n.blendSrc=this.blendSrc),this.blendDst!==R&&(n.blendDst=this.blendDst),this.blendEquation!==y&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==V&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Pe&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Pe&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Pe&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ei extends ti{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new mr,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ni=new Rn,ri=new Qe;class ii{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=St,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)ri.fromBufferAttribute(this,e),ri.applyMatrix3(t),this.setXY(e,ri.x,ri.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ni.fromBufferAttribute(this,e),ni.applyMatrix3(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ni.fromBufferAttribute(this,e),ni.applyMatrix4(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ni.fromBufferAttribute(this,e),ni.applyNormalMatrix(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ni.fromBufferAttribute(this,e),ni.transformDirection(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Ke(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Ze(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ke(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ze(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ke(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ze(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ke(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ze(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ke(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ze(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Ze(e,this.array),n=Ze(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Ze(e,this.array),n=Ze(n,this.array),r=Ze(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=Ze(e,this.array),n=Ze(n,this.array),r=Ze(r,this.array),i=Ze(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class ai extends ii{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class oi extends ii{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class si extends ii{constructor(t,e,n){super(new Float32Array(t),e,n)}}let li=0;const ci=new ar,ui=new Lr,fi=new Rn,hi=new Ln,di=new Ln,pi=new Rn;class mi extends Ge{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:li++}),this.uuid=Xe(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(en(t)?oi:ai)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Je).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ci.makeRotationFromQuaternion(t),this.applyMatrix4(ci),this}rotateX(t){return ci.makeRotationX(t),this.applyMatrix4(ci),this}rotateY(t){return ci.makeRotationY(t),this.applyMatrix4(ci),this}rotateZ(t){return ci.makeRotationZ(t),this.applyMatrix4(ci),this}translate(t,e,n){return ci.makeTranslation(t,e,n),this.applyMatrix4(ci),this}scale(t,e,n){return ci.makeScale(t,e,n),this.applyMatrix4(ci),this}lookAt(t){return ui.lookAt(t),ui.updateMatrix(),this.applyMatrix4(ui.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fi).negate(),this.translate(fi.x,fi.y,fi.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}this.setAttribute("position",new si(e,3))}else{const n=Math.min(t.length,e.count);for(let r=0;r<n;r++){const n=t[r];e.setXYZ(r,n.x,n.y,n.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ln);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Rn(-1/0,-1/0,-1/0),new Rn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];hi.setFromBufferAttribute(n),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,hi.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,hi.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(hi.min),this.boundingBox.expandByPoint(hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Kn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Rn,1/0);if(t){const n=this.boundingSphere.center;if(hi.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];di.setFromBufferAttribute(n),this.morphTargetsRelative?(pi.addVectors(hi.min,di.min),hi.expandByPoint(pi),pi.addVectors(hi.max,di.max),hi.expandByPoint(pi)):(hi.expandByPoint(di.min),hi.expandByPoint(di.max))}hi.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)pi.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(pi));if(e)for(let i=0,a=e.length;i<a;i++){const a=e[i],o=this.morphTargetsRelative;for(let e=0,i=a.count;e<i;e++)pi.fromBufferAttribute(a,e),o&&(fi.fromBufferAttribute(t,e),pi.add(fi)),r=Math.max(r,n.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,i=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ii(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],s=[];for(let t=0;t<n.count;t++)o[t]=new Rn,s[t]=new Rn;const l=new Rn,c=new Rn,u=new Rn,f=new Qe,h=new Qe,d=new Qe,p=new Rn,m=new Rn;function g(t,e,r){l.fromBufferAttribute(n,t),c.fromBufferAttribute(n,e),u.fromBufferAttribute(n,r),f.fromBufferAttribute(i,t),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,r),c.sub(l),u.sub(l),h.sub(f),d.sub(f);const a=1/(h.x*d.y-d.x*h.y);isFinite(a)&&(p.copy(c).multiplyScalar(d.y).addScaledVector(u,-h.y).multiplyScalar(a),m.copy(u).multiplyScalar(h.x).addScaledVector(c,-d.x).multiplyScalar(a),o[t].add(p),o[e].add(p),o[r].add(p),s[t].add(m),s[e].add(m),s[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:t.count}]);for(let e=0,n=v.length;e<n;++e){const n=v[e],r=n.start;for(let e=r,i=r+n.count;e<i;e+=3)g(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const _=new Rn,y=new Rn,x=new Rn,b=new Rn;function w(t){x.fromBufferAttribute(r,t),b.copy(x);const e=o[t];_.copy(e),_.sub(x.multiplyScalar(x.dot(e))).normalize(),y.crossVectors(b,e);const n=y.dot(s[t])<0?-1:1;a.setXYZW(t,_.x,_.y,_.z,n)}for(let e=0,n=v.length;e<n;++e){const n=v[e],r=n.start;for(let e=r,i=r+n.count;e<i;e+=3)w(t.getX(e+0)),w(t.getX(e+1)),w(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new ii(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Rn,i=new Rn,a=new Rn,o=new Rn,s=new Rn,l=new Rn,c=new Rn,u=new Rn;if(t)for(let f=0,h=t.count;f<h;f+=3){const h=t.getX(f+0),d=t.getX(f+1),p=t.getX(f+2);r.fromBufferAttribute(e,h),i.fromBufferAttribute(e,d),a.fromBufferAttribute(e,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),o.add(c),s.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,o=e.count;t<o;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)pi.fromBufferAttribute(t,e),pi.normalize(),t.setXYZ(e,pi.x,pi.y,pi.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,a=new n.constructor(e.length*r);let o=0,s=0;for(let i=0,l=e.length;i<l;i++){o=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)a[s++]=n[o++]}return new ii(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new mi,n=this.index.array,r=this.attributes;for(const i in r){const a=t(r[i],n);e.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],o=i[r];for(let e=0,r=o.length;e<r;e++){const r=t(o[e],n);a.push(r)}e.morphAttributes[r]=a}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],a=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];a.push(r.toJSON(t.data))}a.length>0&&(r[e]=a,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let t=0,e=a.length;t<e;t++){const e=a[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gi=new ar,vi=new ir,_i=new Kn,yi=new Rn,xi=new Rn,bi=new Rn,wi=new Rn,Mi=new Rn,Si=new Rn,Ti=new Rn,Ei=new Rn;class Ai extends Lr{constructor(t=new mi,e=new ei){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const o=this.morphTargetInfluences;if(i&&o){Si.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],s=i[n];0!==r&&(Mi.fromBufferAttribute(s,t),a?Si.addScaledVector(Mi,r):Si.addScaledVector(Mi.sub(e),r))}e.add(Si)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),_i.copy(n.boundingSphere),_i.applyMatrix4(i),vi.copy(t.ray).recast(t.near),!1===_i.containsPoint(vi.origin)){if(null===vi.intersectSphere(_i,yi))return;if(vi.origin.distanceToSquared(yi)>(t.far-t.near)**2)return}gi.copy(i).invert(),vi.copy(t.ray).applyMatrix4(gi),null!==n.boundingBox&&!1===vi.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,vi)}}_computeIntersections(t,e,n){let r;const i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,f=i.groups,h=i.drawRange;if(null!==o)if(Array.isArray(a))for(let i=0,s=f.length;i<s;i++){const s=f[i],d=a[s.materialIndex];for(let i=Math.max(s.start,h.start),a=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));i<a;i+=3)r=Ci(this,d,t,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,e.push(r))}else for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3)r=Ci(this,a,t,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),e.push(r));else if(void 0!==s)if(Array.isArray(a))for(let i=0,o=f.length;i<o;i++){const o=f[i],d=a[o.materialIndex];for(let i=Math.max(o.start,h.start),a=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));i<a;i+=3)r=Ci(this,d,t,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,e.push(r))}else for(let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);i<o;i+=3)r=Ci(this,a,t,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}function Ci(t,e,n,r,i,a,o,s,l,c){t.getVertexPosition(s,xi),t.getVertexPosition(l,bi),t.getVertexPosition(c,wi);const h=function(t,e,n,r,i,a,o,s){let l;if(l=e.side===f?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,e.side===u,s),null===l)return null;Ei.copy(s),Ei.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Ei);return c<n.near||c>n.far?null:{distance:c,point:Ei.clone(),object:t}}(t,e,n,r,xi,bi,wi,Ti);if(h){const t=new Rn;qr.getBarycoord(Ti,xi,bi,wi,t),i&&(h.uv=qr.getInterpolatedAttribute(i,s,l,c,t,new Qe)),a&&(h.uv1=qr.getInterpolatedAttribute(a,s,l,c,t,new Qe)),o&&(h.normal=qr.getInterpolatedAttribute(o,s,l,c,t,new Rn),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const e={a:s,b:l,c,normal:new Rn,materialIndex:0};qr.getNormal(xi,bi,wi,e.normal),h.face=e,h.barycoord=t}return h}class Ri extends mi{constructor(t=1,e=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let f=0,h=0;function d(t,e,n,r,i,a,d,p,m,g,v){const _=a/m,y=d/g,x=a/2,b=d/2,w=p/2,M=m+1,S=g+1;let T=0,E=0;const A=new Rn;for(let a=0;a<S;a++){const o=a*y-b;for(let s=0;s<M;s++){const f=s*_-x;A[t]=f*r,A[e]=o*i,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,c.push(A.x,A.y,A.z),u.push(s/m),u.push(1-a/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=f+e+M*t,r=f+e+M*(t+1),i=f+(e+1)+M*(t+1),a=f+(e+1)+M*t;s.push(n,r,a),s.push(r,i,a),E+=6}o.addGroup(h,E,v),h+=E,f+=T}d("z","y","x",-1,-1,n,e,t,a,i,0),d("z","y","x",1,-1,n,e,-t,a,i,1),d("x","z","y",1,1,t,n,e,r,a,2),d("x","z","y",1,-1,t,n,-e,r,a,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new si(l,3)),this.setAttribute("normal",new si(c,3)),this.setAttribute("uv",new si(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ri(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Di(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Pi(t){const e={};for(let n=0;n<t.length;n++){const r=Di(t[n]);for(const t in r)e[t]=r[t]}return e}function Li(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:dn.workingColorSpace}const Ni={clone:Di,merge:Pi};class Ii extends ti{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Di(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Ui extends Lr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ar,this.projectionMatrix=new ar,this.projectionMatrixInverse=new ar,this.coordinateSystem=He}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Oi=new Rn,Fi=new Qe,ki=new Qe;class Bi extends Ui{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*qe*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*je*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*qe*Math.atan(Math.tan(.5*je*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Oi.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Oi.x,Oi.y).multiplyScalar(-t/Oi.z),Oi.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Oi.x,Oi.y).multiplyScalar(-t/Oi.z)}getViewSize(t,e){return this.getViewBounds(t,Fi,ki),e.subVectors(ki,Fi)}setViewOffset(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*je*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/t,e-=a.offsetY*n/o,r*=a.width/t,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const zi=-90;class Hi extends Lr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Bi(zi,1,t,e);r.layers=this.layers,this.add(r);const i=new Bi(zi,1,t,e);i.layers=this.layers,this.add(i);const a=new Bi(zi,1,t,e);a.layers=this.layers,this.add(a);const o=new Bi(zi,1,t,e);o.layers=this.layers,this.add(o);const s=new Bi(zi,1,t,e);s.layers=this.layers,this.add(s);const l=new Bi(zi,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,a,o,s]=e;for(const t of e)this.remove(t);if(t===He)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(t!==Ve)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,a,o,s,l,c]=this.children,u=t.getRenderTarget(),f=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.xr.enabled;t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,i),t.setRenderTarget(n,1,r),t.render(e,a),t.setRenderTarget(n,2,r),t.render(e,o),t.setRenderTarget(n,3,r),t.render(e,s),t.setRenderTarget(n,4,r),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5,r),t.render(e,c),t.setRenderTarget(u,f,h),t.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class Vi extends wn{constructor(t,e,n,r,i,a,o,s,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:it,n,r,i,a,o,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Gi extends Tn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Vi(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:mt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Ri(5,5,5),o=new Ii({name:"CubemapFromEquirect",uniforms:Di(n),vertexShader:r,fragmentShader:i,side:f,blending:d});o.uniforms.tEquirect.value=e;const s=new Ai(a,o),l=e.minFilter;return e.minFilter===vt&&(e.minFilter=mt),new Hi(1,10,this).update(t,s),e.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}class Wi extends Lr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new mr,this.environmentIntensity=1,this.environmentRotation=new mr,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}const ji=new Rn,qi=new Rn,Xi=new Je;class $i{constructor(t=new Rn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=ji.subVectors(n,e).cross(qi.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(ji),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Xi.getNormalMatrix(t),r=this.coplanarPoint(ji).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Yi=new Kn,Ki=new Rn;class Zi{constructor(t=new $i,e=new $i,n=new $i,r=new $i,i=new $i,a=new $i){this.planes=[t,e,n,r,i,a]}set(t,e,n,r,i,a){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=He){const n=this.planes,r=t.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],h=r[8],d=r[9],p=r[10],m=r[11],g=r[12],v=r[13],_=r[14],y=r[15];if(n[0].setComponents(s-i,f-l,m-h,y-g).normalize(),n[1].setComponents(s+i,f+l,m+h,y+g).normalize(),n[2].setComponents(s+a,f+c,m+d,y+v).normalize(),n[3].setComponents(s-a,f-c,m-d,y-v).normalize(),n[4].setComponents(s-o,f-u,m-p,y-_).normalize(),e===He)n[5].setComponents(s+o,f+u,m+p,y+_).normalize();else{if(e!==Ve)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(o,u,p,_).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Yi.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Yi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Yi)}intersectsSprite(t){return Yi.center.set(0,0,0),Yi.radius=.7071067811865476,Yi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Yi)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ki.x=r.normal.x>0?t.max.x:t.min.x,Ki.y=r.normal.y>0?t.max.y:t.min.y,Ki.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ki)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Qi extends ti{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Ji=new Rn,ta=new Rn,ea=new ar,na=new ir,ra=new Kn,ia=new Rn,aa=new Rn;class oa extends Lr{constructor(t=new mi,e=new Qi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)Ji.fromBufferAttribute(e,t-1),ta.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Ji.distanceTo(ta);t.setAttribute("lineDistance",new si(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ra.copy(n.boundingSphere),ra.applyMatrix4(r),ra.radius+=i,!1===t.ray.intersectsSphere(ra))return;ea.copy(r).invert(),na.copy(t.ray).applyMatrix4(ea);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=c.getX(i),r=c.getX(i+1),a=sa(this,t,na,s,n,r);a&&e.push(a)}if(this.isLineLoop){const i=c.getX(r-1),a=c.getX(n),o=sa(this,t,na,s,i,a);o&&e.push(o)}}else{const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=sa(this,t,na,s,i,i+1);n&&e.push(n)}if(this.isLineLoop){const i=sa(this,t,na,s,r-1,n);i&&e.push(i)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function sa(t,e,n,r,i,a){const o=t.geometry.attributes.position;if(Ji.fromBufferAttribute(o,i),ta.fromBufferAttribute(o,a),n.distanceSqToSegment(Ji,ta,ia,aa)>r)return;ia.applyMatrix4(t.matrixWorld);const s=e.ray.origin.distanceTo(ia);return s<e.near||s>e.far?void 0:{distance:s,point:aa.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:t}}const la=new Rn,ca=new Rn;class ua extends oa{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)la.fromBufferAttribute(e,t),ca.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+la.distanceTo(ca);t.setAttribute("lineDistance",new si(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fa extends ti{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const ha=new ar,da=new ir,pa=new Kn,ma=new Rn;class ga extends Lr{constructor(t=new mi,e=new fa){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pa.copy(n.boundingSphere),pa.applyMatrix4(r),pa.radius+=i,!1===t.ray.intersectsSphere(pa))return;ha.copy(r).invert(),da.copy(t.ray).applyMatrix4(ha);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);ma.fromBufferAttribute(c,i),va(ma,i,s,r,t,e,this)}else for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)ma.fromBufferAttribute(c,n),va(ma,n,s,r,t,e,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function va(t,e,n,r,i,a,o){const s=da.distanceSqToPoint(t);if(s<n){const n=new Rn;da.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class _a extends Lr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class ya extends wn{constructor(t,e,n,r,i,a,o,s,l,c=Ut){if(c!==Ut&&c!==Ot)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ut&&(n=Mt),void 0===n&&c===Ot&&(n=Ct),super(null,r,i,a,o,s,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==o?o:ht,this.minFilter=void 0!==s?s:ht,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class xa extends mi{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,a=e/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=t/o,f=e/s,h=[],d=[],p=[],m=[];for(let t=0;t<c;t++){const e=t*f-a;for(let n=0;n<l;n++){const r=n*u-i;d.push(r,-e,0),p.push(0,0,1),m.push(n/o),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<o;e++){const n=e+l*t,r=e+l*(t+1),i=e+1+l*(t+1),a=e+1+l*t;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new si(d,3)),this.setAttribute("normal",new si(p,3)),this.setAttribute("uv",new si(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xa(t.width,t.height,t.widthSegments,t.heightSegments)}}class ba extends ti{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Zr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new mr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class wa extends ti{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zr(16777215),this.specular=new Zr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new mr,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Ma extends ti{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Sa extends ti{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ta extends ti{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Ea(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}class Aa{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let a;n:{r:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}a=e.length;break n}if(t>=i)break t;{const o=e[1];t<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}a=n,n=0}}for(;n<a;){const r=n+a>>>1;t<e[r]?a=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ca extends Aa{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,a=t+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=t,o=2*e-n;break;case 2402:i=r.length-2,o=e+r[i]-r[i+1];break;default:i=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:a=1,s=n+r[1]-r[0];break;default:a=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,g=-f*m+2*f*p-f*d,v=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*d+1,_=(-1-h)*m+(1.5+h)*p+.5*d,y=h*m-h*p;for(let t=0;t!==o;++t)i[t]=g*a[c+t]+v*a[l+t]+_*a[s+t]+y*a[u+t];return i}}class Ra extends Aa{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=(n-e)/(r-e),u=1-c;for(let t=0;t!==o;++t)i[t]=a[l+t]*u+a[s+t]*c;return i}}class Da extends Aa{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Pa{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ea(e,this.TimeBufferType),this.values=Ea(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Ea(t.times,Array),values:Ea(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Da(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Ra(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Ca(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case xe:e=this.InterpolantFactoryMethodDiscrete;break;case be:e=this.InterpolantFactoryMethodLinear;break;case we:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xe;case this.InterpolantFactoryMethodLinear:return be;case this.InterpolantFactoryMethodSmooth:return we}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const t=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,a),t=!1;break}a=r}if(void 0!==r&&(o=r,ArrayBuffer.isView(o)&&!(o instanceof DataView)))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}var o;return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===we,i=t.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=t[o];if(s!==t[o+1]&&(1!==o||s!==t[0]))if(r)i=!0;else{const t=o*n,r=t-n,a=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[r+o]||n!==e[a+o]){i=!0;break}}}if(i){if(o!==a){t[a]=t[o];const r=o*n,i=a*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++a}}if(i>0){t[a]=t[i];for(let t=i*n,r=a*n,o=0;o!==n;++o)e[r+o]=e[t+o];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Pa.prototype.TimeBufferType=Float32Array,Pa.prototype.ValueBufferType=Float32Array,Pa.prototype.DefaultInterpolation=be;class La extends Pa{constructor(t,e,n){super(t,e,n)}}La.prototype.ValueTypeName="bool",La.prototype.ValueBufferType=Array,La.prototype.DefaultInterpolation=xe,La.prototype.InterpolantFactoryMethodLinear=void 0,La.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Pa{}).prototype.ValueTypeName="color";(class extends Pa{}).prototype.ValueTypeName="number";class Na extends Aa{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(r-e);let l=t*o;for(let t=l+o;l!==t;l+=4)Cn.slerpFlat(i,0,a,l-o,a,l,s);return i}}class Ia extends Pa{InterpolantFactoryMethodLinear(t){return new Na(this.times,this.values,this.getValueSize(),t)}}Ia.prototype.ValueTypeName="quaternion",Ia.prototype.InterpolantFactoryMethodSmooth=void 0;class Ua extends Pa{constructor(t,e,n){super(t,e,n)}}Ua.prototype.ValueTypeName="string",Ua.prototype.ValueBufferType=Array,Ua.prototype.DefaultInterpolation=xe,Ua.prototype.InterpolantFactoryMethodLinear=void 0,Ua.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Pa{}).prototype.ValueTypeName="vector";const Oa={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Fa{constructor(t,e,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===a&&void 0!==r.onStart&&r.onStart(t,o,s),a=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const ka=new Fa;class Ba{constructor(t){this.manager=void 0!==t?t:ka,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Ba.DEFAULT_MATERIAL_NAME="__DEFAULT";const za={};class Ha extends Error{constructor(t,e){super(t),this.response=e}}class Va extends Ba{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=Oa.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==za[t])return void za[t].push({onLoad:e,onProgress:n,onError:r});za[t]=[],za[t].push({onLoad:e,onProgress:n,onError:r});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=za[t],r=e.body.getReader(),i=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;const l=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}),(e=>{t.error(e)}))}()}});return new Response(l)}throw new Ha(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,o)));case"json":return t.json();default:if(void 0===o)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(o),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{Oa.add(t,e);const n=za[t];delete za[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=za[t];if(void 0===n)throw this.manager.itemError(t),e;delete za[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ga extends Ba{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,a=Oa.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;const o=nn("img");function s(){c(),Oa.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}class Wa extends Ba{constructor(t){super(t)}load(t,e,n,r){const i=new wn,a=new Ga(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class ja extends Lr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Zr(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}const qa=new ar,Xa=new Rn,$a=new Rn;class Ya{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new ar,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zi,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Xa.setFromMatrixPosition(t.matrixWorld),e.position.copy(Xa),$a.setFromMatrixPosition(t.target.matrixWorld),e.lookAt($a),e.updateMatrixWorld(),qa.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qa),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qa)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const Ka=new ar,Za=new Rn,Qa=new Rn;class Ja extends Ya{constructor(){super(new Bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new Rn(1,0,0),new Rn(-1,0,0),new Rn(0,0,1),new Rn(0,0,-1),new Rn(0,1,0),new Rn(0,-1,0)],this._cubeUps=[new Rn(0,1,0),new Rn(0,1,0),new Rn(0,1,0),new Rn(0,1,0),new Rn(0,0,1),new Rn(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Za.setFromMatrixPosition(t.matrixWorld),n.position.copy(Za),Qa.copy(n.position),Qa.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Qa),n.updateMatrixWorld(),r.makeTranslation(-Za.x,-Za.y,-Za.z),Ka.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ka)}}class to extends ja{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Ja}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class eo extends Ui{constructor(t=-1,e=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,a=n+t,o=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,a=i+t*this.view.width,o-=e*this.view.offsetY,s=o-e*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class no extends Ya{constructor(){super(new eo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ro extends ja{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lr.DEFAULT_UP),this.updateMatrix(),this.target=new Lr,this.shadow=new no}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class io extends ja{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class ao{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class oo extends Bi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}const so="\\[\\]\\.:\\/",lo=new RegExp("["+so+"]","g"),co="[^"+so+"]",uo="[^"+so.replace("\\.","")+"]",fo=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",co)+/(WCOD+)?/.source.replace("WCOD",uo)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",co)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",co)+"$"),ho=["material","materials","bones","map"];class po{constructor(t,e,n){this.path=e,this.parsedPath=n||po.parseTrackName(e),this.node=po.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new po.Composite(t,e,n):new po(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(lo,"")}static parseTrackName(t){const e=fo.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==ho.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const a=n(i.children);if(a)return a}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=po.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const a=t[r];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?o=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}function mo(t,e,n,r){const i=function(t){switch(t){case _t:case yt:return{byteLength:1,components:1};case bt:case xt:case Tt:return{byteLength:2,components:1};case Et:case At:return{byteLength:2,components:4};case Mt:case wt:case St:return{byteLength:4,components:1};case Rt:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(r);switch(n){case Dt:case Nt:return t*e;case It:return t*e*2;case Ft:case kt:return t*e/i.components*i.byteLength;case Bt:case zt:return t*e*2/i.components*i.byteLength;case Pt:return t*e*3/i.components*i.byteLength;case Lt:case Ht:return t*e*4/i.components*i.byteLength;case Vt:case Gt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Wt:case jt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Xt:case Yt:return Math.max(t,16)*Math.max(e,8)/4;case qt:case $t:return Math.max(t,8)*Math.max(e,8)/2;case Kt:case Zt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Qt:case Jt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case te:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case ee:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case ne:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case re:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case ie:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case ae:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case oe:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case se:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case le:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case ce:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case ue:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case fe:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case he:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case de:case pe:case me:return Math.ceil(t/4)*Math.ceil(e/4)*16;case ge:case ve:return Math.ceil(t/4)*Math.ceil(e/4)*8;case _e:case ye:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}po.Composite=class{constructor(t,e,n){const r=n||po.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},po.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},po.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},po.prototype.GetterByBindingType=[po.prototype._getValue_direct,po.prototype._getValue_array,po.prototype._getValue_arrayElement,po.prototype._getValue_toArray],po.prototype.SetterByBindingTypeAndVersioning=[[po.prototype._setValue_direct,po.prototype._setValue_direct_setNeedsUpdate,po.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[po.prototype._setValue_array,po.prototype._setValue_array_setNeedsUpdate,po.prototype._setValue_array_setMatrixWorldNeedsUpdate],[po.prototype._setValue_arrayElement,po.prototype._setValue_arrayElement_setNeedsUpdate,po.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[po.prototype._setValue_fromArray,po.prototype._setValue_fromArray_setNeedsUpdate,po.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)}},l={};function c(t){var e=l[t];if(void 0!==e)return e.exports;var n=l[t]={id:t,loaded:!1,exports:{}};return s[t].call(n.exports,n,n.exports,c),n.loaded=!0,n.exports}c.m=s,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},c.a=(i,a,o)=>{var s;o&&((s=[]).d=-1);var l,c,u,f=new Set,h=i.exports,d=new Promise(((t,e)=>{u=e,c=t}));d[e]=h,d[t]=t=>(s&&t(s),f.forEach(t),d.catch((t=>{}))),i.exports=d,a((i=>{var a;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[t])return i;if(i.then){var a=[];a.d=0,i.then((t=>{o[e]=t,r(a)}),(t=>{o[n]=t,r(a)}));var o={};return o[t]=t=>t(a),o}}var s={};return s[t]=t=>{},s[e]=i,s})))(i);var o=()=>l.map((t=>{if(t[n])throw t[n];return t[e]})),c=new Promise((e=>{(a=()=>e(o)).r=0;var n=t=>t!==s&&!f.has(t)&&(f.add(t),t&&!t.d&&(a.r++,t.push(a)));l.map((e=>e[t](n)))}));return a.r?c:o()}),(t=>(t?u(d[n]=t):c(h),r(s)))),s&&s.d<0&&(s.d=0)},i=[],c.O=(t,e,n,r)=>{if(!e){var a=1/0;for(u=0;u<i.length;u++){for(var[e,n,r]=i[u],o=!0,s=0;s<e.length;s++)(!1&r||a>=r)&&Object.keys(c.O).every((t=>c.O[t](e[s])))?e.splice(s--,1):(o=!1,r<a&&(a=r));if(o){i.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=i.length;u>0&&i[u-1][2]>r;u--)i[u]=i[u-1];i[u]=[e,n,r]},c.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return c.d(e,{a:e}),e},c.d=(t,e)=>{for(var n in e)c.o(e,n)&&!c.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},c.f={},c.e=t=>Promise.all(Object.keys(c.f).reduce(((e,n)=>(c.f[n](t,e),e)),[])),c.u=t=>{},c.miniCssF=t=>{},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),c.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a={},o="dataviz:",c.l=(t,e,n,r)=>{if(a[t])a[t].push(e);else{var i,s;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var f=l[u];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==o+n){i=f;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.setAttribute("data-webpack",o+n),i.src=t),a[t]=[e];var h=(e,n)=>{i.onerror=i.onload=null,clearTimeout(d);var r=a[t];if(delete a[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((t=>t(n))),e)return e(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),s&&document.head.appendChild(i)}},c.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),c.v=(t,e,n,r)=>{var i=fetch(c.p+""+n+".module.wasm"),a=()=>i.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,r))).then((e=>Object.assign(t,e.instance.exports)));return i.then((e=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(e,r).then((e=>Object.assign(t,e.instance.exports)),(t=>{if("application/wasm"!==e.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t),a();throw t})):a()))},(()=>{var t;c.g.importScripts&&(t=c.g.location+"");var e=c.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=t})(),(()=>{var t={65:0};c.f.j=(e,n)=>{var r=c.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var a=c.p+c.u(e),o=new Error;c.l(a,(n=>{if(c.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,r[1](o)}}),"chunk-"+e,e)}},c.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[a,o,s]=n,l=0;if(a.some((e=>0!==t[e]))){for(r in o)c.o(o,r)&&(c.m[r]=o[r]);if(s)var u=s(c)}for(e&&e(n);l<a.length;l++)i=a[l],c.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return c.O(u)},n=self.webpackChunkdataviz=self.webpackChunkdataviz||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),c(706);var u=c(289);u=c.O(u)})();