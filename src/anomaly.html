<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Title</title>


<style>

body {
	/*background: url("/images/unsplash.jpg") no-repeat bottom;*/
	background-size: cover;
	background-attachment: fixed;
}

.containerfluid {
	height: 100%;
	/*padding-bottom: 150px;*/
	/*background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0));*/
}

.message {
	/*color: white;*/
	position: relative;
	padding-top: 15%;
}
</style>

</head>
<body>
	<div class="containerfluid">
			<div class="row">
					<div class="col-xs-10 col-xs-offset-1">
							<div class="message">
								<h1>Type a message here</h1>

								<table id="myTable"></table>

							</div>
					</div>
			</div>
	</div>
	
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<script src="/js/vendor.min.js"></script>
	<script src="/js/scripts.min.js"></script>
	<script src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>


<script>
var stuff = []



function Variant ( data ) {
    try {
//		this.lol = data.;
//        {
//            variant: v.variant,
//                hgvsGVariant: v.hgvsGVariant,
//            chr: v.vcf.variantCall.chromosome
//        }

		this.variant = data.variant;
		this.hgvsGVariant = data.hgvsGVariant;
		this.chr = data.vcf.variantCall.chromosome;
		this.gene = data.sourceResults.Mutalyzer.gene;
		this.hgvsC = data.sourceResults.Mutalyzer.hgvsC;
		this.hgvsG = data.sourceResults.Mutalyzer.hgvsG;
		this.hgvsP = data.sourceResults.Mutalyzer.hgvsP;
		this.refSeq = data.sourceResults.Mutalyzer.refSeq;
		this.assembly = data.sourceResults.Mutalyzer.assembly;

		this.varDepth = data.domainModel.derived.varDepth;
		this.varFreq = data.domainModel.derived.varFreq;
		this.varcaller = data.domainModel.derived.varcaller;


	} catch ( e ) {
        console.error(e);
        console.log(data);
	}
}

let variants = [];
const columnNames = ['variant', 'hgvsGVariant', 'chr', 'gene', 'hgvsC', 'hgvsG', 'hgvsP', 'refSeq', 'assembly', 'varDepth', 'varFreq', 'varcaller'];
const columns = columnNames.map( function(d){return { name: d, title: d}});


$.ajax("/anomaly.json", {
	success: function(d){
		console.log(d);
		stuff = d;

		Object.keys(d.okResults).forEach(function(hgvsg){
			try {
				const v = new Variant(d.okResults[hgvsg]);
				variants.push(v);
			} catch (e) {
				console.error(e);
			}
		});

		console.log(variants);

		$("#myTable").DataTable({
			data: variants,
			columns: [
				{ name: 'variant' }
			]
		})

	}
});

</script>







</body>
</html>












